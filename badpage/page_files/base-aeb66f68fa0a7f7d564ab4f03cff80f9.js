/*
 New BSD License <http://creativecommons.org/licenses/BSD/>
 Public Domain
 @author Benjamin Arthur Lupton <contact@balupton.com>
 @author James Padolsey <https://gist.github.com/527683>
 Public Domain
 @author Benjamin Arthur Lupton <contact@balupton.com>
 New BSD License <http://creativecommons.org/licenses/BSD/>
 New BSD License <http://creativecommons.org/licenses/BSD/>
*/
instrument_function(function(a){this.root=window;this.packages=a;this.requires=function(){}})(this);
instrument_function(function(a){(function(){var d={},c;c=function(a){a=a.toLowerCase();a=/(chrome)[ \/]([\w.]+)/.exec(a)||/(webkit)[ \/]([\w.]+)/.exec(a)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(a)||/(msie) ([\w.]+)/.exec(a)||a.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(a)||[];return{browser:a[1]||"",version:a[2]||"0"}}(navigator.userAgent);if(c.browser)d[c.browser]=!0,d.version=c.version;if(d.chrome)d.webkit=!0;else if(d.webkit)d.safari=!0;a.browser=d;if(typeof jQuery==="function")jQuery.browser=
d})()})(this);
(function(a,d){a.rails!==d&&a.error("jquery-ujs has already been loaded!");var c,b=a(document);a.rails=c={linkClickSelector:"a[data-confirm], a[data-method], a[data-remote], a[data-disable-with]",buttonClickSelector:"button[data-remote]",inputChangeSelector:"select[data-remote], input[data-remote], textarea[data-remote]",formSubmitSelector:"form",formInputClickSelector:"form input[type=submit], form input[type=image], form button[type=submit], form button:not([type])",disableSelector:"input[data-disable-with], button[data-disable-with], textarea[data-disable-with]",enableSelector:"input[data-disable-with]:disabled, button[data-disable-with]:disabled, textarea[data-disable-with]:disabled",
requiredInputSelector:"input[name][required]:not([disabled]),textarea[name][required]:not([disabled])",fileInputSelector:"input[type=file]",linkDisableSelector:"a[data-disable-with]",CSRFProtection:function(e){var b=a('meta[name="csrf-token"]').attr("content");b&&e.setRequestHeader("X-CSRF-Token",b)},fire:function(e,b,c){b=a.Event(b);e.trigger(b,c);return b.result!==!1},confirm:function(a){return confirm(a)},ajax:function(e){return a.ajax(e)},href:function(a){return a.attr("href")},handleRemote:function(e){var b,
g,j,k,l,o;if(c.fire(e,"ajax:before")){g=e.data("cross-domain");k=g===d?null:g;l=e.data("with-credentials")||null;o=e.data("type")||a.ajaxSettings&&a.ajaxSettings.dataType;if(e.is("form")){b=e.attr("method");g=e.attr("action");j=e.serializeArray();var p=e.data("ujs:submit-button");p&&(j.push(p),e.data("ujs:submit-button",null))}else e.is(c.inputChangeSelector)?(b=e.data("method"),g=e.data("url"),j=e.serialize(),e.data("params")&&(j=j+"&"+e.data("params"))):e.is(c.buttonClickSelector)?(b=e.data("method")||
"get",g=e.data("url"),j=e.serialize(),e.data("params")&&(j=j+"&"+e.data("params"))):(b=e.data("method"),g=c.href(e),j=e.data("params")||null);b={type:b||"GET",data:j,dataType:o,beforeSend:function(a,b){b.dataType===d&&a.setRequestHeader("accept","*/*;q=0.5, "+b.accepts.script);return c.fire(e,"ajax:beforeSend",[a,b])},success:function(a,b,c){e.trigger("ajax:success",[a,b,c])},complete:function(a,b){e.trigger("ajax:complete",[a,b])},error:function(a,b,c){e.trigger("ajax:error",[a,b,c])},crossDomain:k};
if(l)b.xhrFields={withCredentials:l};if(g)b.url=g;g=c.ajax(b);e.trigger("ajax:send",g);return g}else return!1},handleMethod:function(e){var b=c.href(e),g=e.data("method");e=e.attr("target");var j=a("meta[name=csrf-token]").attr("content"),k=a("meta[name=csrf-param]").attr("content");b=a('<form method="post" action="'+b+'"></form>');g='<input name="_method" value="'+g+'" type="hidden" />';k!==d&&j!==d&&(g+='<input name="'+k+'" value="'+j+'" type="hidden" />');e&&b.attr("target",e);b.hide().append(g).appendTo("body");
b.submit()},disableFormElements:function(e){e.find(c.disableSelector).each(function(){var e=a(this),b=e.is("button")?"html":"val";e.data("ujs:enable-with",e[b]());e[b](e.data("disable-with"));e.prop("disabled",!0)})},enableFormElements:function(e){e.find(c.enableSelector).each(function(){var e=a(this),b=e.is("button")?"html":"val";if(e.data("ujs:enable-with"))e[b](e.data("ujs:enable-with"));e.prop("disabled",!1)})},allowAction:function(a){var b=a.data("confirm"),d=!1,j;if(!b)return!0;c.fire(a,"confirm")&&
(d=c.confirm(b),j=c.fire(a,"confirm:complete",[d]));return d&&j},blankInputs:function(e,b,c){var d=a(),k,l,o=e.find(b||"input,textarea");o.each(function(){k=a(this);l=k.is("input[type=checkbox],input[type=radio]")?k.is(":checked"):k.val();if(!l===!c){if(k.is("input[type=radio]")&&o.filter('input[type=radio]:checked[name="'+k.attr("name")+'"]').length)return!0;d=d.add(k)}});return d.length?d:!1},nonBlankInputs:function(a,b){return c.blankInputs(a,b,!0)},stopEverything:function(e){a(e.target).trigger("ujs:everythingStopped");
e.stopImmediatePropagation();return!1},disableElement:function(a){a.data("ujs:enable-with",a.html());a.html(a.data("disable-with"));a.bind("click.railsDisable",function(a){return c.stopEverything(a)})},enableElement:function(a){a.data("ujs:enable-with")!==d&&(a.html(a.data("ujs:enable-with")),a.removeData("ujs:enable-with"));a.unbind("click.railsDisable")}};c.fire(b,"rails:attachBindings")&&(a.ajaxPrefilter(function(a,b,d){a.crossDomain||c.CSRFProtection(d)}),b.delegate(c.linkDisableSelector,"ajax:complete",
function(){c.enableElement(a(this))}),b.delegate(c.linkClickSelector,"click.rails",function(e){var b=a(this),g=b.data("method"),j=b.data("params");if(!c.allowAction(b))return c.stopEverything(e);b.is(c.linkDisableSelector)&&c.disableElement(b);if(b.data("remote")!==d){if((e.metaKey||e.ctrlKey)&&(!g||g==="GET")&&!j)return!0;e=c.handleRemote(b);e===!1?c.enableElement(b):e.error(function(){c.enableElement(b)});return!1}else if(b.data("method"))return c.handleMethod(b),!1}),b.delegate(c.buttonClickSelector,
"click.rails",function(b){var d=a(this);if(!c.allowAction(d))return c.stopEverything(b);c.handleRemote(d);return!1}),b.delegate(c.inputChangeSelector,"change.rails",function(b){var d=a(this);if(!c.allowAction(d))return c.stopEverything(b);c.handleRemote(d);return!1}),b.delegate(c.formSubmitSelector,"submit.rails",function(b){var f=a(this),g=f.data("remote")!==d,j=c.blankInputs(f,c.requiredInputSelector),k=c.nonBlankInputs(f,c.fileInputSelector);if(!c.allowAction(f))return c.stopEverything(b);if(j&&
f.attr("novalidate")==d&&c.fire(f,"ajax:aborted:required",[j]))return c.stopEverything(b);if(g){if(k)return setTimeout(function(){c.disableFormElements(f)},13),(b=c.fire(f,"ajax:aborted:file",[k]))||setTimeout(function(){c.enableFormElements(f)},13),b;c.handleRemote(f);return!1}else setTimeout(function(){c.disableFormElements(f)},13)}),b.delegate(c.formInputClickSelector,"click.rails",function(b){var d=a(this);if(!c.allowAction(d))return c.stopEverything(b);b=(b=d.attr("name"))?{name:b,value:d.val()}:
null;d.closest("form").data("ujs:submit-button",b)}),b.delegate(c.formSubmitSelector,"ajax:beforeSend.rails",function(b){this==b.target&&c.disableFormElements(a(this))}),b.delegate(c.formSubmitSelector,"ajax:complete.rails",function(b){this==b.target&&c.enableFormElements(a(this))}),a(function(){var b=a("meta[name=csrf-token]").attr("content"),c=a("meta[name=csrf-param]").attr("content");a('form input[name="'+c+'"]').val(b)}))})(jQuery);
(function(){var a=this,d=a._,c={},b=Array.prototype,e=Object.prototype,f=b.push,g=b.slice,j=b.concat,k=e.toString,l=e.hasOwnProperty,o=b.forEach,p=b.map,h=b.reduce,m=b.reduceRight,w=b.filter,t=b.every,x=b.some,n=b.indexOf,r=b.lastIndexOf;e=Array.isArray;var u=Object.keys,z=Function.prototype.bind,q=function(a){if(a instanceof q)return a;if(!(this instanceof q))return new q(a);this._wrapped=a};if(typeof exports!=="undefined"){if(typeof module!=="undefined"&&module.exports)exports=module.exports=q;
exports._=q}else a._=q;q.VERSION="1.5.1";var s=q.each=q.forEach=function(a,b,e){if(a!=null)if(o&&a.forEach===o)a.forEach(b,e);else if(a.length===+a.length)for(var d=0,f=a.length;d<f;d++){if(b.call(e,a[d],d,a)===c)break}else for(d in a)if(q.has(a,d)&&b.call(e,a[d],d,a)===c)break};q.map=q.collect=function(a,b,e){var c=[];if(a==null)return c;if(p&&a.map===p)return a.map(b,e);s(a,function(a,d,f){c.push(b.call(e,a,d,f))});return c};q.reduce=q.foldl=q.inject=function(a,b,e,c){var d=arguments.length>2;a==
null&&(a=[]);if(h&&a.reduce===h)return c&&(b=q.bind(b,c)),d?a.reduce(b,e):a.reduce(b);s(a,function(a,f,g){d?e=b.call(c,e,a,f,g):(e=a,d=!0)});if(!d)throw new TypeError("Reduce of empty array with no initial value");return e};q.reduceRight=q.foldr=function(a,b,e,c){var d=arguments.length>2;a==null&&(a=[]);if(m&&a.reduceRight===m)return c&&(b=q.bind(b,c)),d?a.reduceRight(b,e):a.reduceRight(b);var f=a.length;if(f!==+f){var g=q.keys(a);f=g.length}s(a,function(n,s,k){s=g?g[--f]:--f;d?e=b.call(c,e,a[s],
s,k):(e=a[s],d=!0)});if(!d)throw new TypeError("Reduce of empty array with no initial value");return e};q.find=q.detect=function(a,b,e){var c;B(a,function(a,d,f){if(b.call(e,a,d,f))return c=a,!0});return c};q.filter=q.select=function(a,b,e){var c=[];if(a==null)return c;if(w&&a.filter===w)return a.filter(b,e);s(a,function(a,d,f){b.call(e,a,d,f)&&c.push(a)});return c};q.reject=function(a,b,e){return q.filter(a,function(a,c,d){return!b.call(e,a,c,d)},e)};q.every=q.all=function(a,b,e){b||(b=q.identity);
var d=!0;if(a==null)return d;if(t&&a.every===t)return a.every(b,e);s(a,function(a,f,g){if(!(d=d&&b.call(e,a,f,g)))return c});return!!d};var B=q.some=q.any=function(a,b,e){b||(b=q.identity);var d=!1;if(a==null)return d;if(x&&a.some===x)return a.some(b,e);s(a,function(a,f,g){if(d||(d=b.call(e,a,f,g)))return c});return!!d};q.contains=q.include=function(a,b){if(a==null)return!1;if(n&&a.indexOf===n)return a.indexOf(b)!=-1;return B(a,function(a){return a===b})};q.invoke=function(a,b){var e=g.call(arguments,
2),c=q.isFunction(b);return q.map(a,function(a){return(c?b:a[b]).apply(a,e)})};q.pluck=function(a,b){return q.map(a,function(a){return a[b]})};q.where=function(a,b,e){if(q.isEmpty(b))return e?void 0:[];return q[e?"find":"filter"](a,function(a){for(var e in b)if(b[e]!==a[e])return!1;return!0})};q.findWhere=function(a,b){return q.where(a,b,!0)};q.max=function(a,b,e){if(!b&&q.isArray(a)&&a[0]===+a[0]&&a.length<65535)return Math.max.apply(Math,a);if(!b&&q.isEmpty(a))return-Infinity;var c={computed:-Infinity,
value:-Infinity};s(a,function(a,d,f){d=b?b.call(e,a,d,f):a;d>c.computed&&(c={value:a,computed:d})});return c.value};q.min=function(a,b,e){if(!b&&q.isArray(a)&&a[0]===+a[0]&&a.length<65535)return Math.min.apply(Math,a);if(!b&&q.isEmpty(a))return Infinity;var c={computed:Infinity,value:Infinity};s(a,function(a,d,f){d=b?b.call(e,a,d,f):a;d<c.computed&&(c={value:a,computed:d})});return c.value};q.shuffle=function(a){var b,e=0,c=[];s(a,function(a){b=q.random(e++);c[e-1]=c[b];c[b]=a});return c};var F=function(a){return q.isFunction(a)?
a:function(b){return b[a]}};q.sortBy=function(a,b,e){var c=F(b);return q.pluck(q.map(a,function(a,b,d){return{value:a,index:b,criteria:c.call(e,a,b,d)}}).sort(function(a,b){var e=a.criteria,c=b.criteria;if(e!==c){if(e>c||e===void 0)return 1;if(e<c||c===void 0)return-1}return a.index<b.index?-1:1}),"value")};var T=function(a,b,e,c){var d={},f=F(b==null?q.identity:b);s(a,function(b,g){var n=f.call(e,b,g,a);c(d,n,b)});return d};q.groupBy=function(a,b,e){return T(a,b,e,function(a,b,e){(q.has(a,b)?a[b]:
a[b]=[]).push(e)})};q.countBy=function(a,b,e){return T(a,b,e,function(a,b){q.has(a,b)||(a[b]=0);a[b]++})};q.sortedIndex=function(a,b,e,c){e=e==null?q.identity:F(e);b=e.call(c,b);for(var d=0,f=a.length;d<f;){var g=d+f>>>1;e.call(c,a[g])<b?d=g+1:f=g}return d};q.toArray=function(a){if(!a)return[];if(q.isArray(a))return g.call(a);if(a.length===+a.length)return q.map(a,q.identity);return q.values(a)};q.size=function(a){if(a==null)return 0;return a.length===+a.length?a.length:q.keys(a).length};q.first=
q.head=q.take=function(a,b,e){if(a!=null)return b!=null&&!e?g.call(a,0,b):a[0]};q.initial=function(a,b,e){return g.call(a,0,a.length-(b==null||e?1:b))};q.last=function(a,b,e){if(a!=null)return b!=null&&!e?g.call(a,Math.max(a.length-b,0)):a[a.length-1]};q.rest=q.tail=q.drop=function(a,b,e){return g.call(a,b==null||e?1:b)};q.compact=function(a){return q.filter(a,q.identity)};var v=function(a,b,e){if(b&&q.every(a,q.isArray))return j.apply(e,a);s(a,function(a){q.isArray(a)||q.isArguments(a)?b?f.apply(e,
a):v(a,b,e):e.push(a)});return e};q.flatten=function(a,b){return v(a,b,[])};q.without=function(a){return q.difference(a,g.call(arguments,1))};q.uniq=q.unique=function(a,b,e,c){q.isFunction(b)&&(c=e,e=b,b=!1);e=e?q.map(a,e,c):a;var d=[],f=[];s(e,function(e,c){if(b?!c||f[f.length-1]!==e:!q.contains(f,e))f.push(e),d.push(a[c])});return d};q.union=function(){return q.uniq(q.flatten(arguments,!0))};q.intersection=function(a){var b=g.call(arguments,1);return q.filter(q.uniq(a),function(a){return q.every(b,
function(b){return q.indexOf(b,a)>=0})})};q.difference=function(a){var e=j.apply(b,g.call(arguments,1));return q.filter(a,function(a){return!q.contains(e,a)})};q.zip=function(){for(var a=q.max(q.pluck(arguments,"length").concat(0)),b=Array(a),e=0;e<a;e++)b[e]=q.pluck(arguments,""+e);return b};q.object=function(a,b){if(a==null)return{};for(var e={},c=0,d=a.length;c<d;c++)b?e[a[c]]=b[c]:e[a[c][0]]=a[c][1];return e};q.indexOf=function(a,b,e){if(a==null)return-1;var c=0,d=a.length;if(e)if(typeof e=="number")c=
e<0?Math.max(0,d+e):e;else return c=q.sortedIndex(a,b),a[c]===b?c:-1;if(n&&a.indexOf===n)return a.indexOf(b,e);for(;c<d;c++)if(a[c]===b)return c;return-1};q.lastIndexOf=function(a,b,e){if(a==null)return-1;var c=e!=null;if(r&&a.lastIndexOf===r)return c?a.lastIndexOf(b,e):a.lastIndexOf(b);for(e=c?e:a.length;e--;)if(a[e]===b)return e;return-1};q.range=function(a,b,e){arguments.length<=1&&(b=a||0,a=0);e=arguments[2]||1;for(var c=Math.max(Math.ceil((b-a)/e),0),d=0,f=Array(c);d<c;)f[d++]=a,a+=e;return f};
var G=function(){};q.bind=function(a,b){var e,c;if(z&&a.bind===z)return z.apply(a,g.call(arguments,1));if(!q.isFunction(a))throw new TypeError;e=g.call(arguments,2);return c=function(){if(!(this instanceof c))return a.apply(b,e.concat(g.call(arguments)));G.prototype=a.prototype;var d=new G;G.prototype=null;var f=a.apply(d,e.concat(g.call(arguments)));if(Object(f)===f)return f;return d}};q.partial=function(a){var b=g.call(arguments,1);return function(){return a.apply(this,b.concat(g.call(arguments)))}};
q.bindAll=function(a){var b=g.call(arguments,1);if(b.length===0)throw Error("bindAll must be passed function names");s(b,function(b){a[b]=q.bind(a[b],a)});return a};q.memoize=function(a,b){var e={};b||(b=q.identity);return function(){var c=b.apply(this,arguments);return q.has(e,c)?e[c]:e[c]=a.apply(this,arguments)}};q.delay=function(a,b){var e=g.call(arguments,2);return setTimeout(function(){return a.apply(null,e)},b)};q.defer=function(a){return q.delay.apply(q,[a,1].concat(g.call(arguments,1)))};
q.throttle=function(a,b,e){var c,d,f,g=null,n=0;e||(e={});var s=function(){n=e.leading===!1?0:new Date;g=null;f=a.apply(c,d)};return function(){var k=new Date;!n&&e.leading===!1&&(n=k);var h=b-(k-n);c=this;d=arguments;h<=0?(clearTimeout(g),g=null,n=k,f=a.apply(c,d)):!g&&e.trailing!==!1&&(g=setTimeout(s,h));return f}};q.debounce=function(a,b,e){var c,d=null;return function(){var f=this,g=arguments,n=e&&!d;clearTimeout(d);d=setTimeout(function(){d=null;e||(c=a.apply(f,g))},b);n&&(c=a.apply(f,g));return c}};
q.once=function(a){var b=!1,e;return function(){if(b)return e;b=!0;e=a.apply(this,arguments);a=null;return e}};q.wrap=function(a,b){return function(){var e=[a];f.apply(e,arguments);return b.apply(this,e)}};q.compose=function(){var a=arguments;return function(){for(var b=arguments,e=a.length-1;e>=0;e--)b=[a[e].apply(this,b)];return b[0]}};q.after=function(a,b){return function(){if(--a<1)return b.apply(this,arguments)}};q.keys=u||function(a){if(a!==Object(a))throw new TypeError("Invalid object");var b=
[],e;for(e in a)q.has(a,e)&&b.push(e);return b};q.values=function(a){var b=[],e;for(e in a)q.has(a,e)&&b.push(a[e]);return b};q.pairs=function(a){var b=[],e;for(e in a)q.has(a,e)&&b.push([e,a[e]]);return b};q.invert=function(a){var b={},e;for(e in a)q.has(a,e)&&(b[a[e]]=e);return b};q.functions=q.methods=function(a){var b=[],e;for(e in a)q.isFunction(a[e])&&b.push(e);return b.sort()};q.extend=function(a){s(g.call(arguments,1),function(b){if(b)for(var e in b)a[e]=b[e]});return a};q.pick=function(a){var e=
{},c=j.apply(b,g.call(arguments,1));s(c,function(b){b in a&&(e[b]=a[b])});return e};q.omit=function(a){var e={},c=j.apply(b,g.call(arguments,1)),d;for(d in a)q.contains(c,d)||(e[d]=a[d]);return e};q.defaults=function(a){s(g.call(arguments,1),function(b){if(b)for(var e in b)a[e]===void 0&&(a[e]=b[e])});return a};q.clone=function(a){if(!q.isObject(a))return a;return q.isArray(a)?a.slice():q.extend({},a)};q.tap=function(a,b){b(a);return a};var E=function(a,b,e,c){if(a===b)return a!==0||1/a==1/b;if(a==
null||b==null)return a===b;if(a instanceof q)a=a._wrapped;if(b instanceof q)b=b._wrapped;var d=k.call(a);if(d!=k.call(b))return!1;switch(d){case "[object String]":return a==String(b);case "[object Number]":return a!=+a?b!=+b:a==0?1/a==1/b:a==+b;case "[object Date]":case "[object Boolean]":return+a==+b;case "[object RegExp]":return a.source==b.source&&a.global==b.global&&a.multiline==b.multiline&&a.ignoreCase==b.ignoreCase}if(typeof a!="object"||typeof b!="object")return!1;for(var f=e.length;f--;)if(e[f]==
a)return c[f]==b;f=a.constructor;var g=b.constructor;if(f!==g&&(!q.isFunction(f)||!(f instanceof f&&q.isFunction(g)&&g instanceof g)))return!1;e.push(a);c.push(b);f=0;g=!0;if(d=="[object Array]"){if(f=a.length,g=f==b.length)for(;f--;)if(!(g=E(a[f],b[f],e,c)))break}else{for(var n in a)if(q.has(a,n)&&(f++,!(g=q.has(b,n)&&E(a[n],b[n],e,c))))break;if(g){for(n in b)if(q.has(b,n)&&!f--)break;g=!f}}e.pop();c.pop();return g};q.isEqual=function(a,b){return E(a,b,[],[])};q.isEmpty=function(a){if(a==null)return!0;
if(q.isArray(a)||q.isString(a))return a.length===0;for(var b in a)if(q.has(a,b))return!1;return!0};q.isElement=function(a){return!!(a&&a.nodeType===1)};q.isArray=e||function(a){return k.call(a)=="[object Array]"};q.isObject=function(a){return a===Object(a)};s(["Arguments","Function","String","Number","Date","RegExp"],function(a){q["is"+a]=function(b){return k.call(b)=="[object "+a+"]"}});if(!q.isArguments(arguments))q.isArguments=function(a){return!(!a||!q.has(a,"callee"))};if(typeof/./!=="function")q.isFunction=
function(a){return typeof a==="function"};q.isFinite=function(a){return isFinite(a)&&!isNaN(parseFloat(a))};q.isNaN=function(a){return q.isNumber(a)&&a!=+a};q.isBoolean=function(a){return a===!0||a===!1||k.call(a)=="[object Boolean]"};q.isNull=function(a){return a===null};q.isUndefined=function(a){return a===void 0};q.has=function(a,b){return l.call(a,b)};q.noConflict=function(){a._=d;return this};q.identity=function(a){return a};q.times=function(a,b,e){for(var c=Array(Math.max(0,a)),d=0;d<a;d++)c[d]=
b.call(e,d);return c};q.random=function(a,b){b==null&&(b=a,a=0);return a+Math.floor(Math.random()*(b-a+1))};var I={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};I.unescape=q.invert(I.escape);var K={escape:RegExp("["+q.keys(I.escape).join("")+"]","g"),unescape:RegExp("("+q.keys(I.unescape).join("|")+")","g")};q.each(["escape","unescape"],function(a){q[a]=function(b){if(b==null)return"";return(""+b).replace(K[a],function(b){return I[a][b]})}});q.result=function(a,
b){if(a!=null){var e=a[b];return q.isFunction(e)?e.call(a):e}};q.mixin=function(a){s(q.functions(a),function(b){var e=q[b]=a[b];q.prototype[b]=function(){var a=[this._wrapped];f.apply(a,arguments);a=e.apply(q,a);return this._chain?q(a).chain():a}})};var S=0;q.uniqueId=function(a){var b=++S+"";return a?a+b:b};q.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var R=/(.)^/,L={"'":"'","\\":"\\","\r":"r","\n":"n","\t":"t","\u2028":"u2028","\u2029":"u2029"},
J=/\\|'|\r|\n|\t|\u2028|\u2029/g;q.template=function(a,b,e){var c;e=q.defaults({},e,q.templateSettings);var d=RegExp([(e.escape||R).source,(e.interpolate||R).source,(e.evaluate||R).source].join("|")+"|$","g"),f=0,g="__p+='";a.replace(d,function(b,e,c,d,n){g+=a.slice(f,n).replace(J,function(a){return"\\"+L[a]});e&&(g+="'+\n((__t=("+e+"))==null?'':_.escape(__t))+\n'");c&&(g+="'+\n((__t=("+c+"))==null?'':__t)+\n'");d&&(g+="';\n"+d+"\n__p+='");f=n+b.length;return b});g+="';\n";e.variable||(g="with(obj||{}){\n"+
g+"}\n");g="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+g+"return __p;\n";try{c=new Function(e.variable||"obj","_",g)}catch(n){throw n.source=g,n;}if(b)return c(b,q);b=function(a){return c.call(this,a,q)};b.source="function("+(e.variable||"obj")+"){\n"+g+"}";return b};q.chain=function(a){return q(a).chain()};q.mixin(q);s(["pop","push","reverse","shift","sort","splice","unshift"],function(a){var e=b[a];q.prototype[a]=function(){var b=this._wrapped;e.apply(b,
arguments);(a=="shift"||a=="splice")&&b.length===0&&delete b[0];return this._chain?q(b).chain():b}});s(["concat","join","slice"],function(a){var e=b[a];q.prototype[a]=function(){var a=e.apply(this._wrapped,arguments);return this._chain?q(a).chain():a}});q.extend(q.prototype,{chain:function(){this._chain=!0;return this},value:function(){return this._wrapped}})}).call(this);
(function(a,d){typeof exports==="object"&&exports?module.exports=d:typeof define==="function"&&define.amd?define(d):a.Mustache=d})(this,function(){function a(a){return a.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function d(a){this.tail=this.string=a;this.pos=0}function c(a,b){this.view=a;this.parent=b;this.clearCache()}function b(){this.clearCache()}function e(a){function b(a,d,f){if(!c[a]){var g=e(d);c[a]=function(a,b){return g(a,b,f)}}return c[a]}var c={};return function(e,c,d){for(var f="",
g,k,h=0,j=a.length;h<j;++h)switch(g=a[h],g[0]){case "#":k=d.slice(g[3],g[5]);f+=e._section(g[1],c,k,b(h,g[4],d));break;case "^":f+=e._inverted(g[1],c,b(h,g[4],d));break;case ">":f+=e._partial(g[1],c);break;case "&":f+=e._name(g[1],c);break;case "name":f+=e._escaped(g[1],c);break;case "text":f+=g[1]}return f}}function f(b){return[RegExp(a(b[0])+"\\s*"),RegExp("\\s*"+a(b[1]))]}var g={};g.name="mustache.js";g.version="0.7.2";g.tags=["{{","}}"];g.Scanner=d;g.Context=c;g.Writer=b;var j=/\s*/,k=/\s+/,l=
/\S/,o=/\s*=/,p=/\s*\}/,h=/#|\^|\/|>|\{|&|=|!/,m=Array.isArray||function(a){return Object.prototype.toString.call(a)==="[object Array]"},w={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};g.escape=function(a){return String(a).replace(/[&<>"'\/]/g,function(a){return w[a]})};d.prototype.eos=function(){return this.tail===""};d.prototype.scan=function(a){if((a=this.tail.match(a))&&a.index===0)return this.tail=this.tail.substring(a[0].length),this.pos+=a[0].length,a[0];return""};
d.prototype.scanUntil=function(a){var b=this.tail.search(a);switch(b){case -1:a=this.tail;this.pos+=this.tail.length;this.tail="";break;case 0:a="";break;default:a=this.tail.substring(0,b),this.tail=this.tail.substring(b),this.pos+=b}return a};c.make=function(a){return a instanceof c?a:new c(a)};c.prototype.clearCache=function(){this._cache={}};c.prototype.push=function(a){return new c(a,this)};c.prototype.lookup=function(a){var b=this._cache[a];if(!b){if(a===".")b=this.view;else for(var e=this;e;){if(a.indexOf(".")>
0){var c=a.split("."),d=0;for(b=e.view;b&&d<c.length;)b=b[c[d++]]}else b=e.view[a];if(b!=null)break;e=e.parent}this._cache[a]=b}typeof b==="function"&&(b=b.call(this.view));return b};b.prototype.clearCache=function(){this._cache={};this._partialCache={}};b.prototype.compile=function(a,b){var e=this._cache[a];e||(e=g.parse(a,b),e=this._cache[a]=this.compileTokens(e,a));return e};b.prototype.compilePartial=function(a,b,e){b=this.compile(b,e);return this._partialCache[a]=b};b.prototype.compileTokens=
function(a,b){var d=e(a),f=this;return function(a,e){if(e)if(typeof e==="function")f._loadPartial=e;else for(var g in e)f.compilePartial(g,e[g]);return d(f,c.make(a),b)}};b.prototype.render=function(a,b,e){return this.compile(a)(b,e)};b.prototype._section=function(a,b,e,c){a=b.lookup(a);switch(typeof a){case "object":if(m(a)){e="";for(var d=0,f=a.length;d<f;++d)e+=c(this,b.push(a[d]));return e}return a?c(this,b.push(a)):"";case "function":var g=this;c=a.call(b.view,e,function(a){return g.render(a,
b)});return c!=null?c:"";default:if(a)return c(this,b)}return""};b.prototype._inverted=function(a,b,e){a=b.lookup(a);if(!a||m(a)&&a.length===0)return e(this,b);return""};b.prototype._partial=function(a,b){!(a in this._partialCache)&&this._loadPartial&&this.compilePartial(a,this._loadPartial(a));var e=this._partialCache[a];return e?e(b):""};b.prototype._name=function(a,b){var e=b.lookup(a);typeof e==="function"&&(e=e.call(b.view));return e==null?"":String(e)};b.prototype._escaped=function(a,b){return g.escape(this._name(a,
b))};g.parse=function(b,e){b=b||"";e=e||g.tags;typeof e==="string"&&(e=e.split(k));if(e.length!==2)throw Error("Invalid tags: "+e.join(", "));for(var c=f(e),u=new d(b),t=[],q=[],s=[],B=!1,F=!1,m,v,G;!u.eos();){m=u.pos;if(G=u.scanUntil(c[0]))for(var E=0,w=G.length;E<w;++E)if(v=G.charAt(E),!RegExp.prototype.test.call(l,v)?s.push(q.length):F=!0,q.push(["text",v,m,m+1]),m+=1,v==="\n"){if(B&&!F)for(;s.length;)q.splice(s.pop(),1);else s=[];F=B=!1}m=u.pos;if(!u.scan(c[0]))break;B=!0;v=u.scan(h)||"name";
u.scan(j);v==="="?(G=u.scanUntil(o),u.scan(o),u.scanUntil(c[1])):v==="{"?(G=RegExp("\\s*"+a("}"+e[1])),G=u.scanUntil(G),u.scan(p),u.scanUntil(c[1]),v="&"):G=u.scanUntil(c[1]);if(!u.scan(c[1]))throw Error("Unclosed tag at "+u.pos);if(v==="/"){if(t.length===0)throw Error('Unopened section "'+G+'" at '+m);E=t.pop();if(E[1]!==G)throw Error('Unclosed section "'+E[1]+'" at '+m);}E=[v,G,m,u.pos];q.push(E);if(v==="#"||v==="^")t.push(E);else if(v==="name"||v==="{"||v==="&")F=!0;else if(v==="="){e=G.split(k);
if(e.length!==2)throw Error("Invalid tags at "+m+": "+e.join(", "));c=f(e)}}if(E=t.pop())throw Error('Unclosed section "'+E[1]+'" at '+u.pos);c=[];var K;t=0;for(s=q.length;t<s;++t)u=q[t],u[0]==="text"&&K&&K[0]==="text"?(K[1]+=u[1],K[3]=u[3]):(K=u,c.push(u));K=q=[];u=[];s=0;for(B=c.length;s<B;++s)switch(t=c[s],t[0]){case "#":case "^":u.push(t);K.push(t);K=t[4]=[];break;case "/":u.pop()[5]=t[2];K=u.length>0?u[u.length-1][4]:q;break;default:K.push(t)}return q};var t=new b;g.clearCache=function(){return t.clearCache()};
g.compile=function(a,b){return t.compile(a,b)};g.compilePartial=function(a,b,e){return t.compilePartial(a,b,e)};g.compileTokens=function(a,b){return t.compileTokens(a,b)};g.render=function(a,b,e){return t.render(a,b,e)};g.to_html=function(a,b,e,c){a=g.render(a,b,e);if(typeof c==="function")c(a);else return a};return g}());
(function(a){a.extend(a.fn,{livequery:function(d,c,b){var e=this,f;a.isFunction(d)&&(b=c,c=d,d=void 0);a.each(a.livequery.queries,function(a,j){if(e.selector==j.selector&&e.context==j.context&&d==j.type&&(!c||c.$lqguid==j.fn.$lqguid)&&(!b||b.$lqguid==j.fn2.$lqguid))return(f=j)&&!1});f=f||new a.livequery(this.selector,this.context,d,c,b);f.stopped=!1;f.run();return this},expire:function(d,c,b){var e=this;a.isFunction(d)&&(b=c,c=d,d=void 0);a.each(a.livequery.queries,function(f,g){e.selector==g.selector&&
e.context==g.context&&(!d||d==g.type)&&(!c||c.$lqguid==g.fn.$lqguid)&&(!b||b.$lqguid==g.fn2.$lqguid)&&!this.stopped&&a.livequery.stop(g.id)});return this}});a.livequery=function(d,c,b,e,f){this.selector=d;this.context=c;this.type=b;this.fn=e;this.fn2=f;this.elements=[];this.stopped=!1;this.id=a.livequery.queries.push(this)-1;e.$lqguid=e.$lqguid||a.livequery.guid++;if(f)f.$lqguid=f.$lqguid||a.livequery.guid++;return this};a.livequery.prototype={stop:function(){var a=this;this.type?this.elements.unbind(this.type,
this.fn):this.fn2&&this.elements.each(function(c,b){a.fn2.apply(b)});this.elements=[];this.stopped=!0},run:function(){if(!this.stopped){var d=this,c=this.elements,b=a(this.selector,this.context),e=b.not(c);this.elements=b;this.type?(e.bind(this.type,this.fn),c.length>0&&a.each(c,function(e,c){a.inArray(c,b)<0&&a.event.remove(c,d.type,d.fn)})):(e.each(function(){d.fn.apply(this)}),this.fn2&&c.length>0&&a.each(c,function(e,c){a.inArray(c,b)<0&&d.fn2.apply(c)}))}}};a.extend(a.livequery,{guid:0,queries:[],
queue:[],running:!1,timeout:null,checkQueue:function(){if(a.livequery.running&&a.livequery.queue.length)for(var d=a.livequery.queue.length;d--;)a.livequery.queries[a.livequery.queue.shift()].run()},pause:function(){a.livequery.running=!1},play:function(){a.livequery.running=!0;a.livequery.run()},registerPlugin:function(){a.each(arguments,function(d,c){if(a.fn[c]){var b=a.fn[c];a.fn[c]=function(){var e=b.apply(this,arguments);a.livequery.run();return e}}})},run:function(d){d!=void 0?a.inArray(d,a.livequery.queue)<
0&&a.livequery.queue.push(d):a.each(a.livequery.queries,function(c){a.inArray(c,a.livequery.queue)<0&&a.livequery.queue.push(c)});a.livequery.timeout&&clearTimeout(a.livequery.timeout);a.livequery.timeout=setTimeout(a.livequery.checkQueue,20)},stop:function(d){d!=void 0?a.livequery.queries[d].stop():a.each(a.livequery.queries,function(c){a.livequery.queries[c].stop()})}});a.livequery.registerPlugin("append","prepend","after","before","wrap","attr","removeAttr","addClass","removeClass","toggleClass",
"empty","remove","html");a(function(){a.livequery.play()})})(jQuery);
(function(a){var d=!1===a.support.boxModel&&a.support.objectAll&&$support.leadingWhitespace;a.jGrowl=function(c,b){a("#jGrowl").size()==0&&a('<div id="jGrowl"></div>').addClass(b&&b.position?b.position:a.jGrowl.defaults.position).appendTo("body");a("#jGrowl").jGrowl(c,b)};a.fn.jGrowl=function(c,b){if(a.isFunction(this.each)){var e=arguments;return this.each(function(){a(this).data("jGrowl.instance")==void 0&&(a(this).data("jGrowl.instance",a.extend(new a.fn.jGrowl,{notifications:[],element:null,interval:null})),
a(this).data("jGrowl.instance").startup(this));a.isFunction(a(this).data("jGrowl.instance")[c])?a(this).data("jGrowl.instance")[c].apply(a(this).data("jGrowl.instance"),a.makeArray(e).slice(1)):a(this).data("jGrowl.instance").create(c,b)})}};a.extend(a.fn.jGrowl.prototype,{defaults:{pool:0,header:"",group:"",sticky:!1,position:"top-right",glue:"after",theme:"default",themeState:"highlight",corners:"10px",check:250,life:3E3,closeDuration:"normal",openDuration:"normal",easing:"swing",closer:!0,closeTemplate:"&times;",
closerTemplate:"<div>[ close all ]</div>",log:function(){},beforeOpen:function(){},afterOpen:function(){},open:function(){},beforeClose:function(){},close:function(){},animateOpen:{opacity:"show"},animateClose:{opacity:"hide"}},notifications:[],element:null,interval:null,create:function(c,b){b=a.extend({},this.defaults,b);if(typeof b.speed!=="undefined")b.openDuration=b.speed,b.closeDuration=b.speed;this.notifications.push({message:c,options:b});b.log.apply(this.element,[this.element,c,b])},render:function(c){var b=
this,e=c.message,d=c.options;d.themeState=d.themeState==""?"":"ui-state-"+d.themeState;c=a('<div class="jGrowl-notification '+d.themeState+" ui-corner-all"+(d.group!=void 0&&d.group!=""?" "+d.group:"")+'"><div class="jGrowl-close">'+d.closeTemplate+'</div><div class="jGrowl-header">'+d.header+'</div><div class="jGrowl-message">'+e+"</div></div>").data("jGrowl",d).addClass(d.theme).children("div.jGrowl-close").bind("click.jGrowl",function(){a(this).parent().trigger("jGrowl.beforeClose")}).parent();
a(c).bind("mouseover.jGrowl",function(){a("div.jGrowl-notification",b.element).data("jGrowl.pause",!0)}).bind("mouseout.jGrowl",function(){a("div.jGrowl-notification",b.element).data("jGrowl.pause",!1)}).bind("jGrowl.beforeOpen",function(){d.beforeOpen.apply(c,[c,e,d,b.element])!=!1&&a(this).trigger("jGrowl.open")}).bind("jGrowl.open",function(){d.open.apply(c,[c,e,d,b.element])!=!1&&(d.glue=="after"?a("div.jGrowl-notification:last",b.element).after(c):a("div.jGrowl-notification:first",b.element).before(c),
a(this).animate(d.animateOpen,d.openDuration,d.easing,function(){a.support.opacity===!1&&this.style.removeAttribute("filter");if(a(this).data("jGrowl")!=null)a(this).data("jGrowl").created=new Date;a(this).trigger("jGrowl.afterOpen")}))}).bind("jGrowl.afterOpen",function(){d.afterOpen.apply(c,[c,e,d,b.element])}).bind("jGrowl.beforeClose",function(){d.beforeClose.apply(c,[c,e,d,b.element])!=!1&&a(this).trigger("jGrowl.close")}).bind("jGrowl.close",function(){a(this).data("jGrowl.pause",!0);a(this).animate(d.animateClose,
d.closeDuration,d.easing,function(){a.isFunction(d.close)?d.close.apply(c,[c,e,d,b.element])!==!1&&a(this).remove():a(this).remove()})}).trigger("jGrowl.beforeOpen");d.corners!=""&&a.fn.corner!=void 0&&a(c).corner(d.corners);a("div.jGrowl-notification:parent",b.element).size()>1&&a("div.jGrowl-closer",b.element).size()==0&&this.defaults.closer!=!1&&a(this.defaults.closerTemplate).addClass("jGrowl-closer "+this.defaults.themeState+" ui-corner-all").addClass(this.defaults.theme).appendTo(b.element).animate(this.defaults.animateOpen,
this.defaults.speed,this.defaults.easing).bind("click.jGrowl",function(){a(this).siblings().trigger("jGrowl.beforeClose");a.isFunction(b.defaults.closer)&&b.defaults.closer.apply(a(this).parent()[0],[a(this).parent()[0]])})},update:function(){a(this.element).find("div.jGrowl-notification:parent").each(function(){a(this).data("jGrowl")!=void 0&&a(this).data("jGrowl").created!=void 0&&a(this).data("jGrowl").created.getTime()+parseInt(a(this).data("jGrowl").life)<(new Date).getTime()&&a(this).data("jGrowl").sticky!=
!0&&(a(this).data("jGrowl.pause")==void 0||a(this).data("jGrowl.pause")!=!0)&&a(this).trigger("jGrowl.beforeClose")});this.notifications.length>0&&(this.defaults.pool==0||a(this.element).find("div.jGrowl-notification:parent").size()<this.defaults.pool)&&this.render(this.notifications.shift());a(this.element).find("div.jGrowl-notification:parent").size()<2&&a(this.element).find("div.jGrowl-closer").animate(this.defaults.animateClose,this.defaults.speed,this.defaults.easing,function(){a(this).remove()})},
startup:function(c){this.element=a(c).addClass("jGrowl").append('<div class="jGrowl-notification"></div>');this.interval=setInterval(function(){a(c).data("jGrowl.instance").update()},parseInt(this.defaults.check));d&&a(this.element).addClass("ie6")},shutdown:function(){a(this.element).removeClass("jGrowl").find("div.jGrowl-notification").remove();clearInterval(this.interval)},close:function(){a(this.element).find("div.jGrowl-notification").each(function(){a(this).trigger("jGrowl.beforeClose")})}});
a.jGrowl.defaults=a.fn.jGrowl.prototype.defaults})(jQuery);
(function(a){function d(b){var e=b.data;b.isDefaultPrevented()||(b.preventDefault(),a(this).ajaxSubmit(e))}function c(b){var e=b.target,c=a(e);if(!c.is("[type=submit],[type=image]")){e=c.closest("[type=submit]");if(e.length===0)return;e=e[0]}var d=this;d.clk=e;if(e.type=="image")b.offsetX!==void 0?(d.clk_x=b.offsetX,d.clk_y=b.offsetY):typeof a.fn.offset=="function"?(c=c.offset(),d.clk_x=b.pageX-c.left,d.clk_y=b.pageY-c.top):(d.clk_x=b.pageX-e.offsetLeft,d.clk_y=b.pageY-e.offsetTop);setTimeout(function(){d.clk=
d.clk_x=d.clk_y=null},100)}function b(){if(a.fn.ajaxSubmit.debug){var b="[jquery.form] "+Array.prototype.join.call(arguments,"");window.console&&window.console.log?window.console.log(b):window.opera&&window.opera.postError&&window.opera.postError(b)}}var e={};e.fileapi=a("<input type='file'/>").get(0).files!==void 0;e.formdata=window.FormData!==void 0;var f=!!a.fn.prop;a.fn.attr2=function(){if(!f)return this.attr.apply(this,arguments);var a=this.prop.apply(this,arguments);if(a&&a.jquery||typeof a===
"string")return a;return this.attr.apply(this,arguments)};a.fn.ajaxSubmit=function(c){function d(b){b=a.param(b,c.traditional).split("&");var e=b.length,f=[],n,k;for(n=0;n<e;n++)b[n]=b[n].replace(/\+/g," "),k=b[n].split("="),f.push([decodeURIComponent(k[0]),decodeURIComponent(k[1])]);return f}function k(b){for(var e=new FormData,f=0;f<b.length;f++)e.append(b[f].name,b[f].value);if(c.extraData){b=d(c.extraData);for(f=0;f<b.length;f++)b[f]&&e.append(b[f][0],b[f][1])}c.data=null;f=a.extend(!0,{},a.ajaxSettings,
c,{contentType:!1,processData:!1,cache:!1,type:o||"POST"});if(c.uploadProgress)f.xhr=function(){var b=a.ajaxSettings.xhr();b.upload&&b.upload.addEventListener("progress",function(a){var b=0,e=a.loaded||a.position,d=a.total;a.lengthComputable&&(b=Math.ceil(e/d*100));c.uploadProgress(a,e,d,b)},!1);return b};f.data=null;var n=f.beforeSend;f.beforeSend=function(a,b){b.data=e;n&&n.call(this,a,b)};return a.ajax(f)}function l(e){function d(a){var e=null;try{if(a.contentWindow)e=a.contentWindow.document}catch(c){b("cannot get iframe.contentWindow document: "+
c)}if(e)return e;try{e=a.contentDocument?a.contentDocument:a.document}catch(f){b("cannot get iframe.contentDocument: "+f),e=a.document}return e}function n(){function e(){try{var a=d(u).readyState;b("state = "+a);a&&a.toLowerCase()=="uninitialized"&&setTimeout(e,50)}catch(c){b("Server abort: ",c," (",c.name,")"),k(V),z&&clearTimeout(z),z=void 0}}var c=h.attr2("target"),f=h.attr2("action");j.setAttribute("target",x);o||j.setAttribute("method","POST");f!=l.url&&j.setAttribute("action",l.url);!l.skipEncodingOverride&&
(!o||/post/i.test(o))&&h.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"});l.timeout&&(z=setTimeout(function(){m=!0;k(da)},l.timeout));var g=[];try{if(l.extraData)for(var s in l.extraData)l.extraData.hasOwnProperty(s)&&(a.isPlainObject(l.extraData[s])&&l.extraData[s].hasOwnProperty("name")&&l.extraData[s].hasOwnProperty("value")?g.push(a('<input type="hidden" name="'+l.extraData[s].name+'">').val(l.extraData[s].value).appendTo(j)[0]):g.push(a('<input type="hidden" name="'+s+'">').val(l.extraData[s]).appendTo(j)[0]));
l.iframeTarget||(t.appendTo("body"),u.attachEvent?u.attachEvent("onload",k):u.addEventListener("load",k,!1));setTimeout(e,15);try{j.submit()}catch(r){document.createElement("form").submit.apply(j)}}finally{j.setAttribute("action",f),c?j.setAttribute("target",c):h.removeAttr("target"),a(g).remove()}}function k(e){if(!p.aborted&&!y)if(C=d(u),C||(b("cannot access response document"),e=V),e===da&&p)p.abort("timeout"),O.reject(p,"timeout");else if(e==V&&p)p.abort("server abort"),O.reject(p,"error","server abort");
else if(C&&C.location.href!=l.iframeSrc||m){u.detachEvent?u.detachEvent("onload",k):u.removeEventListener("load",k,!1);e="success";var c;try{if(m)throw"timeout";var f=l.dataType=="xml"||C.XMLDocument||a.isXMLDoc(C);b("isXml="+f);if(!f&&window.opera&&(C.body===null||!C.body.innerHTML)&&--H){b("requeing onLoad callback, DOM not available");setTimeout(k,250);return}var g=C.body?C.body:C.documentElement;p.responseText=g?g.innerHTML:null;p.responseXML=C.XMLDocument?C.XMLDocument:C;if(f)l.dataType="xml";
p.getResponseHeader=function(a){return{"content-type":l.dataType}[a]};if(g)p.status=Number(g.getAttribute("status"))||p.status,p.statusText=g.getAttribute("statusText")||p.statusText;var n=(l.dataType||"").toLowerCase(),h=/(json|script|text)/.test(n);if(h||l.textarea){var s=C.getElementsByTagName("textarea")[0];if(s)p.responseText=s.value,p.status=Number(s.getAttribute("status"))||p.status,p.statusText=s.getAttribute("statusText")||p.statusText;else if(h){var j=C.getElementsByTagName("pre")[0],r=
C.getElementsByTagName("body")[0];if(j)p.responseText=j.textContent?j.textContent:j.innerText;else if(r)p.responseText=r.textContent?r.textContent:r.innerText}}else if(n=="xml"&&!p.responseXML&&p.responseText)p.responseXML=M(p.responseText);try{N=X(p,n,l)}catch(x){e="parsererror",p.error=c=x||e}}catch(o){b("error caught: ",o),e="error",p.error=c=o||e}p.aborted&&(b("upload aborted"),e=null);p.status&&(e=p.status>=200&&p.status<300||p.status===304?"success":"error");if(e==="success")l.success&&l.success.call(l.context,
N,"success",p),O.resolve(p.responseText,"success",p),q&&a.event.trigger("ajaxSuccess",[p,l]);else if(e){if(c===void 0)c=p.statusText;l.error&&l.error.call(l.context,p,e,c);O.reject(p,"error",c);q&&a.event.trigger("ajaxError",[p,l,c])}q&&a.event.trigger("ajaxComplete",[p,l]);q&&!--a.active&&a.event.trigger("ajaxStop");l.complete&&l.complete.call(l.context,p,e);y=!0;l.timeout&&clearTimeout(z);setTimeout(function(){l.iframeTarget||t.remove();p.responseXML=null},100)}}var j=h[0],r,l,q,x,t,u,p,m,z,O=a.Deferred();
if(e)for(r=0;r<w.length;r++)e=a(w[r]),f?e.prop("disabled",!1):e.removeAttr("disabled");l=a.extend(!0,{},a.ajaxSettings,c);l.context=l.context||l;x="jqFormIO"+(new Date).getTime();l.iframeTarget?(t=a(l.iframeTarget),(r=t.attr2("name"))?x=r:t.attr2("name",x)):(t=a('<iframe name="'+x+'" src="'+l.iframeSrc+'" />'),t.css({position:"absolute",top:"-1000px",left:"-1000px"}));u=t[0];p={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},
setRequestHeader:function(){},abort:function(e){var c=e==="timeout"?"timeout":"aborted";b("aborting upload... "+c);this.aborted=1;try{u.contentWindow.document.execCommand&&u.contentWindow.document.execCommand("Stop")}catch(d){}t.attr("src",l.iframeSrc);p.error=c;l.error&&l.error.call(l.context,p,c,e);q&&a.event.trigger("ajaxError",[p,l,c]);l.complete&&l.complete.call(l.context,p,c)}};(q=l.global)&&0===a.active++&&a.event.trigger("ajaxStart");q&&a.event.trigger("ajaxSend",[p,l]);if(l.beforeSend&&l.beforeSend.call(l.context,
p,l)===!1)return l.global&&a.active--,O.reject(),O;if(p.aborted)return O.reject(),O;if(e=j.clk)if((r=e.name)&&!e.disabled)if(l.extraData=l.extraData||{},l.extraData[r]=e.value,e.type=="image")l.extraData[r+".x"]=j.clk_x,l.extraData[r+".y"]=j.clk_y;var da=1,V=2;e=a("meta[name=csrf-token]").attr("content");if((r=a("meta[name=csrf-param]").attr("content"))&&e)l.extraData=l.extraData||{},l.extraData[r]=e;l.forceSync?n():setTimeout(n,10);var N,C,H=50,y,M=a.parseXML||function(a,b){window.ActiveXObject?
(b=new ActiveXObject("Microsoft.XMLDOM"),b.async="false",b.loadXML(a)):b=(new DOMParser).parseFromString(a,"text/xml");return b&&b.documentElement&&b.documentElement.nodeName!="parsererror"?b:null},ca=a.parseJSON||function(a){return window.eval("("+a+")")},X=function(b,e,c){var d=b.getResponseHeader("content-type")||"",f=e==="xml"||!e&&d.indexOf("xml")>=0;b=f?b.responseXML:b.responseText;f&&b.documentElement.nodeName==="parsererror"&&a.error&&a.error("parsererror");c&&c.dataFilter&&(b=c.dataFilter(b,
e));typeof b==="string"&&(e==="json"||!e&&d.indexOf("json")>=0?b=ca(b):(e==="script"||!e&&d.indexOf("javascript")>=0)&&a.globalEval(b));return b};return O}if(!this.length)return b("ajaxSubmit: skipping submit process - no element selected"),this;var o,p,h=this;typeof c=="function"?c={success:c}:c===void 0&&(c={});o=c.type||this.attr2("method");p=c.url||this.attr2("action");(p=(p=typeof p==="string"?a.trim(p):"")||window.location.href||"")&&(p=(p.match(/^([^#]+)/)||[])[1]);c=a.extend(!0,{url:p,success:a.ajaxSettings.success,
type:o||"GET",iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},c);p={};this.trigger("form-pre-serialize",[this,c,p]);if(p.veto)return b("ajaxSubmit: submit vetoed via form-pre-serialize trigger"),this;if(c.beforeSerialize&&c.beforeSerialize(this,c)===!1)return b("ajaxSubmit: submit aborted via beforeSerialize callback"),this;var m=c.traditional;if(m===void 0)m=a.ajaxSettings.traditional;var w=[],t,x=this.formToArray(c.semantic,w);if(c.data)c.extraData=c.data,t=
a.param(c.data,m);if(c.beforeSubmit&&c.beforeSubmit(x,this,c)===!1)return b("ajaxSubmit: submit aborted via beforeSubmit callback"),this;this.trigger("form-submit-validate",[x,this,c,p]);if(p.veto)return b("ajaxSubmit: submit vetoed via form-submit-validate trigger"),this;p=a.param(x,m);t&&(p=p?p+"&"+t:t);c.type.toUpperCase()=="GET"?(c.url+=(c.url.indexOf("?")>=0?"&":"?")+p,c.data=null):c.data=p;var n=[];c.resetForm&&n.push(function(){h.resetForm()});c.clearForm&&n.push(function(){h.clearForm(c.includeHidden)});
if(!c.dataType&&c.target){var r=c.success||function(){};n.push(function(b){var e=c.replaceTarget?"replaceWith":"html";a(c.target)[e](b).each(r,arguments)})}else c.success&&n.push(c.success);c.success=function(a,b,e){for(var d=c.context||this,f=0,k=n.length;f<k;f++)n[f].apply(d,[a,b,e||h,h])};if(c.error){var u=c.error;c.error=function(a,b,e){u.apply(c.context||this,[a,b,e,h])}}if(c.complete){var z=c.complete;c.complete=function(a,b){z.apply(c.context||this,[a,b,h])}}t=a('input[type=file]:enabled[value!=""]',
this).length>0;p=h.attr("enctype")=="multipart/form-data"||h.attr("encoding")=="multipart/form-data";m=e.fileapi&&e.formdata;b("fileAPI :"+m);var q;c.iframe!==!1&&(c.iframe||(t||p)&&!m)?c.closeKeepAlive?a.get(c.closeKeepAlive,function(){q=l(x)}):q=l(x):q=(t||p)&&m?k(x):a.ajax(c);h.removeData("jqxhr").data("jqxhr",q);for(t=0;t<w.length;t++)w[t]=null;this.trigger("form-submit-notify",[this,c]);return this};a.fn.ajaxForm=function(e){e=e||{};e.delegation=e.delegation&&a.isFunction(a.fn.on);if(!e.delegation&&
this.length===0){var f={s:this.selector,c:this.context};if(!a.isReady&&f.s)return b("DOM not ready, queuing ajaxForm"),a(function(){a(f.s,f.c).ajaxForm(e)}),this;b("terminating; zero elements found by selector"+(a.isReady?"":" (DOM not ready)"));return this}if(e.delegation)return a(document).off("submit.form-plugin",this.selector,d).off("click.form-plugin",this.selector,c).on("submit.form-plugin",this.selector,e,d).on("click.form-plugin",this.selector,e,c),this;return this.ajaxFormUnbind().bind("submit.form-plugin",
e,d).bind("click.form-plugin",e,c)};a.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")};a.fn.formToArray=function(b,c){var d=[];if(this.length===0)return d;var f=this[0],o=b?f.getElementsByTagName("*"):f.elements;if(!o)return d;var p,h,m,w,t,x;p=0;for(x=o.length;p<x;p++)if(t=o[p],(m=t.name)&&!t.disabled)if(b&&f.clk&&t.type=="image")f.clk==t&&(d.push({name:m,value:a(t).val(),type:t.type}),d.push({name:m+".x",value:f.clk_x},{name:m+".y",value:f.clk_y}));else if((w=
a.fieldValue(t,!0))&&w.constructor==Array){c&&c.push(t);h=0;for(t=w.length;h<t;h++)d.push({name:m,value:w[h]})}else if(e.fileapi&&t.type=="file")if(c&&c.push(t),w=t.files,w.length)for(h=0;h<w.length;h++)d.push({name:m,value:w[h],type:t.type});else d.push({name:m,value:"",type:t.type});else w!==null&&typeof w!="undefined"&&(c&&c.push(t),d.push({name:m,value:w,type:t.type,required:t.required}));if(!b&&f.clk&&(o=a(f.clk),p=o[0],(m=p.name)&&!p.disabled&&p.type=="image"))d.push({name:m,value:o.val()}),
d.push({name:m+".x",value:f.clk_x},{name:m+".y",value:f.clk_y});return d};a.fn.formSerialize=function(b){return a.param(this.formToArray(b))};a.fn.fieldSerialize=function(b){var e=[];this.each(function(){var c=this.name;if(c){var d=a.fieldValue(this,b);if(d&&d.constructor==Array)for(var f=0,p=d.length;f<p;f++)e.push({name:c,value:d[f]});else d!==null&&typeof d!="undefined"&&e.push({name:this.name,value:d})}});return a.param(e)};a.fn.fieldValue=function(b){for(var e=[],c=0,d=this.length;c<d;c++){var f=
a.fieldValue(this[c],b);f===null||typeof f=="undefined"||f.constructor==Array&&!f.length||(f.constructor==Array?a.merge(e,f):e.push(f))}return e};a.fieldValue=function(b,e){var c=b.name,d=b.type,f=b.tagName.toLowerCase();e===void 0&&(e=!0);if(e&&(!c||b.disabled||d=="reset"||d=="button"||(d=="checkbox"||d=="radio")&&!b.checked||(d=="submit"||d=="image")&&b.form&&b.form.clk!=b||f=="select"&&b.selectedIndex==-1))return null;if(f=="select"){var p=b.selectedIndex;if(p<0)return null;c=[];f=b.options;var h=
(d=d=="select-one")?p+1:f.length;for(p=d?p:0;p<h;p++){var m=f[p];if(m.selected){var w=m.value;w||(w=m.attributes&&m.attributes.value&&!m.attributes.value.specified?m.text:m.value);if(d)return w;c.push(w)}}return c}return a(b).val()};a.fn.clearForm=function(b){return this.each(function(){a("input,select,textarea",this).clearFields(b)})};a.fn.clearFields=a.fn.clearInputs=function(b){var e=/^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;return this.each(function(){var c=
this.type,d=this.tagName.toLowerCase();if(e.test(c)||d=="textarea")this.value="";else if(c=="checkbox"||c=="radio")this.checked=!1;else if(d=="select")this.selectedIndex=-1;else if(c=="file")/MSIE/.test(navigator.userAgent)?a(this).replaceWith(a(this).clone(!0)):a(this).val("");else if(b&&(b===!0&&/hidden/.test(c)||typeof b=="string"&&a(this).is(b)))this.value=""})};a.fn.resetForm=function(){return this.each(function(){(typeof this.reset=="function"||typeof this.reset=="object"&&!this.reset.nodeType)&&
this.reset()})};a.fn.enable=function(a){a===void 0&&(a=!0);return this.each(function(){this.disabled=!a})};a.fn.selected=function(b){b===void 0&&(b=!0);return this.each(function(){var e=this.type;if(e=="checkbox"||e=="radio")this.checked=b;else if(this.tagName.toLowerCase()=="option")e=a(this).parent("select"),b&&e[0]&&e[0].type=="select-one"&&e.find("option").selected(!1),this.selected=b})};a.fn.ajaxSubmit.debug=!1})(jQuery);
(function(a,d){a.effects={effect:{}};(function(a,b){function e(a,b,e){var c=p[b.type]||{};if(a==null)return e||!b.def?null:b.def;a=c.floor?~~a:parseFloat(a);if(isNaN(a))return b.def;if(c.mod)return(a+c.mod)%c.mod;return 0>a?0:c.max<a?c.max:a}function d(b){var e=l(),f=e._rgba=[];b=b.toLowerCase();t(k,function(a,c){var d,g=c.re.exec(b);d=g&&c.parse(g);g=c.space||"rgba";if(d)return d=e[g](d),e[o[g].cache]=d[o[g].cache],f=e._rgba=d._rgba,!1});if(f.length)return f.join()==="0,0,0,0"&&a.extend(f,w.transparent),
e;return w[b]}function g(a,b,e){e=(e+1)%1;if(e*6<1)return a+(b-a)*e*6;if(e*2<1)return b;if(e*3<2)return a+(b-a)*(2/3-e)*6;return a}var j=/^([\-+])=\s*(\d+\.?\d*)/,k=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(a){return[a[1],a[2],a[3],a[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(a){return[a[1]*2.55,a[2]*2.55,a[3]*2.55,a[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,
parse:function(a){return[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(a){return[parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(a){return[a[1],a[2]/100,a[3]/100,a[4]]}}],l=a.Color=function(b,e,d,f){return new a.Color.fn.parse(b,e,d,f)},o={rgba:{props:{red:{idx:0,type:"byte"},
green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},p={"byte":{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},h=l.support={},m=a("<p>")[0],w,t=a.each;m.style.cssText="background-color:rgba(1,1,1,.5)";h.rgba=m.style.backgroundColor.indexOf("rgba")>-1;t(o,function(a,b){b.cache="_"+a;b.props.alpha={idx:3,type:"percent",def:1}});l.fn=a.extend(l.prototype,{parse:function(g,n,h,
k){if(g===b)return this._rgba=[null,null,null,null],this;if(g.jquery||g.nodeType)g=a(g).css(n),n=b;var j=this,q=a.type(g),s=this._rgba=[];n!==b&&(g=[g,n,h,k],q="array");if(q==="string")return this.parse(d(g)||w._default);if(q==="array")return t(o.rgba.props,function(a,b){s[b.idx]=e(g[b.idx],b)}),this;if(q==="object")return g instanceof l?t(o,function(a,b){g[b.cache]&&(j[b.cache]=g[b.cache].slice())}):t(o,function(b,d){var f=d.cache;t(d.props,function(a,b){if(!j[f]&&d.to){if(a==="alpha"||g[a]==null)return;
j[f]=d.to(j._rgba)}j[f][b.idx]=e(g[a],b,!0)});if(j[f]&&a.inArray(null,j[f].slice(0,3))<0&&(j[f][3]=1,d.from))j._rgba=d.from(j[f])}),this},is:function(a){var b=l(a),e=!0,c=this;t(o,function(a,d){var f,g=b[d.cache];g&&(f=c[d.cache]||d.to&&d.to(c._rgba)||[],t(d.props,function(a,b){if(g[b.idx]!=null)return e=g[b.idx]===f[b.idx]}));return e});return e},_space:function(){var a=[],b=this;t(o,function(e,c){b[c.cache]&&a.push(e)});return a.pop()},transition:function(a,b){var c=l(a),d=c._space(),f=o[d],g=this.alpha()===
0?l("transparent"):this,h=g[f.cache]||f.to(g._rgba),k=h.slice();c=c[f.cache];t(f.props,function(a,d){var f=d.idx,g=h[f],j=c[f],l=p[d.type]||{};j!==null&&(g===null?k[f]=j:(l.mod&&(j-g>l.mod/2?g+=l.mod:g-j>l.mod/2&&(g-=l.mod)),k[f]=e((j-g)*b+g,d)))});return this[d](k)},blend:function(b){if(this._rgba[3]===1)return this;var e=this._rgba.slice(),d=e.pop(),f=l(b)._rgba;return l(a.map(e,function(a,b){return(1-d)*f[b]+d*a}))},toRgbaString:function(){var b="rgba(",e=a.map(this._rgba,function(a,b){return a==
null?b>2?1:0:a});e[3]===1&&(e.pop(),b="rgb(");return b+e.join()+")"},toHslaString:function(){var b="hsla(",e=a.map(this.hsla(),function(a,b){a==null&&(a=b>2?1:0);b&&b<3&&(a=Math.round(a*100)+"%");return a});e[3]===1&&(e.pop(),b="hsl(");return b+e.join()+")"},toHexString:function(b){var e=this._rgba.slice(),d=e.pop();b&&e.push(~~(d*255));return"#"+a.map(e,function(a){a=(a||0).toString(16);return a.length===1?"0"+a:a}).join("")},toString:function(){return this._rgba[3]===0?"transparent":this.toRgbaString()}});
l.fn.parse.prototype=l.fn;o.hsla.to=function(a){if(a[0]==null||a[1]==null||a[2]==null)return[null,null,null,a[3]];var b=a[0]/255,e=a[1]/255,c=a[2]/255;a=a[3];var d=Math.max(b,e,c),f=Math.min(b,e,c),g=d-f,h=d+f,k=h*0.5;return[Math.round(f===d?0:b===d?60*(e-c)/g+360:e===d?60*(c-b)/g+120:60*(b-e)/g+240)%360,g===0?0:k<=0.5?g/h:g/(2-h),k,a==null?1:a]};o.hsla.from=function(a){if(a[0]==null||a[1]==null||a[2]==null)return[null,null,null,a[3]];var b=a[0]/360,e=a[1],c=a[2];a=a[3];e=c<=0.5?c*(1+e):c+e-c*e;c=
2*c-e;return[Math.round(g(c,e,b+1/3)*255),Math.round(g(c,e,b)*255),Math.round(g(c,e,b-1/3)*255),a]};t(o,function(d,f){var g=f.props,h=f.cache,k=f.to,q=f.from;l.fn[d]=function(d){k&&!this[h]&&(this[h]=k(this._rgba));if(d===b)return this[h].slice();var f,n=a.type(d),j=n==="array"||n==="object"?d:arguments,p=this[h].slice();t(g,function(a,b){var c=j[n==="object"?a:b.idx];c==null&&(c=p[b.idx]);p[b.idx]=e(c,b)});return q?(f=l(q(p)),f[h]=p,f):l(p)};t(g,function(b,e){l.fn[b]||(l.fn[b]=function(f){var g=
a.type(f),n=b==="alpha"?this._hsla?"hsla":"rgba":d,h=this[n](),k=h[e.idx];if(g==="undefined")return k;g==="function"&&(f=f.call(this,k),g=a.type(f));if(f==null&&e.empty)return this;g==="string"&&(g=j.exec(f))&&(f=k+parseFloat(g[2])*(g[1]==="+"?1:-1));h[e.idx]=f;return this[n](h)})})});l.hook=function(b){b=b.split(" ");t(b,function(b,e){a.cssHooks[e]={set:function(b,g){var n,k="";if(g!=="transparent"&&(a.type(g)!=="string"||(n=d(g)))){g=l(n||g);if(!h.rgba&&g._rgba[3]!==1){for(n=e==="backgroundColor"?
b.parentNode:b;(k===""||k==="transparent")&&n&&n.style;)try{k=a.css(n,"backgroundColor"),n=n.parentNode}catch(j){}g=g.blend(k&&k!=="transparent"?k:"_default")}g=g.toRgbaString()}try{b.style[e]=g}catch(p){}}};a.fx.step[e]=function(b){if(!b.colorInit)b.start=l(b.elem,e),b.end=l(b.end),b.colorInit=!0;a.cssHooks[e].set(b.elem,b.start.transition(b.end,b.pos))}})};l.hook("backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor");
a.cssHooks.borderColor={expand:function(a){var b={};t(["Top","Right","Bottom","Left"],function(e,c){b["border"+c+"Color"]=a});return b}};w=a.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}})(jQuery);(function(){function c(b){var e,
c=b.ownerDocument.defaultView?b.ownerDocument.defaultView.getComputedStyle(b,null):b.currentStyle,d={};if(c&&c.length&&c[0]&&c[c[0]])for(b=c.length;b--;)e=c[b],typeof c[e]==="string"&&(d[a.camelCase(e)]=c[e]);else for(e in c)typeof c[e]==="string"&&(d[e]=c[e]);return d}var b=["add","remove","toggle"],e={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};a.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(b,
e){a.fx.step[e]=function(a){if(a.end!=="none"&&!a.setAttr||a.pos===1&&!a.setAttr)jQuery.style(a.elem,e,a.end),a.setAttr=!0}});if(!a.fn.addBack)a.fn.addBack=function(a){return this.add(a==null?this.prevObject:this.prevObject.filter(a))};a.effects.animateClass=function(d,g,j,k){var l=a.speed(g,j,k);return this.queue(function(){var g=a(this),k=g.attr("class")||"",h,j=l.children?g.find("*").addBack():g;j=j.map(function(){return{el:a(this),start:c(this)}});h=function(){a.each(b,function(a,b){if(d[b])g[b+
"Class"](d[b])})};h();j=j.map(function(){this.end=c(this.el[0]);var b=this.start,d=this.end,f={},g,k;for(g in d)if(k=d[g],b[g]!==k&&!e[g]&&(a.fx.step[g]||!isNaN(parseFloat(k))))f[g]=k;this.diff=f;return this});g.attr("class",k);j=j.map(function(){var b=this,e=a.Deferred();this.el.animate(this.diff,a.extend({},l,{queue:!1,complete:function(){e.resolve(b)}}));return e.promise()});a.when.apply(a,j.get()).done(function(){h();a.each(arguments,function(){var b=this.el;a.each(this.diff,function(a){b.css(a,
"")})});l.complete.call(g[0])})})};a.fn.extend({addClass:function(b){return function(e,c,d,l){return c?a.effects.animateClass.call(this,{add:e},c,d,l):b.apply(this,arguments)}}(a.fn.addClass),removeClass:function(b){return function(e,c,d,l){return arguments.length>1?a.effects.animateClass.call(this,{remove:e},c,d,l):b.apply(this,arguments)}}(a.fn.removeClass),toggleClass:function(b){return function(e,c,k,l,o){return typeof c==="boolean"||c===d?k?a.effects.animateClass.call(this,c?{add:e}:{remove:e},
k,l,o):b.apply(this,arguments):a.effects.animateClass.call(this,{toggle:e},c,k,l)}}(a.fn.toggleClass),switchClass:function(b,e,c,d,l){return a.effects.animateClass.call(this,{add:e,remove:b},c,d,l)}})})();(function(){function c(b,c,d,j){if(a.isPlainObject(b))c=b,b=b.effect;b={effect:b};c==null&&(c={});a.isFunction(c)&&(j=c,d=null,c={});if(typeof c==="number"||a.fx.speeds[c])j=d,d=c,c={};a.isFunction(d)&&(j=d,d=null);c&&a.extend(b,c);d=d||c.duration;b.duration=a.fx.off?0:typeof d==="number"?d:d in
a.fx.speeds?a.fx.speeds[d]:a.fx.speeds._default;b.complete=j||c.complete;return b}function b(b){if(!b||typeof b==="number"||a.fx.speeds[b])return!0;if(typeof b==="string"&&!a.effects.effect[b])return!0;if(a.isFunction(b))return!0;if(typeof b==="object"&&!b.effect)return!0;return!1}a.extend(a.effects,{version:"1.10.3",save:function(a,b){for(var c=0;c<b.length;c++)b[c]!==null&&a.data("ui-effects-"+b[c],a[0].style[b[c]])},restore:function(a,b){var c,j;for(j=0;j<b.length;j++)b[j]!==null&&(c=a.data("ui-effects-"+
b[j]),c===d&&(c=""),a.css(b[j],c))},setMode:function(a,b){b==="toggle"&&(b=a.is(":hidden")?"show":"hide");return b},getBaseline:function(a,b){var c,d;switch(a[0]){case "top":c=0;break;case "middle":c=0.5;break;case "bottom":c=1;break;default:c=a[0]/b.height}switch(a[1]){case "left":d=0;break;case "center":d=0.5;break;case "right":d=1;break;default:d=a[1]/b.width}return{x:d,y:c}},createWrapper:function(b){if(b.parent().is(".ui-effects-wrapper"))return b.parent();var c={width:b.outerWidth(!0),height:b.outerHeight(!0),
"float":b.css("float")},d=a("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),j={width:b.width(),height:b.height()},k=document.activeElement;b.wrap(d);(b[0]===k||a.contains(b[0],k))&&a(k).focus();d=b.parent();b.css("position")==="static"?(d.css({position:"relative"}),b.css({position:"relative"})):(a.extend(c,{position:b.css("position"),zIndex:b.css("z-index")}),a.each(["top","left","bottom","right"],function(a,d){c[d]=b.css(d);
isNaN(parseInt(c[d],10))&&(c[d]="auto")}),b.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"}));b.css(j);return d.css(c).show()},removeWrapper:function(b){var c=document.activeElement;b.parent().is(".ui-effects-wrapper")&&(b.parent().replaceWith(b),(b[0]===c||a.contains(b[0],c))&&a(c).focus());return b},setTransition:function(b,c,d,j){j=j||{};a.each(c,function(a,c){var f=b.cssUnit(c);f[0]>0&&(j[c]=f[0]*d+f[1])});return j}});a.fn.extend({effect:function(){function b(e){function c(){a.isFunction(h)&&
h.call(g[0]);a.isFunction(e)&&e()}var g=a(this),h=d.complete,j=d.mode;(g.is(":hidden")?j==="hide":j==="show")?(g[j](),c()):k.call(g[0],d,c)}var d=c.apply(this,arguments),g=d.mode,j=d.queue,k=a.effects.effect[d.effect];if(a.fx.off||!k)return g?this[g](d.duration,d.complete):this.each(function(){d.complete&&d.complete.call(this)});return j===!1?this.each(b):this.queue(j||"fx",b)},show:function(a){return function(d){if(b(d))return a.apply(this,arguments);else{var g=c.apply(this,arguments);g.mode="show";
return this.effect.call(this,g)}}}(a.fn.show),hide:function(a){return function(d){if(b(d))return a.apply(this,arguments);else{var g=c.apply(this,arguments);g.mode="hide";return this.effect.call(this,g)}}}(a.fn.hide),toggle:function(a){return function(d){if(b(d)||typeof d==="boolean")return a.apply(this,arguments);else{var g=c.apply(this,arguments);g.mode="toggle";return this.effect.call(this,g)}}}(a.fn.toggle),cssUnit:function(b){var c=this.css(b),d=[];a.each(["em","px","%","pt"],function(a,b){c.indexOf(b)>
0&&(d=[parseFloat(c),b])});return d}})})();(function(){var c={};a.each(["Quad","Cubic","Quart","Quint","Expo"],function(a,e){c[e]=function(e){return Math.pow(e,a+2)}});a.extend(c,{Sine:function(a){return 1-Math.cos(a*Math.PI/2)},Circ:function(a){return 1-Math.sqrt(1-a*a)},Elastic:function(a){return a===0||a===1?a:-Math.pow(2,8*(a-1))*Math.sin(((a-1)*80-7.5)*Math.PI/15)},Back:function(a){return a*a*(3*a-2)},Bounce:function(a){for(var e,c=4;a<((e=Math.pow(2,--c))-1)/11;);return 1/Math.pow(4,3-c)-7.5625*
Math.pow((e*3-2)/22-a,2)}});a.each(c,function(b,e){a.easing["easeIn"+b]=e;a.easing["easeOut"+b]=function(a){return 1-e(1-a)};a.easing["easeInOut"+b]=function(a){return a<0.5?e(a*2)/2:1-e(a*-2+2)/2}})})()})(jQuery);
(function(a,d){function c(e,c){var d,f;d=e.nodeName.toLowerCase();if("area"===d){d=e.parentNode;f=d.name;if(!e.href||!f||d.nodeName.toLowerCase()!=="map")return!1;d=a("img[usemap=#"+f+"]")[0];return!!d&&b(d)}return(/input|select|textarea|button|object/.test(d)?!e.disabled:"a"===d?e.href||c:c)&&b(e)}function b(b){return a.expr.filters.visible(b)&&!a(b).parents().addBack().filter(function(){return a.css(this,"visibility")==="hidden"}).length}var e=0,f=/^ui-id-\d+$/;a.ui=a.ui||{};a.extend(a.ui,{version:"1.10.3",
keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}});a.fn.extend({focus:function(b){return function(e,c){return typeof e==="number"?this.each(function(){var b=this;setTimeout(function(){a(b).focus();c&&c.call(b)},e)}):b.apply(this,arguments)}}(a.fn.focus),scrollParent:function(){var b;
b=a.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(a.css(this,"position"))&&/(auto|scroll)/.test(a.css(this,"overflow")+a.css(this,"overflow-y")+a.css(this,"overflow-x"))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(a.css(this,"overflow")+a.css(this,"overflow-y")+a.css(this,"overflow-x"))}).eq(0);return/fixed/.test(this.css("position"))||!b.length?a(document):
b},zIndex:function(b){if(b!==d)return this.css("zIndex",b);if(this.length){b=a(this[0]);for(var e;b.length&&b[0]!==document;){e=b.css("position");if(e==="absolute"||e==="relative"||e==="fixed")if(e=parseInt(b.css("zIndex"),10),!isNaN(e)&&e!==0)return e;b=b.parent()}}return 0},uniqueId:function(){return this.each(function(){if(!this.id)this.id="ui-id-"+ ++e})},removeUniqueId:function(){return this.each(function(){f.test(this.id)&&a(this).removeAttr("id")})}});a.extend(a.expr[":"],{data:a.expr.createPseudo?
a.expr.createPseudo(function(b){return function(e){return!!a.data(e,b)}}):function(b,e,c){return!!a.data(b,c[3])},focusable:function(b){return c(b,!isNaN(a.attr(b,"tabindex")))},tabbable:function(b){var e=a.attr(b,"tabindex"),d=isNaN(e);return(d||e>=0)&&c(b,!d)}});a("<a>").outerWidth(1).jquery||a.each(["Width","Height"],function(b,e){function c(b,e,d,g){a.each(f,function(){e-=parseFloat(a.css(b,"padding"+this))||0;d&&(e-=parseFloat(a.css(b,"border"+this+"Width"))||0);g&&(e-=parseFloat(a.css(b,"margin"+
this))||0)});return e}var f=e==="Width"?["Left","Right"]:["Top","Bottom"],o=e.toLowerCase(),p={innerWidth:a.fn.innerWidth,innerHeight:a.fn.innerHeight,outerWidth:a.fn.outerWidth,outerHeight:a.fn.outerHeight};a.fn["inner"+e]=function(b){if(b===d)return p["inner"+e].call(this);return this.each(function(){a(this).css(o,c(this,b)+"px")})};a.fn["outer"+e]=function(b,d){if(typeof b!=="number")return p["outer"+e].call(this,b);return this.each(function(){a(this).css(o,c(this,b,!0,d)+"px")})}});if(!a.fn.addBack)a.fn.addBack=
function(a){return this.add(a==null?this.prevObject:this.prevObject.filter(a))};if(a("<a>").data("a-b","a").removeData("a-b").data("a-b"))a.fn.removeData=function(b){return function(e){return arguments.length?b.call(this,a.camelCase(e)):b.call(this)}}(a.fn.removeData);a.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase());a.support.selectstart="onselectstart"in document.createElement("div");a.fn.extend({disableSelection:function(){return this.bind((a.support.selectstart?"selectstart":"mousedown")+
".ui-disableSelection",function(a){a.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}});a.extend(a.ui,{plugin:{add:function(b,e,c){var d;b=a.ui[b].prototype;for(d in c)b.plugins[d]=b.plugins[d]||[],b.plugins[d].push([e,c[d]])},call:function(a,b,e){var c=a.plugins[b];if(c&&a.element[0].parentNode&&a.element[0].parentNode.nodeType!==11)for(b=0;b<c.length;b++)a.options[c[b][0]]&&c[b][1].apply(a.element,e)}},hasScroll:function(b,e){if(a(b).css("overflow")==="hidden")return!1;
var c=e&&e==="left"?"scrollLeft":"scrollTop",d=!1;if(b[c]>0)return!0;b[c]=1;d=b[c]>0;b[c]=0;return d}})})(jQuery);
(function(a,d){var c=0,b=Array.prototype.slice,e=a.cleanData;a.cleanData=function(b){for(var c=0,d;(d=b[c])!=null;c++)try{a(d).triggerHandler("remove")}catch(k){}e(b)};a.widget=function(b,e,c){var d,l,o,p,h={},m=b.split(".")[0];b=b.split(".")[1];d=m+"-"+b;if(!c)c=e,e=a.Widget;a.expr[":"][d.toLowerCase()]=function(b){return!!a.data(b,d)};a[m]=a[m]||{};l=a[m][b];o=a[m][b]=function(a,b){if(!this._createWidget)return new o(a,b);arguments.length&&this._createWidget(a,b)};a.extend(o,l,{version:c.version,
_proto:a.extend({},c),_childConstructors:[]});p=new e;p.options=a.widget.extend({},p.options);a.each(c,function(b,c){h[b]=a.isFunction(c)?function(){var a=function(){return e.prototype[b].apply(this,arguments)},d=function(a){return e.prototype[b].apply(this,a)};return function(){var b=this._super,e=this._superApply,f;this._super=a;this._superApply=d;f=c.apply(this,arguments);this._super=b;this._superApply=e;return f}}():c});o.prototype=a.widget.extend(p,{widgetEventPrefix:l?p.widgetEventPrefix:b},
h,{constructor:o,namespace:m,widgetName:b,widgetFullName:d});l?(a.each(l._childConstructors,function(b,e){var c=e.prototype;a.widget(c.namespace+"."+c.widgetName,o,e._proto)}),delete l._childConstructors):e._childConstructors.push(o);a.widget.bridge(b,o)};a.widget.extend=function(e){for(var c=b.call(arguments,1),j=0,k=c.length,l,o;j<k;j++)for(l in c[j])o=c[j][l],c[j].hasOwnProperty(l)&&o!==d&&(e[l]=a.isPlainObject(o)?a.isPlainObject(e[l])?a.widget.extend({},e[l],o):a.widget.extend({},o):o);return e};
a.widget.bridge=function(e,c){var j=c.prototype.widgetFullName||e;a.fn[e]=function(k){var l=typeof k==="string",o=b.call(arguments,1),p=this;k=!l&&o.length?a.widget.extend.apply(null,[k].concat(o)):k;l?this.each(function(){var b,c=a.data(this,j);if(!c)return a.error("cannot call methods on "+e+" prior to initialization; attempted to call method '"+k+"'");if(!a.isFunction(c[k])||k.charAt(0)==="_")return a.error("no such method '"+k+"' for "+e+" widget instance");b=c[k].apply(c,o);if(b!==c&&b!==d)return p=
b&&b.jquery?p.pushStack(b.get()):b,!1}):this.each(function(){var b=a.data(this,j);b?b.option(k||{})._init():a.data(this,j,new c(k,this))});return p}};a.Widget=function(){};a.Widget._childConstructors=[];a.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(b,e){e=a(e||this.defaultElement||this)[0];this.element=a(e);this.uuid=c++;this.eventNamespace="."+this.widgetName+this.uuid;this.options=a.widget.extend({},this.options,
this._getCreateOptions(),b);this.bindings=a();this.hoverable=a();this.focusable=a();if(e!==this)a.data(e,this.widgetFullName,this),this._on(!0,this.element,{remove:function(a){a.target===e&&this.destroy()}}),this.document=a(e.style?e.ownerDocument:e.document||e),this.window=a(this.document[0].defaultView||this.document[0].parentWindow);this._create();this._trigger("create",null,this._getCreateEventData());this._init()},_getCreateOptions:a.noop,_getCreateEventData:a.noop,_create:a.noop,_init:a.noop,
destroy:function(){this._destroy();this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(a.camelCase(this.widgetFullName));this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled");this.bindings.unbind(this.eventNamespace);this.hoverable.removeClass("ui-state-hover");this.focusable.removeClass("ui-state-focus")},_destroy:a.noop,widget:function(){return this.element},
option:function(b,e){var c=b,k,l,o;if(arguments.length===0)return a.widget.extend({},this.options);if(typeof b==="string")if(c={},k=b.split("."),b=k.shift(),k.length){l=c[b]=a.widget.extend({},this.options[b]);for(o=0;o<k.length-1;o++)l[k[o]]=l[k[o]]||{},l=l[k[o]];b=k.pop();if(e===d)return l[b]===d?null:l[b];l[b]=e}else{if(e===d)return this.options[b]===d?null:this.options[b];c[b]=e}this._setOptions(c);return this},_setOptions:function(a){for(var b in a)this._setOption(b,a[b]);return this},_setOption:function(a,
b){this.options[a]=b;a==="disabled"&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!b).attr("aria-disabled",b),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus"));return this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(b,e,c){var d,l=this;typeof b!=="boolean"&&(c=e,e=b,b=!1);c?(e=d=a(e),this.bindings=this.bindings.add(e)):(c=e,e=this.element,d=
this.widget());a.each(c,function(c,j){function h(){if(b||!(l.options.disabled===!0||a(this).hasClass("ui-state-disabled")))return(typeof j==="string"?l[j]:j).apply(l,arguments)}if(typeof j!=="string")h.guid=j.guid=j.guid||h.guid||a.guid++;var m=c.match(/^(\w+)\s*(.*)$/),w=m[1]+l.eventNamespace;(m=m[2])?d.delegate(m,w,h):e.bind(w,h)})},_off:function(a,b){b=(b||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace;a.unbind(b).undelegate(b)},_delay:function(a,b){var e=this;return setTimeout(function(){return(typeof a===
"string"?e[a]:a).apply(e,arguments)},b||0)},_hoverable:function(b){this.hoverable=this.hoverable.add(b);this._on(b,{mouseenter:function(b){a(b.currentTarget).addClass("ui-state-hover")},mouseleave:function(b){a(b.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(b){this.focusable=this.focusable.add(b);this._on(b,{focusin:function(b){a(b.currentTarget).addClass("ui-state-focus")},focusout:function(b){a(b.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(b,e,c){var d,
l=this.options[b];c=c||{};e=a.Event(e);e.type=(b===this.widgetEventPrefix?b:this.widgetEventPrefix+b).toLowerCase();e.target=this.element[0];if(b=e.originalEvent)for(d in b)d in e||(e[d]=b[d]);this.element.trigger(e,c);return!(a.isFunction(l)&&l.apply(this.element[0],[e].concat(c))===!1||e.isDefaultPrevented())}};a.each({show:"fadeIn",hide:"fadeOut"},function(b,e){a.Widget.prototype["_"+b]=function(c,d,l){typeof d==="string"&&(d={effect:d});var o,p=!d?b:d===!0||typeof d==="number"?e:d.effect||e;d=
d||{};typeof d==="number"&&(d={duration:d});o=!a.isEmptyObject(d);d.complete=l;d.delay&&c.delay(d.delay);if(o&&a.effects&&a.effects.effect[p])c[b](d);else if(p!==b&&c[p])c[p](d.duration,d.easing,l);else c.queue(function(e){a(this)[b]();l&&l.call(c[0]);e()})}})})(jQuery);
(function(a){var d=!1;a(document).mouseup(function(){d=!1});a.widget("ui.mouse",{version:"1.10.3",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var c=this;this.element.bind("mousedown."+this.widgetName,function(a){return c._mouseDown(a)}).bind("click."+this.widgetName,function(b){if(!0===a.data(b.target,c.widgetName+".preventClickEvent"))return a.removeData(b.target,c.widgetName+".preventClickEvent"),b.stopImmediatePropagation(),!1});this.started=
!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName);this._mouseMoveDelegate&&a(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(c){if(!d){this._mouseStarted&&this._mouseUp(c);this._mouseDownEvent=c;var b=this,e=c.which===1,f=typeof this.options.cancel==="string"&&c.target.nodeName?a(c.target).closest(this.options.cancel).length:!1;if(!e||f||!this._mouseCapture(c))return!0;this.mouseDelayMet=
!this.options.delay;if(!this.mouseDelayMet)this._mouseDelayTimer=setTimeout(function(){b.mouseDelayMet=!0},this.options.delay);if(this._mouseDistanceMet(c)&&this._mouseDelayMet(c)&&(this._mouseStarted=this._mouseStart(c)!==!1,!this._mouseStarted))return c.preventDefault(),!0;!0===a.data(c.target,this.widgetName+".preventClickEvent")&&a.removeData(c.target,this.widgetName+".preventClickEvent");this._mouseMoveDelegate=function(a){return b._mouseMove(a)};this._mouseUpDelegate=function(a){return b._mouseUp(a)};
a(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate);c.preventDefault();return d=!0}},_mouseMove:function(c){if(a.ui.ie&&(!document.documentMode||document.documentMode<9)&&!c.button)return this._mouseUp(c);if(this._mouseStarted)return this._mouseDrag(c),c.preventDefault();if(this._mouseDistanceMet(c)&&this._mouseDelayMet(c))(this._mouseStarted=this._mouseStart(this._mouseDownEvent,c)!==!1)?this._mouseDrag(c):this._mouseUp(c);
return!this._mouseStarted},_mouseUp:function(c){a(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate);if(this._mouseStarted)this._mouseStarted=!1,c.target===this._mouseDownEvent.target&&a.data(c.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(c);return!1},_mouseDistanceMet:function(a){return Math.max(Math.abs(this._mouseDownEvent.pageX-a.pageX),Math.abs(this._mouseDownEvent.pageY-a.pageY))>=this.options.distance},
_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})})(jQuery);
(function(a){function d(a){return/left|right/.test(a.css("float"))||/inline|table-cell/.test(a.css("display"))}a.widget("ui.sortable",a.ui.mouse,{version:"1.10.3",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",
zIndex:1E3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_create:function(){var a=this.options;this.containerCache={};this.element.addClass("ui-sortable");this.refresh();this.floating=this.items.length?a.axis==="x"||d(this.items[0].item):!1;this.offset=this.element.offset();this._mouseInit();this.ready=!0},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled");this._mouseDestroy();
for(var a=this.items.length-1;a>=0;a--)this.items[a].item.removeData(this.widgetName+"-item");return this},_setOption:function(c,b){c==="disabled"?(this.options[c]=b,this.widget().toggleClass("ui-sortable-disabled",!!b)):a.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(c,b){var e=null,d=!1,g=this;if(this.reverting)return!1;if(this.options.disabled||this.options.type==="static")return!1;this._refreshItems(c);a(c.target).parents().each(function(){if(a.data(this,g.widgetName+
"-item")===g)return e=a(this),!1});a.data(c.target,g.widgetName+"-item")===g&&(e=a(c.target));if(!e)return!1;if(this.options.handle&&!b&&(a(this.options.handle,e).find("*").addBack().each(function(){this===c.target&&(d=!0)}),!d))return!1;this.currentItem=e;this._removeCurrentsFromItems();return!0},_mouseStart:function(c,b,e){var d;b=this.options;this.currentContainer=this;this.refreshPositions();this.helper=this._createHelper(c);this._cacheHelperProportions();this._cacheMargins();this.scrollParent=
this.helper.scrollParent();this.offset=this.currentItem.offset();this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left};a.extend(this.offset,{click:{left:c.pageX-this.offset.left,top:c.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()});this.helper.css("position","absolute");this.cssPosition=this.helper.css("position");this.originalPosition=this._generatePosition(c);this.originalPageX=c.pageX;this.originalPageY=c.pageY;b.cursorAt&&
this._adjustOffsetFromHelper(b.cursorAt);this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]};this.helper[0]!==this.currentItem[0]&&this.currentItem.hide();this._createPlaceholder();b.containment&&this._setContainment();if(b.cursor&&b.cursor!=="auto")d=this.document.find("body"),this.storedCursor=d.css("cursor"),d.css("cursor",b.cursor),this.storedStylesheet=a("<style>*{ cursor: "+b.cursor+" !important; }</style>").appendTo(d);if(b.opacity){if(this.helper.css("opacity"))this._storedOpacity=
this.helper.css("opacity");this.helper.css("opacity",b.opacity)}if(b.zIndex){if(this.helper.css("zIndex"))this._storedZIndex=this.helper.css("zIndex");this.helper.css("zIndex",b.zIndex)}if(this.scrollParent[0]!==document&&this.scrollParent[0].tagName!=="HTML")this.overflowOffset=this.scrollParent.offset();this._trigger("start",c,this._uiHash());this._preserveHelperProportions||this._cacheHelperProportions();if(!e)for(e=this.containers.length-1;e>=0;e--)this.containers[e]._trigger("activate",c,this._uiHash(this));
if(a.ui.ddmanager)a.ui.ddmanager.current=this;a.ui.ddmanager&&!b.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,c);this.dragging=!0;this.helper.addClass("ui-sortable-helper");this._mouseDrag(c);return!0},_mouseDrag:function(c){var b,e,d,g;b=this.options;e=!1;this.position=this._generatePosition(c);this.positionAbs=this._convertPositionTo("absolute");if(!this.lastPositionAbs)this.lastPositionAbs=this.positionAbs;if(this.options.scroll){if(this.scrollParent[0]!==document&&this.scrollParent[0].tagName!==
"HTML"){if(this.overflowOffset.top+this.scrollParent[0].offsetHeight-c.pageY<b.scrollSensitivity)this.scrollParent[0].scrollTop=e=this.scrollParent[0].scrollTop+b.scrollSpeed;else if(c.pageY-this.overflowOffset.top<b.scrollSensitivity)this.scrollParent[0].scrollTop=e=this.scrollParent[0].scrollTop-b.scrollSpeed;if(this.overflowOffset.left+this.scrollParent[0].offsetWidth-c.pageX<b.scrollSensitivity)this.scrollParent[0].scrollLeft=e=this.scrollParent[0].scrollLeft+b.scrollSpeed;else if(c.pageX-this.overflowOffset.left<
b.scrollSensitivity)this.scrollParent[0].scrollLeft=e=this.scrollParent[0].scrollLeft-b.scrollSpeed}else c.pageY-a(document).scrollTop()<b.scrollSensitivity?e=a(document).scrollTop(a(document).scrollTop()-b.scrollSpeed):a(window).height()-(c.pageY-a(document).scrollTop())<b.scrollSensitivity&&(e=a(document).scrollTop(a(document).scrollTop()+b.scrollSpeed)),c.pageX-a(document).scrollLeft()<b.scrollSensitivity?e=a(document).scrollLeft(a(document).scrollLeft()-b.scrollSpeed):a(window).width()-(c.pageX-
a(document).scrollLeft())<b.scrollSensitivity&&(e=a(document).scrollLeft(a(document).scrollLeft()+b.scrollSpeed));e!==!1&&a.ui.ddmanager&&!b.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,c)}this.positionAbs=this._convertPositionTo("absolute");if(!this.options.axis||this.options.axis!=="y")this.helper[0].style.left=this.position.left+"px";if(!this.options.axis||this.options.axis!=="x")this.helper[0].style.top=this.position.top+"px";for(b=this.items.length-1;b>=0;b--)if(e=this.items[b],d=e.item[0],
(g=this._intersectsWithPointer(e))&&e.instance===this.currentContainer&&d!==this.currentItem[0]&&this.placeholder[g===1?"next":"prev"]()[0]!==d&&!a.contains(this.placeholder[0],d)&&(this.options.type==="semi-dynamic"?!a.contains(this.element[0],d):1)){this.direction=g===1?"down":"up";if(this.options.tolerance==="pointer"||this._intersectsWithSides(e))this._rearrange(c,e);else break;this._trigger("change",c,this._uiHash());break}this._contactContainers(c);a.ui.ddmanager&&a.ui.ddmanager.drag(this,c);
this._trigger("sort",c,this._uiHash());this.lastPositionAbs=this.positionAbs;return!1},_mouseStop:function(c,b){if(c){a.ui.ddmanager&&!this.options.dropBehaviour&&a.ui.ddmanager.drop(this,c);if(this.options.revert){var e=this,d=this.placeholder.offset(),g=this.options.axis,j={};if(!g||g==="x")j.left=d.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollLeft);if(!g||g==="y")j.top=d.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===
document.body?0:this.offsetParent[0].scrollTop);this.reverting=!0;a(this.helper).animate(j,parseInt(this.options.revert,10)||500,function(){e._clear(c)})}else this._clear(c,b);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null});this.options.helper==="original"?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var c=this.containers.length-1;c>=0;c--)if(this.containers[c]._trigger("deactivate",null,this._uiHash(this)),this.containers[c].containerCache.over)this.containers[c]._trigger("out",
null,this._uiHash(this)),this.containers[c].containerCache.over=0}this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.options.helper!=="original"&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),a.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?a(this.domPosition.prev).after(this.currentItem):a(this.domPosition.parent).prepend(this.currentItem));return this},serialize:function(c){var b=
this._getItemsAsjQuery(c&&c.connected),e=[];c=c||{};a(b).each(function(){var b=(a(c.item||this).attr(c.attribute||"id")||"").match(c.expression||/(.+)[\-=_](.+)/);b&&e.push((c.key||b[1]+"[]")+"="+(c.key&&c.expression?b[1]:b[2]))});!e.length&&c.key&&e.push(c.key+"=");return e.join("&")},toArray:function(c){var b=this._getItemsAsjQuery(c&&c.connected),e=[];c=c||{};b.each(function(){e.push(a(c.item||this).attr(c.attribute||"id")||"")});return e},_intersectsWith:function(a){var b=this.positionAbs.left,
e=b+this.helperProportions.width,d=this.positionAbs.top,g=d+this.helperProportions.height,j=a.left,k=j+a.width,l=a.top,o=l+a.height,p=this.offset.click.top,h=this.offset.click.left;h=this.options.axis==="y"||b+h>j&&b+h<k;p=(this.options.axis==="x"||d+p>l&&d+p<o)&&h;return this.options.tolerance==="pointer"||this.options.forcePointerForContainers||this.options.tolerance!=="pointer"&&this.helperProportions[this.floating?"width":"height"]>a[this.floating?"width":"height"]?p:j<b+this.helperProportions.width/
2&&e-this.helperProportions.width/2<k&&l<d+this.helperProportions.height/2&&g-this.helperProportions.height/2<o},_intersectsWithPointer:function(a){var b=this.options.axis==="y"||this.positionAbs.left+this.offset.click.left>a.left&&this.positionAbs.left+this.offset.click.left<a.left+a.width;a=(this.options.axis==="x"||this.positionAbs.top+this.offset.click.top>a.top&&this.positionAbs.top+this.offset.click.top<a.top+a.height)&&b;b=this._getDragVerticalDirection();var e=this._getDragHorizontalDirection();
if(!a)return!1;return this.floating?e&&e==="right"||b==="down"?2:1:b&&(b==="down"?2:1)},_intersectsWithSides:function(a){var b=this.positionAbs.top+this.offset.click.top>a.top+a.height/2&&this.positionAbs.top+this.offset.click.top<a.top+a.height/2+a.height;a=this.positionAbs.left+this.offset.click.left>a.left+a.width/2&&this.positionAbs.left+this.offset.click.left<a.left+a.width/2+a.width;var e=this._getDragVerticalDirection(),d=this._getDragHorizontalDirection();return this.floating&&d?d==="right"&&
a||d==="left"&&!a:e&&(e==="down"&&b||e==="up"&&!b)},_getDragVerticalDirection:function(){var a=this.positionAbs.top-this.lastPositionAbs.top;return a!==0&&(a>0?"down":"up")},_getDragHorizontalDirection:function(){var a=this.positionAbs.left-this.lastPositionAbs.left;return a!==0&&(a>0?"right":"left")},refresh:function(a){this._refreshItems(a);this.refreshPositions();return this},_connectWith:function(){var a=this.options;return a.connectWith.constructor===String?[a.connectWith]:a.connectWith},_getItemsAsjQuery:function(c){var b,
e,d,g=[],j=[],k=this._connectWith();if(k&&c)for(c=k.length-1;c>=0;c--){e=a(k[c]);for(b=e.length-1;b>=0;b--)(d=a.data(e[b],this.widgetFullName))&&d!==this&&!d.options.disabled&&j.push([a.isFunction(d.options.items)?d.options.items.call(d.element):a(d.options.items,d.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),d])}j.push([a.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):a(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),
this]);for(c=j.length-1;c>=0;c--)j[c][0].each(function(){g.push(this)});return a(g)},_removeCurrentsFromItems:function(){var c=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=a.grep(this.items,function(a){for(var e=0;e<c.length;e++)if(c[e]===a.item[0])return!1;return!0})},_refreshItems:function(c){this.items=[];this.containers=[this];var b,e,d,g,j,k=this.items,l=[[a.isFunction(this.options.items)?this.options.items.call(this.element[0],c,{item:this.currentItem}):a(this.options.items,
this.element),this]];if((j=this._connectWith())&&this.ready)for(b=j.length-1;b>=0;b--){d=a(j[b]);for(e=d.length-1;e>=0;e--)if((g=a.data(d[e],this.widgetFullName))&&g!==this&&!g.options.disabled)l.push([a.isFunction(g.options.items)?g.options.items.call(g.element[0],c,{item:this.currentItem}):a(g.options.items,g.element),g]),this.containers.push(g)}for(b=l.length-1;b>=0;b--){c=l[b][1];d=l[b][0];e=0;for(j=d.length;e<j;e++)g=a(d[e]),g.data(this.widgetName+"-item",c),k.push({item:g,instance:c,width:0,
height:0,left:0,top:0})}},refreshPositions:function(c){if(this.offsetParent&&this.helper)this.offset.parent=this._getParentOffset();var b,e,d;for(b=this.items.length-1;b>=0;b--)if(e=this.items[b],!(e.instance!==this.currentContainer&&this.currentContainer&&e.item[0]!==this.currentItem[0])){d=this.options.toleranceElement?a(this.options.toleranceElement,e.item):e.item;if(!c)e.width=d.outerWidth(),e.height=d.outerHeight();d=d.offset();e.left=d.left;e.top=d.top}if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);
else for(b=this.containers.length-1;b>=0;b--)d=this.containers[b].element.offset(),this.containers[b].containerCache.left=d.left,this.containers[b].containerCache.top=d.top,this.containers[b].containerCache.width=this.containers[b].element.outerWidth(),this.containers[b].containerCache.height=this.containers[b].element.outerHeight();return this},_createPlaceholder:function(c){c=c||this;var b,e=c.options;if(!e.placeholder||e.placeholder.constructor===String)b=e.placeholder,e.placeholder={element:function(){var e=
c.currentItem[0].nodeName.toLowerCase(),d=a("<"+e+">",c.document[0]).addClass(b||c.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper");e==="tr"?c.currentItem.children().each(function(){a("<td>&#160;</td>",c.document[0]).attr("colspan",a(this).attr("colspan")||1).appendTo(d)}):e==="img"&&d.attr("src",c.currentItem.attr("src"));b||d.css("visibility","hidden");return d},update:function(a,d){if(!b||e.forcePlaceholderSize)d.height()||d.height(c.currentItem.innerHeight()-
parseInt(c.currentItem.css("paddingTop")||0,10)-parseInt(c.currentItem.css("paddingBottom")||0,10)),d.width()||d.width(c.currentItem.innerWidth()-parseInt(c.currentItem.css("paddingLeft")||0,10)-parseInt(c.currentItem.css("paddingRight")||0,10))}};c.placeholder=a(e.placeholder.element.call(c.element,c.currentItem));c.currentItem.after(c.placeholder);e.placeholder.update(c,c.placeholder)},_contactContainers:function(c){var b,e,f,g,j,k,l,o,p,h=e=null;for(b=this.containers.length-1;b>=0;b--)if(!a.contains(this.currentItem[0],
this.containers[b].element[0]))if(this._intersectsWith(this.containers[b].containerCache)){if(!e||!a.contains(this.containers[b].element[0],e.element[0]))e=this.containers[b],h=b}else if(this.containers[b].containerCache.over)this.containers[b]._trigger("out",c,this._uiHash(this)),this.containers[b].containerCache.over=0;if(e)if(this.containers.length===1){if(!this.containers[h].containerCache.over)this.containers[h]._trigger("over",c,this._uiHash(this)),this.containers[h].containerCache.over=1}else{b=
1E4;f=null;g=(p=e.floating||d(this.currentItem))?"left":"top";j=p?"width":"height";k=this.positionAbs[g]+this.offset.click[g];for(e=this.items.length-1;e>=0;e--)if(a.contains(this.containers[h].element[0],this.items[e].item[0])&&this.items[e].item[0]!==this.currentItem[0]&&(!p||this.positionAbs.top+this.offset.click.top>this.items[e].top&&this.positionAbs.top+this.offset.click.top<this.items[e].top+this.items[e].height))if(l=this.items[e].item.offset()[g],o=!1,Math.abs(l-k)>Math.abs(l+this.items[e][j]-
k)&&(o=!0,l+=this.items[e][j]),Math.abs(l-k)<b)b=Math.abs(l-k),f=this.items[e],this.direction=o?"up":"down";if((f||this.options.dropOnEmpty)&&this.currentContainer!==this.containers[h])f?this._rearrange(c,f,null,!0):this._rearrange(c,null,this.containers[h].element,!0),this._trigger("change",c,this._uiHash()),this.containers[h]._trigger("change",c,this._uiHash(this)),this.currentContainer=this.containers[h],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[h]._trigger("over",
c,this._uiHash(this)),this.containers[h].containerCache.over=1}},_createHelper:function(c){var b=this.options;c=a.isFunction(b.helper)?a(b.helper.apply(this.element[0],[c,this.currentItem])):b.helper==="clone"?this.currentItem.clone():this.currentItem;c.parents("body").length||a(b.appendTo!=="parent"?b.appendTo:this.currentItem[0].parentNode)[0].appendChild(c[0]);if(c[0]===this.currentItem[0])this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),
top:this.currentItem.css("top"),left:this.currentItem.css("left")};(!c[0].style.width||b.forceHelperSize)&&c.width(this.currentItem.width());(!c[0].style.height||b.forceHelperSize)&&c.height(this.currentItem.height());return c},_adjustOffsetFromHelper:function(c){typeof c==="string"&&(c=c.split(" "));a.isArray(c)&&(c={left:+c[0],top:+c[1]||0});if("left"in c)this.offset.click.left=c.left+this.margins.left;if("right"in c)this.offset.click.left=this.helperProportions.width-c.right+this.margins.left;
if("top"in c)this.offset.click.top=c.top+this.margins.top;if("bottom"in c)this.offset.click.top=this.helperProportions.height-c.bottom+this.margins.top},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var c=this.offsetParent.offset();this.cssPosition==="absolute"&&this.scrollParent[0]!==document&&a.contains(this.scrollParent[0],this.offsetParent[0])&&(c.left+=this.scrollParent.scrollLeft(),c.top+=this.scrollParent.scrollTop());if(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&
this.offsetParent[0].tagName.toLowerCase()==="html"&&a.ui.ie)c={top:0,left:0};return{top:c.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:c.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition==="relative"){var a=this.currentItem.position();return{top:a.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:a.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}else return{top:0,
left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var c,b,e;b=this.options;if(b.containment==="parent")b.containment=this.helper[0].parentNode;if(b.containment==="document"||b.containment==="window")this.containment=[0-this.offset.relative.left-
this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,a(b.containment==="document"?document:window).width()-this.helperProportions.width-this.margins.left,(a(b.containment==="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];if(!/^(document|window|parent)$/.test(b.containment))c=a(b.containment)[0],b=a(b.containment).offset(),e=a(c).css("overflow")!=="hidden",this.containment=[b.left+(parseInt(a(c).css("borderLeftWidth"),
10)||0)+(parseInt(a(c).css("paddingLeft"),10)||0)-this.margins.left,b.top+(parseInt(a(c).css("borderTopWidth"),10)||0)+(parseInt(a(c).css("paddingTop"),10)||0)-this.margins.top,b.left+(e?Math.max(c.scrollWidth,c.offsetWidth):c.offsetWidth)-(parseInt(a(c).css("borderLeftWidth"),10)||0)-(parseInt(a(c).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,b.top+(e?Math.max(c.scrollHeight,c.offsetHeight):c.offsetHeight)-(parseInt(a(c).css("borderTopWidth"),10)||0)-(parseInt(a(c).css("paddingBottom"),
10)||0)-this.helperProportions.height-this.margins.top]},_convertPositionTo:function(c,b){if(!b)b=this.position;var e=c==="absolute"?1:-1,d=this.cssPosition==="absolute"&&!(this.scrollParent[0]!==document&&a.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,g=/(html|body)/i.test(d[0].tagName);return{top:b.top+this.offset.relative.top*e+this.offset.parent.top*e-(this.cssPosition==="fixed"?-this.scrollParent.scrollTop():g?0:d.scrollTop())*e,left:b.left+this.offset.relative.left*
e+this.offset.parent.left*e-(this.cssPosition==="fixed"?-this.scrollParent.scrollLeft():g?0:d.scrollLeft())*e}},_generatePosition:function(c){var b,e,d=this.options;e=c.pageX;b=c.pageY;var g=this.cssPosition==="absolute"&&!(this.scrollParent[0]!==document&&a.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,j=/(html|body)/i.test(g[0].tagName);if(this.cssPosition==="relative"&&!(this.scrollParent[0]!==document&&this.scrollParent[0]!==this.offsetParent[0]))this.offset.relative=
this._getRelativeOffset();this.originalPosition&&(this.containment&&(c.pageX-this.offset.click.left<this.containment[0]&&(e=this.containment[0]+this.offset.click.left),c.pageY-this.offset.click.top<this.containment[1]&&(b=this.containment[1]+this.offset.click.top),c.pageX-this.offset.click.left>this.containment[2]&&(e=this.containment[2]+this.offset.click.left),c.pageY-this.offset.click.top>this.containment[3]&&(b=this.containment[3]+this.offset.click.top)),d.grid&&(b=this.originalPageY+Math.round((b-
this.originalPageY)/d.grid[1])*d.grid[1],b=this.containment?b-this.offset.click.top>=this.containment[1]&&b-this.offset.click.top<=this.containment[3]?b:b-this.offset.click.top>=this.containment[1]?b-d.grid[1]:b+d.grid[1]:b,e=this.originalPageX+Math.round((e-this.originalPageX)/d.grid[0])*d.grid[0],e=this.containment?e-this.offset.click.left>=this.containment[0]&&e-this.offset.click.left<=this.containment[2]?e:e-this.offset.click.left>=this.containment[0]?e-d.grid[0]:e+d.grid[0]:e));return{top:b-
this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(this.cssPosition==="fixed"?-this.scrollParent.scrollTop():j?0:g.scrollTop()),left:e-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(this.cssPosition==="fixed"?-this.scrollParent.scrollLeft():j?0:g.scrollLeft())}},_rearrange:function(a,b,e,d){e?e[0].appendChild(this.placeholder[0]):b.item[0].parentNode.insertBefore(this.placeholder[0],this.direction==="down"?b.item[0]:b.item[0].nextSibling);var g=this.counter=
this.counter?++this.counter:1;this._delay(function(){g===this.counter&&this.refreshPositions(!d)})},_clear:function(a,b){this.reverting=!1;var e,d=[];!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem);this._noFinalSort=null;if(this.helper[0]===this.currentItem[0]){for(e in this._storedCSS)if(this._storedCSS[e]==="auto"||this._storedCSS[e]==="static")this._storedCSS[e]="";this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();
this.fromOutside&&!b&&d.push(function(a){this._trigger("receive",a,this._uiHash(this.fromOutside))});(this.fromOutside||this.domPosition.prev!==this.currentItem.prev().not(".ui-sortable-helper")[0]||this.domPosition.parent!==this.currentItem.parent()[0])&&!b&&d.push(function(a){this._trigger("update",a,this._uiHash())});this!==this.currentContainer&&!b&&(d.push(function(a){this._trigger("remove",a,this._uiHash())}),d.push(function(a){return function(b){a._trigger("receive",b,this._uiHash(this))}}.call(this,
this.currentContainer)),d.push(function(a){return function(b){a._trigger("update",b,this._uiHash(this))}}.call(this,this.currentContainer)));for(e=this.containers.length-1;e>=0;e--)if(b||d.push(function(a){return function(b){a._trigger("deactivate",b,this._uiHash(this))}}.call(this,this.containers[e])),this.containers[e].containerCache.over)d.push(function(a){return function(b){a._trigger("out",b,this._uiHash(this))}}.call(this,this.containers[e])),this.containers[e].containerCache.over=0;this.storedCursor&&
(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove());this._storedOpacity&&this.helper.css("opacity",this._storedOpacity);this._storedZIndex&&this.helper.css("zIndex",this._storedZIndex==="auto"?"":this._storedZIndex);this.dragging=!1;if(this.cancelHelperRemoval){if(!b){this._trigger("beforeStop",a,this._uiHash());for(e=0;e<d.length;e++)d[e].call(this,a);this._trigger("stop",a,this._uiHash())}return this.fromOutside=!1}b||this._trigger("beforeStop",a,this._uiHash());
this.placeholder[0].parentNode.removeChild(this.placeholder[0]);this.helper[0]!==this.currentItem[0]&&this.helper.remove();this.helper=null;if(!b){for(e=0;e<d.length;e++)d[e].call(this,a);this._trigger("stop",a,this._uiHash())}this.fromOutside=!1;return!0},_trigger:function(){a.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(c){var b=c||this;return{helper:b.helper,placeholder:b.placeholder||a([]),position:b.position,originalPosition:b.originalPosition,offset:b.positionAbs,
item:b.currentItem,sender:c?c.element:null}}})})(jQuery);
var swfobject=function(){function a(){if(!J&&document.getElementsByTagName("body")[0]){try{var a,b=B.createElement("span");b.style.display="none";a=B.getElementsByTagName("body")[0].appendChild(b);a.parentNode.removeChild(a)}catch(e){return}J=!0;a=v.length;for(b=0;b<a;b++)v[b]()}}function d(a){J?a():v[v.length]=a}function c(){var a=B.getElementsByTagName("body")[0],e=B.createElement(u);e.setAttribute("style","visibility: hidden;");e.setAttribute("type",z);var c=a.appendChild(e);if(c){var d=0;(function A(){if(typeof c.GetVariable!=
r)try{var f=c.GetVariable("$version");if(f)f=f.split(" ")[1].split(","),C.pv=[h(f[0]),h(f[1]),h(f[2])]}catch(g){C.pv=[8,0,0]}else if(d<10){d++;setTimeout(A,10);return}a.removeChild(e);c=null;b()})()}else b()}function b(){var a=G.length;if(a>0)for(var b=0;b<a;b++){var c=G[b].id,d=G[b].callbackFn,n={success:!1,id:c};if(C.pv[0]>0){var h=p(c);if(h)if(w(G[b].swfVersion)&&!(C.wk&&C.wk<312)){if(x(c,!0),d)n.success=!0,n.ref=e(c),n.id=c,d(n)}else if(G[b].expressInstall&&f()){n={};n.data=G[b].expressInstall;
n.width=h.getAttribute("width")||"0";n.height=h.getAttribute("height")||"0";if(h.getAttribute("class"))n.styleclass=h.getAttribute("class");if(h.getAttribute("align"))n.align=h.getAttribute("align");var s={};h=h.getElementsByTagName("param");for(var k=h.length,q=0;q<k;q++)h[q].getAttribute("name").toLowerCase()!="movie"&&(s[h[q].getAttribute("name")]=h[q].getAttribute("value"));g(n,s,c,d)}else c=h,C.ie&&c.readyState!=4?(c.style.display="none",s=B.createElement("div"),c.parentNode.insertBefore(s,c),
s.parentNode.replaceChild(j(c),s),l(c)):c.parentNode.replaceChild(j(c),c),d&&d(n)}else if(x(c,!0),d){if((c=e(c))&&typeof c.SetVariable!=r)n.success=!0,n.ref=c,n.id=c.id;d(n)}}}function e(a){var b=null;(a=p(a))&&a.nodeName.toUpperCase()==="OBJECT"&&(b=typeof a.SetVariable!==r?a:a.getElementsByTagName(u)[0]||a);return b}function f(){return!ba&&w("6.0.65")&&(C.win||C.mac)&&!(C.wk&&C.wk<312)}function g(a,b,e,c){var d=p(e);e=o(e)?e.id:e;ba=!0;R=c||null;L={success:!1,id:e};if(d){d.nodeName.toUpperCase()==
"OBJECT"?(K=j(d),S=null):(K=d,S=e);a.id=q;if(typeof a.width==r||!/%$/.test(a.width)&&h(a.width)<310)a.width="310";if(typeof a.height==r||!/%$/.test(a.height)&&h(a.height)<137)a.height="137";c=C.ie?"ActiveX":"PlugIn";c="MMredirectURL="+encodeURIComponent(s.location.toString().replace(/&/g,"%26"))+"&MMplayerType="+c+"&MMdoctitle="+encodeURIComponent(B.title.slice(0,47)+" - Flash Player Installation");typeof b.flashvars!=r?b.flashvars+="&"+c:b.flashvars=c;if(C.ie&&d.readyState!=4)c=B.createElement("div"),
e+="SWFObjectNew",c.setAttribute("id",e),d.parentNode.insertBefore(c,d),d.style.display="none",l(d);k(a,b,e)}}function j(a){var b=B.createElement("div");if(C.win&&C.ie)b.innerHTML=a.innerHTML;else if(a=a.getElementsByTagName(u)[0])if(a=a.childNodes)for(var e=a.length,c=0;c<e;c++)!(a[c].nodeType==1&&a[c].nodeName=="PARAM")&&a[c].nodeType!=8&&b.appendChild(a[c].cloneNode(!0));return b}function k(a,b,e){var c,d=p(e);e=o(e)?e.id:e;if(C.wk&&C.wk<312)return c;if(d){c=C.ie?B.createElement("div"):B.createElement(u);
var f,g;if(typeof a.id==r)a.id=e;for(g in b)if(b.hasOwnProperty(g)&&g.toLowerCase()!=="movie"){e=c;var n=g,h=b[g],s=B.createElement("param");s.setAttribute("name",n);s.setAttribute("value",h);e.appendChild(s)}if(C.ie)b=a.data,c=c.innerHTML,g=B.createElement("div"),g.innerHTML="<object classid='clsid:D27CDB6E-AE6D-11cf-96B8-444553540000'><param name='movie' value='"+b+"'>"+c+"</object>",c=g.firstChild;for(f in a)a.hasOwnProperty(f)&&(b=f.toLowerCase(),b==="styleclass"?c.setAttribute("class",a[f]):
b!=="classid"&&b!=="data"&&c.setAttribute(f,a[f]));C.ie?E[E.length]=a.id:(c.setAttribute("type",z),c.setAttribute("data",a.data));d.parentNode.replaceChild(c,d)}return c}function l(a){var b=p(a);if(b&&b.nodeName.toUpperCase()=="OBJECT")C.ie?(b.style.display="none",function ca(){if(b.readyState==4){for(var a in b)typeof b[a]=="function"&&(b[a]=null);b.parentNode.removeChild(b)}else setTimeout(ca,10)}()):b.parentNode.removeChild(b)}function o(a){return a&&a.nodeType&&a.nodeType===1}function p(a){if(o(a))return a;
var b=null;try{b=B.getElementById(a)}catch(e){}return b}function h(a){return parseInt(a,10)}function m(a,b,e){a.attachEvent(b,e);I[I.length]=[a,b,e]}function w(a){a+="";var b=C.pv;a=a.split(".");a[0]=h(a[0]);a[1]=h(a[1])||0;a[2]=h(a[2])||0;return b[0]>a[0]||b[0]==a[0]&&b[1]>a[1]||b[0]==a[0]&&b[1]==a[1]&&b[2]>=a[2]?!0:!1}function t(a,b,e,c){var d=B.getElementsByTagName("head")[0];if(d){e=typeof e=="string"?e:"screen";c&&(da=O=null);if(!O||da!=e)c=B.createElement("style"),c.setAttribute("type","text/css"),
c.setAttribute("media",e),O=d.appendChild(c),C.ie&&typeof B.styleSheets!=r&&B.styleSheets.length>0&&(O=B.styleSheets[B.styleSheets.length-1]),da=e;O&&(typeof O.addRule!=r?O.addRule(a,b):typeof B.createTextNode!=r&&O.appendChild(B.createTextNode(a+" {"+b+"}")))}}function x(a,b){if(V){var e=b?"visible":"hidden",c=p(a);J&&c?c.style.visibility=e:typeof a==="string"&&t("#"+a,"visibility:"+e)}}function n(a){return/[\\\"<>\.;]/.exec(a)!=null&&typeof encodeURIComponent!=r?encodeURIComponent(a):a}var r="undefined",
u="object",z="application/x-shockwave-flash",q="SWFObjectExprInst",s=window,B=document,F=navigator,T=!1,v=[],G=[],E=[],I=[],K,S,R,L,J=!1,ba=!1,O,da,V=!0,N=!1,C=function(){var a=typeof B.getElementById!=r&&typeof B.getElementsByTagName!=r&&typeof B.createElement!=r,b=F.userAgent.toLowerCase(),e=F.platform.toLowerCase(),c=e?/win/.test(e):/win/.test(b);e=e?/mac/.test(e):/mac/.test(b);b=/webkit/.test(b)?parseFloat(b.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):!1;var d=F.appName==="Microsoft Internet Explorer",
f=[0,0,0],g=null;if(typeof F.plugins!=r&&typeof F.plugins["Shockwave Flash"]==u){if((g=F.plugins["Shockwave Flash"].description)&&typeof F.mimeTypes!=r&&F.mimeTypes[z]&&F.mimeTypes[z].enabledPlugin)T=!0,d=!1,g=g.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),f[0]=h(g.replace(/^(.*)\..*$/,"$1")),f[1]=h(g.replace(/^.*\.(.*)\s.*$/,"$1")),f[2]=/[a-zA-Z]/.test(g)?h(g.replace(/^.*[a-zA-Z]+(.*)$/,"$1")):0}else if(typeof s.ActiveXObject!=r)try{var n=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");if(n&&(g=n.GetVariable("$version")))d=
!0,g=g.split(" ")[1].split(","),f=[h(g[0]),h(g[1]),h(g[2])]}catch(k){}return{w3:a,pv:f,wk:b,ie:d,win:c,mac:e}}();(function(){C.w3&&((typeof B.readyState!=r&&(B.readyState==="complete"||B.readyState==="interactive")||typeof B.readyState==r&&(B.getElementsByTagName("body")[0]||B.body))&&a(),J||(typeof B.addEventListener!=r&&B.addEventListener("DOMContentLoaded",a,!1),C.ie&&(B.attachEvent("onreadystatechange",function y(){B.readyState=="complete"&&(B.detachEvent("onreadystatechange",y),a())}),s==top&&
function M(){if(!J){try{B.documentElement.doScroll("left")}catch(b){setTimeout(M,0);return}a()}}()),C.wk&&function ca(){J||(/loaded|complete/.test(B.readyState)?a():setTimeout(ca,0))}()))})();v[0]=function(){T?c():b()};(function(){C.ie&&window.attachEvent("onunload",function(){for(var a=I.length,b=0;b<a;b++)I[b][0].detachEvent(I[b][1],I[b][2]);a=E.length;for(b=0;b<a;b++)l(E[b]);for(var e in C)C[e]=null;C=null;for(var c in swfobject)swfobject[c]=null;swfobject=null})})();return{registerObject:function(a,
b,e,c){if(C.w3&&a&&b){var d={};d.id=a;d.swfVersion=b;d.expressInstall=e;d.callbackFn=c;G[G.length]=d;x(a,!1)}else c&&c({success:!1,id:a})},getObjectById:function(a){if(C.w3)return e(a)},embedSWF:function(a,b,e,c,n,h,s,j,l,q){var B=o(b)?b.id:b,p={success:!1,id:B};C.w3&&!(C.wk&&C.wk<312)&&a&&b&&e&&c&&n?(x(B,!1),d(function(){e+="";c+="";var d={};if(l&&typeof l===u)for(var t in l)d[t]=l[t];d.data=a;d.width=e;d.height=c;t={};if(j&&typeof j===u)for(var o in j)t[o]=j[o];if(s&&typeof s===u)for(var m in s)if(s.hasOwnProperty(m)){o=
N?encodeURIComponent(m):m;var F=N?encodeURIComponent(s[m]):s[m];typeof t.flashvars!=r?t.flashvars+="&"+o+"="+F:t.flashvars=o+"="+F}if(w(n))m=k(d,t,b),d.id==B&&x(B,!0),p.success=!0,p.ref=m,p.id=m.id;else if(h&&f()){d.data=h;g(d,t,b,q);return}else x(B,!0);q&&q(p)})):q&&q(p)},switchOffAutoHideShow:function(){V=!1},enableUriEncoding:function(a){N=typeof a===r?!0:a},ua:C,getFlashPlayerVersion:function(){return{major:C.pv[0],minor:C.pv[1],release:C.pv[2]}},hasFlashPlayerVersion:w,createSWF:function(a,b,
e){if(C.w3)return k(a,b,e)},showExpressInstall:function(a,b,e,c){C.w3&&f()&&g(a,b,e,c)},removeSWF:function(a){C.w3&&l(a)},createCSS:function(a,b,e,c){C.w3&&t(a,b,e,c)},addDomLoadEvent:d,addLoadEvent:function(a){if(typeof s.addEventListener!=r)s.addEventListener("load",a,!1);else if(typeof B.addEventListener!=r)B.addEventListener("load",a,!1);else if(typeof s.attachEvent!=r)m(s,"onload",a);else if(typeof s.onload=="function"){var b=s.onload;s.onload=function(){b();a()}}else s.onload=a},getQueryParamValue:function(a){var b=
B.location.search||B.location.hash;if(b){/\?/.test(b)&&(b=b.split("?")[1]);if(a==null)return n(b);b=b.split("&");for(var e=0;e<b.length;e++)if(b[e].substring(0,b[e].indexOf("="))==a)return n(b[e].substring(b[e].indexOf("=")+1))}return""},expressInstallCallback:function(){if(ba){var a=p(q);if(a&&K){a.parentNode.replaceChild(K,a);if(S&&(x(S,!0),C.ie))K.style.display="block";R&&R(L)}ba=!1}},version:"2.3"}}();
(function(a){function d(a,b){return function(e){return k(a.call(this,e),b)}}function c(a,b){return function(e){return this.lang().ordinal(a.call(this,e),b)}}function b(){}function e(a){g(this,a)}function f(a){var b=a.years||a.year||a.y||0,e=a.months||a.month||a.M||0,c=a.weeks||a.week||a.w||0,d=a.days||a.day||a.d||0,f=a.hours||a.hour||a.h||0,g=a.minutes||a.minute||a.m||0,n=a.seconds||a.second||a.s||0,h=a.milliseconds||a.millisecond||a.ms||0;this._input=a;this._milliseconds=h+n*1E3+g*6E4+f*36E5;this._days=
d+c*7;this._months=e+b*12;this._data={};this._bubble()}function g(a,b){for(var e in b)b.hasOwnProperty(e)&&(a[e]=b[e]);return a}function j(a){return a<0?Math.ceil(a):Math.floor(a)}function k(a,b){for(var e=a+"";e.length<b;)e="0"+e;return e}function l(a,b,e,c){var d=b._milliseconds,f=b._days;b=b._months;var g,n;d&&a._d.setTime(+a._d+d*e);if(f||b)g=a.minute(),n=a.hour();f&&a.date(a.date()+f*e);b&&a.month(a.month()+b*e);d&&!c&&v.updateOffset(a);if(f||b)a.minute(g),a.hour(n)}function o(a,b){var e=Math.min(a.length,
b.length),c=Math.abs(a.length-b.length),d=0,f;for(f=0;f<e;f++)~~a[f]!==~~b[f]&&d++;return d+c}function p(a){return a?Z[a]||a.toLowerCase().replace(/(.)s$/,"$1"):a}function h(a){if(!a)return v.fn._lang;if(!I[a]&&K)try{require("./lang/"+a)}catch(b){return v.fn._lang}return I[a]}function m(a){if(a.match(/\[.*\]/))return a.replace(/^\[|\]$/g,"");return a.replace(/\\/g,"")}function w(a){var b=a.match(L),e,c;e=0;for(c=b.length;e<c;e++)b[e]=Q[b[e]]?Q[b[e]]:m(b[e]);return function(d){var f="";for(e=0;e<c;e++)f+=
b[e]instanceof Function?b[e].call(d,a):b[e];return f}}function t(a,b){function e(b){return a.lang().longDateFormat(b)||b}for(var c=5;c--&&J.test(b);)b=b.replace(J,e);D[b]||(D[b]=w(b));return D[b](a)}function x(a,b){switch(a){case "DDDD":return da;case "YYYY":return V;case "YYYYY":return N;case "S":case "SS":case "SSS":case "DDD":return O;case "MMM":case "MMMM":case "dd":case "ddd":case "dddd":return C;case "a":case "A":return h(b._l)._meridiemParse;case "X":return M;case "Z":case "ZZ":return H;case "T":return y;
case "MM":case "DD":case "YY":case "HH":case "hh":case "mm":case "ss":case "M":case "D":case "d":case "H":case "h":case "m":case "s":return ba;default:return RegExp(a.replace("\\",""))}}function n(a){a=((H.exec(a)||[])[0]+"").match(A)||["-",0,0];var b=+(a[1]*60)+~~a[2];return a[0]==="+"?-b:b}function r(a){var b,e=[];if(!a._d){for(b=0;b<7;b++)a._a[b]=e[b]=a._a[b]==null?b===2?1:0:a._a[b];e[3]+=~~((a._tzm||0)/60);e[4]+=~~((a._tzm||0)%60);b=new Date(0);a._useUTC?(b.setUTCFullYear(e[0],e[1],e[2]),b.setUTCHours(e[3],
e[4],e[5],e[6])):(b.setFullYear(e[0],e[1],e[2]),b.setHours(e[3],e[4],e[5],e[6]));a._d=b}}function u(a){var b=a._f.match(L),e=a._i,c,d;a._a=[];for(c=0;c<b.length;c++)if((d=(x(b[c],a).exec(e)||[])[0])&&(e=e.slice(e.indexOf(d)+d.length)),Q[b[c]]){var f=a,g=void 0,s=f._a;switch(b[c]){case "M":case "MM":s[1]=d==null?0:~~d-1;break;case "MMM":case "MMMM":g=h(f._l).monthsParse(d);g!=null?s[1]=g:f._isValid=!1;break;case "D":case "DD":case "DDD":case "DDDD":d!=null&&(s[2]=~~d);break;case "YY":s[0]=~~d+(~~d>
68?1900:2E3);break;case "YYYY":case "YYYYY":s[0]=~~d;break;case "a":case "A":f._isPm=h(f._l).isPM(d);break;case "H":case "HH":case "h":case "hh":s[3]=~~d;break;case "m":case "mm":s[4]=~~d;break;case "s":case "ss":s[5]=~~d;break;case "S":case "SS":case "SSS":s[6]=~~(("0."+d)*1E3);break;case "X":f._d=new Date(parseFloat(d)*1E3);break;case "Z":case "ZZ":f._useUTC=!0,f._tzm=n(d)}if(d==null)f._isValid=!1}if(e)a._il=e;a._isPm&&a._a[3]<12&&(a._a[3]+=12);a._isPm===!1&&a._a[3]===12&&(a._a[3]=0);r(a)}function z(a,
b,e,c,d){return d.relativeTime(b||1,!!e,a,c)}function q(a,b,e){b=e-b;e-=a.day();e>b&&(e-=7);e<b-7&&(e+=7);a=v(a).add("d",e);return{week:Math.ceil(a.dayOfYear()/7),year:a.year()}}function s(b){var c=b._i,d=b._f;if(c===null||c==="")return null;if(typeof c==="string")b._i=c=h().preparse(c);if(v.isMoment(c))b=g({},c),b._d=new Date(+c._d);else if(d)if(Object.prototype.toString.call(d)==="[object Array]"){c=b;var f,n,s=99,k;for(k=0;k<c._f.length;k++)f=g({},c),f._f=c._f[k],u(f),d=new e(f),f=o(f._a,d.toArray()),
d._il&&(f+=d._il.length),f<s&&(s=f,n=d);g(c,n)}else u(b);else if(n=b,c=n._i,d=S.exec(c),c===a)n._d=new Date;else if(d)n._d=new Date(+d[1]);else if(typeof c==="string")if(c=n._i,d=ca.exec(c)){n._f="YYYY-MM-DD"+(d[2]||" ");for(d=0;d<4;d++)if(X[d][1].exec(c)){n._f+=X[d][0];break}H.exec(c)&&(n._f+=" Z");u(n)}else n._d=new Date(c);else Object.prototype.toString.call(c)==="[object Array]"?(n._a=c.slice(0),r(n)):n._d=c instanceof Date?new Date(+c):new Date(c);return new e(b)}function B(a,b){v.fn[a]=v.fn[a+
"s"]=function(a){var e=this._isUTC?"UTC":"";return a!=null?(this._d["set"+e+b](a),v.updateOffset(this),this):this._d["get"+e+b]()}}function F(a){v.duration.fn[a]=function(){return this._data[a]}}function T(a,b){v.duration.fn["as"+a]=function(){return+this/b}}for(var v,G=Math.round,E,I={},K=typeof module!=="undefined"&&module.exports,S=/^\/?Date\((\-?\d+)/i,R=/(\-)?(\d*)?\.?(\d+)\:(\d+)\:(\d+)\.?(\d{3})?/,L=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|SS?S?|X|zz?|ZZ?|.)/g,
J=/(\[[^\[]*\])|(\\)?(LT|LL?L?L?|l{1,4})/g,ba=/\d\d?/,O=/\d{1,3}/,da=/\d{3}/,V=/\d{1,4}/,N=/[+\-]?\d{1,6}/,C=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,H=/Z|[\+\-]\d\d:?\d\d/i,y=/T/i,M=/[\+\-]?\d+(\.\d{1,3})?/,ca=/^\s*\d{4}-\d\d-\d\d((T| )(\d\d(:\d\d(:\d\d(\.\d\d?\d?)?)?)?)?([\+\-]\d\d:?\d\d)?)?/,X=[["HH:mm:ss.S",/(T| )\d\d:\d\d:\d\d\.\d{1,3}/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],
A=/([\+\-]|\d\d)/gi,U="Date|Hours|Minutes|Seconds|Milliseconds".split("|"),W={Milliseconds:1,Seconds:1E3,Minutes:6E4,Hours:36E5,Days:864E5,Months:2592E6,Years:31536E6},Z={ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",w:"week",M:"month",y:"year"},D={},aa="DDD w W M D d".split(" "),Y="M D H h m s w W".split(" "),Q={M:function(){return this.month()+1},MMM:function(a){return this.lang().monthsShort(this,a)},MMMM:function(a){return this.lang().months(this,a)},D:function(){return this.date()},
DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(a){return this.lang().weekdaysMin(this,a)},ddd:function(a){return this.lang().weekdaysShort(this,a)},dddd:function(a){return this.lang().weekdays(this,a)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return k(this.year()%100,2)},YYYY:function(){return k(this.year(),4)},YYYYY:function(){return k(this.year(),5)},gg:function(){return k(this.weekYear()%100,2)},gggg:function(){return this.weekYear()},
ggggg:function(){return k(this.weekYear(),5)},GG:function(){return k(this.isoWeekYear()%100,2)},GGGG:function(){return this.isoWeekYear()},GGGGG:function(){return k(this.isoWeekYear(),5)},e:function(){return this.weekday()},E:function(){return this.isoWeekday()},a:function(){return this.lang().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.lang().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},
s:function(){return this.seconds()},S:function(){return~~(this.milliseconds()/100)},SS:function(){return k(~~(this.milliseconds()/10),2)},SSS:function(){return k(this.milliseconds(),3)},Z:function(){var a=-this.zone(),b="+";a<0&&(a=-a,b="-");return b+k(~~(a/60),2)+":"+k(~~a%60,2)},ZZ:function(){var a=-this.zone(),b="+";a<0&&(a=-a,b="-");return b+k(~~(10*a/6),4)},z:function(){return this.zoneAbbr()},zz:function(){return this.zoneName()},X:function(){return this.unix()}};aa.length;)E=aa.pop(),Q[E+"o"]=
c(Q[E],E);for(;Y.length;)E=Y.pop(),Q[E+E]=d(Q[E],2);Q.DDDD=d(Q.DDD,3);b.prototype={set:function(a){var b,e;for(e in a)b=a[e],typeof b==="function"?this[e]=b:this["_"+e]=b},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(a){return this._months[a.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(a){return this._monthsShort[a.month()]},monthsParse:function(a){var b,e;if(!this._monthsParse)this._monthsParse=
[];for(b=0;b<12;b++)if(this._monthsParse[b]||(e=v([2E3,b]),e="^"+this.months(e,"")+"|^"+this.monthsShort(e,""),this._monthsParse[b]=RegExp(e.replace(".",""),"i")),this._monthsParse[b].test(a))return b},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(a){return this._weekdays[a.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(a){return this._weekdaysShort[a.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),
weekdaysMin:function(a){return this._weekdaysMin[a.day()]},weekdaysParse:function(a){var b,e;if(!this._weekdaysParse)this._weekdaysParse=[];for(b=0;b<7;b++)if(this._weekdaysParse[b]||(e=v([2E3,1]).day(b),e="^"+this.weekdays(e,"")+"|^"+this.weekdaysShort(e,"")+"|^"+this.weekdaysMin(e,""),this._weekdaysParse[b]=RegExp(e.replace(".",""),"i")),this._weekdaysParse[b].test(a))return b},_longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D YYYY",LLL:"MMMM D YYYY LT",LLLL:"dddd, MMMM D YYYY LT"},longDateFormat:function(a){var b=
this._longDateFormat[a];!b&&this._longDateFormat[a.toUpperCase()]&&(b=this._longDateFormat[a.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(a){return a.slice(1)}),this._longDateFormat[a]=b);return b},isPM:function(a){return(a+"").toLowerCase()[0]==="p"},_meridiemParse:/[ap]\.?m?\.?/i,meridiem:function(a,b,e){return a>11?e?"pm":"PM":e?"am":"AM"},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},
calendar:function(a,b){var e=this._calendar[a];return typeof e==="function"?e.apply(b):e},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(a,b,e,c){var d=this._relativeTime[e];return typeof d==="function"?d(a,b,e,c):d.replace(/%d/i,a)},pastFuture:function(a,b){var e=this._relativeTime[a>0?"future":"past"];return typeof e==="function"?
e(b):e.replace(/%s/i,b)},ordinal:function(a){return this._ordinal.replace("%d",a)},_ordinal:"%d",preparse:function(a){return a},postformat:function(a){return a},week:function(a){return q(a,this._week.dow,this._week.doy).week},_week:{dow:0,doy:6}};v=function(a,b,e){return s({_i:a,_f:b,_l:e,_isUTC:!1})};v.utc=function(a,b,e){return s({_useUTC:!0,_isUTC:!0,_l:e,_i:a,_f:b})};v.unix=function(a){return v(a*1E3)};v.duration=function(a,b){var e=v.isDuration(a),c=typeof a==="number",d=e?a._input:c?{}:a,g=
R.exec(a);c?b?d[b]=a:d.milliseconds=a:g&&(c=g[1]==="-"?-1:1,d={y:0,d:~~g[2]*c,h:~~g[3]*c,m:~~g[4]*c,s:~~g[5]*c,ms:~~g[6]*c});g=new f(d);if(e&&a.hasOwnProperty("_lang"))g._lang=a._lang;return g};v.version="2.1.0";v.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";v.updateOffset=function(){};v.lang=function(a,e){if(!a)return v.fn._lang._abbr;e?(e.abbr=a,I[a]||(I[a]=new b),I[a].set(e)):I[a]||h(a);v.duration.fn._lang=v.fn._lang=h(a)};v.langData=function(a){if(a&&a._lang&&a._lang._abbr)a=a._lang._abbr;return h(a)};
v.isMoment=function(a){return a instanceof e};v.isDuration=function(a){return a instanceof f};v.fn=e.prototype={clone:function(){return v(this)},valueOf:function(){return+this._d+(this._offset||0)*6E4},unix:function(){return Math.floor(+this/1E3)},toString:function(){return this.format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._offset?new Date(+this):this._d},toISOString:function(){return t(v(this).utc(),"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){return[this.year(),
this.month(),this.date(),this.hours(),this.minutes(),this.seconds(),this.milliseconds()]},isValid:function(){if(this._isValid==null)this._isValid=this._a?!o(this._a,(this._isUTC?v.utc(this._a):v(this._a)).toArray()):!isNaN(this._d.getTime());return!!this._isValid},utc:function(){return this.zone(0)},local:function(){this.zone(0);this._isUTC=!1;return this},format:function(a){a=t(this,a||v.defaultFormat);return this.lang().postformat(a)},add:function(a,b){var e;e=typeof a==="string"?v.duration(+b,
a):v.duration(a,b);l(this,e,1);return this},subtract:function(a,b){var e;e=typeof a==="string"?v.duration(+b,a):v.duration(a,b);l(this,e,-1);return this},diff:function(a,b,e){a=this._isUTC?v(a).zone(this._offset||0):v(a).local();var c=(this.zone()-a.zone())*6E4,d;b=p(b);b==="year"||b==="month"?(d=(this.daysInMonth()+a.daysInMonth())*432E5,c=(this.year()-a.year())*12+(this.month()-a.month()),c+=(this-v(this).startOf("month")-(a-v(a).startOf("month")))/d,c-=(this.zone()-v(this).startOf("month").zone()-
(a.zone()-v(a).startOf("month").zone()))*6E4/d,b==="year"&&(c/=12)):(d=this-a,c=b==="second"?d/1E3:b==="minute"?d/6E4:b==="hour"?d/36E5:b==="day"?(d-c)/864E5:b==="week"?(d-c)/6048E5:d);return e?c:j(c)},from:function(a,b){return v.duration(this.diff(a)).lang(this.lang()._abbr).humanize(!b)},fromNow:function(a){return this.from(v(),a)},calendar:function(){var a=this.diff(v().startOf("day"),"days",!0);return this.format(this.lang().calendar(a<-6?"sameElse":a<-1?"lastWeek":a<0?"lastDay":a<1?"sameDay":
a<2?"nextDay":a<7?"nextWeek":"sameElse",this))},isLeapYear:function(){var a=this.year();return a%4===0&&a%100!==0||a%400===0},isDST:function(){return this.zone()<this.clone().month(0).zone()||this.zone()<this.clone().month(5).zone()},day:function(a){var b=this._isUTC?this._d.getUTCDay():this._d.getDay();if(a!=null){if(typeof a==="string"&&(a=this.lang().weekdaysParse(a),typeof a!=="number"))return this;return this.add({d:a-b})}else return b},month:function(a){var b=this._isUTC?"UTC":"",e;if(a!=null){if(typeof a===
"string"&&(a=this.lang().monthsParse(a),typeof a!=="number"))return this;e=this.date();this.date(1);this._d["set"+b+"Month"](a);this.date(Math.min(e,this.daysInMonth()));v.updateOffset(this);return this}else return this._d["get"+b+"Month"]()},startOf:function(a){a=p(a);switch(a){case "year":this.month(0);case "month":this.date(1);case "week":case "day":this.hours(0);case "hour":this.minutes(0);case "minute":this.seconds(0);case "second":this.milliseconds(0)}a==="week"&&this.weekday(0);return this},
endOf:function(a){return this.startOf(a).add(a,1).subtract("ms",1)},isAfter:function(a,b){b=typeof b!=="undefined"?b:"millisecond";return+this.clone().startOf(b)>+v(a).startOf(b)},isBefore:function(a,b){b=typeof b!=="undefined"?b:"millisecond";return+this.clone().startOf(b)<+v(a).startOf(b)},isSame:function(a,b){b=typeof b!=="undefined"?b:"millisecond";return+this.clone().startOf(b)===+v(a).startOf(b)},min:function(a){a=v.apply(null,arguments);return a<this?this:a},max:function(a){a=v.apply(null,
arguments);return a>this?this:a},zone:function(a){var b=this._offset||0;if(a!=null)typeof a==="string"&&(a=n(a)),Math.abs(a)<16&&(a*=60),this._offset=a,this._isUTC=!0,b!==a&&l(this,v.duration(b-a,"m"),1,!0);else return this._isUTC?b:this._d.getTimezoneOffset();return this},zoneAbbr:function(){return this._isUTC?"UTC":""},zoneName:function(){return this._isUTC?"Coordinated Universal Time":""},daysInMonth:function(){return v.utc([this.year(),this.month()+1,0]).date()},dayOfYear:function(a){var b=G((v(this).startOf("day")-
v(this).startOf("year"))/864E5)+1;return a==null?b:this.add("d",a-b)},weekYear:function(a){var b=q(this,this.lang()._week.dow,this.lang()._week.doy).year;return a==null?b:this.add("y",a-b)},isoWeekYear:function(a){var b=q(this,1,4).year;return a==null?b:this.add("y",a-b)},week:function(a){var b=this.lang().week(this);return a==null?b:this.add("d",(a-b)*7)},isoWeek:function(a){var b=q(this,1,4).week;return a==null?b:this.add("d",(a-b)*7)},weekday:function(a){var b=(this._d.getDay()+7-this.lang()._week.dow)%
7;return a==null?b:this.add("d",a-b)},isoWeekday:function(a){return a==null?this.day()||7:this.day(this.day()%7?a:a-7)},lang:function(b){return b===a?this._lang:(this._lang=h(b),this)}};for(E=0;E<U.length;E++)B(U[E].toLowerCase().replace(/s$/,""),U[E]);B("year","FullYear");v.fn.days=v.fn.day;v.fn.months=v.fn.month;v.fn.weeks=v.fn.week;v.fn.isoWeeks=v.fn.isoWeek;v.fn.toJSON=v.fn.toISOString;v.duration.fn=f.prototype={_bubble:function(){var a=this._milliseconds,b=this._days,e=this._months,c=this._data;
c.milliseconds=a%1E3;a=j(a/1E3);c.seconds=a%60;a=j(a/60);c.minutes=a%60;a=j(a/60);c.hours=a%24;b+=j(a/24);c.days=b%30;e+=j(b/30);c.months=e%12;b=j(e/12);c.years=b},weeks:function(){return j(this.days()/7)},valueOf:function(){return this._milliseconds+this._days*864E5+this._months%12*2592E6+~~(this._months/12)*31536E6},humanize:function(a){var b=+this,e;e=!a;var c=this.lang(),d=G(Math.abs(b)/1E3),f=G(d/60),g=G(f/60),n=G(g/24),h=G(n/365);d=d<45&&["s",d]||f===1&&["m"]||f<45&&["mm",f]||g===1&&["h"]||
g<22&&["hh",g]||n===1&&["d"]||n<=25&&["dd",n]||n<=45&&["M"]||n<345&&["MM",G(n/30)]||h===1&&["y"]||["yy",h];d[2]=e;d[3]=b>0;d[4]=c;e=z.apply({},d);a&&(e=this.lang().pastFuture(b,e));return this.lang().postformat(e)},add:function(a,b){var e=v.duration(a,b);this._milliseconds+=e._milliseconds;this._days+=e._days;this._months+=e._months;this._bubble();return this},subtract:function(a,b){var e=v.duration(a,b);this._milliseconds-=e._milliseconds;this._days-=e._days;this._months-=e._months;this._bubble();
return this},get:function(a){a=p(a);return this[a.toLowerCase()+"s"]()},as:function(a){a=p(a);return this["as"+a.charAt(0).toUpperCase()+a.slice(1)+"s"]()},lang:v.fn.lang};for(E in W)W.hasOwnProperty(E)&&(T(E,W[E]),F(E.toLowerCase()));T("Weeks",6048E5);v.duration.fn.asMonths=function(){return(+this-this.years()*31536E6)/2592E6+this.years()*12};v.lang("en",{ordinal:function(a){var b=a%10;return a+(~~(a%100/10)===1?"th":b===1?"st":b===2?"nd":b===3?"rd":"th")}});if(K)module.exports=v;typeof ender===
"undefined"&&(this.moment=v);typeof define==="function"&&define.amd&&define("moment",[],function(){return v})}).call(this);
(function(a){function d(a){for(;a=a.parentNode;)if(a==document)return!0;return!1}function c(b,c){this.$element=a(b);this.options=c;this.enabled=!0;this.fixTitle()}var b=0;c.prototype={show:function(){if(d(this.$element[0])&&(!(typeof HTMLElement==="object"?this.$element instanceof HTMLElement:this.$element&&typeof this.$element==="object"&&this.$element.nodeType===1&&typeof this.$element.nodeName==="string")||this.$element.is(":visible"))){var e;if(this.enabled&&(e=this.getTitle())){var c=this.tip();
c.find(".tipsy-inner"+this.options.theme)[this.options.html?"html":"text"](e);c[0].className="tipsy"+this.options.theme;this.options.className&&c.addClass(typeof this.options.className=="function"?this.options.className.call(this.$element[0]):this.options.className);c.remove().css({top:0,left:0,visibility:"hidden",display:"block"}).prependTo(document.body);e=a.extend({},this.$element.offset());e=this.$element.parents("svg").size()>0?a.extend(e,this.$element[0].getBBox()):a.extend(e,{width:this.$element[0].offsetWidth||
0,height:this.$element[0].offsetHeight||0});var g=c[0].offsetWidth,j=c[0].offsetHeight,k=typeof this.options.gravity=="function"?this.options.gravity.call(this.$element[0]):this.options.gravity,l;switch(k.charAt(0)){case "n":l={top:e.top+e.height+this.options.offset,left:e.left+e.width/2-g/2};break;case "s":l={top:e.top-j-this.options.offset,left:e.left+e.width/2-g/2};break;case "e":l={top:e.top+e.height/2-j/2,left:e.left-g-this.options.offset};break;case "w":l={top:e.top+e.height/2-j/2,left:e.left+
e.width+this.options.offset}}if(k.length==2)l.left=k.charAt(1)=="w"?e.left+e.width/2-15:e.left+e.width/2-g+15;c.css(l).addClass("tipsy-"+k+this.options.theme);c.find(".tipsy-arrow"+this.options.theme)[0].className="tipsy-arrow"+this.options.theme+" tipsy-arrow-"+k.charAt(0)+this.options.theme;this.options.fade?(this.options.shadow&&a(".tipsy-inner").css({"box-shadow":"0px 0px "+this.options.shadowBlur+"px "+this.options.shadowSpread+"px rgba(0, 0, 0, "+this.options.shadowOpacity+")","-webkit-box-shadow":"0px 0px "+
this.options.shadowBlur+"px "+this.options.shadowSpread+"px rgba(0, 0, 0, "+this.options.shadowOpacity+")"}),c.stop().css({opacity:0,display:"block",visibility:"visible"}).animate({opacity:this.options.opacity})):c.css({visibility:"visible",opacity:this.options.opacity});this.options.aria&&(l="tipsyuid"+b++,c.attr("id",l),this.$element.attr("aria-describedby",l))}}},hide:function(){this.options.fade?this.tip().stop().fadeOut(function(){a(this).remove()}):this.tip().remove();this.options.aria&&this.$element.removeAttr("aria-describedby")},
fixTitle:function(){var a=this.$element;if(a.attr("title")||typeof a.attr("original-title")!="string")a.attr("original-title",a.attr("title")||"").removeAttr("title")},getTitle:function(){var a,b=this.$element,c=this.options;this.fixTitle();typeof c.title=="string"?a=b.attr(c.title=="title"?"original-title":c.title):typeof c.title=="function"&&(a=c.title.call(b[0]));return(a=(""+a).replace(/(^\s*|\s*$)/,""))||c.fallback},tip:function(){if(!this.$tip)this.$tip=a('<div class="tipsy'+this.options.theme+
'"></div>').html('<div class="tipsy-arrow'+this.options.theme+'"></div><div class="tipsy-inner'+this.options.theme+'"></div>').attr("role","tooltip"),this.$tip.data("tipsy-pointee",this.$element[0]);return this.$tip},validate:function(){if(!this.$element[0].parentNode)this.hide(),this.options=this.$element=null},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},toggleEnabled:function(){this.enabled=!this.enabled}};a.fn.tipsy=function(b){function f(d){var f=a.data(d,"tipsy");f||
(f=new c(d,a.fn.tipsy.elementOptions(d,b)),a.data(d,"tipsy",f));return f}function g(){if(a.fn.tipsy.enabled===!0){var c=f(this);c.hoverState="in";b.delayIn===0?c.show():(c.fixTitle(),setTimeout(function(){c.hoverState=="in"&&d(c.$element)&&c.show()},b.delayIn))}}function j(){var a=f(this);a.hoverState="out";b.delayOut===0?a.hide():setTimeout(function(){(a.hoverState=="out"||!a.$element||!a.$element.is(":visible"))&&a.hide()},b.delayOut)}a.fn.tipsy.enable();if(b===!0)return this.data("tipsy");else if(typeof b==
"string"){var k=this.data("tipsy");if(k)k[b]();return this}b=a.extend({},a.fn.tipsy.defaults,b);b.theme=b.theme&&b.theme!==""?"-"+b.theme:"";b.live||this.each(function(){f(this)});if(b.trigger!="manual"){k=b.trigger=="hover"?"mouseenter mouseover":"focus";var l=b.trigger=="hover"?"mouseleave mouseout":"blur";if(b.live&&b.live!==!0)a(this).on(k,b.live,g),a(this).on(l,b.live,j);else{if(b.live&&!a.live)throw"Since jQuery 1.9, pass selector as live argument. eg. $(document).tipsy({live: 'a.live'});";
var o=b.live?"live":"bind";this[o](k,g)[o](l,j)}}return this};a.fn.tipsy.defaults={aria:!1,className:null,delayIn:0,delayOut:0,fade:!1,shadow:!1,shadowBlur:8,shadowOpacity:1,shadowSpread:0,fallback:"",gravity:"n",html:!1,live:!1,offset:0,opacity:0.8,title:"title",trigger:"hover",theme:""};a.fn.tipsy.revalidate=function(){a(".tipsy").each(function(){var b=a.data(this,"tipsy-pointee");(!b||!d(b))&&a(this).remove()})};a.fn.tipsy.enable=function(){a.fn.tipsy.enabled=!0};a.fn.tipsy.disable=function(){a.fn.tipsy.enabled=
!1};a.fn.tipsy.elementOptions=function(b,c){return a.metadata?a.extend({},c,a(b).metadata()):c};a.fn.tipsy.autoNS=function(){return a(this).offset().top>a(document).scrollTop()+a(window).height()/2?"s":"n"};a.fn.tipsy.autoWE=function(){return a(this).offset().left>a(document).scrollLeft()+a(window).width()/2?"e":"w"};a.fn.tipsy.autoNWNE=function(){return a(this).offset().left>a(document).scrollLeft()+a(window).width()/2?"ne":"nw"};a.fn.tipsy.autoSWSE=function(){return a(this).offset().left>a(document).scrollLeft()+
a(window).width()/2?"se":"sw"};a.fn.tipsy.autoBounds=function(b,c,d){return function(){var j={ns:d[0],ew:d.length>1?d[1]:!1},k=a(document).scrollTop()+b,l=a(document).scrollLeft()+c,o=a(this);if(o.offset().top<k)j.ns="n";if(o.offset().left<l)j.ew="w";if(a(window).width()+a(document).scrollLeft()-o.offset().left<c)j.ew="e";if(a(window).height()+a(document).scrollTop()-o.offset().top<b)j.ns="s";return j.ns+(j.ew?j.ew:"")}}})(jQuery);
(function(a){function d(a){return typeof a=="object"?a:{top:a,left:a}}var c=a.scrollTo=function(b,e,c){a(window).scrollTo(b,e,c)};c.defaults={axis:"xy",duration:parseFloat(a.fn.jquery)>=1.3?0:1,limit:!0};c.window=function(){return a(window)._scrollable()};a.fn._scrollable=function(){return this.map(function(){if(this.nodeName&&a.inArray(this.nodeName.toLowerCase(),["iframe","#document","html","body"])==-1)return this;var b=(this.contentWindow||this).document||this.ownerDocument||this;return/webkit/i.test(navigator.userAgent)||
b.compatMode=="BackCompat"?b.body:b.documentElement})};a.fn.scrollTo=function(b,e,f){typeof e=="object"&&(f=e,e=0);typeof f=="function"&&(f={onAfter:f});b=="max"&&(b=9E9);f=a.extend({},c.defaults,f);e=e||f.duration;f.queue=f.queue&&f.axis.length>1;f.queue&&(e/=2);f.offset=d(f.offset);f.over=d(f.over);return this._scrollable().each(function(){function g(a){k.animate(p,e,f.easing,a&&function(){a.call(this,l,f)})}if(b!=null){var j=this,k=a(j),l=b,o,p={},h=k.is("html,body");switch(typeof l){case "number":case "string":if(/^([+-]=?)?\d+(\.\d+)?(px|%)?$/.test(l)){l=
d(l);break}l=a(l,this);if(!l.length)return;case "object":if(l.is||l.style)o=(l=a(l)).offset()}a.each(f.axis.split(""),function(a,b){var e=b=="x"?"Left":"Top",d=e.toLowerCase(),n="scroll"+e,r=j[n],u=c.max(j,b);o?(p[n]=o[d]+(h?0:r-k.offset()[d]),f.margin&&(p[n]-=parseInt(l.css("margin"+e))||0,p[n]-=parseInt(l.css("border"+e+"Width"))||0),p[n]+=f.offset[d]||0,f.over[d]&&(p[n]+=l[b=="x"?"width":"height"]()*f.over[d])):(e=l[d],p[n]=e.slice&&e.slice(-1)=="%"?parseFloat(e)/100*u:e);f.limit&&/^\d+$/.test(p[n])&&
(p[n]=p[n]<=0?0:Math.min(p[n],u));!a&&f.queue&&(r!=p[n]&&g(f.onAfterFirst),delete p[n])});g(f.onAfter)}}).end()};c.max=function(b,e){var c=e=="x"?"Width":"Height",d="scroll"+c;if(!a(b).is("html,body"))return b[d]-a(b)[c.toLowerCase()]();c="client"+c;var j=b.ownerDocument.documentElement,k=b.ownerDocument.body;return Math.max(j[d],k[d])-Math.min(j[c],k[c])}})(jQuery);
(function(a){var d=".serialScroll",c=a.serialScroll=function(b){return a(window).serialScroll(b)};c.defaults={duration:1E3,axis:"x",event:"click",start:0,step:1,lock:!0,cycle:!0,constant:!0};a.fn.serialScroll=function(b){return this.each(function(){function e(a){a.data+=r;f(a,this)}function f(a,b){if(isNaN(b))b=a.data;var e,c=a.type,d=o.exclude?j().slice(0,-o.exclude):j(),f=d.length-1;e=d[b];var n=o.duration;c&&a.preventDefault();u&&(clearTimeout(q),q=setTimeout(g,o.interval));if(!e){e=b<0?0:f;if(r!==
e)b=e;else if(o.cycle)b=f-e;else return;e=d[b]}if(e&&!(o.lock&&t._scrollable().is(":animated")||c&&o.onBefore&&o.onBefore(a,e,t,j(),b)===!1))o.stop&&t._scrollable().stop(!0),o.constant&&(n=Math.abs(n/h*(r-b))),t.scrollTo(e,n,o),k("notify",b)}function g(){k("next")}function j(){return a(n,x)}function k(a){t.trigger(a+d,[].slice.call(arguments,1))}function l(a){if(!isNaN(a))return a;for(var b=j(),e;(e=b.index(a))===-1&&a!==x;)a=a.parentNode;return e}var o=a.extend({},c.defaults,b),p=o.event,h=o.step,
m=o.lazy,w=o.target?this:document,t=a(o.target||this,w),x=t[0],n=o.items,r=o.start,u=o.interval,z=o.navigation,q;if(x)m||(n=j()),(o.force||u)&&f({},r),a(o.prev||[],w).bind(p,-h,e),a(o.next||[],w).bind(p,h,e),x.ssbound||t.bind("prev"+d,-h,e).bind("next"+d,h,e).bind("goto"+d,f),u&&t.bind("start"+d,function(){u||(clearTimeout(q),u=!0,g())}).bind("stop"+d,function(){clearTimeout(q);u=!1}),t.bind("notify"+d,function(a,b){var e=l(b);e>-1&&(r=e)}),x.ssbound=!0,o.jump&&(m?t:j()).bind(p,function(a){f(a,l(a.target))}),
z&&(z=a(z,w).bind(p,function(a){a.data=Math.round(j().length/z.length)*z.index(this);f(a,this)}))})}})(jQuery);
(function(a){a.color={};a.color.make=function(c,b,e,d){var g={};g.r=c||0;g.g=b||0;g.b=e||0;g.a=d!=null?d:1;g.add=function(a,b){for(var e=0;e<a.length;++e)g[a.charAt(e)]+=b;return g.normalize()};g.scale=function(a,b){for(var e=0;e<a.length;++e)g[a.charAt(e)]*=b;return g.normalize()};g.toString=function(){return g.a>=1?"rgb("+[g.r,g.g,g.b].join(",")+")":"rgba("+[g.r,g.g,g.b,g.a].join(",")+")"};g.normalize=function(){function a(b,e,c){return e<b?b:e>c?c:e}g.r=a(0,parseInt(g.r),255);g.g=a(0,parseInt(g.g),
255);g.b=a(0,parseInt(g.b),255);g.a=a(0,g.a,1);return g};g.clone=function(){return a.color.make(g.r,g.b,g.g,g.a)};return g.normalize()};a.color.extract=function(c,b){var e;do{e=c.css(b).toLowerCase();if(e!=""&&e!="transparent")break;c=c.parent()}while(!a.nodeName(c.get(0),"body"));e=="rgba(0, 0, 0, 0)"&&(e="transparent");return a.color.parse(e)};a.color.parse=function(c){var b,e=a.color.make;if(b=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(c))return e(parseInt(b[1],10),
parseInt(b[2],10),parseInt(b[3],10));if(b=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(c))return e(parseInt(b[1],10),parseInt(b[2],10),parseInt(b[3],10),parseFloat(b[4]));if(b=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(c))return e(parseFloat(b[1])*2.55,parseFloat(b[2])*2.55,parseFloat(b[3])*2.55);if(b=/rgba\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(c))return e(parseFloat(b[1])*
2.55,parseFloat(b[2])*2.55,parseFloat(b[3])*2.55,parseFloat(b[4]));if(b=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(c))return e(parseInt(b[1],16),parseInt(b[2],16),parseInt(b[3],16));if(b=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(c))return e(parseInt(b[1]+b[1],16),parseInt(b[2]+b[2],16),parseInt(b[3]+b[3],16));c=a.trim(c).toLowerCase();return c=="transparent"?e(255,255,255,0):(b=d[c]||[0,0,0],e(b[0],b[1],b[2]))};var d={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,
0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,
211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0]}})(jQuery);
(function(a){function d(b,c){var d=c.children("."+b)[0];if(d==null&&(d=document.createElement("canvas"),d.className=b,a(d).css({direction:"ltr",position:"absolute",left:0,top:0}).appendTo(c),!d.getContext))if(window.G_vmlCanvasManager)d=window.G_vmlCanvasManager.initElement(d);else throw Error("Canvas is not available. If you're using IE with a fall-back such as Excanvas, then there's either a mistake in your conditional include, or the page has no DOCTYPE and is rendering in Quirks Mode.");this.element=
d;d=this.context=d.getContext("2d");this.pixelRatio=(window.devicePixelRatio||1)/(d.webkitBackingStorePixelRatio||d.mozBackingStorePixelRatio||d.msBackingStorePixelRatio||d.oBackingStorePixelRatio||d.backingStorePixelRatio||1);this.resize(c.width(),c.height());this.textContainer=null;this.text={};this._textCache={}}function c(b,c,g,j){function k(a,b){b=[P].concat(b);for(var e=0;e<a.length;++e)a[e].apply(this,b)}function l(b){for(var e=[],c=0;c<b.length;++c){var d=a.extend(!0,{},y.series);b[c].data!=
null?(d.data=b[c].data,delete b[c].data,a.extend(!0,d,b[c]),b[c].data=d.data):d.data=b[c];e.push(d)}H=e;c=H.length;e=-1;for(b=0;b<H.length;++b)d=H[b].color,d!=null&&(c--,typeof d=="number"&&d>e&&(e=d));c<=e&&(c=e+1);e=[];var f=y.colors,g=f.length,n=0;for(b=0;b<c;b++)d=a.color.parse(f[b%g]||"#666"),b%g==0&&b&&(n=n>=0?n<0.5?-n-0.2:0:-n),e[b]=d.scale("rgb",1+n);for(b=c=0;b<H.length;++b){d=H[b];if(d.color==null)d.color=e[c].toString(),++c;else if(typeof d.color=="number")d.color=e[d.color].toString();
if(d.lines.show==null){var h;f=!0;for(h in d)if(d[h]&&d[h].show){f=!1;break}if(f)d.lines.show=!0}if(d.lines.zero==null)d.lines.zero=!!d.lines.fill;d.xaxis=m(W,o(d,"x"));d.yaxis=m(Z,o(d,"y"))}w()}function o(a,b){var e=a[b+"axis"];if(typeof e=="object")e=e.n;typeof e!="number"&&(e=1);return e}function p(){return a.grep(W.concat(Z),function(a){return a})}function h(a){var b={},e,c;for(e=0;e<W.length;++e)(c=W[e])&&c.used&&(b["x"+c.n]=c.c2p(a.left));for(e=0;e<Z.length;++e)(c=Z[e])&&c.used&&(b["y"+c.n]=
c.c2p(a.top));if(b.x1!==void 0)b.x=b.x1;if(b.y1!==void 0)b.y=b.y1;return b}function m(b,e){b[e-1]||(b[e-1]={n:e,direction:b==W?"x":"y",options:a.extend(!0,{},b==W?y.xaxis:y.yaxis)});return b[e-1]}function w(){function b(a,e,c){if(e<a.datamin&&e!=-d)a.datamin=e;if(c>a.datamax&&c!=d)a.datamax=c}var e=Number.POSITIVE_INFINITY,c=Number.NEGATIVE_INFINITY,d=Number.MAX_VALUE,f,g,n,h,s,j,l,r,q,B,t,u;a.each(p(),function(a,b){b.datamin=e;b.datamax=c;b.used=!1});for(f=0;f<H.length;++f)s=H[f],s.datapoints={points:[]},
k(Q.processRawData,[s,s.data,s.datapoints]);for(f=0;f<H.length;++f){s=H[f];t=s.data;u=s.datapoints.format;if(!u){u=[];u.push({x:!0,number:!0,required:!0});u.push({y:!0,number:!0,required:!0});if(s.bars.show||s.lines.show&&s.lines.fill)if(u.push({y:!0,number:!0,required:!1,defaultValue:0,autoscale:!!(s.bars.show&&s.bars.zero||s.lines.show&&s.lines.zero)}),s.bars.horizontal)delete u[u.length-1].y,u[u.length-1].x=!0;s.datapoints.format=u}if(s.datapoints.pointsize==null){s.datapoints.pointsize=u.length;
l=s.datapoints.pointsize;j=s.datapoints.points;var o=s.lines.show&&s.lines.steps;s.xaxis.used=s.yaxis.used=!0;for(g=n=0;g<t.length;++g,n+=l){B=t[g];var x=B==null;if(!x)for(h=0;h<l;++h){r=B[h];if(q=u[h])if(q.number&&r!=null&&(r=+r,isNaN(r)?r=null:r==Infinity?r=d:r==-Infinity&&(r=-d)),r==null&&(q.required&&(x=!0),q.defaultValue!=null))r=q.defaultValue;j[n+h]=r}if(x)for(h=0;h<l;++h)r=j[n+h],r!=null&&(q=u[h],q.autoscale&&(q.x&&b(s.xaxis,r,r),q.y&&b(s.yaxis,r,r))),j[n+h]=null;else if(o&&n>0&&j[n-l]!=null&&
j[n-l]!=j[n]&&j[n-l+1]!=j[n+1]){for(h=0;h<l;++h)j[n+l+h]=j[n+h];j[n+1]=j[n-l+1];n+=l}}}}for(f=0;f<H.length;++f)s=H[f],k(Q.processDatapoints,[s,s.datapoints]);for(f=0;f<H.length;++f){s=H[f];j=s.datapoints.points;l=s.datapoints.pointsize;u=s.datapoints.format;B=n=e;o=t=c;for(g=0;g<j.length;g+=l)if(j[g]!=null)for(h=0;h<l;++h)if(r=j[g+h],(q=u[h])&&!(q.autoscale===!1||r==d||r==-d))q.x&&(r<n&&(n=r),r>t&&(t=r)),q.y&&(r<B&&(B=r),r>o&&(o=r));if(s.bars.show){switch(s.bars.align){case "left":g=0;break;case "right":g=
-s.bars.barWidth;break;case "center":g=-s.bars.barWidth/2;break;default:throw Error("Invalid bar alignment: "+s.bars.align);}s.bars.horizontal?(B+=g,o+=g+s.bars.barWidth):(n+=g,t+=g+s.bars.barWidth)}b(s.xaxis,n,t);b(s.yaxis,B,o)}a.each(p(),function(a,b){if(b.datamin==e)b.datamin=null;if(b.datamax==c)b.datamax=null})}function t(a){function b(a){return a}var e,c,d=a.options.transform||b,f=a.options.inverseTransform;a.direction=="x"?(e=a.scale=aa/Math.abs(d(a.max)-d(a.min)),c=Math.min(d(a.max),d(a.min))):
(e=a.scale=Y/Math.abs(d(a.max)-d(a.min)),e=-e,c=Math.max(d(a.max),d(a.min)));a.p2c=d==b?function(a){return(a-c)*e}:function(a){return(d(a)-c)*e};a.c2p=f?function(a){return f(c+a/e)}:function(a){return c+a/e}}function x(b){var e=b.labelWidth,c=b.labelHeight,d=b.options.position,f=b.options.tickLength,g=y.grid.axisMargin,n=y.grid.labelMargin,h=b.direction=="x"?W:Z,s,k=a.grep(h,function(a){return a&&a.options.position==d&&a.reserveSpace});a.inArray(b,k)==k.length-1&&(g=0);f==null&&(f=a.grep(h,function(a){return a&&
a.reserveSpace}),f=(s=a.inArray(b,f)==0)?"full":5);isNaN(+f)||(n+=+f);b.direction=="x"?(c+=n,d=="bottom"?(D.bottom+=c+g,b.box={top:M.height-D.bottom,height:c}):(b.box={top:D.top+g,height:c},D.top+=c+g)):(e+=n,d=="left"?(b.box={left:D.left+g,width:e},D.left+=e+g):(D.right+=e+g,b.box={left:M.width-D.right,width:e}));b.position=d;b.tickLength=f;b.box.padding=n;b.innermost=s}function n(){var b=y.grid.minBorderMargin,e={x:0,y:0},c;if(b==null)for(c=b=0;c<H.length;++c)b=Math.max(b,2*(H[c].points.radius+
H[c].points.lineWidth/2));e.x=e.y=Math.ceil(b);a.each(p(),function(a,b){var c=b.direction;b.reserveSpace&&(e[c]=Math.ceil(Math.max(e[c],(c=="x"?b.labelWidth:b.labelHeight)/2)))});D.left=Math.max(e.x,D.left);D.right=Math.max(e.x,D.right);D.top=Math.max(e.y,D.top);D.bottom=Math.max(e.y,D.bottom)}function r(){var b,e=p(),c=y.grid.show;for(b in D){var d=y.grid.margin||0;D[b]=typeof d=="number"?d:d[b]||0}k(Q.processOffset,[D]);for(b in D)D[b]+=typeof y.grid.borderWidth=="object"?c?y.grid.borderWidth[b]:
0:c?y.grid.borderWidth:0;a.each(e,function(a,b){b.show=b.options.show;if(b.show==null)b.show=b.used;b.reserveSpace=b.show||b.options.reserveSpace;var e=b.options,c=+(e.min!=null?e.min:b.datamin),d=+(e.max!=null?e.max:b.datamax),f=d-c;if(f==0){if(f=d==0?1:0.01,e.min==null&&(c-=f),e.max==null||e.min!=null)d+=f}else{var g=e.autoscaleMargin;g!=null&&(e.min==null&&(c-=f*g,c<0&&b.datamin!=null&&b.datamin>=0&&(c=0)),e.max==null&&(d+=f*g,d>0&&b.datamax!=null&&b.datamax<=0&&(d=0)))}b.min=c;b.max=d});if(c){d=
a.grep(e,function(a){return a.reserveSpace});a.each(d,function(b,e){u(e);var c=e.options.ticks,d=[];c==null||typeof c=="number"&&c>0?d=e.tickGenerator(e):c&&(d=a.isFunction(c)?c(e):c);var f;e.ticks=[];for(c=0;c<d.length;++c){var g=null,n=d[c];typeof n=="object"?(f=+n[0],n.length>1&&(g=n[1])):f=+n;g==null&&(g=e.tickFormatter(f,e));isNaN(f)||e.ticks.push({v:f,label:g})}d=e.ticks;if(e.options.autoscaleMargin&&d.length>0){if(e.options.min==null)e.min=Math.min(e.min,d[0].v);if(e.options.max==null&&d.length>
1)e.max=Math.max(e.max,d[d.length-1].v)}d=e.options;c=e.ticks||[];f=d.labelWidth||0;g=d.labelHeight||0;n=f||e.direction=="x"?Math.floor(M.width/(c.length||1)):null;legacyStyles=e.direction+"Axis "+e.direction+e.n+"Axis";layer="flot-"+e.direction+"-axis flot-"+e.direction+e.n+"-axis "+legacyStyles;font=d.font||"flot-tick-label tickLabel";for(var h=0;h<c.length;++h){var s=c[h];s.label&&(s=M.getTextInfo(layer,s.label,font,null,n),f=Math.max(f,s.width),g=Math.max(g,s.height))}e.labelWidth=d.labelWidth||
f;e.labelHeight=d.labelHeight||g});for(b=d.length-1;b>=0;--b)x(d[b]);n();a.each(d,function(a,b){b.direction=="x"?(b.box.left=D.left-b.labelWidth/2,b.box.width=M.width-D.left-D.right+b.labelWidth):(b.box.top=D.top-b.labelHeight/2,b.box.height=M.height-D.bottom-D.top+b.labelHeight)})}aa=M.width-D.left-D.right;Y=M.height-D.bottom-D.top;a.each(e,function(a,b){t(b)});c&&B();I()}function u(b){var e=b.options,c=(b.max-b.min)/(typeof e.ticks=="number"&&e.ticks>0?e.ticks:0.3*Math.sqrt(b.direction=="x"?M.width:
M.height)),d=-Math.floor(Math.log(c)/Math.LN10),f=e.tickDecimals;f!=null&&d>f&&(d=f);var g=Math.pow(10,-d),n=c/g,h;if(n<1.5)h=1;else if(n<3){if(h=2,n>2.25&&(f==null||d+1<=f))h=2.5,++d}else h=n<7.5?5:10;h*=g;if(e.minTickSize!=null&&h<e.minTickSize)h=e.minTickSize;b.delta=c;b.tickDecimals=Math.max(0,f!=null?f:d);b.tickSize=e.tickSize||h;if(e.mode=="time"&&!b.tickGenerator)throw Error("Time mode requires the flot.time plugin.");if(!b.tickGenerator)b.tickGenerator=function(a){var b=[],e=a.tickSize*Math.floor(a.min/
a.tickSize),c=0,d=Number.NaN,f;do f=d,d=e+c*a.tickSize,b.push(d),++c;while(d<a.max&&d!=f);return b},b.tickFormatter=function(a,b){var e=b.tickDecimals?Math.pow(10,b.tickDecimals):1,c=""+Math.round(a*e)/e;if(b.tickDecimals!=null){var d=c.indexOf(".");d=d==-1?0:c.length-d-1;if(d<b.tickDecimals)return(d?c:c+".")+(""+e).substr(1,b.tickDecimals-d)}return c};if(a.isFunction(e.tickFormatter))b.tickFormatter=function(a,b){return""+e.tickFormatter(a,b)};if(e.alignTicksWithAxis!=null){var s=(b.direction=="x"?
W:Z)[e.alignTicksWithAxis-1];if(s&&s.used&&s!=b){c=b.tickGenerator(b);if(c.length>0){if(e.min==null)b.min=Math.min(b.min,c[0]);if(e.max==null&&c.length>1)b.max=Math.max(b.max,c[c.length-1])}b.tickGenerator=function(a){var b=[],e,c;for(c=0;c<s.ticks.length;++c)e=(s.ticks[c].v-s.min)/(s.max-s.min),e=a.min+e*(a.max-a.min),b.push(e);return b};if(!b.mode&&e.tickDecimals==null&&(c=Math.max(0,-Math.floor(Math.log(b.delta)/Math.LN10)+1),d=b.tickGenerator(b),!(d.length>1&&/\..*0$/.test((d[1]-d[0]).toFixed(c)))))b.tickDecimals=
c}}}function z(){M.clear();k(Q.drawBackground,[A]);var a=y.grid;if(a.show&&a.backgroundColor)A.save(),A.translate(D.left,D.top),A.fillStyle=C(y.grid.backgroundColor,Y,0,"rgba(255, 255, 255, 0)"),A.fillRect(0,0,aa,Y),A.restore();a.show&&!a.aboveData&&s();for(var b=0;b<H.length;++b){k(Q.drawSeries,[A,H[b]]);var e=H[b];e.lines.show&&F(e);e.bars.show&&G(e);e.points.show&&T(e)}k(Q.draw,[A]);a.show&&a.aboveData&&s();M.render();J()}function q(a,b){for(var e,c,d,f,g=p(),n=0;n<g.length;++n)if(e=g[n],e.direction==
b&&(f=b+e.n+"axis",!a[f]&&e.n==1&&(f=b+"axis"),a[f])){c=a[f].from;d=a[f].to;break}a[f]||(e=b=="x"?W[0]:Z[0],c=a[b+"1"],d=a[b+"2"]);c!=null&&d!=null&&c>d&&(f=c,c=d,d=f);return{from:c,to:d,axis:e}}function s(){var b,e,c;A.save();A.translate(D.left,D.top);if(c=y.grid.markings){if(a.isFunction(c))e=P.getAxes(),e.xmin=e.xaxis.min,e.xmax=e.xaxis.max,e.ymin=e.yaxis.min,e.ymax=e.yaxis.max,c=c(e);for(b=0;b<c.length;++b){e=c[b];var d=q(e,"x"),f=q(e,"y");if(d.from==null)d.from=d.axis.min;if(d.to==null)d.to=
d.axis.max;if(f.from==null)f.from=f.axis.min;if(f.to==null)f.to=f.axis.max;if(!(d.to<d.axis.min||d.from>d.axis.max||f.to<f.axis.min||f.from>f.axis.max))if(d.from=Math.max(d.from,d.axis.min),d.to=Math.min(d.to,d.axis.max),f.from=Math.max(f.from,f.axis.min),f.to=Math.min(f.to,f.axis.max),!(d.from==d.to&&f.from==f.to))d.from=d.axis.p2c(d.from),d.to=d.axis.p2c(d.to),f.from=f.axis.p2c(f.from),f.to=f.axis.p2c(f.to),d.from==d.to||f.from==f.to?(A.beginPath(),A.strokeStyle=e.color||y.grid.markingsColor,A.lineWidth=
e.lineWidth||y.grid.markingsLineWidth,A.moveTo(d.from,f.from),A.lineTo(d.to,f.to),A.stroke()):(A.fillStyle=e.color||y.grid.markingsColor,A.fillRect(d.from,f.to,d.to-d.from,f.from-f.to))}}e=p();c=y.grid.borderWidth;for(d=0;d<e.length;++d){f=e[d];b=f.box;var g=f.tickLength,n,h,s,k;if(f.show&&f.ticks.length!=0){A.lineWidth=1;f.direction=="x"?(n=0,h=g=="full"?f.position=="top"?0:Y:b.top-D.top+(f.position=="top"?b.height:0)):(h=0,n=g=="full"?f.position=="left"?0:aa:b.left-D.left+(f.position=="left"?b.width:
0));if(!f.innermost)A.strokeStyle=f.options.color,A.beginPath(),s=k=0,f.direction=="x"?s=aa+1:k=Y+1,A.lineWidth==1&&(f.direction=="x"?h=Math.floor(h)+0.5:n=Math.floor(n)+0.5),A.moveTo(n,h),A.lineTo(n+s,h+k),A.stroke();A.strokeStyle=f.options.tickColor;A.beginPath();for(b=0;b<f.ticks.length;++b){var j=f.ticks[b].v;s=k=0;if(!isNaN(j)&&!(j<f.min||j>f.max||g=="full"&&(typeof c=="object"&&c[f.position]>0||c>0)&&(j==f.min||j==f.max)))f.direction=="x"?(n=f.p2c(j),k=g=="full"?-Y:g,f.position=="top"&&(k=-k)):
(h=f.p2c(j),s=g=="full"?-aa:g,f.position=="left"&&(s=-s)),A.lineWidth==1&&(f.direction=="x"?n=Math.floor(n)+0.5:h=Math.floor(h)+0.5),A.moveTo(n,h),A.lineTo(n+s,h+k)}A.stroke()}}if(c)if(b=y.grid.borderColor,typeof c=="object"||typeof b=="object"){typeof c!=="object"&&(c={top:c,right:c,bottom:c,left:c});typeof b!=="object"&&(b={top:b,right:b,bottom:b,left:b});if(c.top>0)A.strokeStyle=b.top,A.lineWidth=c.top,A.beginPath(),A.moveTo(0-c.left,0-c.top/2),A.lineTo(aa,0-c.top/2),A.stroke();if(c.right>0)A.strokeStyle=
b.right,A.lineWidth=c.right,A.beginPath(),A.moveTo(aa+c.right/2,0-c.top),A.lineTo(aa+c.right/2,Y),A.stroke();if(c.bottom>0)A.strokeStyle=b.bottom,A.lineWidth=c.bottom,A.beginPath(),A.moveTo(aa+c.right,Y+c.bottom/2),A.lineTo(0,Y+c.bottom/2),A.stroke();if(c.left>0)A.strokeStyle=b.left,A.lineWidth=c.left,A.beginPath(),A.moveTo(0-c.left/2,Y+c.bottom),A.lineTo(0-c.left/2,0),A.stroke()}else A.lineWidth=c,A.strokeStyle=y.grid.borderColor,A.strokeRect(-c/2,-c/2,aa+c,Y+c);A.restore()}function B(){a.each(p(),
function(a,b){if(b.show&&b.ticks.length!=0){var e=b.box,c="flot-"+b.direction+"-axis flot-"+b.direction+b.n+"-axis "+(b.direction+"Axis "+b.direction+b.n+"Axis"),d=b.options.font||"flot-tick-label tickLabel",f,g,n,h,s;M.removeText(c);for(var k=0;k<b.ticks.length;++k)if(f=b.ticks[k],f.label&&!(f.v<b.min||f.v>b.max))b.direction=="x"?(h="center",g=D.left+b.p2c(f.v),b.position=="bottom"?n=e.top+e.padding:(n=e.top+e.height-e.padding,s="bottom")):(s="middle",n=D.top+b.p2c(f.v),b.position=="left"?(g=e.left+
e.width-e.padding,h="right"):g=e.left+e.padding),M.addText(c,g,n,f.label,d,null,null,h,s)}})}function F(a){function b(a,e,c,d,f){var g=a.points;a=a.pointsize;var n=null,h=null;A.beginPath();for(var s=a;s<g.length;s+=a){var k=g[s-a],j=g[s-a+1],r=g[s],l=g[s+1];if(!(k==null||r==null)){if(j<=l&&j<f.min){if(l<f.min)continue;k=(f.min-j)/(l-j)*(r-k)+k;j=f.min}else if(l<=j&&l<f.min){if(j<f.min)continue;r=(f.min-j)/(l-j)*(r-k)+k;l=f.min}if(j>=l&&j>f.max){if(l>f.max)continue;k=(f.max-j)/(l-j)*(r-k)+k;j=f.max}else if(l>=
j&&l>f.max){if(j>f.max)continue;r=(f.max-j)/(l-j)*(r-k)+k;l=f.max}if(k<=r&&k<d.min){if(r<d.min)continue;j=(d.min-k)/(r-k)*(l-j)+j;k=d.min}else if(r<=k&&r<d.min){if(k<d.min)continue;l=(d.min-k)/(r-k)*(l-j)+j;r=d.min}if(k>=r&&k>d.max){if(r>d.max)continue;j=(d.max-k)/(r-k)*(l-j)+j;k=d.max}else if(r>=k&&r>d.max){if(k>d.max)continue;l=(d.max-k)/(r-k)*(l-j)+j;r=d.max}(k!=n||j!=h)&&A.moveTo(d.p2c(k)+e,f.p2c(j)+c);n=r;h=l;A.lineTo(d.p2c(r)+e,f.p2c(l)+c)}}A.stroke()}function e(a,b,c){var d=a.points;a=a.pointsize;
for(var f=Math.min(Math.max(0,c.min),c.max),g=0,n=!1,h=1,s=0,k=0;;){if(a>0&&g>d.length+a)break;g+=a;var j=d[g-a],r=d[g-a+h],l=d[g],q=d[g+h];if(n){if(a>0&&j!=null&&l==null){k=g;a=-a;h=2;continue}if(a<0&&g==s+a){A.fill();n=!1;a=-a;h=1;g=s=k+a;continue}}if(!(j==null||l==null)){if(j<=l&&j<b.min){if(l<b.min)continue;r=(b.min-j)/(l-j)*(q-r)+r;j=b.min}else if(l<=j&&l<b.min){if(j<b.min)continue;q=(b.min-j)/(l-j)*(q-r)+r;l=b.min}if(j>=l&&j>b.max){if(l>b.max)continue;r=(b.max-j)/(l-j)*(q-r)+r;j=b.max}else if(l>=
j&&l>b.max){if(j>b.max)continue;q=(b.max-j)/(l-j)*(q-r)+r;l=b.max}n||(A.beginPath(),A.moveTo(b.p2c(j),c.p2c(f)),n=!0);if(r>=c.max&&q>=c.max)A.lineTo(b.p2c(j),c.p2c(c.max)),A.lineTo(b.p2c(l),c.p2c(c.max));else if(r<=c.min&&q<=c.min)A.lineTo(b.p2c(j),c.p2c(c.min)),A.lineTo(b.p2c(l),c.p2c(c.min));else{var B=j,p=l;if(r<=q&&r<c.min&&q>=c.min)j=(c.min-r)/(q-r)*(l-j)+j,r=c.min;else if(q<=r&&q<c.min&&r>=c.min)l=(c.min-r)/(q-r)*(l-j)+j,q=c.min;if(r>=q&&r>c.max&&q<=c.max)j=(c.max-r)/(q-r)*(l-j)+j,r=c.max;else if(q>=
r&&q>c.max&&r<=c.max)l=(c.max-r)/(q-r)*(l-j)+j,q=c.max;j!=B&&A.lineTo(b.p2c(B),c.p2c(r));A.lineTo(b.p2c(j),c.p2c(r));A.lineTo(b.p2c(l),c.p2c(q));l!=p&&(A.lineTo(b.p2c(l),c.p2c(q)),A.lineTo(b.p2c(p),c.p2c(q)))}}}}A.save();A.translate(D.left,D.top);A.lineJoin="round";var c=a.lines.lineWidth,d=a.shadowSize;if(c>0&&d>0){A.lineWidth=d;A.strokeStyle="rgba(0,0,0,0.1)";var f=Math.PI/18;b(a.datapoints,Math.sin(f)*(c/2+d/2),Math.cos(f)*(c/2+d/2),a.xaxis,a.yaxis);A.lineWidth=d/2;b(a.datapoints,Math.sin(f)*(c/
2+d/4),Math.cos(f)*(c/2+d/4),a.xaxis,a.yaxis)}A.lineWidth=c;A.strokeStyle=a.color;if(d=E(a.lines,a.color,0,Y))A.fillStyle=d,e(a.datapoints,a.xaxis,a.yaxis);c>0&&b(a.datapoints,0,0,a.xaxis,a.yaxis);A.restore()}function T(a){function b(a,e,c,d,f,g,n,h){var s=a.points;a=a.pointsize;for(var k=0;k<s.length;k+=a){var j=s[k],r=s[k+1];if(!(j==null||j<g.min||j>g.max||r<n.min||r>n.max)){A.beginPath();j=g.p2c(j);r=n.p2c(r)+d;h=="circle"?A.arc(j,r,e,0,f?Math.PI:Math.PI*2,!1):h(A,j,r,e,f);A.closePath();if(c)A.fillStyle=
c,A.fill();A.stroke()}}}A.save();A.translate(D.left,D.top);var e=a.points.lineWidth,c=a.shadowSize,d=a.points.radius,f=a.points.symbol;e==0&&(e=1.0E-4);if(e>0&&c>0)c/=2,A.lineWidth=c,A.strokeStyle="rgba(0,0,0,0.1)",b(a.datapoints,d,null,c+c/2,!0,a.xaxis,a.yaxis,f),A.strokeStyle="rgba(0,0,0,0.2)",b(a.datapoints,d,null,c/2,!0,a.xaxis,a.yaxis,f);A.lineWidth=e;A.strokeStyle=a.color;b(a.datapoints,d,E(a.points,a.color),0,!1,a.xaxis,a.yaxis,f);A.restore()}function v(a,b,e,c,d,f,g,n,h,s,k,j){var r,l,q,B;
k?(B=l=q=!0,r=!1,k=e,e=b+c,d=b+d,a<k&&(b=a,a=k,k=b,r=!0,l=!1)):(r=l=q=!0,B=!1,k=a+c,a+=d,d=e,e=b,e<d&&(b=e,e=d,d=b,B=!0,q=!1));if(!(a<n.min||k>n.max||e<h.min||d>h.max)){if(k<n.min)k=n.min,r=!1;if(a>n.max)a=n.max,l=!1;if(d<h.min)d=h.min,B=!1;if(e>h.max)e=h.max,q=!1;k=n.p2c(k);d=h.p2c(d);a=n.p2c(a);e=h.p2c(e);if(g)s.beginPath(),s.moveTo(k,d),s.lineTo(k,e),s.lineTo(a,e),s.lineTo(a,d),s.fillStyle=g(d,e),s.fill();if(j>0&&(r||l||q||B))s.beginPath(),s.moveTo(k,d+f),r?s.lineTo(k,e+f):s.moveTo(k,e+f),q?s.lineTo(a,
e+f):s.moveTo(a,e+f),l?s.lineTo(a,d+f):s.moveTo(a,d+f),B?s.lineTo(k,d+f):s.moveTo(k,d+f),s.stroke()}}function G(a){A.save();A.translate(D.left,D.top);A.lineWidth=a.bars.lineWidth;A.strokeStyle=a.color;var b;switch(a.bars.align){case "left":b=0;break;case "right":b=-a.bars.barWidth;break;case "center":b=-a.bars.barWidth/2;break;default:throw Error("Invalid bar alignment: "+a.bars.align);}(function(b,e,c,d,f,g,n){var h=b.points;b=b.pointsize;for(var s=0;s<h.length;s+=b)h[s]!=null&&v(h[s],h[s+1],h[s+
2],e,c,d,f,g,n,A,a.bars.horizontal,a.bars.lineWidth)})(a.datapoints,b,b+a.bars.barWidth,0,a.bars.fill?function(b,e){return E(a.bars,a.color,b,e)}:null,a.xaxis,a.yaxis);A.restore()}function E(b,e,c,d){var f=b.fill;if(!f)return null;if(b.fillColor)return C(b.fillColor,c,d,e);b=a.color.parse(e);b.a=typeof f=="number"?f:0.4;b.normalize();return b.toString()}function I(){b.find(".legend").remove();if(y.legend.show){for(var c=[],d=[],f=!1,g=y.legend.labelFormatter,n,h,s=0;s<H.length;++s)n=H[s],n.label&&
(h=g?g(n.label,n):n.label)&&d.push({label:h,color:n.color});if(y.legend.sorted)if(a.isFunction(y.legend.sorted))d.sort(y.legend.sorted);else if(y.legend.sorted=="reverse")d.reverse();else{var k=y.legend.sorted!="descending";d.sort(function(a,b){return a.label==b.label?0:a.label<b.label!=k?1:-1})}for(s=0;s<d.length;++s)g=d[s],s%y.legend.noColumns==0&&(f&&c.push("</tr>"),c.push("<tr>"),f=!0),c.push('<td class="legendColorBox"><div style="border:1px solid '+y.legend.labelBoxBorderColor+';padding:1px"><div style="width:4px;height:0;border:5px solid '+
g.color+';overflow:hidden"></div></div></td><td class="legendLabel">'+g.label+"</td>");f&&c.push("</tr>");if(c.length!=0)if(d='<table style="font-size:smaller;color:'+y.grid.color+'">'+c.join("")+"</table>",y.legend.container!=null)a(y.legend.container).html(d);else if(c="",f=y.legend.position,s=y.legend.margin,s[0]==null&&(s=[s,s]),f.charAt(0)=="n"?c+="top:"+(s[1]+D.top)+"px;":f.charAt(0)=="s"&&(c+="bottom:"+(s[1]+D.bottom)+"px;"),f.charAt(1)=="e"?c+="right:"+(s[0]+D.right)+"px;":f.charAt(1)=="w"&&
(c+="left:"+(s[0]+D.left)+"px;"),d=a('<div class="legend">'+d.replace('style="','style="position:absolute;'+c+";")+"</div>").appendTo(b),y.legend.backgroundOpacity!=0){f=y.legend.backgroundColor;if(f==null)f=(f=y.grid.backgroundColor)&&typeof f=="string"?a.color.parse(f):a.color.extract(d,"background-color"),f.a=1,f=f.toString();s=d.children();a('<div style="position:absolute;width:'+s.width()+"px;height:"+s.height()+"px;"+c+"background-color:"+f+';"> </div>').prependTo(d).css("opacity",y.legend.backgroundOpacity)}}}
function K(a){y.grid.hoverable&&L("plothover",a,function(a){return a.hoverable!=!1})}function S(a){y.grid.hoverable&&L("plothover",a,function(){return!1})}function R(a){L("plotclick",a,function(a){return a.clickable!=!1})}function L(a,c,d){var f=X.offset(),g=c.pageX-f.left-D.left,n=c.pageY-f.top-D.top,s=h({left:g,top:n});s.pageX=c.pageX;s.pageY=c.pageY;c=y.grid.mouseActiveRadius;var k=c*c+1,j=null,r,l,q;for(r=H.length-1;r>=0;--r)if(d(H[r])){var B=H[r],p=B.xaxis,t=B.yaxis,u=B.datapoints.points,o=p.c2p(g),
x=t.c2p(n),m=c/p.scale,F=c/t.scale;q=B.datapoints.pointsize;if(p.options.inverseTransform)m=Number.MAX_VALUE;if(t.options.inverseTransform)F=Number.MAX_VALUE;if(B.lines.show||B.points.show)for(l=0;l<u.length;l+=q){var z=u[l],v=u[l+1];if(z!=null&&!(z-o>m||z-o<-m||v-x>F||v-x<-F))z=Math.abs(p.p2c(z)-g),v=Math.abs(t.p2c(v)-n),v=z*z+v*v,v<k&&(k=v,j=[r,l/q])}if(B.bars.show&&!j){p=B.bars.align=="left"?0:-B.bars.barWidth/2;B=p+B.bars.barWidth;for(l=0;l<u.length;l+=q)if(z=u[l],v=u[l+1],t=u[l+2],z!=null&&(H[r].bars.horizontal?
o<=Math.max(t,z)&&o>=Math.min(t,z)&&x>=v+p&&x<=v+B:o>=z+p&&o<=z+B&&x>=Math.min(t,v)&&x<=Math.max(t,v)))j=[r,l/q]}}j?(r=j[0],l=j[1],q=H[r].datapoints.pointsize,d={datapoint:H[r].datapoints.points.slice(l*q,(l+1)*q),dataIndex:l,series:H[r],seriesIndex:r}):d=null;if(d)d.pageX=parseInt(d.series.xaxis.p2c(d.datapoint[0])+f.left+D.left,10),d.pageY=parseInt(d.series.yaxis.p2c(d.datapoint[1])+f.top+D.top,10);if(y.grid.autoHighlight){for(f=0;f<ea.length;++f)g=ea[f],g.auto==a&&(!d||!(g.series==d.series&&g.point[0]==
d.datapoint[0]&&g.point[1]==d.datapoint[1]))&&da(g.series,g.point);d&&O(d.series,d.datapoint,a)}b.trigger(a,[s,d])}function J(){var a=y.interaction.redrawOverlayInterval;a==-1?ba():fa||(fa=setTimeout(ba,a))}function ba(){fa=null;U.save();ca.clear();U.translate(D.left,D.top);var b,e;for(b=0;b<ea.length;++b)if(e=ea[b],e.series.bars.show)N(e.series,e.point);else{var c=e.series,d=e.point;e=d[0];d=d[1];var f=c.xaxis,g=c.yaxis,n=typeof c.highlightColor==="string"?c.highlightColor:a.color.parse(c.color).scale("a",
0.5).toString();if(!(e<f.min||e>f.max||d<g.min||d>g.max)){var h=c.points.radius+c.points.lineWidth/2;U.lineWidth=h;U.strokeStyle=n;n=1.5*h;e=f.p2c(e);d=g.p2c(d);U.beginPath();c.points.symbol=="circle"?U.arc(e,d,n,0,2*Math.PI,!1):c.points.symbol(U,e,d,n,!1);U.closePath();U.stroke()}}U.restore();k(Q.drawOverlay,[U])}function O(a,b,e){typeof a=="number"&&(a=H[a]);if(typeof b=="number"){var c=a.datapoints.pointsize;b=a.datapoints.points.slice(c*b,c*(b+1))}c=V(a,b);if(c==-1)ea.push({series:a,point:b,auto:e}),
J();else if(!e)ea[c].auto=!1}function da(a,b){if(a==null&&b==null)ea=[],J();else{typeof a=="number"&&(a=H[a]);if(typeof b=="number"){var e=a.datapoints.pointsize;b=a.datapoints.points.slice(e*b,e*(b+1))}e=V(a,b);e!=-1&&(ea.splice(e,1),J())}}function V(a,b){for(var e=0;e<ea.length;++e){var c=ea[e];if(c.series==a&&c.point[0]==b[0]&&c.point[1]==b[1])return e}return-1}function N(b,e){var c=typeof b.highlightColor==="string"?b.highlightColor:a.color.parse(b.color).scale("a",0.5).toString(),d=b.bars.align==
"left"?0:-b.bars.barWidth/2;U.lineWidth=b.bars.lineWidth;U.strokeStyle=c;v(e[0],e[1],e[2]||0,d,d+b.bars.barWidth,0,function(){return c},b.xaxis,b.yaxis,U,b.bars.horizontal,b.bars.lineWidth)}function C(b,e,c,d){if(typeof b=="string")return b;else{e=A.createLinearGradient(0,c,0,e);c=0;for(var f=b.colors.length;c<f;++c){var g=b.colors[c];if(typeof g!="string"){var n=a.color.parse(d);g.brightness!=null&&(n=n.scale("rgb",g.brightness));g.opacity!=null&&(n.a*=g.opacity);g=n.toString()}e.addColorStop(c/
(f-1),g)}return e}}var H=[],y={colors:["#edc240","#afd8f8","#cb4b4b","#4da74d","#9440ed"],legend:{show:!0,noColumns:1,labelFormatter:null,labelBoxBorderColor:"#ccc",container:null,position:"ne",margin:5,backgroundColor:null,backgroundOpacity:0.85,sorted:null},xaxis:{show:null,position:"bottom",mode:null,font:null,color:null,tickColor:null,transform:null,inverseTransform:null,min:null,max:null,autoscaleMargin:null,ticks:null,tickFormatter:null,labelWidth:null,labelHeight:null,reserveSpace:null,tickLength:null,
alignTicksWithAxis:null,tickDecimals:null,tickSize:null,minTickSize:null},yaxis:{autoscaleMargin:0.02,position:"left"},xaxes:[],yaxes:[],series:{points:{show:!1,radius:3,lineWidth:2,fill:!0,fillColor:"#ffffff",symbol:"circle"},lines:{lineWidth:2,fill:!1,fillColor:null,steps:!1},bars:{show:!1,lineWidth:2,barWidth:1,fill:!0,fillColor:null,align:"left",horizontal:!1,zero:!0},shadowSize:3,highlightColor:null},grid:{show:!0,aboveData:!1,color:"#545454",backgroundColor:null,borderColor:null,tickColor:null,
margin:0,labelMargin:5,axisMargin:8,borderWidth:2,minBorderMargin:null,markings:null,markingsColor:"#f4f4f4",markingsLineWidth:2,clickable:!1,hoverable:!1,autoHighlight:!0,mouseActiveRadius:10},interaction:{redrawOverlayInterval:1E3/60},hooks:{}},M=null,ca=null,X=null,A=null,U=null,W=[],Z=[],D={left:0,right:0,top:0,bottom:0},aa=0,Y=0,Q={processOptions:[],processRawData:[],processDatapoints:[],processOffset:[],drawBackground:[],drawSeries:[],draw:[],bindEvents:[],drawOverlay:[],shutdown:[]},P=this;
P.setData=l;P.setupGrid=r;P.draw=z;P.getPlaceholder=function(){return b};P.getCanvas=function(){return M.element};P.getPlotOffset=function(){return D};P.width=function(){return aa};P.height=function(){return Y};P.offset=function(){var a=X.offset();a.left+=D.left;a.top+=D.top;return a};P.getData=function(){return H};P.getAxes=function(){var b={};a.each(W.concat(Z),function(a,e){e&&(b[e.direction+(e.n!=1?e.n:"")+"axis"]=e)});return b};P.getXAxes=function(){return W};P.getYAxes=function(){return Z};
P.c2p=h;P.p2c=function(a){var b={},e,c,d;for(e=0;e<W.length;++e)if((c=W[e])&&c.used)if(d="x"+c.n,a[d]==null&&c.n==1&&(d="x"),a[d]!=null){b.left=c.p2c(a[d]);break}for(e=0;e<Z.length;++e)if((c=Z[e])&&c.used)if(d="y"+c.n,a[d]==null&&c.n==1&&(d="y"),a[d]!=null){b.top=c.p2c(a[d]);break}return b};P.getOptions=function(){return y};P.highlight=O;P.unhighlight=da;P.triggerRedrawOverlay=J;P.pointOffset=function(a){return{left:parseInt(W[o(a,"x")-1].p2c(+a.x)+D.left,10),top:parseInt(Z[o(a,"y")-1].p2c(+a.y)+
D.top,10)}};P.shutdown=function(){fa&&clearTimeout(fa);X.unbind("mousemove",K);X.unbind("mouseleave",S);X.unbind("click",R);k(Q.shutdown,[X])};P.resize=function(){var a=b.width(),c=b.height();M.resize(a,c);ca.resize(a,c)};P.hooks=Q;(function(){for(var b={Canvas:d},e=0;e<j.length;++e){var c=j[e];c.init(P,b);c.options&&a.extend(!0,y,c.options)}})(P);(function(c){a.extend(!0,y,c);if(c&&c.colors)y.colors=c.colors;if(y.xaxis.color==null)y.xaxis.color=a.color.parse(y.grid.color).scale("a",0.22).toString();
if(y.yaxis.color==null)y.yaxis.color=a.color.parse(y.grid.color).scale("a",0.22).toString();if(y.xaxis.tickColor==null)y.xaxis.tickColor=y.grid.tickColor||y.xaxis.color;if(y.yaxis.tickColor==null)y.yaxis.tickColor=y.grid.tickColor||y.yaxis.color;if(y.grid.borderColor==null)y.grid.borderColor=y.grid.color;if(y.grid.tickColor==null)y.grid.tickColor=a.color.parse(y.grid.color).scale("a",0.22).toString();var d,f,g={style:b.css("font-style"),size:Math.round(0.8*(+b.css("font-size").replace("px","")||13)),
variant:b.css("font-variant"),weight:b.css("font-weight"),family:b.css("font-family")};g.lineHeight=g.size*1.15;f=y.xaxes.length||1;for(c=0;c<f;++c){if((d=y.xaxes[c])&&!d.tickColor)d.tickColor=d.color;d=a.extend(!0,{},y.xaxis,d);y.xaxes[c]=d;if(d.font&&(d.font=a.extend({},g,d.font),!d.font.color))d.font.color=d.color}f=y.yaxes.length||1;for(c=0;c<f;++c){if((d=y.yaxes[c])&&!d.tickColor)d.tickColor=d.color;d=a.extend(!0,{},y.yaxis,d);y.yaxes[c]=d;if(d.font&&(d.font=a.extend({},g,d.font),!d.font.color))d.font.color=
d.color}if(y.xaxis.noTicks&&y.xaxis.ticks==null)y.xaxis.ticks=y.xaxis.noTicks;if(y.yaxis.noTicks&&y.yaxis.ticks==null)y.yaxis.ticks=y.yaxis.noTicks;if(y.x2axis)y.xaxes[1]=a.extend(!0,{},y.xaxis,y.x2axis),y.xaxes[1].position="top";if(y.y2axis)y.yaxes[1]=a.extend(!0,{},y.yaxis,y.y2axis),y.yaxes[1].position="right";if(y.grid.coloredAreas)y.grid.markings=y.grid.coloredAreas;if(y.grid.coloredAreasColor)y.grid.markingsColor=y.grid.coloredAreasColor;y.lines&&a.extend(!0,y.series.lines,y.lines);y.points&&
a.extend(!0,y.series.points,y.points);y.bars&&a.extend(!0,y.series.bars,y.bars);if(y.shadowSize!=null)y.series.shadowSize=y.shadowSize;if(y.highlightColor!=null)y.series.highlightColor=y.highlightColor;for(c=0;c<y.xaxes.length;++c)m(W,c+1).options=y.xaxes[c];for(c=0;c<y.yaxes.length;++c)m(Z,c+1).options=y.yaxes[c];for(var n in Q)y.hooks[n]&&y.hooks[n].length&&(Q[n]=Q[n].concat(y.hooks[n]));k(Q.processOptions,[y])})(g);(function(){b.css("padding",0).children(":not(.flot-base,.flot-overlay)").remove();
b.css("position")=="static"&&b.css("position","relative");M=new d("flot-base",b);ca=new d("flot-overlay",b);A=M.context;U=ca.context;X=a(ca.element).unbind();var c=b.data("plot");c&&(c.shutdown(),ca.clear());b.data("plot",P)})();l(c);r();z();y.grid.hoverable&&(X.mousemove(K),X.bind("mouseleave",S));y.grid.clickable&&X.click(R);k(Q.bindEvents,[X]);var ea=[],fa=null}var b=Object.prototype.hasOwnProperty;d.prototype.resize=function(a,b){if(a<=0||b<=0)throw Error("Invalid dimensions for plot, width = "+
a+", height = "+b);var c=this.element,d=this.context,k=this.pixelRatio;if(this.width!=a)c.width=a*k,c.style.width=a+"px",this.width=a;if(this.height!=b)c.height=b*k,c.style.height=b+"px",this.height=b;d.restore();d.save();d.scale(k,k)};d.prototype.clear=function(){this.context.clearRect(0,0,this.width,this.height)};d.prototype.render=function(){var a=this._textCache,c;for(c in a)if(b.call(a,c)){var d=this.getTextLayer(c),j=a[c];d.hide();for(var k in j)if(b.call(j,k)){var l=j[k],o;for(o in l)if(b.call(l,
o)){for(var p=l[o].positions,h=0,m;m=p[h];h++)if(m.active){if(!m.rendered)d.append(m.element),m.rendered=!0}else p.splice(h--,1),m.rendered&&m.element.detach();p.length==0&&delete l[o]}}d.show()}};d.prototype.getTextLayer=function(b){var c=this.text[b];if(c==null){if(this.textContainer==null)this.textContainer=a("<div class='flot-text'></div>").css({position:"absolute",top:0,left:0,bottom:0,right:0,"font-size":"smaller",color:"#545454"}).insertAfter(this.element);c=this.text[b]=a("<div></div>").addClass(b).css({position:"absolute",
top:0,left:0,bottom:0,right:0}).appendTo(this.textContainer)}return c};d.prototype.getTextInfo=function(b,c,d,j,k){var l,o;c=""+c;j=typeof d==="object"?d.style+" "+d.variant+" "+d.weight+" "+d.size+"px/"+d.lineHeight+"px "+d.family:d;l=this._textCache[b];l==null&&(l=this._textCache[b]={});o=l[j];o==null&&(o=l[j]={});l=o[c];l==null&&(b=a("<div></div>").html(c).css({position:"absolute","max-width":k,top:-9999}).appendTo(this.getTextLayer(b)),typeof d==="object"?b.css({font:j,color:d.color}):typeof d===
"string"&&b.addClass(d),l=o[c]={width:b.outerWidth(!0),height:b.outerHeight(!0),element:b,positions:[]},b.detach());return l};d.prototype.addText=function(a,b,c,d,k,l,o,p,h){a=this.getTextInfo(a,d,k,l,o);d=a.positions;p=="center"?b-=a.width/2:p=="right"&&(b-=a.width);h=="middle"?c-=a.height/2:h=="bottom"&&(c-=a.height);for(h=0;k=d[h];h++)if(k.x==b&&k.y==c){k.active=!0;return}k={active:!0,rendered:!1,element:d.length?a.element.clone():a.element,x:b,y:c};d.push(k);k.element.css({top:Math.round(c),left:Math.round(b),
"text-align":p})};d.prototype.removeText=function(a,c,d,j,k,l){if(j==null){if(c=this._textCache[a],c!=null)for(var o in c)if(b.call(c,o))for(var p in d=c[o],d)if(b.call(d,p)){a=d[p].positions;for(j=0;k=a[j];j++)k.active=!1}}else{a=this.getTextInfo(a,j,k,l).positions;for(j=0;k=a[j];j++)if(k.x==c&&k.y==d)k.active=!1}};a.plot=function(b,d,g){return new c(a(b),d,g,a.plot.plugins)};a.plot.version="0.8.1";a.plot.plugins=[];a.fn.plot=function(b,c){return this.each(function(){a.plot(this,b,c)})}})(jQuery);
(function(a){function d(a,b){return b*Math.floor(a/b)}function c(a,b,e,c){if(typeof a.strftime=="function")return a.strftime(b);var d=function(a,b){a=""+a;return a.length==1?""+(b==null?"0":b)+a:a},f=[],g=!1,k=a.getHours(),n=k<12;e==null&&(e=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]);c==null&&(c=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]);var j;j=k>12?k-12:k==0?12:k;for(var u=0;u<b.length;++u){var z=b.charAt(u);if(g){switch(z){case "a":z=""+c[a.getDay()];break;case "b":z=
""+e[a.getMonth()];break;case "d":z=d(a.getDate());break;case "e":z=d(a.getDate()," ");break;case "h":case "H":z=d(k);break;case "I":z=d(j);break;case "l":z=d(j," ");break;case "m":z=d(a.getMonth()+1);break;case "M":z=d(a.getMinutes());break;case "q":z=""+(Math.floor(a.getMonth()/3)+1);break;case "S":z=d(a.getSeconds());break;case "y":z=d(a.getFullYear()%100);break;case "Y":z=""+a.getFullYear();break;case "p":z=n?"am":"pm";break;case "P":z=n?"AM":"PM";break;case "w":z=""+a.getDay()}f.push(z);g=!1}else z==
"%"?g=!0:f.push(z)}return f.join("")}function b(a){function b(a,e,c,d){a[e]=function(){return c[d].apply(c,arguments)}}var e={date:a};a.strftime!=void 0&&b(e,"strftime",a,"strftime");b(e,"getTime",a,"getTime");b(e,"setTime",a,"setTime");for(var c=["Date","Day","FullYear","Hours","Milliseconds","Minutes","Month","Seconds"],d=0;d<c.length;d++)b(e,"get"+c[d],a,"getUTC"+c[d]),b(e,"set"+c[d],a,"setUTC"+c[d]);return e}function e(a,e){if(e.timezone=="browser")return new Date(a);else if(!e.timezone||e.timezone==
"utc")return b(new Date(a));else if(typeof timezoneJS!="undefined"&&typeof timezoneJS.Date!="undefined"){var c=new timezoneJS.Date;c.setTimezone(e.timezone);c.setTime(a);return c}else return b(new Date(a))}var f={second:1E3,minute:6E4,hour:36E5,day:864E5,month:2592E6,quarter:7776E6,year:525949.2*6E4},g=[[1,"second"],[2,"second"],[5,"second"],[10,"second"],[30,"second"],[1,"minute"],[2,"minute"],[5,"minute"],[10,"minute"],[30,"minute"],[1,"hour"],[2,"hour"],[4,"hour"],[8,"hour"],[12,"hour"],[1,"day"],
[2,"day"],[3,"day"],[0.25,"month"],[0.5,"month"],[1,"month"],[2,"month"]],j=g.concat([[3,"month"],[6,"month"],[1,"year"]]),k=g.concat([[1,"quarter"],[2,"quarter"],[1,"year"]]);a.plot.plugins.push({init:function(b){b.hooks.processOptions.push(function(b){a.each(b.getAxes(),function(a,b){var g=b.options;if(g.mode=="time")b.tickGenerator=function(a){var b=[],c=e(a.min,g),n=0,h=g.tickSize&&g.tickSize[1]==="quarter"||g.minTickSize&&g.minTickSize[1]==="quarter"?k:j;g.minTickSize!=null&&(n=typeof g.tickSize==
"number"?g.tickSize:g.minTickSize[0]*f[g.minTickSize[1]]);for(var l=0;l<h.length-1;++l)if(a.delta<(h[l][0]*f[h[l][1]]+h[l+1][0]*f[h[l+1][1]])/2&&h[l][0]*f[h[l][1]]>=n)break;n=h[l][0];h=h[l][1];h=="year"&&(g.minTickSize!=null&&g.minTickSize[1]=="year"?n=Math.floor(g.minTickSize[0]):(l=Math.pow(10,Math.floor(Math.log(a.delta/f.year)/Math.LN10)),n=a.delta/f.year/l,n=n<1.5?1:n<3?2:n<7.5?5:10,n*=l),n<1&&(n=1));a.tickSize=g.tickSize||[n,h];n=a.tickSize[0];h=a.tickSize[1];l=n*f[h];h=="second"?c.setSeconds(d(c.getSeconds(),
n)):h=="minute"?c.setMinutes(d(c.getMinutes(),n)):h=="hour"?c.setHours(d(c.getHours(),n)):h=="month"?c.setMonth(d(c.getMonth(),n)):h=="quarter"?c.setMonth(3*d(c.getMonth()/3,n)):h=="year"&&c.setFullYear(d(c.getFullYear(),n));c.setMilliseconds(0);l>=f.minute&&c.setSeconds(0);l>=f.hour&&c.setMinutes(0);l>=f.day&&c.setHours(0);l>=f.day*4&&c.setDate(1);l>=f.month*2&&c.setMonth(d(c.getMonth(),3));l>=f.quarter*2&&c.setMonth(d(c.getMonth(),6));l>=f.year&&c.setMonth(0);var p=0,q=Number.NaN,s;do if(s=q,q=
c.getTime(),b.push(q),h=="month"||h=="quarter")if(n<1){c.setDate(1);var B=c.getTime();c.setMonth(c.getMonth()+(h=="quarter"?3:1));var o=c.getTime();c.setTime(q+p*f.hour+(o-B)*n);p=c.getHours();c.setHours(0)}else c.setMonth(c.getMonth()+n*(h=="quarter"?3:1));else h=="year"?c.setFullYear(c.getFullYear()+n):c.setTime(q+l);while(q<a.max&&q!=s);return b},b.tickFormatter=function(a,b){var d=e(a,b.options);if(g.timeformat!=null)return c(d,g.timeformat,g.monthNames,g.dayNames);var n=b.options.tickSize&&b.options.tickSize[1]==
"quarter"||b.options.minTickSize&&b.options.minTickSize[1]=="quarter",h=b.tickSize[0]*f[b.tickSize[1]],k=b.max-b.min,j=g.twelveHourClock?" %p":"",l=g.twelveHourClock?"%I":"%H";return c(d,h<f.minute?l+":%M:%S"+j:h<f.day?k<2*f.day?l+":%M"+j:"%b %d "+l+":%M"+j:h<f.month?"%b %d":n&&h<f.quarter||!n&&h<f.year?k<f.year?"%b":"%b %Y":n&&h<f.year?k<f.year?"Q%q":"Q%q %Y":"%Y",g.monthNames,g.dayNames)}})})},options:{xaxis:{timezone:null,timeformat:null,twelveHourClock:!1,monthNames:null}},name:"time",version:"1.0"});
a.plot.formatDate=c})(jQuery);
(function(a){var d=10,c=0.95,b={series:{pie:{show:!1,radius:"auto",innerRadius:0,startAngle:1.5,tilt:1,shadow:{left:5,top:15,alpha:0.02},offset:{top:0,left:"auto"},stroke:{color:"#fff",width:1},label:{show:"auto",formatter:function(a,b){return"<div style='font-size:x-small;text-align:center;padding:2px;color:"+b.color+";'>"+a+"<br/>"+Math.round(b.percent)+"%</div>"},radius:1,background:{color:null,opacity:0},threshold:0},combine:{threshold:-1,color:null,label:"Other"},highlight:{opacity:0.5}}}};a.plot.plugins.push({init:function(e){function f(e){for(var c=
0,d=0,f=0,g=b.series.pie.combine.color,n=[],h=0;h<e.length;++h){var k=e[h].data;a.isArray(k)&&k.length==1&&(k=k[0]);a.isArray(k)?k[1]=!isNaN(parseFloat(k[1]))&&isFinite(k[1])?+k[1]:0:k=!isNaN(parseFloat(k))&&isFinite(k)?[1,+k]:[1,0];e[h].data=[k]}for(h=0;h<e.length;++h)c+=e[h].data[0][1];for(h=0;h<e.length;++h)if(k=e[h].data[0][1],k/c<=b.series.pie.combine.threshold&&(d+=k,f++,!g))g=e[h].color;for(h=0;h<e.length;++h)k=e[h].data[0][1],(f<2||k/c>b.series.pie.combine.threshold)&&n.push({data:[[1,k]],
color:e[h].color,label:e[h].label,angle:k*Math.PI*2/c,percent:k/(c/100)});f>1&&n.push({data:[[1,d]],color:g,label:b.series.pie.combine.label,angle:d*Math.PI*2/c,percent:d/(c/100)});return n}function g(e,f){function g(){u.clearRect(0,0,l,p);w.children().filter(".pieLabel, .pieLabelBackground").remove()}function h(){var a=b.series.pie.shadow.left,e=b.series.pie.shadow.top,c=b.series.pie.shadow.alpha,d=b.series.pie.radius>1?b.series.pie.radius:t*b.series.pie.radius;if(!(d>=l/2-a||d*b.series.pie.tilt>=
p/2-e||d<=10)){u.save();u.translate(a,e);u.globalAlpha=c;u.fillStyle="#000";u.translate(x,n);u.scale(1,b.series.pie.tilt);for(a=1;a<=10;a++)u.beginPath(),u.arc(0,0,d,0,Math.PI*2,!1),u.fill(),d-=a;u.restore()}}function k(){function e(a,b,c){if(!(a<=0||isNaN(a)))c?u.fillStyle=b:(u.strokeStyle=b,u.lineJoin="round"),u.beginPath(),Math.abs(a-Math.PI*2)>1.0E-9&&u.moveTo(0,0),u.arc(0,0,f,g,g+a/2,!1),u.arc(0,0,f,g+a/2,g+a,!1),u.closePath(),g+=a,c?u.fill():u.stroke()}function c(){function e(c,d,f){if(c.data[0][1]==
0)return!0;var h=b.legend.labelFormatter,s=b.series.pie.label.formatter;h=h?h(c.label,c):c.label;s&&(h=s(h,c));s=(d+c.angle+d)/2;d=x+Math.round(Math.cos(s)*g);s=n+Math.round(Math.sin(s)*g)*b.series.pie.tilt;w.append("<span class='pieLabel' id='pieLabel"+f+"' style='position:absolute;top:"+s+"px;left:"+d+"px;'>"+h+"</span>");f=w.children("#pieLabel"+f);h=s-f.height()/2;d-=f.width()/2;f.css("top",h);f.css("left",d);if(0-h>0||0-d>0||p-(h+f.height())<0||l-(d+f.width())<0)return!1;if(b.series.pie.label.background.opacity!=
0){s=b.series.pie.label.background.color;if(s==null)s=c.color;a("<div class='pieLabelBackground' style='position:absolute;width:"+f.width()+"px;height:"+f.height()+"px;"+("top:"+h+"px;left:"+d+"px;")+"background-color:"+s+";'></div>").css("opacity",b.series.pie.label.background.opacity).insertBefore(f)}return!0}for(var f=d,g=b.series.pie.label.radius>1?b.series.pie.label.radius:t*b.series.pie.label.radius,h=0;h<m.length;++h){if(m[h].percent>=b.series.pie.label.threshold*100&&!e(m[h],f,h))return!1;
f+=m[h].angle}return!0}var d=Math.PI*b.series.pie.startAngle,f=b.series.pie.radius>1?b.series.pie.radius:t*b.series.pie.radius;u.save();u.translate(x,n);u.scale(1,b.series.pie.tilt);u.save();for(var g=d,h=0;h<m.length;++h)m[h].startAngle=g,e(m[h].angle,m[h].color,!0);u.restore();if(b.series.pie.stroke.width>0){u.save();u.lineWidth=b.series.pie.stroke.width;g=d;for(h=0;h<m.length;++h)e(m[h].angle,b.series.pie.stroke.color,!1);u.restore()}j(u);u.restore();return b.series.pie.label.show?c():!0}if(w){var l=
e.getPlaceholder().width(),p=e.getPlaceholder().height(),o=w.children().filter(".legend").children().width()||0;u=f;r=!1;t=Math.min(l,p/b.series.pie.tilt)/2;n=p/2+b.series.pie.offset.top;x=l/2;b.series.pie.offset.left=="auto"?b.legend.position.match("w")?x+=o/2:x-=o/2:x+=b.series.pie.offset.left;x<t?x=t:x>l-t&&(x=l-t);var m=e.getData();o=0;do o>0&&(t*=c),o+=1,g(),b.series.pie.tilt<=0.8&&h();while(!k()&&o<d);o>=d&&(g(),w.prepend("<div class='error'>Could not draw pie with labels contained inside canvas</div>"));
e.setSeries&&e.insertLegend&&(e.setSeries(m),e.insertLegend())}}function j(a){if(b.series.pie.innerRadius>0){a.save();var e=b.series.pie.innerRadius>1?b.series.pie.innerRadius:t*b.series.pie.innerRadius;a.globalCompositeOperation="destination-out";a.beginPath();a.fillStyle=b.series.pie.stroke.color;a.arc(0,0,e,0,Math.PI*2,!1);a.fill();a.closePath();a.restore();a.save();a.beginPath();a.strokeStyle=b.series.pie.stroke.color;a.arc(0,0,e,0,Math.PI*2,!1);a.stroke();a.closePath();a.restore()}}function k(a){o("plothover",
a)}function l(a){o("plotclick",a)}function o(a,c){var d=e.offset(),f=parseInt(c.pageX-d.left);a:{d=parseInt(c.pageY-d.top);var g=e.getData(),h=e.getOptions();h=h.series.pie.radius>1?h.series.pie.radius:t*h.series.pie.radius;for(var k,j,l=0;l<g.length;++l){var r=g[l];if(r.pie.show){u.save();u.beginPath();u.moveTo(0,0);u.arc(0,0,h,r.startAngle,r.startAngle+r.angle/2,!1);u.arc(0,0,h,r.startAngle+r.angle/2,r.startAngle+r.angle,!1);u.closePath();k=f-x;j=d-n;if(u.isPointInPath){if(u.isPointInPath(f-x,d-
n)){u.restore();f={datapoint:[r.percent,r.data],dataIndex:0,series:r,seriesIndex:l};break a}}else{var o=[[0,0],[h*Math.cos(r.startAngle),h*Math.sin(r.startAngle)],[h*Math.cos(r.startAngle+r.angle/4),h*Math.sin(r.startAngle+r.angle/4)],[h*Math.cos(r.startAngle+r.angle/2),h*Math.sin(r.startAngle+r.angle/2)],[h*Math.cos(r.startAngle+r.angle/1.5),h*Math.sin(r.startAngle+r.angle/1.5)],[h*Math.cos(r.startAngle+r.angle),h*Math.sin(r.startAngle+r.angle)]];k=[k,j];j=!1;for(var m=-1,L=o.length,J=L-1;++m<L;J=
m)(o[m][1]<=k[1]&&k[1]<o[J][1]||o[J][1]<=k[1]&&k[1]<o[m][1])&&k[0]<(o[J][0]-o[m][0])*(k[1]-o[m][1])/(o[J][1]-o[m][1])+o[m][0]&&(j=!j);if(j){u.restore();f={datapoint:[r.percent,r.data],dataIndex:0,series:r,seriesIndex:l};break a}}u.restore()}}f=null}if(b.grid.autoHighlight)for(d=0;d<z.length;++d)if(g=z[d],g.auto==a&&!(f&&g.series==f.series))g=g.series,g==null&&(z=[],e.triggerRedrawOverlay()),g=p(g),g!=-1&&(z.splice(g,1),e.triggerRedrawOverlay());if(f)if(d=f.series,g=p(d),g==-1)z.push({series:d,auto:a}),
e.triggerRedrawOverlay();else if(!a)z[g].auto=!1;w.trigger(a,[{pageX:c.pageX,pageY:c.pageY},f])}function p(a){for(var b=0;b<z.length;++b)if(z[b].series==a)return b;return-1}function h(a,b){function e(a){if(!(a.angle<=0||isNaN(a.angle)))b.fillStyle="rgba(255, 255, 255, "+c.series.pie.highlight.opacity+")",b.beginPath(),Math.abs(a.angle-Math.PI*2)>1.0E-9&&b.moveTo(0,0),b.arc(0,0,d,a.startAngle,a.startAngle+a.angle/2,!1),b.arc(0,0,d,a.startAngle+a.angle/2,a.startAngle+a.angle,!1),b.closePath(),b.fill()}
var c=a.getOptions(),d=c.series.pie.radius>1?c.series.pie.radius:t*c.series.pie.radius;b.save();b.translate(x,n);b.scale(1,c.series.pie.tilt);for(var f=0;f<z.length;++f)e(z[f].series);j(b);b.restore()}var m=null,w=null,t=null,x=null,n=null,r=!1,u=null,z=[];e.hooks.processOptions.push(function(a,b){if(b.series.pie.show){b.grid.show=!1;if(b.series.pie.label.show=="auto")b.series.pie.label.show=b.legend.show?!1:!0;if(b.series.pie.radius=="auto")b.series.pie.radius=b.series.pie.label.show?0.75:1;if(b.series.pie.tilt>
1)b.series.pie.tilt=1;else if(b.series.pie.tilt<0)b.series.pie.tilt=0}});e.hooks.bindEvents.push(function(a,b){var e=a.getOptions();e.series.pie.show&&(e.grid.hoverable&&b.unbind("mousemove").mousemove(k),e.grid.clickable&&b.unbind("click").click(l))});e.hooks.processDatapoints.push(function(e){e.getOptions().series.pie.show&&!r&&(r=!0,m=e.getCanvas(),w=a(m).parent(),b=e.getOptions(),e.setData(f(e.getData())))});e.hooks.drawOverlay.push(function(a,b){a.getOptions().series.pie.show&&h(a,b)});e.hooks.draw.push(function(a,
b){a.getOptions().series.pie.show&&g(a,b)})},options:b,name:"pie",version:"1.1"})})(jQuery);
(function(a){a.plot.plugins.push({init:function(a){function c(a,e){var c;for(c=0;c<e.length;++c)if(e[c].id===a.fillBetween)return e[c];if(typeof a.fillBetween==="number"){if(a.fillBetween<0||a.fillBetween>=e.length)return null;return e[a.fillBetween]}return null}a.hooks.processDatapoints.push(function(a,e,d){if(e.fillBetween!=null){var g=c(e,a.getData());if(g){a=d.pointsize;var j=d.points,k=g.datapoints.pointsize;g=g.datapoints.points;for(var l=[],o,p,h,m,w=e.lines.show,t=a>2&&d.format[2].y,x=w&&
e.lines.steps,n=!0,r=0,u=0,z;;){if(r>=j.length)break;z=l.length;if(j[r]==null){for(p=0;p<a;++p)l.push(j[r+p]);r+=a}else if(u>=g.length){if(!w)for(p=0;p<a;++p)l.push(j[r+p]);r+=a}else if(g[u]==null){for(p=0;p<a;++p)l.push(null);n=!0;u+=k}else{o=j[r];p=j[r+1];e=g[u];h=g[u+1];m=0;if(o===e){for(p=0;p<a;++p)l.push(j[r+p]);m=h;r+=a;u+=k}else if(o>e){if(w&&r>0&&j[r-a]!=null){o=p+(j[r-a+1]-p)*(e-o)/(j[r-a]-o);l.push(e);l.push(o);for(p=2;p<a;++p)l.push(j[r+p]);m=h}u+=k}else{if(n&&w){r+=a;continue}for(p=0;p<
a;++p)l.push(j[r+p]);w&&u>0&&g[u-k]!=null&&(m=h+(g[u-k+1]-h)*(o-e)/(g[u-k]-e));r+=a}n=!1;z!==l.length&&t&&(l[z+2]=m)}if(x&&z!==l.length&&z>0&&l[z]!==null&&l[z]!==l[z-a]&&l[z+1]!==l[z-a+1]){for(p=0;p<a;++p)l[z+a+p]=l[z+p];l[z+1]=l[z-a+1]}}d.points=l}}})},options:{series:{fillBetween:null}},name:"fillbetween",version:"1.0"})})(jQuery);
(function(a){a.extend({tablesorter:new function(){function c(a,e){b(a+","+((new Date).getTime()-e.getTime())+"ms")}function b(a){typeof console!="undefined"&&typeof console.debug!="undefined"?console.log(a):alert(a)}function e(e,c){if(e.config.debug)var g="";if(e.tBodies.length!=0){var n=e.tBodies[0].rows;if(n[0])for(var h=[],k=n[0].cells.length,r=0;r<k;r++){var l=!1;a.metadata&&a(c[r]).metadata()&&a(c[r]).metadata().sorter?l=d(a(c[r]).metadata().sorter):e.config.headers[r]&&e.config.headers[r].sorter&&
(l=d(e.config.headers[r].sorter));if(!l)a:{l=e;for(var p=n,t=-1,o=r,m=u.length,x=!1,z=!1,w=!0;z==""&&w;)t++,p[t]?(x=p[t].cells[o],z=a.trim(j(l.config,x)),l.config.debug&&b("Checking if value was empty on row:"+t)):w=!1;for(p=1;p<m;p++)if(u[p].is(z,l,x)){l=u[p];break a}l=u[0]}e.config.debug&&(g+="column:"+r+" parser:"+l.id+"\n");h.push(l)}e.config.debug&&b(g);return h}}function d(a){for(var b=u.length,e=0;e<b;e++)if(u[e].id.toLowerCase()==a.toLowerCase())return u[e];return!1}function g(b){if(b.config.debug)var e=
new Date;for(var d=b.tBodies[0]&&b.tBodies[0].rows.length||0,f=b.tBodies[0].rows[0]&&b.tBodies[0].rows[0].cells.length||0,g=b.config.parsers,n={row:[],normalized:[]},h=0;h<d;++h){var k=a(b.tBodies[0].rows[h]),r=[];if(k.hasClass(b.config.cssChildRow))n.row[n.row.length-1]=n.row[n.row.length-1].add(k);else{n.row.push(k);for(var l=0;l<f;++l)r.push(g[l].format(j(b.config,k[0].cells[l]),b,k[0].cells[l]));r.push(n.normalized.length);n.normalized.push(r)}}b.config.debug&&c("Building cache for "+d+" rows:",
e);return n}function j(b,e){var c="";if(!e)return"";if(!b.supportsTextContent)b.supportsTextContent=e.textContent||!1;return c=b.textExtraction=="simple"?b.supportsTextContent?e.textContent:e.childNodes[0]&&e.childNodes[0].hasChildNodes()?e.childNodes[0].innerHTML:e.innerHTML:typeof b.textExtraction=="function"?b.textExtraction(e):a(e).text()}function k(b,e){if(b.config.debug)var d=new Date;for(var f=e.row,g=e.normalized,n=g.length,k=g[0].length-1,j=a(b.tBodies[0]),l=[],r=0;r<n;r++){var p=g[r][k];
l.push(f[p]);if(!b.config.appender)for(var t=f[p].length,o=0;o<t;o++)j[0].appendChild(f[p][o])}b.config.appender&&b.config.appender(b,l);l=null;b.config.debug&&c("Rebuilt table:",d);h(b);setTimeout(function(){a(b).trigger("sortEnd")},0)}function l(e){if(e.config.debug)var d=new Date;var f=o(e);$tableHeaders=a(e.config.selectorHeaders,e).each(function(b){this.column=f[this.parentNode.rowIndex+"-"+this.cellIndex];this.count=this.order=typeof e.config.sortInitialOrder!="Number"?e.config.sortInitialOrder.toLowerCase()==
"desc"?1:0:e.config.sortInitialOrder==1?1:0;var c;c=a.metadata&&a(this).metadata().sorter===!1?!0:!1;c||(c=e.config.headers[b]&&e.config.headers[b].sorter===!1?!0:!1);if(c)this.sortDisabled=!0;if(p(e,b))this.order=this.lockedOrder=p(e,b);this.sortDisabled||(c=a(this).addClass(e.config.cssHeader),e.config.onRenderHeader&&e.config.onRenderHeader.apply(c));e.config.headerList[b]=this});e.config.debug&&(c("Built headers:",d),b($tableHeaders));return $tableHeaders}function o(a){var b=[],e={};a=a.getElementsByTagName("THEAD")[0].getElementsByTagName("TR");
for(var c=0;c<a.length;c++)for(var d=a[c].cells,f=0;f<d.length;f++){var g=d[f],n=g.parentNode.rowIndex,h=n+"-"+g.cellIndex,k=g.rowSpan||1;g=g.colSpan||1;var j;typeof b[n]=="undefined"&&(b[n]=[]);for(var l=0;l<b[n].length+1;l++)if(typeof b[n][l]=="undefined"){j=l;break}e[h]=j;for(l=n;l<n+k;l++){typeof b[l]=="undefined"&&(b[l]=[]);h=b[l];for(var r=j;r<j+g;r++)h[r]="x"}}return e}function p(a,b){if(a.config.headers[b]&&a.config.headers[b].lockedOrder)return a.config.headers[b].lockedOrder;return!1}function h(a){for(var b=
a.config.widgets,e=b.length,c=0;c<e;c++)m(b[c]).format(a)}function m(a){for(var b=z.length,e=0;e<b;e++)if(z[e].id.toLowerCase()==a.toLowerCase())return z[e]}function w(a,b){for(var e=b.length,c=0;c<e;c++)if(b[c][0]==a)return!0;return!1}function t(b,e,c,d){e.removeClass(d[0]).removeClass(d[1]);var f=[];e.each(function(){this.sortDisabled||(f[this.column]=a(this))});b=c.length;for(e=0;e<b;e++)f[c[e][0]].addClass(d[c[e][1]])}function x(b){if(b.config.widthFixed){var e=a("<colgroup>");a("tr:first td",
b.tBodies[0]).each(function(){e.append(a("<col>").css("width",a(this).width()))});a(b).prepend(e)}}function n(a,b,e){if(a.config.debug)var d=new Date;for(var f="var sortWrapper = function(a,b) {",g=b.length,n=0;n<g;n++){var h=b[n][0],k=b[n][1];h=a.config.parsers[h].type=="text"?k==0?r("text","asc",h):r("text","desc",h):k==0?r("numeric","asc",h):r("numeric","desc",h);var j="e"+n;f+="var "+j+" = "+h;f+="if("+j+") { return "+j+"; } ";f+="else { "}n=e.normalized[0].length-1;f+="return a["+n+"]-b["+n+
"];";for(n=0;n<g;n++)f+="}; ";f+="return 0; ";f+="}; ";a.config.debug&&c("Evaling expression:"+f,new Date);eval(f);e.normalized.sort(sortWrapper);a.config.debug&&c("Sorting on "+b.toString()+" and dir "+k+" time:",d);return e}function r(a,b,e){var c="a["+e+"]";e="b["+e+"]";if(a=="text"&&b=="asc")return"("+c+" == "+e+" ? 0 : ("+c+" === null ? Number.POSITIVE_INFINITY : ("+e+" === null ? Number.NEGATIVE_INFINITY : ("+c+" < "+e+") ? -1 : 1 )));";else if(a=="text"&&b=="desc")return"("+c+" == "+e+" ? 0 : ("+
c+" === null ? Number.POSITIVE_INFINITY : ("+e+" === null ? Number.NEGATIVE_INFINITY : ("+e+" < "+c+") ? -1 : 1 )));";else if(a=="numeric"&&b=="asc")return"("+c+" === null && "+e+" === null) ? 0 :("+c+" === null ? Number.POSITIVE_INFINITY : ("+e+" === null ? Number.NEGATIVE_INFINITY : "+c+" - "+e+"));";else if(a=="numeric"&&b=="desc")return"("+c+" === null && "+e+" === null) ? 0 :("+c+" === null ? Number.POSITIVE_INFINITY : ("+e+" === null ? Number.NEGATIVE_INFINITY : "+e+" - "+c+"));"}var u=[],z=
[];this.defaults={cssHeader:"header",cssAsc:"headerSortUp",cssDesc:"headerSortDown",cssChildRow:"expand-child",sortInitialOrder:"asc",sortMultiSortKey:"shiftKey",sortForce:null,sortAppend:null,sortLocaleCompare:!0,textExtraction:"simple",parsers:{},widgets:[],widgetZebra:{css:["even","odd"]},headers:{},widthFixed:!1,cancelSelection:!0,sortList:[],headerList:[],dateFormat:"us",decimal:"/.|,/g",onRenderHeader:null,selectorHeaders:"thead th",debug:!1};this.benchmark=c;this.construct=function(b){return this.each(function(){if(this.tHead&&
this.tBodies){var c,d,f,r;this.config={};r=a.extend(this.config,a.tablesorter.defaults,b);c=a(this);a.data(this,"tablesorter",r);d=l(this);this.config.parsers=e(this,d);f=g(this);var p=[r.cssDesc,r.cssAsc];x(this);d.click(function(b){var e=c[0].tBodies[0]&&c[0].tBodies[0].rows.length||0;if(!this.sortDisabled&&e>0){c.trigger("sortStart");a(this);e=this.column;this.order=this.count++%2;if(this.lockedOrder)this.order=this.lockedOrder;if(b[r.sortMultiSortKey])if(w(e,r.sortList))for(b=0;b<r.sortList.length;b++){var g=
r.sortList[b],h=r.headerList[g[0]];if(g[0]==e)h.count=g[1],h.count++,g[1]=h.count%2}else r.sortList.push([e,this.order]);else{r.sortList=[];if(r.sortForce!=null){g=r.sortForce;for(b=0;b<g.length;b++)g[b][0]!=e&&r.sortList.push(g[b])}r.sortList.push([e,this.order])}setTimeout(function(){t(c[0],d,r.sortList,p);k(c[0],n(c[0],r.sortList,f))},1);return!1}}).mousedown(function(){if(r.cancelSelection)return this.onselectstart=function(){return!1},!1});c.bind("update",function(){var a=this;setTimeout(function(){a.config.parsers=
e(a,d);f=g(a)},1)}).bind("updateCell",function(a,b){var e=this.config,c=[b.parentNode.rowIndex-1,b.cellIndex];f.normalized[c[0]][c[1]]=e.parsers[c[1]].format(j(e,b),b)}).bind("sorton",function(b,e){a(this).trigger("sortStart");r.sortList=e;for(var c=r.sortList,g=this.config,h=c.length,s=0;s<h;s++){var j=c[s],l=g.headerList[j[0]];l.count=j[1];l.count++}t(this,d,c,p);k(this,n(this,c,f))}).bind("appendCache",function(){k(this,f)}).bind("applyWidgetId",function(a,b){m(b).format(this)}).bind("applyWidgets",
function(){h(this)});if(a.metadata&&a(this).metadata()&&a(this).metadata().sortlist)r.sortList=a(this).metadata().sortlist;r.sortList.length>0&&c.trigger("sorton",[r.sortList]);h(this)}})};this.addParser=function(a){for(var b=u.length,e=!0,c=0;c<b;c++)u[c].id.toLowerCase()==a.id.toLowerCase()&&(e=!1);e&&u.push(a)};this.addWidget=function(a){z.push(a)};this.formatFloat=function(a){a=parseFloat(a);return isNaN(a)?0:a};this.formatInt=function(a){a=parseInt(a);return isNaN(a)?0:a};this.isDigit=function(b){return/^[-+]?\d*$/.test(a.trim(b.replace(/[,.']/g,
"")))};this.clearTableBody=function(b){a.browser.msie?function(){for(;this.firstChild;)this.removeChild(this.firstChild)}.apply(b.tBodies[0]):b.tBodies[0].innerHTML=""}}});a.fn.extend({tablesorter:a.tablesorter.construct});var d=a.tablesorter;d.addParser({id:"text",is:function(){return!0},format:function(c){return a.trim(c.toLocaleLowerCase())},type:"text"});d.addParser({id:"digit",is:function(c,b){return a.tablesorter.isDigit(c,b.config)},format:function(c){return a.tablesorter.formatFloat(c)},type:"numeric"});
d.addParser({id:"currency",is:function(a){return/^[\u00a3$\u20ac?.]/.test(a)},format:function(c){return a.tablesorter.formatFloat(c.replace(RegExp(/[\u00a3$\u20ac]/g),""))},type:"numeric"});d.addParser({id:"ipAddress",is:function(a){return/^\d{2,3}[\.]\d{2,3}[\.]\d{2,3}[\.]\d{2,3}$/.test(a)},format:function(c){c=c.split(".");for(var b="",e=c.length,d=0;d<e;d++){var g=c[d];b+=g.length==2?"0"+g:g}return a.tablesorter.formatFloat(b)},type:"numeric"});d.addParser({id:"url",is:function(a){return/^(https?|ftp|file):\/\/$/.test(a)},
format:function(a){return jQuery.trim(a.replace(RegExp(/(https?|ftp|file):\/\//),""))},type:"text"});d.addParser({id:"isoDate",is:function(a){return/^\d{4}[\/-]\d{1,2}[\/-]\d{1,2}$/.test(a)},format:function(c){return a.tablesorter.formatFloat(c!=""?(new Date(c.replace(RegExp(/-/g),"/"))).getTime():"0")},type:"numeric"});d.addParser({id:"percent",is:function(c){return/\%$/.test(a.trim(c))},format:function(c){return a.tablesorter.formatFloat(c.replace(RegExp(/%/g),""))},type:"numeric"});d.addParser({id:"usLongDate",
is:function(a){return a.match(RegExp(/^[A-Za-z]{3,10}\.? [0-9]{1,2}, ([0-9]{4}|'?[0-9]{2}) (([0-2]?[0-9]:[0-5][0-9])|([0-1]?[0-9]:[0-5][0-9]\s(AM|PM)))$/))},format:function(c){return a.tablesorter.formatFloat((new Date(c)).getTime())},type:"numeric"});d.addParser({id:"shortDate",is:function(a){return/\d{1,2}[\/\-]\d{1,2}[\/\-]\d{2,4}/.test(a)},format:function(c,b){var e=b.config;c=c.replace(/\-/g,"/");if(e.dateFormat=="us")c=c.replace(/(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{4})/,"$3/$1/$2");else if(e.dateFormat==
"uk")c=c.replace(/(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{4})/,"$3/$2/$1");else if(e.dateFormat=="dd/mm/yy"||e.dateFormat=="dd-mm-yy")c=c.replace(/(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{2})/,"$1/$2/$3");return a.tablesorter.formatFloat((new Date(c)).getTime())},type:"numeric"});d.addParser({id:"time",is:function(a){return/^(([0-2]?[0-9]:[0-5][0-9])|([0-1]?[0-9]:[0-5][0-9]\s(am|pm)))$/.test(a)},format:function(c){return a.tablesorter.formatFloat((new Date("2000/01/01 "+c)).getTime())},type:"numeric"});d.addParser({id:"metadata",
is:function(){return!1},format:function(c,b,e){c=b.config;c=!c.parserMetadataName?"sortValue":c.parserMetadataName;return a(e).metadata()[c]},type:"numeric"});d.addWidget({id:"zebra",format:function(c){if(c.config.debug)var b=new Date;var e,d=-1,g;a("tr:visible",c.tBodies[0]).each(function(){e=a(this);e.hasClass(c.config.cssChildRow)||d++;g=d%2==0;e.removeClass(c.config.widgetZebra.css[g?0:1]).addClass(c.config.widgetZebra.css[g?1:0])});c.config.debug&&a.tablesorter.benchmark("Applying Zebra widget",
b)}})})(jQuery);
(function(a){a.fn.hoverIntent=function(d,c,b){var e={interval:100,sensitivity:7,timeout:0};e=typeof d==="object"?a.extend(e,d):a.isFunction(c)?a.extend(e,{over:d,out:c,selector:b}):a.extend(e,{over:d,out:d,selector:c});var f,g,j,k,l=function(a){f=a.pageX;g=a.pageY},o=function(b,c){c.hoverIntent_t=clearTimeout(c.hoverIntent_t);if(Math.abs(j-f)+Math.abs(k-g)<e.sensitivity)return a(c).off("mousemove.hoverIntent",l),c.hoverIntent_s=1,e.over.apply(c,[b]);else j=f,k=g,c.hoverIntent_t=setTimeout(function(){o(b,c)},
e.interval)};d=function(b){var c=jQuery.extend({},b),d=this;if(d.hoverIntent_t)d.hoverIntent_t=clearTimeout(d.hoverIntent_t);if(b.type=="mouseenter"){if(j=c.pageX,k=c.pageY,a(d).on("mousemove.hoverIntent",l),d.hoverIntent_s!=1)d.hoverIntent_t=setTimeout(function(){o(c,d)},e.interval)}else if(a(d).off("mousemove.hoverIntent",l),d.hoverIntent_s==1)d.hoverIntent_t=setTimeout(function(){d.hoverIntent_t=clearTimeout(d.hoverIntent_t);d.hoverIntent_s=0;e.out.apply(d,[c])},e.timeout)};return this.on({"mouseenter.hoverIntent":d,
"mouseleave.hoverIntent":d},e.selector)}})(jQuery);typeof JSON!=="object"&&(JSON={});
(function(){function a(a){return a<10?"0"+a:a}function d(a){e.lastIndex=0;return e.test(a)?'"'+a.replace(e,function(a){var b=j[a];return typeof b==="string"?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function c(a,b){var e,h,j,w,t=f,x,n=b[a];n&&typeof n==="object"&&typeof n.toJSON==="function"&&(n=n.toJSON(a));typeof k==="function"&&(n=k.call(b,a,n));switch(typeof n){case "string":return d(n);case "number":return isFinite(n)?String(n):"null";case "boolean":case "null":return String(n);
case "object":if(!n)return"null";f+=g;x=[];if(Object.prototype.toString.apply(n)==="[object Array]"){w=n.length;for(e=0;e<w;e+=1)x[e]=c(e,n)||"null";j=x.length===0?"[]":f?"[\n"+f+x.join(",\n"+f)+"\n"+t+"]":"["+x.join(",")+"]";f=t;return j}if(k&&typeof k==="object"){w=k.length;for(e=0;e<w;e+=1)typeof k[e]==="string"&&(h=k[e],(j=c(h,n))&&x.push(d(h)+(f?": ":":")+j))}else for(h in n)Object.prototype.hasOwnProperty.call(n,h)&&(j=c(h,n))&&x.push(d(h)+(f?": ":":")+j);j=x.length===0?"{}":f?"{\n"+f+x.join(",\n"+
f)+"\n"+t+"}":"{"+x.join(",")+"}";f=t;return j}}if(typeof Date.prototype.toJSON!=="function")Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+a(this.getUTCMonth()+1)+"-"+a(this.getUTCDate())+"T"+a(this.getUTCHours())+":"+a(this.getUTCMinutes())+":"+a(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()};var b=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
e=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,f,g,j={"\u0008":"\\b","\t":"\\t","\n":"\\n","\u000c":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},k;if(typeof JSON.stringify!=="function")JSON.stringify=function(a,b,e){var d;g=f="";if(typeof e==="number")for(d=0;d<e;d+=1)g+=" ";else typeof e==="string"&&(g=e);if((k=b)&&typeof b!=="function"&&(typeof b!=="object"||typeof b.length!=="number"))throw Error("JSON.stringify");return c("",
{"":a})};if(typeof JSON.parse!=="function")JSON.parse=function(a,e){function c(a,b){var d,f,g=a[b];if(g&&typeof g==="object")for(d in g)Object.prototype.hasOwnProperty.call(g,d)&&(f=c(g,d),f!==void 0?g[d]=f:delete g[d]);return e.call(a,b,g)}var d;a=String(a);b.lastIndex=0;b.test(a)&&(a=a.replace(b,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(a.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,
"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return d=eval("("+a+")"),typeof e==="function"?c({"":d},""):d;throw new SyntaxError("JSON.parse");}})();
(function(){var a=function(a,b){var e=a.style[b];a.currentStyle?e=a.currentStyle[b]:window.getComputedStyle&&(e=document.defaultView.getComputedStyle(a,null).getPropertyValue(b));if(e=="auto"&&b=="cursor")for(var c=["a"],d=0;d<c.length;d++)if(a.tagName.toLowerCase()==c[d])return"pointer";return e},d=function(a){if(k.prototype._singleton){if(!a)a=window.event;var b;if(this!==window)b=this;else if(a.target)b=a.target;else if(a.srcElement)b=a.srcElement;k.prototype._singleton.setCurrent(b)}},c=function(a,
b){if(a.addClass)return a.addClass(b),a;if(b&&typeof b==="string"){var e=(b||"").split(/\s+/);if(a.nodeType===1)if(a.className){for(var c=" "+a.className+" ",d=a.className,f=0,g=e.length;f<g;f++)c.indexOf(" "+e[f]+" ")<0&&(d+=" "+e[f]);a.className=d.replace(/^\s+|\s+$/g,"")}else a.className=b}return a},b=function(a,b){if(a.removeClass)return a.removeClass(b),a;if(b&&typeof b==="string"||b===void 0){var e=(b||"").split(/\s+/);if(a.nodeType===1&&a.className)if(b){for(var c=(" "+a.className+" ").replace(/[\n\t]/g,
" "),d=0,f=e.length;d<f;d++)c=c.replace(" "+e[d]+" "," ");a.className=c.replace(/^\s+|\s+$/g,"")}else a.className=""}return a},e=function(a){return(a.indexOf("?")>=0?"&":"?")+"nocache="+(new Date).getTime()},f=function(a){var b=[];a.trustedDomains&&(typeof a.trustedDomains==="string"?b.push("trustedDomain="+a.trustedDomains):b.push("trustedDomain="+a.trustedDomains.join(",")));return b.join("&")},g=function(a,b){if(b.indexOf)return b.indexOf(a);for(var e=0,c=b.length;e<c;e++)if(b[e]===a)return e;
return-1},j=function(a){if(typeof a==="string")throw new TypeError("ZeroClipboard doesn't accept query strings.");if(!a.length)return[a];return a},k=function(a,b){a&&(k.prototype._singleton||this).glue(a);if(k.prototype._singleton)return k.prototype._singleton;k.prototype._singleton=this;this.options={};for(var c in p)this.options[c]=p[c];for(var d in b)this.options[d]=b[d];this.handlers={};if(k.detectFlashSupport()){c=k.prototype._singleton;d=document.getElementById("global-zeroclipboard-html-bridge");
if(!d){var g='      <object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" id="global-zeroclipboard-flash-bridge" width="100%" height="100%">         <param name="movie" value="'+c.options.moviePath+e(c.options.moviePath)+'"/>         <param name="allowScriptAccess" value="'+c.options.allowScriptAccess+'"/>         <param name="scale" value="exactfit"/>         <param name="loop" value="false"/>         <param name="menu" value="false"/>         <param name="quality" value="best" />         <param name="bgcolor" value="#ffffff"/>         <param name="wmode" value="transparent"/>         <param name="flashvars" value="'+
f(c.options)+'"/>         <embed src="'+c.options.moviePath+e(c.options.moviePath)+'"           loop="false" menu="false"           quality="best" bgcolor="#ffffff"           width="100%" height="100%"           name="global-zeroclipboard-flash-bridge"           allowScriptAccess="always"           allowFullScreen="false"           type="application/x-shockwave-flash"           wmode="transparent"           pluginspage="http://www.macromedia.com/go/getflashplayer"           flashvars="'+f(c.options)+
'"           scale="exactfit">         </embed>       </object>';d=document.createElement("div");d.id="global-zeroclipboard-html-bridge";d.setAttribute("class","global-zeroclipboard-container");d.setAttribute("data-clipboard-ready",!1);d.style.position="absolute";d.style.left="-9999px";d.style.top="-9999px";d.style.width="15px";d.style.height="15px";d.style.zIndex="9999";d.innerHTML=g;document.body.appendChild(d)}c.htmlBridge=d;c.flashBridge=document["global-zeroclipboard-flash-bridge"]||d.children[0].lastElementChild}},
l,o=[];k.prototype.setCurrent=function(b){l=b;this.reposition();b.getAttribute("title")&&this.setTitle(b.getAttribute("title"));this.setHandCursor(a(b,"cursor")=="pointer")};k.prototype.setText=function(a){if(a&&a!=="")this.options.text=a,this.ready()&&this.flashBridge.setText(a)};k.prototype.setTitle=function(a){a&&a!==""&&this.htmlBridge.setAttribute("title",a)};k.prototype.setSize=function(a,b){this.ready()&&this.flashBridge.setSize(a,b)};k.prototype.setHandCursor=function(a){this.ready()&&this.flashBridge.setHandCursor(a)};
k.version="1.1.7";var p={moviePath:"ZeroClipboard.swf",trustedDomains:null,text:null,hoverClass:"zeroclipboard-is-hover",activeClass:"zeroclipboard-is-active",allowScriptAccess:"sameDomain"};k.setDefaults=function(a){for(var b in a)p[b]=a[b]};k.destroy=function(){k.prototype._singleton.unglue(o);var a=k.prototype._singleton.htmlBridge;a.parentNode.removeChild(a);delete k.prototype._singleton};k.detectFlashSupport=function(){var a=!1;try{new ActiveXObject("ShockwaveFlash.ShockwaveFlash")&&(a=!0)}catch(b){navigator.mimeTypes["application/x-shockwave-flash"]&&
(a=!0)}return a};k.prototype.resetBridge=function(){this.htmlBridge.style.left="-9999px";this.htmlBridge.style.top="-9999px";this.htmlBridge.removeAttribute("title");this.htmlBridge.removeAttribute("data-clipboard-text");b(l,this.options.activeClass);l=null;this.options.text=null};k.prototype.ready=function(){var a=this.htmlBridge.getAttribute("data-clipboard-ready");return a==="true"||a===!0};k.prototype.reposition=function(){if(!l)return!1;var b=l,e={left:0,top:0,width:b.width||b.offsetWidth||0,
height:b.height||b.offsetHeight||0,zIndex:9999},c=a(b,"zIndex");if(c&&c!="auto")e.zIndex=parseInt(c,10);for(;b;){c=parseInt(a(b,"borderLeftWidth"),10);var d=parseInt(a(b,"borderTopWidth"),10);e.left+=isNaN(b.offsetLeft)?0:b.offsetLeft;e.left+=isNaN(c)?0:c;e.top+=isNaN(b.offsetTop)?0:b.offsetTop;e.top+=isNaN(d)?0:d;b=b.offsetParent}this.htmlBridge.style.top=e.top+"px";this.htmlBridge.style.left=e.left+"px";this.htmlBridge.style.width=e.width+"px";this.htmlBridge.style.height=e.height+"px";this.htmlBridge.style.zIndex=
e.zIndex+1;this.setSize(e.width,e.height)};k.dispatch=function(a,b){k.prototype._singleton.receiveEvent(a,b)};k.prototype.on=function(a,b){for(var e=a.toString().split(/\s/g),c=0;c<e.length;c++)a=e[c].toLowerCase().replace(/^on/,""),this.handlers[a]||(this.handlers[a]=b);this.handlers.noflash&&!k.detectFlashSupport()&&this.receiveEvent("onNoFlash",null)};k.prototype.addEventListener=k.prototype.on;k.prototype.off=function(a,b){for(var e=a.toString().split(/\s/g),c=0;c<e.length;c++)for(var d in a=
e[c].toLowerCase().replace(/^on/,""),this.handlers)d===a&&this.handlers[d]===b&&delete this.handlers[d]};k.prototype.removeEventListener=k.prototype.off;k.prototype.receiveEvent=function(a,e){a=a.toString().toLowerCase().replace(/^on/,"");var d=l;switch(a){case "load":if(e&&parseFloat(e.flashVersion.replace(",",".").replace(/[^0-9\.]/gi,""))<10){this.receiveEvent("onWrongFlash",{flashVersion:e.flashVersion});return}this.htmlBridge.setAttribute("data-clipboard-ready",!0);break;case "mouseover":c(d,
this.options.hoverClass);break;case "mouseout":b(d,this.options.hoverClass);this.resetBridge();break;case "mousedown":c(d,this.options.activeClass);break;case "mouseup":b(d,this.options.activeClass);break;case "datarequested":var f=d.getAttribute("data-clipboard-target");(f=(f=!f?null:document.getElementById(f))?f.value||f.textContent||f.innerText:d.getAttribute("data-clipboard-text"))&&this.setText(f);break;case "complete":this.options.text=null}this.handlers[a]&&(f=this.handlers[a],typeof f=="function"?
f.call(d,this,e):typeof f=="string"&&window[f].call(d,this,e))};k.prototype.glue=function(a){a=j(a);for(var b=0;b<a.length;b++)if(g(a[b],o)==-1){o.push(a[b]);var e=a[b],c=d;e.addEventListener?e.addEventListener("mouseover",c,!1):e.attachEvent&&e.attachEvent("onmouseover",c)}};k.prototype.unglue=function(a){a=j(a);for(var b=0;b<a.length;b++){var e=a[b],c=d;e.removeEventListener?e.removeEventListener("mouseover",c,!1):e.detachEvent&&e.detachEvent("onmouseover",c);e=g(a[b],o);e!=-1&&o.splice(e,1)}};
typeof module!=="undefined"?module.exports=k:typeof define==="function"&&define.amd?define(function(){return k}):window.ZeroClipboard=k})();
(function(a,d,c){function b(){g=d[j](function(){e.each(function(){var b=a(this),e=b.width(),c=b.height(),d=a.data(this,l);if(e!==d.w||c!==d.h)b.trigger(k,[d.w=e,d.h=c])});b()},f[o])}var e=a([]),f=a.resize=a.extend(a.resize,{}),g,j="setTimeout",k="resize",l=k+"-special-event",o="delay";f[o]=250;f.throttleWindow=!0;a.event.special[k]={setup:function(){if(!f.throttleWindow&&this[j])return!1;var c=a(this);e=e.add(c);a.data(this,l,{w:c.width(),h:c.height()});e.length===1&&b()},teardown:function(){if(!f.throttleWindow&&
this[j])return!1;var b=a(this);e=e.not(b);b.removeData(l);e.length||clearTimeout(g)},add:function(b){function e(b,f,g){var n=a(this),k=a.data(this,l);k.w=f!==c?f:n.width();k.h=g!==c?g:n.height();d.apply(this,arguments)}if(!f.throttleWindow&&this[j])return!1;var d;if(a.isFunction(b))return d=b,e;else d=b.handler,b.handler=e}}})(jQuery,this);
(function(a,d){typeof exports=="object"?module.exports=d():typeof define=="function"&&define.amd?define(d):a.Spinner=d()})(this,function(){function a(a,b){var e=document.createElement(a||"div"),c;for(c in b)e[c]=b[c];return e}function d(a){for(var b=1,e=arguments.length;b<e;b++)a.appendChild(arguments[b]);return a}function c(a,b,e,c){var d=["opacity",b,~~(a*100),e,c].join("-");e=0.01+e/c*100;c=Math.max(1-(1-a)/b*(100-e),a);var f=p.substring(0,p.indexOf("Animation")).toLowerCase();o[d]||(h.insertRule("@"+
(f&&"-"+f+"-"||"")+"keyframes "+d+"{0%{opacity:"+c+"}"+e+"%{opacity:"+a+"}"+(e+0.01)+"%{opacity:1}"+(e+b)%100+"%{opacity:"+a+"}100%{opacity:"+c+"}}",h.cssRules.length),o[d]=1);return d}function b(a,b){var e=a.style,c,d;b=b.charAt(0).toUpperCase()+b.slice(1);for(d=0;d<l.length;d++)if(c=l[d]+b,e[c]!==void 0)return c;if(e[b]!==void 0)return b}function e(a,e){for(var c in e)a.style[b(a,c)||c]=e[c];return a}function f(a){for(var b=1;b<arguments.length;b++){var e=arguments[b],c;for(c in e)a[c]===void 0&&
(a[c]=e[c])}return a}function g(a){for(var b={x:a.offsetLeft,y:a.offsetTop};a=a.offsetParent;)b.x+=a.offsetLeft,b.y+=a.offsetTop;return b}function j(a){if(typeof this=="undefined")return new j(a);this.opts=f(a||{},j.defaults,m)}function k(){function b(e,c){return a("<"+e+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',c)}h.addRule(".spin-vml","behavior:url(#default#VML)");j.prototype.lines=function(a,c){function f(){return e(b("group",{coordsize:h+" "+h,coordorigin:-k+" "+-k}),{width:h,
height:h})}function g(a,h,j){d(l,d(e(f(),{rotation:360/c.lines*a+"deg",left:~~h}),d(e(b("roundrect",{arcsize:c.corners}),{width:k,height:c.width,left:c.radius,top:-c.width>>1,filter:j}),b("fill",{color:typeof c.color=="string"?c.color:c.color[a%c.color.length],opacity:c.opacity}),b("stroke",{opacity:0}))))}var k=c.length+c.width,h=2*k,j=-(c.width+c.length)*2+"px",l=e(f(),{position:"absolute",top:j,left:j});if(c.shadow)for(j=1;j<=c.lines;j++)g(j,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");
for(j=1;j<=c.lines;j++)g(j);return d(a,l)};j.prototype.opacity=function(a,b,e,c){a=a.firstChild;c=c.shadow&&c.lines||0;if(a&&b+c<a.childNodes.length&&(a=(a=(a=a.childNodes[b+c])&&a.firstChild)&&a.firstChild))a.opacity=e}}var l=["webkit","Moz","ms","O"],o={},p,h=function(){var b=a("style",{type:"text/css"});d(document.getElementsByTagName("head")[0],b);return b.sheet||b.styleSheet}(),m={lines:12,length:7,width:5,radius:10,rotate:0,corners:1,color:"#000",direction:1,speed:1,trail:100,opacity:0.25,fps:20,
zIndex:2E9,className:"spinner",top:"auto",left:"auto",position:"relative"};j.defaults={};f(j.prototype,{spin:function(b){this.stop();var c=this,d=c.opts,f=c.el=e(a(0,{className:d.className}),{position:d.position,width:0,zIndex:d.zIndex}),k=d.radius+d.length+d.width,h,j;b&&(b.insertBefore(f,b.firstChild||null),j=g(b),h=g(f),e(f,{left:(d.left=="auto"?j.x-h.x+(b.offsetWidth>>1):parseInt(d.left,10)+k)+"px",top:(d.top=="auto"?j.y-h.y+(b.offsetHeight>>1):parseInt(d.top,10)+k)+"px"}));f.setAttribute("role",
"progressbar");c.lines(f,c.opts);if(!p){var s=0,l=(d.lines-1)*(1-d.direction)/2,o,m=d.fps,v=m/d.speed,G=(1-d.opacity)/(v*d.trail/100),w=v/d.lines;(function K(){s++;for(var a=0;a<d.lines;a++)o=Math.max(1-(s+(d.lines-a)*w)%v*G,d.opacity),c.opacity(f,a*d.direction+l,o,d);c.timeout=c.el&&setTimeout(K,~~(1E3/m))})()}return c},stop:function(){var a=this.el;if(a)clearTimeout(this.timeout),a.parentNode&&a.parentNode.removeChild(a),this.el=void 0;return this},lines:function(b,f){function g(b,c){return e(a(),
{position:"absolute",width:f.length+f.width+"px",height:f.width+"px",background:b,boxShadow:c,transformOrigin:"left",transform:"rotate("+~~(360/f.lines*k+f.rotate)+"deg) translate("+f.radius+"px,0)",borderRadius:(f.corners*f.width>>1)+"px"})}for(var k=0,h=(f.lines-1)*(1-f.direction)/2,j;k<f.lines;k++)j=e(a(),{position:"absolute",top:1+~(f.width/2)+"px",transform:f.hwaccel?"translate3d(0,0,0)":"",opacity:f.opacity,animation:p&&c(f.opacity,f.trail,h+k*f.direction,f.lines)+" "+1/f.speed+"s linear infinite"}),
f.shadow&&d(j,e(g("#000","0 0 4px #000"),{top:"2px"})),d(b,d(j,g(typeof f.color=="string"?f.color:f.color[k%f.color.length],"0 0 1px rgba(0,0,0,.1)")));return b},opacity:function(a,b,e){if(b<a.childNodes.length)a.childNodes[b].style.opacity=e}});var w=e(a("group"),{behavior:"url(#default#VML)"});!b(w,"transform")&&w.adj?k():p=b(w,"animation");return j});
(function(a){if(typeof exports=="object")a(require("jquery"),require("spin"));else if(typeof define=="function"&&define.amd)define(["jquery","spin"],a);else{if(!window.Spinner)throw Error("Spin.js not present");a(window.jQuery,window.Spinner)}})(function(a,d){a.fn.spin=function(c,b){return this.each(function(){var e=a(this),f=e.data();f.spinner&&(f.spinner.stop(),delete f.spinner);if(c!==!1)c=a.extend({color:b||e.css("color")},a.fn.spin.presets[c]||c),f.spinner=(new d(c)).spin(this)})};a.fn.spin.presets=
{tiny:{lines:8,length:2,width:2,radius:3},small:{lines:8,length:4,width:3,radius:5},large:{lines:10,length:8,width:4,radius:8}}});
(function(a,d){window.mixpanel=d;var c,b,e,f;c=a.createElement("script");c.type="text/javascript";c.async=!0;c.src=("https:"===a.location.protocol?"https:":"http:")+"//cdn.mxpnl.com/libs/mixpanel-2.2.min.js";b=a.getElementsByTagName("script")[0];b.parentNode.insertBefore(c,b);d._i=[];d.init=function(a,b,c){function l(a,b){var e=b.split(".");2==e.length&&(a=a[e[0]],b=e[1]);a[b]=function(){a.push([b].concat(Array.prototype.slice.call(arguments,0)))}}var o=d;"undefined"!==typeof c?o=d[c]=[]:c="mixpanel";
o.people=o.people||[];e=["disable","track","track_pageview","track_links","track_forms","register","register_once","unregister","identify","alias","name_tag","set_config","people.set","people.set_once","people.increment","people.track_charge","people.append"];for(f=0;f<e.length;f++)l(o,e[f]);d._i.push([a,b,c])};d.__SV=1.2})(document,window.mixpanel||[]);
(function(a){var d={cursor:"move",decelerate:!0,triggerHardware:!1,y:!0,x:!0,slowdown:0.9,maxvelocity:40,throttleFPS:60,movingClass:{up:"kinetic-moving-up",down:"kinetic-moving-down",left:"kinetic-moving-left",right:"kinetic-moving-right"},deceleratingClass:{up:"kinetic-decelerating-up",down:"kinetic-decelerating-down",left:"kinetic-decelerating-left",right:"kinetic-decelerating-right"}};if(!window.requestAnimationFrame)window.requestAnimationFrame=function(){return window.webkitRequestAnimationFrame||
window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){window.setTimeout(a,1E3/60)}}();a.support=a.support||{};a.extend(a.support,{touch:"ontouchend"in document});var c=function(){return!1},b=function(a,b){var e=a;a>0?a>b&&(e=b):a<0-b&&(e=0-b);return e},e=function(a,b){this.removeClass(a.movingClass.up).removeClass(a.movingClass.down).removeClass(a.movingClass.left).removeClass(a.movingClass.right).removeClass(a.deceleratingClass.up).removeClass(a.deceleratingClass.down).removeClass(a.deceleratingClass.left).removeClass(a.deceleratingClass.right);
a.velocity>0&&this.addClass(b.right);a.velocity<0&&this.addClass(b.left);a.velocityY>0&&this.addClass(b.down);a.velocityY<0&&this.addClass(b.up)},f=function(a,b){b.velocity=0;b.velocityY=0;b.decelerate=!0;typeof b.stopped==="function"&&b.stopped.call(a,b)},g=function(a,b){var c=a[0];if(b.x&&c.scrollWidth>0){if(c.scrollLeft=b.scrollLeft=c.scrollLeft+b.velocity,Math.abs(b.velocity)>0)b.velocity=b.decelerate?Math.floor(Math.abs(b.velocity))===0?0:b.velocity*b.slowdown:b.velocity}else b.velocity=0;if(b.y&&
c.scrollHeight>0){if(c.scrollTop=b.scrollTop=c.scrollTop+b.velocityY,Math.abs(b.velocityY)>0)b.velocityY=b.decelerate?Math.floor(Math.abs(b.velocityY))===0?0:b.velocityY*b.slowdown:b.velocityY}else b.velocityY=0;e.call(a,b,b.deceleratingClass);typeof b.moved==="function"&&b.moved.call(a,b);Math.abs(b.velocity)>0||Math.abs(b.velocityY)>0?window.requestAnimationFrame(function(){g(a,b)}):f(a,b)},j=function(b){var e=a.kinetic.callMethods[b],c=Array.prototype.slice.call(arguments);e&&this.each(function(){var b=
c.slice(1),d=a(this).data("kinetic-settings");b.unshift(d);e.apply(this,b)})},k=function(b,e){a.support.touch?b.bind("touchstart",e.events.touchStart).bind("touchend",e.events.inputEnd).bind("touchmove",e.events.touchMove):b.mousedown(e.events.inputDown).mouseup(e.events.inputEnd).mousemove(e.events.inputMove);b.click(e.events.inputClick).scroll(e.events.scroll).bind("selectstart",c).bind("dragstart",e.events.dragStart)},l=function(c){this.addClass("kinetic-active").each(function(){var f=this,h=a(this);
if(!h.data("kinetic-settings")){var j=a.extend({},d,c),l,t=!1,x,n=!1,r=!1,u=1E3/j.throttleFPS,z,q;j.velocity=0;j.velocityY=0;var s=function(){r=x=l=!1};a(document).mouseup(s).click(s);var B=function(){j.velocity=b(t-l,j.maxvelocity);j.velocityY=b(n-x,j.maxvelocity)},F=function(b){if(a.isFunction(j.filterTarget))return j.filterTarget.call(f,b)!==!1;return!0},T=function(a,b){r=!0;j.velocity=t=0;j.velocityY=n=0;l=a;x=b},v=function(b,c){if(!z||new Date>new Date(z.getTime()+u))if(z=new Date,r&&(l||x))q&&
(a(q).blur(),q=null,h.focus()),j.decelerate=!1,j.velocity=j.velocityY=0,h[0].scrollLeft=j.scrollLeft=j.x?h[0].scrollLeft-(b-l):h[0].scrollLeft,h[0].scrollTop=j.scrollTop=j.y?h[0].scrollTop-(c-x):h[0].scrollTop,t=l,n=x,l=b,x=c,B(),e.call(h,j,j.movingClass),typeof j.moved==="function"&&j.moved.call(h,j)};j.events={touchStart:function(a){var b;F(a.target)&&(b=a.originalEvent.touches[0],T(b.clientX,b.clientY),a.stopPropagation())},touchMove:function(a){var b;r&&(b=a.originalEvent.touches[0],v(b.clientX,
b.clientY),a.preventDefault&&a.preventDefault())},inputDown:function(a){if(F(a.target))T(a.clientX,a.clientY),q=a.target,a.target.nodeName==="IMG"&&a.preventDefault(),a.stopPropagation()},inputEnd:function(a){if(l&&t&&j.decelerate===!1)j.decelerate=!0,B(),l=t=r=!1,g(h,j);q=null;a.preventDefault&&a.preventDefault()},inputMove:function(a){r&&(v(a.clientX,a.clientY),a.preventDefault&&a.preventDefault())},scroll:function(a){typeof j.moved==="function"&&j.moved.call(h,j);a.preventDefault&&a.preventDefault()},
inputClick:function(a){if(Math.abs(j.velocity)>0)return a.preventDefault(),!1},dragStart:function(){if(q)return!1}};k(h,j);h.data("kinetic-settings",j).css("cursor",j.cursor);j.triggerHardware&&h.css({"-webkit-transform":"translate3d(0,0,0)","-webkit-perspective":"1000","-webkit-backface-visibility":"hidden"})}})};a.kinetic={settingsKey:"kinetic-settings",callMethods:{start:function(b,e){var c=a(this);if(b=a.extend(b,e))b.decelerate=!1,g(c,b)},end:function(b){a(this);if(b)b.decelerate=!0},stop:function(b){var e=
a(this);f(e,b)},detach:function(b){var e=a(this);a.support.touch?e.unbind("touchstart",b.events.touchStart).unbind("touchend",b.events.inputEnd).unbind("touchmove",b.events.touchMove):e.unbind("mousedown",b.events.inputDown).unbind("mouseup",b.events.inputEnd).unbind("mousemove",b.events.inputMove).unbind("scroll",b.events.scroll);e.unbind("click",b.events.inputClick).unbind("selectstart",c);e.unbind("dragstart",b.events.dragStart);e.removeClass("kinetic-active").css("cursor","")},attach:function(b){var e=
a(this);k(e,b);e.addClass("kinetic-active").css("cursor","move")}}};a.fn.kinetic=function(a){typeof a==="string"?j.apply(this,arguments):l.call(this,a);return this}})(window.jQuery||window.Zepto);
(function(){var a=[].indexOf||function(a){for(var b=0,e=this.length;b<e;b++)if(b in this&&this[b]===a)return b;return-1},d=[].slice;(function(a,b){return typeof define==="function"&&define.amd?define("waypoints",["jquery"],function(e){return b(e,a)}):b(a.jQuery,a)})(this,function(c,b){var e,f,g,j,k,l,o,p,h,m,w,t,x,n,r,u;e=c(b);p=a.call(b,"ontouchstart")>=0;j={horizontal:{},vertical:{}};k=1;o={};l="waypoints-context-id";w="resize.waypoints";t="scroll.waypoints";x=1;n="waypoints-waypoint-ids";r="waypoint";
u="waypoints";f=function(){function a(e){var d=this;this.$element=e;this.element=e[0];this.didScroll=this.didResize=!1;this.id="context"+k++;this.oldScroll={x:e.scrollLeft(),y:e.scrollTop()};this.waypoints={horizontal:{},vertical:{}};e.data(l,this.id);o[this.id]=this;e.bind(t,function(){var a;if(!d.didScroll&&!p)return d.didScroll=!0,b.setTimeout(function(){d.doScroll();return d.didScroll=!1},c[u].settings.scrollThrottle)});e.bind(w,function(){var a;if(!d.didResize)return d.didResize=!0,b.setTimeout(function(){c[u]("refresh");
return d.didResize=!1},c[u].settings.resizeThrottle)})}a.prototype.doScroll=function(){var a,b=this;a={horizontal:{newScroll:this.$element.scrollLeft(),oldScroll:this.oldScroll.x,forward:"right",backward:"left"},vertical:{newScroll:this.$element.scrollTop(),oldScroll:this.oldScroll.y,forward:"down",backward:"up"}};if(p&&(!a.vertical.oldScroll||!a.vertical.newScroll))c[u]("refresh");c.each(a,function(a,e){var d,f,g;g=[];d=(f=e.newScroll>e.oldScroll)?e.forward:e.backward;c.each(b.waypoints[a],function(a,
b){var c,d;if(e.oldScroll<(c=b.offset)&&c<=e.newScroll)return g.push(b);else if(e.newScroll<(d=b.offset)&&d<=e.oldScroll)return g.push(b)});g.sort(function(a,b){return a.offset-b.offset});f||g.reverse();return c.each(g,function(a,b){if(b.options.continuous||a===g.length-1)return b.trigger([d])})});return this.oldScroll={x:a.horizontal.newScroll,y:a.vertical.newScroll}};a.prototype.refresh=function(){var a,b,e=this;b=c.isWindow(this.element);a=this.$element.offset();this.doScroll();a={horizontal:{contextOffset:b?
0:a.left,contextScroll:b?0:this.oldScroll.x,contextDimension:this.$element.width(),oldScroll:this.oldScroll.x,forward:"right",backward:"left",offsetProp:"left"},vertical:{contextOffset:b?0:a.top,contextScroll:b?0:this.oldScroll.y,contextDimension:b?c[u]("viewportHeight"):this.$element.height(),oldScroll:this.oldScroll.y,forward:"down",backward:"up",offsetProp:"top"}};return c.each(a,function(a,b){return c.each(e.waypoints[a],function(a,e){var d,f,g,n,k;d=e.options.offset;g=e.offset;f=c.isWindow(e.element)?
0:e.$element.offset()[b.offsetProp];c.isFunction(d)?d=d.apply(e.element):typeof d==="string"&&(d=parseFloat(d),e.options.offset.indexOf("%")>-1&&(d=Math.ceil(b.contextDimension*d/100)));e.offset=f-b.contextOffset+b.contextScroll-d;if(!(e.options.onlyOnScroll&&g!=null)&&e.enabled)if(g!==null&&g<(n=b.oldScroll)&&n<=e.offset)return e.trigger([b.backward]);else if(g!==null&&g>(k=b.oldScroll)&&k>=e.offset)return e.trigger([b.forward]);else if(g===null&&b.oldScroll>=e.offset)return e.trigger([b.forward])})})};
a.prototype.checkEmpty=function(){if(c.isEmptyObject(this.waypoints.horizontal)&&c.isEmptyObject(this.waypoints.vertical))return this.$element.unbind([w,t].join(" ")),delete o[this.id]};return a}();g=function(){function a(b,e,d){var f;d=c.extend({},c.fn[r].defaults,d);if(d.offset==="bottom-in-view")d.offset=function(){var a;a=c[u]("viewportHeight");c.isWindow(e.element)||(a=e.$element.height());return a-c(this).outerHeight()};this.$element=b;this.element=b[0];this.axis=d.horizontal?"horizontal":"vertical";
this.callback=d.handler;this.context=e;this.enabled=d.enabled;this.id="waypoints"+x++;this.offset=null;this.options=d;e.waypoints[this.axis][this.id]=this;j[this.axis][this.id]=this;d=(f=b.data(n))!=null?f:[];d.push(this.id);b.data(n,d)}a.prototype.trigger=function(a){if(this.enabled&&(this.callback!=null&&this.callback.apply(this.element,a),this.options.triggerOnce))return this.destroy()};a.prototype.disable=function(){return this.enabled=!1};a.prototype.enable=function(){this.context.refresh();
return this.enabled=!0};a.prototype.destroy=function(){delete j[this.axis][this.id];delete this.context.waypoints[this.axis][this.id];return this.context.checkEmpty()};a.getWaypointsByElement=function(a){var b;a=c(a).data(n);if(!a)return[];b=c.extend({},j.horizontal,j.vertical);return c.map(a,function(a){return b[a]})};return a}();m={init:function(a,b){b==null&&(b={});if(b.handler==null)b.handler=a;this.each(function(){var a,e,d;a=c(this);d=(e=b.context)!=null?e:c.fn[r].defaults.context;c.isWindow(d)||
(d=a.closest(d));d=c(d);(e=o[d.data(l)])||(e=new f(d));return new g(a,e,b)});c[u]("refresh");return this},disable:function(){return m._invoke(this,"disable")},enable:function(){return m._invoke(this,"enable")},destroy:function(){return m._invoke(this,"destroy")},prev:function(a,b){return m._traverse.call(this,a,b,function(a,b,e){if(b>0)return a.push(e[b-1])})},next:function(a,b){return m._traverse.call(this,a,b,function(a,b,e){if(b<e.length-1)return a.push(e[b+1])})},_traverse:function(a,e,d){var f,
g;a==null&&(a="vertical");e==null&&(e=b);g=h.aggregate(e);f=[];this.each(function(){var b;b=c.inArray(this,g[a]);return d(f,b,g[a])});return this.pushStack(f)},_invoke:function(a,b){a.each(function(){var a;a=g.getWaypointsByElement(this);return c.each(a,function(a,e){e[b]();return!0})});return this}};c.fn[r]=function(){var a,b;b=arguments[0];a=2<=arguments.length?d.call(arguments,1):[];return m[b]?m[b].apply(this,a):c.isFunction(b)?m.init.apply(this,arguments):c.isPlainObject(b)?m.init.apply(this,
[null,b]):b?c.error("The "+b+" method does not exist in jQuery Waypoints."):c.error("jQuery Waypoints needs a callback function or handler option.")};c.fn[r].defaults={context:b,continuous:!0,enabled:!0,horizontal:!1,offset:0,triggerOnce:!1};h={refresh:function(){return c.each(o,function(a,b){return b.refresh()})},viewportHeight:function(){var a;return(a=b.innerHeight)!=null?a:e.height()},aggregate:function(a){var b,e,d;b=j;a&&(b=(d=o[c(a).data(l)])!=null?d.waypoints:void 0);if(!b)return[];e={horizontal:[],
vertical:[]};c.each(e,function(a,d){c.each(b[a],function(a,b){return d.push(b)});d.sort(function(a,b){return a.offset-b.offset});e[a]=c.map(d,function(a){return a.element});return e[a]=c.unique(e[a])});return e},above:function(a){a==null&&(a=b);return h._filter(a,"vertical",function(a,b){return b.offset<=a.oldScroll.y})},below:function(a){a==null&&(a=b);return h._filter(a,"vertical",function(a,b){return b.offset>a.oldScroll.y})},left:function(a){a==null&&(a=b);return h._filter(a,"horizontal",function(a,
b){return b.offset<=a.oldScroll.x})},right:function(a){a==null&&(a=b);return h._filter(a,"horizontal",function(a,b){return b.offset>a.oldScroll.x})},enable:function(){return h._invoke("enable")},disable:function(){return h._invoke("disable")},destroy:function(){return h._invoke("destroy")},extendFn:function(a,b){return m[a]=b},_invoke:function(a){var b;b=c.extend({},j.vertical,j.horizontal);return c.each(b,function(b,e){e[a]();return!0})},_filter:function(a,b,e){var d,f;d=o[c(a).data(l)];if(!d)return[];
f=[];c.each(d.waypoints[b],function(a,b){if(e(d,b))return f.push(b)});f.sort(function(a,b){return a.offset-b.offset});return c.map(f,function(a){return a.element})}};c[u]=function(){var a,b;b=arguments[0];a=2<=arguments.length?d.call(arguments,1):[];return h[b]?h[b].apply(null,a):h.aggregate.call(null,b)};c[u].settings={resizeThrottle:100,scrollThrottle:30};return e.load(function(){return c[u]("refresh")})})}).call(this);
(function(a,d){typeof exports==="object"?module.exports=d(require("./punycode"),require("./IPv6"),require("./SecondLevelDomains")):typeof define==="function"&&define.amd?define(["./punycode","./IPv6","./SecondLevelDomains"],d):a.URI=d(a.punycode,a.IPv6,a.SecondLevelDomains,a)})(this,function(a,d,c,b){function e(a,b){if(!(this instanceof e))return new e(a,b);a===void 0&&(a=typeof location!=="undefined"?location.href+"":"");this.href(a);if(b!==void 0)return this.absoluteTo(b);return this}function f(a){return a.replace(/([.*+?^=!:${}()|[\]\/\\])/g,
"\\$1")}function g(a){if(a===void 0)return"Undefined";return String(Object.prototype.toString.call(a)).slice(8,-1)}function j(a){return g(a)==="Array"}function k(a,b){var e,c;if(j(b)){e=0;for(c=b.length;e<c;e++)if(!k(a,b[e]))return!1;return!0}var d=g(b);e=0;for(c=a.length;e<c;e++)if(d==="RegExp"){if(typeof a[e]==="string"&&a[e].match(b))return!0}else if(a[e]===b)return!0;return!1}function l(a,b){if(!j(a)||!j(b))return!1;if(a.length!==b.length)return!1;a.sort();b.sort();for(var e=0,c=a.length;e<c;e++)if(a[e]!==
b[e])return!1;return!0}function o(a){return escape(a)}function p(a){return encodeURIComponent(a).replace(/[!'()*]/g,o).replace(/\*/g,"%2A")}var h=b&&b.URI,m=e.prototype,w=Object.prototype.hasOwnProperty;e._parts=function(){return{protocol:null,username:null,password:null,hostname:null,urn:null,port:null,path:null,query:null,fragment:null,duplicateQueryParameters:e.duplicateQueryParameters,escapeQuerySpace:e.escapeQuerySpace}};e.duplicateQueryParameters=!1;e.escapeQuerySpace=!0;e.protocol_expression=
/^[a-z][a-z0-9-+-]*$/i;e.idn_expression=/[^a-z0-9\.-]/i;e.punycode_expression=/(xn--)/i;e.ip4_expression=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/;e.ip6_expression=/^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/;
e.find_uri_expression=/\b((?:[a-z][\w-]+:(?:\/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:'".,<>?\u00ab\u00bb\u201c\u201d\u2018\u2019]))/ig;e.defaultPorts={http:"80",https:"443",ftp:"21",gopher:"70",ws:"80",wss:"443"};e.invalid_hostname_characters=/[^a-zA-Z0-9\.-]/;e.domAttributes={a:"href",blockquote:"cite",link:"href",base:"href",script:"src",form:"action",img:"src",area:"href",
iframe:"src",embed:"src",source:"src",track:"src",input:"src"};e.getDomAttribute=function(a){if(a&&a.nodeName){var b=a.nodeName.toLowerCase();if(!(b==="input"&&a.type!=="image"))return e.domAttributes[b]}};e.encode=p;e.decode=decodeURIComponent;e.iso8859=function(){e.encode=escape;e.decode=unescape};e.unicode=function(){e.encode=p;e.decode=decodeURIComponent};e.characters={pathname:{encode:{expression:/%(24|26|2B|2C|3B|3D|3A|40)/ig,map:{"%24":"$","%26":"&","%2B":"+","%2C":",","%3B":";","%3D":"=",
"%3A":":","%40":"@"}},decode:{expression:/[\/\?#]/g,map:{"/":"%2F","?":"%3F","#":"%23"}}},reserved:{encode:{expression:/%(21|23|24|26|27|28|29|2A|2B|2C|2F|3A|3B|3D|3F|40|5B|5D)/ig,map:{"%3A":":","%2F":"/","%3F":"?","%23":"#","%5B":"[","%5D":"]","%40":"@","%21":"!","%24":"$","%26":"&","%27":"'","%28":"(","%29":")","%2A":"*","%2B":"+","%2C":",","%3B":";","%3D":"="}}}};e.encodeQuery=function(a,b){var c=e.encode(a+"");return b?c.replace(/%20/g,"+"):c};e.decodeQuery=function(a,b){a+="";try{return e.decode(b?
a.replace(/\+/g,"%20"):a)}catch(c){return a}};e.recodePath=function(a){a=(a+"").split("/");for(var b=0,c=a.length;b<c;b++)a[b]=e.encodePathSegment(e.decode(a[b]));return a.join("/")};e.decodePath=function(a){a=(a+"").split("/");for(var b=0,c=a.length;b<c;b++)a[b]=e.decodePathSegment(a[b]);return a.join("/")};var t={encode:"encode",decode:"decode"},x,n=function(a,b){return function(c){return e[b](c+"").replace(e.characters[a][b].expression,function(c){return e.characters[a][b].map[c]})}};for(x in t)e[x+
"PathSegment"]=n("pathname",t[x]);e.encodeReserved=n("reserved","encode");e.parse=function(a,b){var c;b||(b={});c=a.indexOf("#");if(c>-1)b.fragment=a.substring(c+1)||null,a=a.substring(0,c);c=a.indexOf("?");if(c>-1)b.query=a.substring(c+1)||null,a=a.substring(0,c);if(a.substring(0,2)==="//")b.protocol=null,a=a.substring(2),a=e.parseAuthority(a,b);else if(c=a.indexOf(":"),c>-1)b.protocol=a.substring(0,c)||null,b.protocol&&!b.protocol.match(e.protocol_expression)?b.protocol=void 0:b.protocol==="file"?
a=a.substring(c+3):a.substring(c+1,c+3)==="//"?(a=a.substring(c+3),a=e.parseAuthority(a,b)):(a=a.substring(c+1),b.urn=!0);b.path=a;return b};e.parseHost=function(a,b){var e=a.indexOf("/"),c;if(e===-1)e=a.length;a.charAt(0)==="["?(c=a.indexOf("]"),b.hostname=a.substring(1,c)||null,b.port=a.substring(c+2,e)||null):a.indexOf(":")!==a.lastIndexOf(":")?(b.hostname=a.substring(0,e)||null,b.port=null):(c=a.substring(0,e).split(":"),b.hostname=c[0]||null,b.port=c[1]||null);b.hostname&&a.substring(e).charAt(0)!==
"/"&&(e++,a="/"+a);return a.substring(e)||"/"};e.parseAuthority=function(a,b){a=e.parseUserinfo(a,b);return e.parseHost(a,b)};e.parseUserinfo=function(a,b){var c=a.indexOf("/"),d=c>-1?a.lastIndexOf("@",c):a.indexOf("@");d>-1&&(c===-1||d<c)?(c=a.substring(0,d).split(":"),b.username=c[0]?e.decode(c[0]):null,c.shift(),b.password=c[0]?e.decode(c.join(":")):null,a=a.substring(d+1)):(b.username=null,b.password=null);return a};e.parseQuery=function(a,b){if(!a)return{};a=a.replace(/&+/g,"&").replace(/^\?*&*|&+$/g,
"");if(!a)return{};for(var c={},d=a.split("&"),f=d.length,g,n,k=0;k<f;k++)g=d[k].split("="),n=e.decodeQuery(g.shift(),b),g=g.length?e.decodeQuery(g.join("="),b):null,c[n]?(typeof c[n]==="string"&&(c[n]=[c[n]]),c[n].push(g)):c[n]=g;return c};e.build=function(a){var b="";a.protocol&&(b+=a.protocol+":");if(!a.urn&&(b||a.hostname))b+="//";b+=e.buildAuthority(a)||"";typeof a.path==="string"&&(a.path.charAt(0)!=="/"&&typeof a.hostname==="string"&&(b+="/"),b+=a.path);typeof a.query==="string"&&a.query&&
(b+="?"+a.query);typeof a.fragment==="string"&&a.fragment&&(b+="#"+a.fragment);return b};e.buildHost=function(a){var b="";if(a.hostname)e.ip6_expression.test(a.hostname)?b+=a.port?"["+a.hostname+"]:"+a.port:a.hostname:(b+=a.hostname,a.port&&(b+=":"+a.port));else return"";return b};e.buildAuthority=function(a){return e.buildUserinfo(a)+e.buildHost(a)};e.buildUserinfo=function(a){var b="";a.username&&(b+=e.encode(a.username),a.password&&(b+=":"+e.encode(a.password)),b+="@");return b};e.buildQuery=function(a,
b,c){var d="",f,g,n,k;for(g in a)if(w.call(a,g)&&g)if(j(a[g])){f={};n=0;for(k=a[g].length;n<k;n++)a[g][n]!==void 0&&f[a[g][n]+""]===void 0&&(d+="&"+e.buildQueryParameter(g,a[g][n],c),b!==!0&&(f[a[g][n]+""]=!0))}else a[g]!==void 0&&(d+="&"+e.buildQueryParameter(g,a[g],c));return d.substring(1)};e.buildQueryParameter=function(a,b,c){return e.encodeQuery(a,c)+(b!==null?"="+e.encodeQuery(b,c):"")};e.addQuery=function(a,b,c){if(typeof b==="object")for(var d in b)w.call(b,d)&&e.addQuery(a,d,b[d]);else if(typeof b===
"string")a[b]===void 0?a[b]=c:(typeof a[b]==="string"&&(a[b]=[a[b]]),j(c)||(c=[c]),a[b]=a[b].concat(c));else throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");};e.removeQuery=function(a,b,c){var d;if(j(b)){c=0;for(d=b.length;c<d;c++)a[b[c]]=void 0}else if(typeof b==="object")for(d in b)w.call(b,d)&&e.removeQuery(a,d,b[d]);else if(typeof b==="string")if(c!==void 0)if(a[b]===c)a[b]=void 0;else{if(j(a[b])){d=a[b];var f={},g,n;if(j(c)){g=0;for(n=c.length;g<n;g++)f[c[g]]=
!0}else f[c]=!0;g=0;for(n=d.length;g<n;g++)f[d[g]]!==void 0&&(d.splice(g,1),n--,g--);a[b]=d}}else a[b]=void 0;else throw new TypeError("URI.addQuery() accepts an object, string as the first parameter");};e.hasQuery=function(a,b,c,d){if(typeof b==="object"){for(var f in b)if(w.call(b,f)&&!e.hasQuery(a,f,b[f]))return!1;return!0}else if(typeof b!=="string")throw new TypeError("URI.hasQuery() accepts an object, string as the name parameter");switch(g(c)){case "Undefined":return b in a;case "Boolean":return a=
Boolean(j(a[b])?a[b].length:a[b]),c===a;case "Function":return!!c(a[b],b,a);case "Array":if(!j(a[b]))return!1;return(d?k:l)(a[b],c);case "RegExp":if(!j(a[b]))return Boolean(a[b]&&a[b].match(c));if(!d)return!1;return k(a[b],c);case "Number":c=String(c);case "String":if(!j(a[b]))return a[b]===c;if(!d)return!1;return k(a[b],c);default:throw new TypeError("URI.hasQuery() accepts undefined, boolean, string, number, RegExp, Function as the value parameter");}};e.commonPath=function(a,b){var e=Math.min(a.length,
b.length),c;for(c=0;c<e;c++)if(a.charAt(c)!==b.charAt(c)){c--;break}if(c<1)return a.charAt(0)===b.charAt(0)&&a.charAt(0)==="/"?"/":"";if(a.charAt(c)!=="/"||b.charAt(c)!=="/")c=a.substring(0,c).lastIndexOf("/");return a.substring(0,c+1)};e.withinString=function(a,b){return a.replace(e.find_uri_expression,b)};e.ensureValidHostname=function(b){if(b.match(e.invalid_hostname_characters)){if(!a)throw new TypeError("Hostname '"+b+"' contains characters other than [A-Z0-9.-] and Punycode.js is not available");
if(a.toASCII(b).match(e.invalid_hostname_characters))throw new TypeError("Hostname '"+b+"' contains characters other than [A-Z0-9.-]");}};e.noConflict=function(a){if(a){a={URI:this.noConflict()};if(URITemplate&&typeof URITemplate.noConflict=="function")a.URITemplate=URITemplate.noConflict();if(d&&typeof d.noConflict=="function")a.IPv6=d.noConflict();if(SecondLevelDomains&&typeof SecondLevelDomains.noConflict=="function")a.SecondLevelDomains=SecondLevelDomains.noConflict();return a}else if(b.URI===
this)b.URI=h;return this};m.build=function(a){if(a===!0)this._deferred_build=!0;else if(a===void 0||this._deferred_build)this._string=e.build(this._parts),this._deferred_build=!1;return this};m.clone=function(){return new e(this)};m.valueOf=m.toString=function(){return this.build(!1)._string};t={protocol:"protocol",username:"username",password:"password",hostname:"hostname",port:"port"};n=function(a){return function(b,e){return b===void 0?this._parts[a]||"":(this._parts[a]=b||null,this.build(!e),
this)}};for(x in t)m[x]=n(t[x]);t={query:"?",fragment:"#"};n=function(a,b){return function(e,c){return e===void 0?this._parts[a]||"":(e!==null&&(e+="",e.charAt(0)===b&&(e=e.substring(1))),this._parts[a]=e,this.build(!c),this)}};for(x in t)m[x]=n(x,t[x]);t={search:["?","query"],hash:["#","fragment"]};n=function(a,b){return function(e,c){var d=this[a](e,c);return typeof d==="string"&&d.length?b+d:d}};for(x in t)m[x]=n(t[x][1],t[x][0]);m.pathname=function(a,b){if(a===void 0||a===!0){var c=this._parts.path||
(this._parts.hostname?"/":"");return a?e.decodePath(c):c}else return this._parts.path=a?e.recodePath(a):"/",this.build(!b),this};m.path=m.pathname;m.href=function(a,b){var c;if(a===void 0)return this.toString();this._string="";this._parts=e._parts();var d=a instanceof e,f=typeof a==="object"&&(a.hostname||a.path||a.pathname);a.nodeName&&(f=e.getDomAttribute(a),a=a[f]||"",f=!1);!d&&f&&a.pathname!==void 0&&(a=a.toString());if(typeof a==="string")this._parts=e.parse(a,this._parts);else if(d||f)for(c in d=
d?a._parts:a,d)w.call(this._parts,c)&&(this._parts[c]=d[c]);else throw new TypeError("invalid input");this.build(!b);return this};m.is=function(a){var b=!1,d=!1,f=!1,g=!1,n=!1,k=!1,h=!1,j=!this._parts.urn;this._parts.hostname&&(j=!1,d=e.ip4_expression.test(this._parts.hostname),f=e.ip6_expression.test(this._parts.hostname),b=d||f,n=(g=!b)&&c&&c.has(this._parts.hostname),k=g&&e.idn_expression.test(this._parts.hostname),h=g&&e.punycode_expression.test(this._parts.hostname));switch(a.toLowerCase()){case "relative":return j;
case "absolute":return!j;case "domain":case "name":return g;case "sld":return n;case "ip":return b;case "ip4":case "ipv4":case "inet4":return d;case "ip6":case "ipv6":case "inet6":return f;case "idn":return k;case "url":return!this._parts.urn;case "urn":return!!this._parts.urn;case "punycode":return h}return null};var r=m.protocol,u=m.port,z=m.hostname;m.protocol=function(a,b){if(a!==void 0&&a&&(a=a.replace(/:(\/\/)?$/,""),a.match(/[^a-zA-z0-9\.+-]/)))throw new TypeError("Protocol '"+a+"' contains characters other than [A-Z0-9.+-]");
return r.call(this,a,b)};m.scheme=m.protocol;m.port=function(a,b){if(this._parts.urn)return a===void 0?"":this;if(a!==void 0&&(a===0&&(a=null),a&&(a+="",a.charAt(0)===":"&&(a=a.substring(1)),a.match(/[^0-9]/))))throw new TypeError("Port '"+a+"' contains characters other than [0-9]");return u.call(this,a,b)};m.hostname=function(a,b){if(this._parts.urn)return a===void 0?"":this;if(a!==void 0){var c={};e.parseHost(a,c);a=c.hostname}return z.call(this,a,b)};m.host=function(a,b){if(this._parts.urn)return a===
void 0?"":this;return a===void 0?this._parts.hostname?e.buildHost(this._parts):"":(e.parseHost(a,this._parts),this.build(!b),this)};m.authority=function(a,b){if(this._parts.urn)return a===void 0?"":this;return a===void 0?this._parts.hostname?e.buildAuthority(this._parts):"":(e.parseAuthority(a,this._parts),this.build(!b),this)};m.userinfo=function(a,b){if(this._parts.urn)return a===void 0?"":this;if(a===void 0){if(!this._parts.username)return"";var c=e.buildUserinfo(this._parts);return c.substring(0,
c.length-1)}else return a[a.length-1]!=="@"&&(a+="@"),e.parseUserinfo(a,this._parts),this.build(!b),this};m.resource=function(a,b){var c;if(a===void 0)return this.path()+this.search()+this.hash();c=e.parse(a);this._parts.path=c.path;this._parts.query=c.query;this._parts.fragment=c.fragment;this.build(!b);return this};m.subdomain=function(a,b){if(this._parts.urn)return a===void 0?"":this;if(a===void 0){if(!this._parts.hostname||this.is("IP"))return"";return this._parts.hostname.substring(0,this._parts.hostname.length-
this.domain().length-1)||""}else{var c=this._parts.hostname.substring(0,this._parts.hostname.length-this.domain().length);c=RegExp("^"+f(c));a&&a.charAt(a.length-1)!=="."&&(a+=".");a&&e.ensureValidHostname(a);this._parts.hostname=this._parts.hostname.replace(c,a);this.build(!b);return this}};m.domain=function(a,b){if(this._parts.urn)return a===void 0?"":this;typeof a==="boolean"&&(b=a,a=void 0);if(a===void 0){if(!this._parts.hostname||this.is("IP"))return"";var c=this._parts.hostname.match(/\./g);
if(c&&c.length<2)return this._parts.hostname;c=this._parts.hostname.length-this.tld(b).length-1;c=this._parts.hostname.lastIndexOf(".",c-1)+1;return this._parts.hostname.substring(c)||""}else{if(!a)throw new TypeError("cannot set domain empty");e.ensureValidHostname(a);this._parts.hostname=!this._parts.hostname||this.is("IP")?a:this._parts.hostname.replace(RegExp(f(this.domain())+"$"),a);this.build(!b);return this}};m.tld=function(a,b){if(this._parts.urn)return a===void 0?"":this;typeof a==="boolean"&&
(b=a,a=void 0);if(a===void 0){if(!this._parts.hostname||this.is("IP"))return"";var e=this._parts.hostname.substring(this._parts.hostname.lastIndexOf(".")+1);if(b!==!0&&c&&c.list[e.toLowerCase()])return c.get(this._parts.hostname)||e;return e}else{if(a)if(a.match(/[^a-zA-Z0-9-]/))if(c&&c.is(a))e=RegExp(f(this.tld())+"$"),this._parts.hostname=this._parts.hostname.replace(e,a);else throw new TypeError("TLD '"+a+"' contains characters other than [A-Z0-9]");else if(!this._parts.hostname||this.is("IP"))throw new ReferenceError("cannot set TLD on non-domain host");
else e=RegExp(f(this.tld())+"$"),this._parts.hostname=this._parts.hostname.replace(e,a);else throw new TypeError("cannot set TLD empty");this.build(!b);return this}};m.directory=function(a,b){if(this._parts.urn)return a===void 0?"":this;if(a===void 0||a===!0){if(!this._parts.path&&!this._parts.hostname)return"";if(this._parts.path==="/")return"/";var c=this._parts.path.substring(0,this._parts.path.length-this.filename().length-1)||(this._parts.hostname?"/":"");return a?e.decodePath(c):c}else return c=
this._parts.path.substring(0,this._parts.path.length-this.filename().length),c=RegExp("^"+f(c)),this.is("relative")||(a||(a="/"),a.charAt(0)!=="/"&&(a="/"+a)),a&&a.charAt(a.length-1)!=="/"&&(a+="/"),a=e.recodePath(a),this._parts.path=this._parts.path.replace(c,a),this.build(!b),this};m.filename=function(a,b){if(this._parts.urn)return a===void 0?"":this;if(a===void 0||a===!0){if(!this._parts.path||this._parts.path==="/")return"";var c=this._parts.path.substring(this._parts.path.lastIndexOf("/")+1);
return a?e.decodePathSegment(c):c}else{c=!1;a.charAt(0)==="/"&&(a=a.substring(1));a.match(/\.?\//)&&(c=!0);var d=RegExp(f(this.filename())+"$");a=e.recodePath(a);this._parts.path=this._parts.path.replace(d,a);c?this.normalizePath(b):this.build(!b);return this}};m.suffix=function(a,b){if(this._parts.urn)return a===void 0?"":this;if(a===void 0||a===!0){if(!this._parts.path||this._parts.path==="/")return"";var c=this.filename(),d=c.lastIndexOf(".");if(d===-1)return"";c=c.substring(d+1);c=/^[a-z0-9%]+$/i.test(c)?
c:"";return a?e.decodePathSegment(c):c}else{a.charAt(0)==="."&&(a=a.substring(1));if(c=this.suffix())d=a?RegExp(f(c)+"$"):RegExp(f("."+c)+"$");else{if(!a)return this;this._parts.path+="."+e.recodePath(a)}if(d)a=e.recodePath(a),this._parts.path=this._parts.path.replace(d,a);this.build(!b);return this}};m.segment=function(a,b,e){var c=this._parts.urn?":":"/",d=this.path(),f=d.substring(0,1)==="/";d=d.split(c);a!==void 0&&typeof a!=="number"&&(e=b,b=a,a=void 0);if(a!==void 0&&typeof a!=="number")throw Error("Bad segment '"+
a+"', must be 0-based integer");f&&d.shift();a<0&&(a=Math.max(d.length+a,0));if(b===void 0)return a===void 0?d:d[a];else if(a===null||d[a]===void 0)if(j(b)){d=[];a=0;for(var g=b.length;a<g;a++)if(b[a].length||d.length&&d[d.length-1].length)d.length&&!d[d.length-1].length&&d.pop(),d.push(b[a])}else{if(b||typeof b==="string")d[d.length-1]===""?d[d.length-1]=b:d.push(b)}else b||typeof b==="string"&&b.length?d[a]=b:d.splice(a,1);f&&d.unshift("");return this.path(d.join(c),e)};m.segmentCoded=function(a,
b,c){var d,f;typeof a!=="number"&&(c=b,b=a,a=void 0);if(b===void 0){a=this.segment(a,b,c);if(j(a)){d=0;for(f=a.length;d<f;d++)a[d]=e.decode(a[d])}else a=a!==void 0?e.decode(a):void 0;return a}if(j(b)){d=0;for(f=b.length;d<f;d++)b[d]=e.decode(b[d])}else b=typeof b==="string"?e.encode(b):b;return this.segment(a,b,c)};var q=m.query;m.query=function(a,b){if(a===!0)return e.parseQuery(this._parts.query,this._parts.escapeQuerySpace);else if(typeof a==="function"){var c=e.parseQuery(this._parts.query,this._parts.escapeQuerySpace),
d=a.call(this,c);this._parts.query=e.buildQuery(d||c,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace);this.build(!b);return this}else return a!==void 0&&typeof a!=="string"?(this._parts.query=e.buildQuery(a,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),this.build(!b),this):q.call(this,a,b)};m.setQuery=function(a,b,c){var d=e.parseQuery(this._parts.query,this._parts.escapeQuerySpace);if(typeof a==="object")for(var f in a)w.call(a,f)&&(d[f]=a[f]);else if(typeof a===
"string")d[a]=b!==void 0?b:null;else throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");this._parts.query=e.buildQuery(d,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace);typeof a!=="string"&&(c=b);this.build(!c);return this};m.addQuery=function(a,b,c){var d=e.parseQuery(this._parts.query,this._parts.escapeQuerySpace);e.addQuery(d,a,b===void 0?null:b);this._parts.query=e.buildQuery(d,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace);
typeof a!=="string"&&(c=b);this.build(!c);return this};m.removeQuery=function(a,b,c){var d=e.parseQuery(this._parts.query,this._parts.escapeQuerySpace);e.removeQuery(d,a,b);this._parts.query=e.buildQuery(d,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace);typeof a!=="string"&&(c=b);this.build(!c);return this};m.hasQuery=function(a,b,c){var d=e.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return e.hasQuery(d,a,b,c)};m.setSearch=m.setQuery;m.addSearch=m.addQuery;m.removeSearch=
m.removeQuery;m.hasSearch=m.hasQuery;m.normalize=function(){if(this._parts.urn)return this.normalizeProtocol(!1).normalizeQuery(!1).normalizeFragment(!1).build();return this.normalizeProtocol(!1).normalizeHostname(!1).normalizePort(!1).normalizePath(!1).normalizeQuery(!1).normalizeFragment(!1).build()};m.normalizeProtocol=function(a){if(typeof this._parts.protocol==="string")this._parts.protocol=this._parts.protocol.toLowerCase(),this.build(!a);return this};m.normalizeHostname=function(b){if(this._parts.hostname){if(this.is("IDN")&&
a)this._parts.hostname=a.toASCII(this._parts.hostname);else if(this.is("IPv6")&&d)this._parts.hostname=d.best(this._parts.hostname);this._parts.hostname=this._parts.hostname.toLowerCase();this.build(!b)}return this};m.normalizePort=function(a){if(typeof this._parts.protocol==="string"&&this._parts.port===e.defaultPorts[this._parts.protocol])this._parts.port=null,this.build(!a);return this};m.normalizePath=function(a){if(this._parts.urn)return this;if(!this._parts.path||this._parts.path==="/")return this;
var b,c=this._parts.path,d,f;c.charAt(0)!=="/"&&(b=!0,c="/"+c);for(c=c.replace(/(\/(\.\/)+)|(\/\.$)/g,"/").replace(/\/{2,}/g,"/");;){d=c.indexOf("/../");if(d===-1)break;else if(d===0){c=c.substring(3);break}f=c.substring(0,d).lastIndexOf("/");f===-1&&(f=d);c=c.substring(0,f)+c.substring(d+3)}b&&this.is("relative")&&(c=c.substring(1));c=e.recodePath(c);this._parts.path=c;this.build(!a);return this};m.normalizePathname=m.normalizePath;m.normalizeQuery=function(a){if(typeof this._parts.query==="string")this._parts.query.length?
this.query(e.parseQuery(this._parts.query,this._parts.escapeQuerySpace)):this._parts.query=null,this.build(!a);return this};m.normalizeFragment=function(a){if(!this._parts.fragment)this._parts.fragment=null,this.build(!a);return this};m.normalizeSearch=m.normalizeQuery;m.normalizeHash=m.normalizeFragment;m.iso8859=function(){var a=e.encode,b=e.decode;e.encode=escape;e.decode=decodeURIComponent;this.normalize();e.encode=a;e.decode=b;return this};m.unicode=function(){var a=e.encode,b=e.decode;e.encode=
p;e.decode=unescape;this.normalize();e.encode=a;e.decode=b;return this};m.readable=function(){var b=this.clone();b.username("").password("").normalize();var c="";b._parts.protocol&&(c+=b._parts.protocol+"://");b._parts.hostname&&(b.is("punycode")&&a?(c+=a.toUnicode(b._parts.hostname),b._parts.port&&(c+=":"+b._parts.port)):c+=b.host());b._parts.hostname&&b._parts.path&&b._parts.path.charAt(0)!=="/"&&(c+="/");c+=b.path(!0);if(b._parts.query){for(var d="",f=0,g=b._parts.query.split("&"),n=g.length;f<
n;f++){var k=(g[f]||"").split("=");d+="&"+e.decodeQuery(k[0],this._parts.escapeQuerySpace).replace(/&/g,"%26");k[1]!==void 0&&(d+="="+e.decodeQuery(k[1],this._parts.escapeQuerySpace).replace(/&/g,"%26"))}c+="?"+d.substring(1)}c+=e.decodeQuery(b.hash(),!0);return c};m.absoluteTo=function(a){var b=this.clone(),c=["protocol","username","password","hostname","port"],d,f;if(this._parts.urn)throw Error("URNs do not have any generally defined hierarchical components");a instanceof e||(a=new e(a));if(!b._parts.protocol)b._parts.protocol=
a._parts.protocol;if(this._parts.hostname)return b;for(d=0;f=c[d];d++)b._parts[f]=a._parts[f];c=["query","path"];for(d=0;f=c[d];d++)!b._parts[f]&&a._parts[f]&&(b._parts[f]=a._parts[f]);if(b.path().charAt(0)!=="/")a=a.directory(),b._parts.path=(a?a+"/":"")+b._parts.path,b.normalizePath();b.build();return b};m.relativeTo=function(a){var b=this.clone().normalize(),c,d,f,g;if(b._parts.urn)throw Error("URNs do not have any generally defined hierarchical components");a=(new e(a)).normalize();c=b._parts;
d=a._parts;f=b.path();g=a.path();if(f.charAt(0)!=="/")throw Error("URI is already relative");if(g.charAt(0)!=="/")throw Error("Cannot calculate a URI relative to another relative URI");if(c.protocol===d.protocol)c.protocol=null;if(c.username!==d.username||c.password!==d.password)return b.build();if(c.protocol!==null||c.username!==null||c.password!==null)return b.build();if(c.hostname===d.hostname&&c.port===d.port)c.hostname=null,c.port=null;else return b.build();if(f===g)return c.path="",b.build();
a=e.commonPath(b.path(),a.path());if(!a)return b.build();d=d.path.substring(a.length).replace(/[^\/]*$/,"").replace(/.*?\//g,"../");c.path=d+c.path.substring(a.length);return b.build()};m.equals=function(a){var b=this.clone();a=new e(a);var c={},d={},f={},g;b.normalize();a.normalize();if(b.toString()===a.toString())return!0;c=b.query();d=a.query();b.query("");a.query("");if(b.toString()!==a.toString())return!1;if(c.length!==d.length)return!1;c=e.parseQuery(c,this._parts.escapeQuerySpace);d=e.parseQuery(d,
this._parts.escapeQuerySpace);for(g in c)if(w.call(c,g)){if(j(c[g])){if(!l(c[g],d[g]))return!1}else if(c[g]!==d[g])return!1;f[g]=!0}for(g in d)if(w.call(d,g)&&!f[g])return!1;return!0};m.duplicateQueryParameters=function(a){this._parts.duplicateQueryParameters=!!a;return this};m.escapeQuerySpace=function(a){this._parts.escapeQuerySpace=!!a;return this};return e});
(function(a,d){typeof exports==="object"?module.exports=d(require("jquery","./URI")):typeof define==="function"&&define.amd?define(["jquery","./URI"],d):d(a.jQuery,a.URI)})(this,function(a,d){function c(a){return a.replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")}function b(a){var b=a.nodeName.toLowerCase();if(!(b==="input"&&a.type!=="image"))return d.domAttributes[b]}function e(b){return{get:function(e){return a(e).uri()[b]()},set:function(e,c){a(e).uri()[b](c);return c}}}function f(e,c){var d,f,k;if(!b(e)||
!c)return!1;d=c.match(o);if(!d||!d[5]&&d[2]!==":"&&!j[d[2]])return!1;k=a(e).uri();if(d[5])return k.is(d[5]);else if(d[2]===":"){f=d[1].toLowerCase()+":";if(!j[f])return!1;return j[f](k,d[4])}else{f=d[1].toLowerCase();if(!g[f])return!1;return j[d[2]](k[f](),d[4],f)}}var g={},j={"=":function(a,b){return a===b},"^=":function(a,b){return!!(a+"").match(RegExp("^"+c(b),"i"))},"$=":function(a,b){return!!(a+"").match(RegExp(c(b)+"$","i"))},"*=":function(a,b,e){e=="directory"&&(a+="/");return!!(a+"").match(RegExp(c(b),
"i"))},"equals:":function(a,b){return a.equals(b)},"is:":function(a,b){return a.is(b)}};a.each("authority directory domain filename fragment hash host hostname href password path pathname port protocol query resource scheme search subdomain suffix tld username".split(" "),function(b,c){g[c]=!0;a.attrHooks["uri:"+c]=e(c)});var k={get:function(b){return a(b).uri()},set:function(b,e){return a(b).uri().href(e).toString()}};a.each(["src","href","action","uri","cite"],function(b,e){a.attrHooks[e]={set:k.set}});
a.attrHooks.uri.get=k.get;a.fn.uri=function(a){var e=this.first(),c=e.get(0),f=b(c);if(!f)throw Error('Element "'+c.nodeName+'" does not have either property: href, src, action, cite');if(a!==void 0){var g=e.data("uri");if(g)return g.href(a);a instanceof d||(a=d(a||""))}else if(a=e.data("uri"))return a;else a=d(e.attr(f)||"");a._dom_element=c;a._dom_attribute=f;a.normalize();e.data("uri",a);return a};d.prototype.build=function(a){if(this._dom_element)this._string=d.build(this._parts),this._deferred_build=
!1,this._dom_element.setAttribute(this._dom_attribute,this._string),this._dom_element[this._dom_attribute]=this._string;else if(a===!0)this._deferred_build=!0;else if(a===void 0||this._deferred_build)this._string=d.build(this._parts),this._deferred_build=!1;return this};var l,o=/^([a-zA-Z]+)\s*([\^\$*]?=|:)\s*(['"]?)(.+)\3|^\s*([a-zA-Z0-9]+)\s*$/;l=a.expr.createPseudo?a.expr.createPseudo(function(a){return function(b){return f(b,a)}}):function(a,b,e){return f(a,e[3])};a.expr[":"].uri=l;return{}});
(function(a,d){function c(e){a.fn.cycle.debug&&b(e)}function b(){window.console&&console.log&&console.log("[cycle] "+Array.prototype.join.call(arguments," "))}function e(b,e,c){var d=a(b).data("cycle.opts");if(d){var f=!!b.cyclePause;f&&d.paused?d.paused(b,d,e,c):!f&&d.resumed&&d.resumed(b,d,e,c)}}function f(c,f,g){function k(e,c,d){if(!e&&c===!0){e=a(d).data("cycle.opts");if(!e)return b("options not found, can not resume"),!1;if(d.cycleTimeout)clearTimeout(d.cycleTimeout),d.cycleTimeout=0;h(e.elements,
e,1,!e.backwards)}}if(c.cycleStop===d)c.cycleStop=0;if(f===d||f===null)f={};if(f.constructor==String)switch(f){case "destroy":case "stop":g=a(c).data("cycle.opts");if(!g)return!1;c.cycleStop++;c.cycleTimeout&&clearTimeout(c.cycleTimeout);c.cycleTimeout=0;g.elements&&a(g.elements).stop();a(c).removeData("cycle.opts");f=="destroy"&&j(c,g);return!1;case "toggle":return c.cyclePause=c.cyclePause===1?0:1,k(c.cyclePause,g,c),e(c),!1;case "pause":return c.cyclePause=1,e(c),!1;case "resume":return c.cyclePause=
0,k(!1,g,c),e(c),!1;case "prev":case "next":g=a(c).data("cycle.opts");if(!g)return b('options not found, "prev/next" ignored'),!1;a.fn.cycle[f](g);return!1;default:f={fx:f}}else if(f.constructor==Number){var l=f;f=a(c).data("cycle.opts");if(!f)return b("options not found, can not advance slide"),!1;if(l<0||l>=f.elements.length)return b("invalid slide index: "+l),!1;f.nextSlide=l;if(c.cycleTimeout)clearTimeout(c.cycleTimeout),c.cycleTimeout=0;if(typeof g=="string")f.oneTimeFx=g;h(f.elements,f,1,l>=
f.currSlide);return!1}return f}function g(b,e){if(!a.support.opacity&&e.cleartype&&b.style.filter)try{b.style.removeAttribute("filter")}catch(c){}}function j(b,e){e.next&&a(e.next).unbind(e.prevNextEvent);e.prev&&a(e.prev).unbind(e.prevNextEvent);if(e.pager||e.pagerAnchorBuilder)a.each(e.pagerAnchors||[],function(){this.unbind().remove()});e.pagerAnchors=null;a(b).unbind("mouseenter.cycle mouseleave.cycle");e.destroy&&e.destroy(e)}function k(c,f,k,j,q){var s,m=a.extend({},a.fn.cycle.defaults,j||{},
a.metadata?c.metadata():a.meta?c.data():{}),F=a.isFunction(c.data)?c.data(m.metaAttr):null;F&&(m=a.extend(m,F));if(m.autostop)m.countdown=m.autostopCount||k.length;var T=c[0];c.data("cycle.opts",m);m.$cont=c;m.stopCount=T.cycleStop;m.elements=k;m.before=m.before?[m.before]:[];m.after=m.after?[m.after]:[];!a.support.opacity&&m.cleartype&&m.after.push(function(){g(this,m)});m.continuous&&m.after.push(function(){h(k,m,0,!m.backwards)});l(m);!a.support.opacity&&m.cleartype&&!m.cleartypeNoBg&&x(f);c.css("position")==
"static"&&c.css("position","relative");m.width&&c.width(m.width);m.height&&m.height!="auto"&&c.height(m.height);m.startingSlide!==d?(m.startingSlide=parseInt(m.startingSlide,10),m.startingSlide>=k.length||m.startSlide<0?m.startingSlide=0:s=!0):m.startingSlide=m.backwards?k.length-1:0;if(m.random){m.randomMap=[];for(F=0;F<k.length;F++)m.randomMap.push(F);m.randomMap.sort(function(){return Math.random()-0.5});if(s)for(s=0;s<k.length;s++){if(m.startingSlide==m.randomMap[s])m.randomIndex=s}else m.randomIndex=
1,m.startingSlide=m.randomMap[1]}else if(m.startingSlide>=k.length)m.startingSlide=0;m.currSlide=m.startingSlide||0;var v=m.startingSlide;f.css({position:"absolute",top:0,left:0}).hide().each(function(b){b=m.backwards?v?b<=v?k.length+(b-v):v-b:k.length-b:v?b>=v?k.length-(b-v):v-b:k.length-b;a(this).css("z-index",b)});a(k[v]).css("opacity",1).show();g(k[v],m);m.fit&&(m.aspect?f.each(function(){var b=a(this),e=m.aspect===!0?b.width()/b.height():m.aspect;m.width&&b.width()!=m.width&&(b.width(m.width),
b.height(m.width/e));m.height&&b.height()<m.height&&(b.height(m.height),b.width(m.height*e))}):(m.width&&f.width(m.width),m.height&&m.height!="auto"&&f.height(m.height)));m.center&&(!m.fit||m.aspect)&&f.each(function(){var b=a(this);b.css({"margin-left":m.width?(m.width-b.width())/2+"px":0,"margin-top":m.height?(m.height-b.height())/2+"px":0})});m.center&&!m.fit&&!m.slideResize&&f.each(function(){var b=a(this);b.css({"margin-left":m.width?(m.width-b.width())/2+"px":0,"margin-top":m.height?(m.height-
b.height())/2+"px":0})});if((m.containerResize||m.containerResizeHeight)&&!c.innerHeight()){for(var G=F=s=0;G<k.length;G++){var E=a(k[G]),I=E[0],K=E.outerWidth(),S=E.outerHeight();K||(K=I.offsetWidth||I.width||E.attr("width"));S||(S=I.offsetHeight||I.height||E.attr("height"));s=K>s?K:s;F=S>F?S:F}m.containerResize&&s>0&&F>0&&c.css({width:s+"px",height:F+"px"});m.containerResizeHeight&&F>0&&c.css({height:F+"px"})}var R=!1;m.pause&&c.bind("mouseenter.cycle",function(){R=!0;this.cyclePause++;e(T,!0)}).bind("mouseleave.cycle",
function(){R&&this.cyclePause--;e(T,!0)});if(o(m)===!1)return!1;var L=!1;j.requeueAttempts=j.requeueAttempts||0;f.each(function(){var e=a(this);this.cycleH=m.fit&&m.height?m.height:e.height()||this.offsetHeight||this.height||e.attr("height")||0;this.cycleW=m.fit&&m.width?m.width:e.width()||this.offsetWidth||this.width||e.attr("width")||0;if(e.is("img")){e=a.browser.mozilla&&this.cycleW==34&&this.cycleH==19&&!this.complete;var c=a.browser.opera&&(this.cycleW==42&&this.cycleH==19||this.cycleW==37&&
this.cycleH==17)&&!this.complete,d=this.cycleH===0&&this.cycleW===0&&!this.complete;if(a.browser.msie&&this.cycleW==28&&this.cycleH==30&&!this.complete||e||c||d)if(q.s&&m.requeueOnImageNotLoaded&&++j.requeueAttempts<100)return b(j.requeueAttempts," - img slide not loaded, requeuing slideshow: ",this.src,this.cycleW,this.cycleH),setTimeout(function(){a(q.s,q.c).cycle(j)},m.requeueTimeout),L=!0,!1;else b("could not determine size of image: "+this.src,this.cycleW,this.cycleH)}return!0});if(L)return!1;
m.cssBefore=m.cssBefore||{};m.cssAfter=m.cssAfter||{};m.cssFirst=m.cssFirst||{};m.animIn=m.animIn||{};m.animOut=m.animOut||{};f.not(":eq("+v+")").css(m.cssBefore);a(f[v]).css(m.cssFirst);if(m.timeout){m.timeout=parseInt(m.timeout,10);if(m.speed.constructor==String)m.speed=a.fx.speeds[m.speed]||parseInt(m.speed,10);m.sync||(m.speed/=2);for(s=m.fx=="none"?0:m.fx=="shuffle"?500:250;m.timeout-m.speed<s;)m.timeout+=m.speed}if(m.easing)m.easeIn=m.easeOut=m.easing;if(!m.speedIn)m.speedIn=m.speed;if(!m.speedOut)m.speedOut=
m.speed;m.slideCount=k.length;m.currSlide=m.lastSlide=v;if(m.random){if(++m.randomIndex==k.length)m.randomIndex=0;m.nextSlide=m.randomMap[m.randomIndex]}else m.nextSlide=m.backwards?m.startingSlide===0?k.length-1:m.startingSlide-1:m.startingSlide>=k.length-1?0:m.startingSlide+1;if(!m.multiFx)if(s=a.fn.cycle.transitions[m.fx],a.isFunction(s))s(c,f,m);else if(m.fx!="custom"&&!m.multiFx)return b("unknown transition: "+m.fx,"; slideshow terminating"),!1;c=f[v];m.skipInitializationCallbacks||(m.before.length&&
m.before[0].apply(c,[c,c,m,!0]),m.after.length&&m.after[0].apply(c,[c,c,m,!0]));m.next&&a(m.next).bind(m.prevNextEvent,function(){return w(m,1)});m.prev&&a(m.prev).bind(m.prevNextEvent,function(){return w(m,0)});(m.pager||m.pagerAnchorBuilder)&&t(k,m);p(m,k);return m}function l(b){b.original={before:[],after:[]};b.original.cssBefore=a.extend({},b.cssBefore);b.original.cssAfter=a.extend({},b.cssAfter);b.original.animIn=a.extend({},b.animIn);b.original.animOut=a.extend({},b.animOut);a.each(b.before,
function(){b.original.before.push(this)});a.each(b.after,function(){b.original.after.push(this)})}function o(e){var d,f,g=a.fn.cycle.transitions;if(e.fx.indexOf(",")>0){e.multiFx=!0;e.fxs=e.fx.replace(/\s*/g,"").split(",");for(d=0;d<e.fxs.length;d++){var k=e.fxs[d];f=g[k];if(!f||!g.hasOwnProperty(k)||!a.isFunction(f))b("discarding unknown transition: ",k),e.fxs.splice(d,1),d--}if(!e.fxs.length)return b("No valid transitions named; slideshow terminating."),!1}else if(e.fx=="all")for(d in e.multiFx=
!0,e.fxs=[],g)g.hasOwnProperty(d)&&(f=g[d],g.hasOwnProperty(d)&&a.isFunction(f)&&e.fxs.push(d));if(e.multiFx&&e.randomizeEffects){f=Math.floor(Math.random()*20)+30;for(d=0;d<f;d++)e.fxs.push(e.fxs.splice(Math.floor(Math.random()*e.fxs.length),1)[0]);c("randomized fx sequence: ",e.fxs)}return!0}function p(b,e){b.addSlide=function(c,d){var f=a(c),g=f[0];b.autostopCount||b.countdown++;e[d?"unshift":"push"](g);if(b.els)b.els[d?"unshift":"push"](g);b.slideCount=e.length;b.random&&(b.randomMap.push(b.slideCount-
1),b.randomMap.sort(function(){return Math.random()-0.5}));f.css("position","absolute");f[d?"prependTo":"appendTo"](b.$cont);d&&(b.currSlide++,b.nextSlide++);!a.support.opacity&&b.cleartype&&!b.cleartypeNoBg&&x(f);b.fit&&b.width&&f.width(b.width);b.fit&&b.height&&b.height!="auto"&&f.height(b.height);g.cycleH=b.fit&&b.height?b.height:f.height();g.cycleW=b.fit&&b.width?b.width:f.width();f.css(b.cssBefore);(b.pager||b.pagerAnchorBuilder)&&a.fn.cycle.createPagerAnchor(e.length-1,g,a(b.pager),e,b);if(a.isFunction(b.onAddSlide))b.onAddSlide(f);
else f.hide()}}function h(b,e,f,g){function k(){var a=0;e.timeout&&!e.continuous?(a=m(b[e.currSlide],b[e.nextSlide],e,g),e.fx=="shuffle"&&(a-=e.speedOut)):e.continuous&&j.cyclePause&&(a=10);if(a>0)j.cycleTimeout=setTimeout(function(){h(b,e,0,!e.backwards)},a)}var j=e.$cont[0],l=b[e.currSlide],o=b[e.nextSlide];if(f&&e.busy&&e.manualTrump)c("manualTrump in go(), stopping active transition"),a(b).stop(!0,!0),e.busy=0,clearTimeout(j.cycleTimeout);if(e.busy)c("transition active, ignoring new tx request");
else if(!(j.cycleStop!=e.stopCount||j.cycleTimeout===0&&!f))if(!f&&!j.cyclePause&&!e.bounce&&(e.autostop&&--e.countdown<=0||e.nowrap&&!e.random&&e.nextSlide<e.currSlide))e.end&&e.end(e);else{var p=!1;if((f||!j.cyclePause)&&e.nextSlide!=e.currSlide){p=!0;var t=e.fx;l.cycleH=l.cycleH||a(l).height();l.cycleW=l.cycleW||a(l).width();o.cycleH=o.cycleH||a(o).height();o.cycleW=o.cycleW||a(o).width();if(e.multiFx){if(g&&(e.lastFx===d||++e.lastFx>=e.fxs.length))e.lastFx=0;else if(!g&&(e.lastFx===d||--e.lastFx<
0))e.lastFx=e.fxs.length-1;t=e.fxs[e.lastFx]}if(e.oneTimeFx)t=e.oneTimeFx,e.oneTimeFx=null;a.fn.cycle.resetState(e,t);e.before.length&&a.each(e.before,function(a,b){j.cycleStop==e.stopCount&&b.apply(o,[l,o,e,g])});var x=function(){e.busy=0;a.each(e.after,function(a,b){j.cycleStop==e.stopCount&&b.apply(o,[l,o,e,g])});j.cycleStop||k()};c("tx firing("+t+"); currSlide: "+e.currSlide+"; nextSlide: "+e.nextSlide);e.busy=1;if(e.fxFn)e.fxFn(l,o,e,x,g,f&&e.fastOnEvent);else if(a.isFunction(a.fn.cycle[e.fx]))a.fn.cycle[e.fx](l,
o,e,x,g,f&&e.fastOnEvent);else a.fn.cycle.custom(l,o,e,x,g,f&&e.fastOnEvent)}else k();if(p||e.nextSlide==e.currSlide)if(e.lastSlide=e.currSlide,e.random){e.currSlide=e.nextSlide;if(++e.randomIndex==b.length)e.randomIndex=0,e.randomMap.sort(function(){return Math.random()-0.5});e.nextSlide=e.randomMap[e.randomIndex];if(e.nextSlide==e.currSlide)e.nextSlide=e.currSlide==e.slideCount-1?0:e.currSlide+1}else e.backwards?(f=e.nextSlide-1<0)&&e.bounce?(e.backwards=!e.backwards,e.nextSlide=1,e.currSlide=0):
(e.nextSlide=f?b.length-1:e.nextSlide-1,e.currSlide=f?0:e.nextSlide+1):(f=e.nextSlide+1==b.length)&&e.bounce?(e.backwards=!e.backwards,e.nextSlide=b.length-2,e.currSlide=b.length-1):(e.nextSlide=f?0:e.nextSlide+1,e.currSlide=f?b.length-1:e.nextSlide-1);p&&e.pager&&e.updateActivePagerLink(e.pager,e.currSlide,e.activePagerClass)}}function m(a,b,e,d){if(e.timeoutFn){for(a=e.timeoutFn.call(a,a,b,e,d);e.fx!="none"&&a-e.speed<250;)a+=e.speed;c("calculated timeout: "+a+"; speed: "+e.speed);if(a!==!1)return a}return e.timeout}
function w(b,e){var c=e?1:-1,d=b.elements,f=b.$cont[0],g=f.cycleTimeout;if(g)clearTimeout(g),f.cycleTimeout=0;if(b.random&&c<0){b.randomIndex--;if(--b.randomIndex==-2)b.randomIndex=d.length-2;else if(b.randomIndex==-1)b.randomIndex=d.length-1;b.nextSlide=b.randomMap[b.randomIndex]}else if(b.random)b.nextSlide=b.randomMap[b.randomIndex];else if(b.nextSlide=b.currSlide+c,b.nextSlide<0){if(b.nowrap)return!1;b.nextSlide=d.length-1}else if(b.nextSlide>=d.length){if(b.nowrap)return!1;b.nextSlide=0}f=b.onPrevNextEvent||
b.prevNextClick;a.isFunction(f)&&f(c>0,b.nextSlide,d[b.nextSlide]);h(d,b,1,e);return!1}function t(b,e){var c=a(e.pager);a.each(b,function(d,f){a.fn.cycle.createPagerAnchor(d,f,c,b,e)});e.updateActivePagerLink(e.pager,e.startingSlide,e.activePagerClass)}function x(b){function e(a){a=parseInt(a,10).toString(16);return a.length<2?"0"+a:a}function d(b){for(;b&&b.nodeName.toLowerCase()!="html";b=b.parentNode){var c=a.css(b,"background-color");if(c&&c.indexOf("rgb")>=0)return b=c.match(/\d+/g),"#"+e(b[0])+
e(b[1])+e(b[2]);if(c&&c!="transparent")return c}return"#ffffff"}c("applying clearType background-color hack");b.each(function(){a(this).css("background-color",d(this))})}if(a.support===d)a.support={opacity:!a.browser.msie};a.expr[":"].paused=function(a){return a.cyclePause};a.fn.cycle=function(e,d){var g={s:this.selector,c:this.context};if(this.length===0&&e!="stop"){if(!a.isReady&&g.s)return b("DOM not ready, queuing slideshow"),a(function(){a(g.s,g.c).cycle(e,d)}),this;b("terminating; zero elements found by selector"+
(a.isReady?"":" (DOM not ready)"));return this}return this.each(function(){var j=f(this,e,d);if(j!==!1){j.updateActivePagerLink=j.updateActivePagerLink||a.fn.cycle.updateActivePagerLink;this.cycleTimeout&&clearTimeout(this.cycleTimeout);this.cycleStop=this.cycleTimeout=this.cyclePause=0;var l=a(this),o=j.slideExpr?a(j.slideExpr,this):l.children(),p=o.get();if(p.length<2)b("terminating; too few slides: "+p.length);else{var t=k(l,o,p,j,g);if(t!==!1&&(l=t.continuous?10:m(p[t.currSlide],p[t.nextSlide],
t,!t.backwards)))l+=t.delay||0,l<10&&(l=10),c("first timeout: "+l),this.cycleTimeout=setTimeout(function(){h(p,t,0,!j.backwards)},l)}}})};a.fn.cycle.resetState=function(b,e){e=e||b.fx;b.before=[];b.after=[];b.cssBefore=a.extend({},b.original.cssBefore);b.cssAfter=a.extend({},b.original.cssAfter);b.animIn=a.extend({},b.original.animIn);b.animOut=a.extend({},b.original.animOut);b.fxFn=null;a.each(b.original.before,function(){b.before.push(this)});a.each(b.original.after,function(){b.after.push(this)});
var c=a.fn.cycle.transitions[e];a.isFunction(c)&&c(b.$cont,a(b.elements),b)};a.fn.cycle.updateActivePagerLink=function(b,e,c){a(b).each(function(){a(this).children().removeClass(c).eq(e).addClass(c)})};a.fn.cycle.next=function(a){w(a,1)};a.fn.cycle.prev=function(a){w(a,0)};a.fn.cycle.createPagerAnchor=function(b,d,f,g,k){a.isFunction(k.pagerAnchorBuilder)?(d=k.pagerAnchorBuilder(b,d),c("pagerAnchorBuilder("+b+", el) returned: "+d)):d='<a href="#">'+(b+1)+"</a>";if(d){var j=a(d);if(j.parents("body").length===
0){var l=[];f.length>1?(f.each(function(){var b=j.clone(!0);a(this).append(b);l.push(b[0])}),j=a(l)):j.appendTo(f)}k.pagerAnchors=k.pagerAnchors||[];k.pagerAnchors.push(j);f=function(e){e.preventDefault();k.nextSlide=b;e=k.$cont[0];var c=e.cycleTimeout;if(c)clearTimeout(c),e.cycleTimeout=0;e=k.onPagerEvent||k.pagerClick;a.isFunction(e)&&e(k.nextSlide,g[k.nextSlide]);h(g,k,1,k.currSlide<b)};/mouseenter|mouseover/i.test(k.pagerEvent)?j.hover(f,function(){}):j.bind(k.pagerEvent,f);!/^click/.test(k.pagerEvent)&&
!k.allowPagerClickBubble&&j.bind("click.cycle",function(){return!1});var o=k.$cont[0],m=!1;k.pauseOnPagerHover&&j.hover(function(){m=!0;o.cyclePause++;e(o,!0,!0)},function(){m&&o.cyclePause--;e(o,!0,!0)})}};a.fn.cycle.hopsFromLast=function(a,b){var e=a.lastSlide,c=a.currSlide;return b?c>e?c-e:a.slideCount-e:c<e?e-c:e+a.slideCount-c};a.fn.cycle.commonReset=function(b,e,c,d,f,g){a(c.elements).not(b).hide();if(typeof c.cssBefore.opacity=="undefined")c.cssBefore.opacity=1;c.cssBefore.display="block";
if(c.slideResize&&d!==!1&&e.cycleW>0)c.cssBefore.width=e.cycleW;if(c.slideResize&&f!==!1&&e.cycleH>0)c.cssBefore.height=e.cycleH;c.cssAfter=c.cssAfter||{};c.cssAfter.display="none";a(b).css("zIndex",c.slideCount+(g===!0?1:0));a(e).css("zIndex",c.slideCount+(g===!0?0:1))};a.fn.cycle.custom=function(b,e,c,d,f,g){var k=a(b),j=a(e),h=c.speedIn;b=c.speedOut;var l=c.easeIn;e=c.easeOut;j.css(c.cssBefore);g&&(h=typeof g=="number"?b=g:b=1,l=e=null);var o=function(){j.animate(c.animIn,h,l,function(){d()})};
k.animate(c.animOut,b,e,function(){k.css(c.cssAfter);c.sync||o()});c.sync&&o()};a.fn.cycle.transitions={fade:function(b,e,c){e.not(":eq("+c.currSlide+")").css("opacity",0);c.before.push(function(b,e,c){a.fn.cycle.commonReset(b,e,c);c.cssBefore.opacity=0});c.animIn={opacity:1};c.animOut={opacity:0};c.cssBefore={top:0,left:0}}};a.fn.cycle.ver=function(){return"2.9999.8"};a.fn.cycle.defaults={activePagerClass:"activeSlide",after:null,allowPagerClickBubble:!1,animIn:null,animOut:null,aspect:!1,autostop:0,
autostopCount:0,backwards:!1,before:null,center:null,cleartype:!a.support.opacity,cleartypeNoBg:!1,containerResize:1,containerResizeHeight:0,continuous:0,cssAfter:null,cssBefore:null,delay:0,easeIn:null,easeOut:null,easing:null,end:null,fastOnEvent:0,fit:0,fx:"fade",fxFn:null,height:"auto",manualTrump:!0,metaAttr:"cycle",next:null,nowrap:0,onPagerEvent:null,onPrevNextEvent:null,pager:null,pagerAnchorBuilder:null,pagerEvent:"click.cycle",pause:0,pauseOnPagerHover:0,prev:null,prevNextEvent:"click.cycle",
random:0,randomizeEffects:1,requeueOnImageNotLoaded:!0,requeueTimeout:250,rev:0,shuffle:null,skipInitializationCallbacks:!1,slideExpr:null,slideResize:1,speed:1E3,speedIn:null,speedOut:null,startingSlide:d,sync:1,timeout:4E3,timeoutFn:null,updateActivePagerLink:null,width:null}})(jQuery);
(function(a){a.fn.cycle.transitions.none=function(d,c,b){b.fxFn=function(b,c,d,j){a(c).show();a(b).hide();j()}};a.fn.cycle.transitions.fadeout=function(d,c,b){c.not(":eq("+b.currSlide+")").css({display:"block",opacity:1});b.before.push(function(b,c,d,j,k,l){a(b).css("zIndex",d.slideCount+(l!==!0?1:0));a(c).css("zIndex",d.slideCount+(l!==!0?0:1))});b.animIn.opacity=1;b.animOut.opacity=0;b.cssBefore.opacity=1;b.cssBefore.display="block";b.cssAfter.zIndex=0};a.fn.cycle.transitions.scrollUp=function(d,
c,b){d.css("overflow","hidden");b.before.push(a.fn.cycle.commonReset);d=d.height();b.cssBefore.top=d;b.cssBefore.left=0;b.cssFirst.top=0;b.animIn.top=0;b.animOut.top=-d};a.fn.cycle.transitions.scrollDown=function(d,c,b){d.css("overflow","hidden");b.before.push(a.fn.cycle.commonReset);d=d.height();b.cssFirst.top=0;b.cssBefore.top=-d;b.cssBefore.left=0;b.animIn.top=0;b.animOut.top=d};a.fn.cycle.transitions.scrollLeft=function(d,c,b){d.css("overflow","hidden");b.before.push(a.fn.cycle.commonReset);d=
d.width();b.cssFirst.left=0;b.cssBefore.left=d;b.cssBefore.top=0;b.animIn.left=0;b.animOut.left=0-d};a.fn.cycle.transitions.scrollRight=function(d,c,b){d.css("overflow","hidden");b.before.push(a.fn.cycle.commonReset);d=d.width();b.cssFirst.left=0;b.cssBefore.left=-d;b.cssBefore.top=0;b.animIn.left=0;b.animOut.left=d};a.fn.cycle.transitions.scrollHorz=function(d,c,b){d.css("overflow","hidden").width();b.before.push(function(b,c,d,j){d.rev&&(j=!j);a.fn.cycle.commonReset(b,c,d);d.cssBefore.left=j?c.cycleW-
1:1-c.cycleW;d.animOut.left=j?-b.cycleW:b.cycleW});b.cssFirst.left=0;b.cssBefore.top=0;b.animIn.left=0;b.animOut.top=0};a.fn.cycle.transitions.scrollVert=function(d,c,b){d.css("overflow","hidden");b.before.push(function(b,c,d,j){d.rev&&(j=!j);a.fn.cycle.commonReset(b,c,d);d.cssBefore.top=j?1-c.cycleH:c.cycleH-1;d.animOut.top=j?b.cycleH:-b.cycleH});b.cssFirst.top=0;b.cssBefore.left=0;b.animIn.top=0;b.animOut.left=0};a.fn.cycle.transitions.slideX=function(d,c,b){b.before.push(function(b,c,d){a(d.elements).not(b).hide();
a.fn.cycle.commonReset(b,c,d,!1,!0);d.animIn.width=c.cycleW});b.cssBefore.left=0;b.cssBefore.top=0;b.cssBefore.width=0;b.animIn.width="show";b.animOut.width=0};a.fn.cycle.transitions.slideY=function(d,c,b){b.before.push(function(b,c,d){a(d.elements).not(b).hide();a.fn.cycle.commonReset(b,c,d,!0,!1);d.animIn.height=c.cycleH});b.cssBefore.left=0;b.cssBefore.top=0;b.cssBefore.height=0;b.animIn.height="show";b.animOut.height=0};a.fn.cycle.transitions.shuffle=function(d,c,b){d=d.css("overflow","visible").width();
c.css({left:0,top:0});b.before.push(function(b,c,d){a.fn.cycle.commonReset(b,c,d,!0,!0,!0)});if(!b.speedAdjusted)b.speed/=2,b.speedAdjusted=!0;b.random=0;b.shuffle=b.shuffle||{left:-d,top:15};b.els=[];for(d=0;d<c.length;d++)b.els.push(c[d]);for(d=0;d<b.currSlide;d++)b.els.push(b.els.shift());b.fxFn=function(b,c,d,j,k){d.rev&&(k=!k);var l=k?a(b):a(c);a(c).css(d.cssBefore);var o=d.slideCount;l.animate(d.shuffle,d.speedIn,d.easeIn,function(){for(var c=a.fn.cycle.hopsFromLast(d,k),f=0;f<c;f++)k?d.els.push(d.els.shift()):
d.els.unshift(d.els.pop());if(k){c=0;for(f=d.els.length;c<f;c++)a(d.els[c]).css("z-index",f-c+o)}else c=a(b).css("z-index"),l.css("z-index",parseInt(c,10)+1+o);l.animate({left:0,top:0},d.speedOut,d.easeOut,function(){a(k?this:b).hide();j&&j()})})};a.extend(b.cssBefore,{display:"block",opacity:1,top:0,left:0})};a.fn.cycle.transitions.turnUp=function(d,c,b){b.before.push(function(b,c,d){a.fn.cycle.commonReset(b,c,d,!0,!1);d.cssBefore.top=c.cycleH;d.animIn.height=c.cycleH;d.animOut.width=c.cycleW});
b.cssFirst.top=0;b.cssBefore.left=0;b.cssBefore.height=0;b.animIn.top=0;b.animOut.height=0};a.fn.cycle.transitions.turnDown=function(d,c,b){b.before.push(function(b,c,d){a.fn.cycle.commonReset(b,c,d,!0,!1);d.animIn.height=c.cycleH;d.animOut.top=b.cycleH});b.cssFirst.top=0;b.cssBefore.left=0;b.cssBefore.top=0;b.cssBefore.height=0;b.animOut.height=0};a.fn.cycle.transitions.turnLeft=function(d,c,b){b.before.push(function(b,c,d){a.fn.cycle.commonReset(b,c,d,!1,!0);d.cssBefore.left=c.cycleW;d.animIn.width=
c.cycleW});b.cssBefore.top=0;b.cssBefore.width=0;b.animIn.left=0;b.animOut.width=0};a.fn.cycle.transitions.turnRight=function(d,c,b){b.before.push(function(b,c,d){a.fn.cycle.commonReset(b,c,d,!1,!0);d.animIn.width=c.cycleW;d.animOut.left=b.cycleW});a.extend(b.cssBefore,{top:0,left:0,width:0});b.animIn.left=0;b.animOut.width=0};a.fn.cycle.transitions.zoom=function(d,c,b){b.before.push(function(b,c,d){a.fn.cycle.commonReset(b,c,d,!1,!1,!0);d.cssBefore.top=c.cycleH/2;d.cssBefore.left=c.cycleW/2;a.extend(d.animIn,
{top:0,left:0,width:c.cycleW,height:c.cycleH});a.extend(d.animOut,{width:0,height:0,top:b.cycleH/2,left:b.cycleW/2})});b.cssFirst.top=0;b.cssFirst.left=0;b.cssBefore.width=0;b.cssBefore.height=0};a.fn.cycle.transitions.fadeZoom=function(d,c,b){b.before.push(function(b,c,d){a.fn.cycle.commonReset(b,c,d,!1,!1);d.cssBefore.left=c.cycleW/2;d.cssBefore.top=c.cycleH/2;a.extend(d.animIn,{top:0,left:0,width:c.cycleW,height:c.cycleH})});b.cssBefore.width=0;b.cssBefore.height=0;b.animOut.opacity=0};a.fn.cycle.transitions.blindX=
function(d,c,b){d=d.css("overflow","hidden").width();b.before.push(function(b,c,d){a.fn.cycle.commonReset(b,c,d);d.animIn.width=c.cycleW;d.animOut.left=b.cycleW});b.cssBefore.left=d;b.cssBefore.top=0;b.animIn.left=0;b.animOut.left=d};a.fn.cycle.transitions.blindY=function(d,c,b){d=d.css("overflow","hidden").height();b.before.push(function(b,c,d){a.fn.cycle.commonReset(b,c,d);d.animIn.height=c.cycleH;d.animOut.top=b.cycleH});b.cssBefore.top=d;b.cssBefore.left=0;b.animIn.top=0;b.animOut.top=d};a.fn.cycle.transitions.blindZ=
function(d,c,b){c=d.css("overflow","hidden").height();d=d.width();b.before.push(function(b,c,d){a.fn.cycle.commonReset(b,c,d);d.animIn.height=c.cycleH;d.animOut.top=b.cycleH});b.cssBefore.top=c;b.cssBefore.left=d;b.animIn.top=0;b.animIn.left=0;b.animOut.top=c;b.animOut.left=d};a.fn.cycle.transitions.growX=function(d,c,b){b.before.push(function(b,c,d){a.fn.cycle.commonReset(b,c,d,!1,!0);d.cssBefore.left=this.cycleW/2;d.animIn.left=0;d.animIn.width=this.cycleW;d.animOut.left=0});b.cssBefore.top=0;b.cssBefore.width=
0};a.fn.cycle.transitions.growY=function(d,c,b){b.before.push(function(b,c,d){a.fn.cycle.commonReset(b,c,d,!0,!1);d.cssBefore.top=this.cycleH/2;d.animIn.top=0;d.animIn.height=this.cycleH;d.animOut.top=0});b.cssBefore.height=0;b.cssBefore.left=0};a.fn.cycle.transitions.curtainX=function(d,c,b){b.before.push(function(b,c,d){a.fn.cycle.commonReset(b,c,d,!1,!0,!0);d.cssBefore.left=c.cycleW/2;d.animIn.left=0;d.animIn.width=this.cycleW;d.animOut.left=b.cycleW/2;d.animOut.width=0});b.cssBefore.top=0;b.cssBefore.width=
0};a.fn.cycle.transitions.curtainY=function(d,c,b){b.before.push(function(b,c,d){a.fn.cycle.commonReset(b,c,d,!0,!1,!0);d.cssBefore.top=c.cycleH/2;d.animIn.top=0;d.animIn.height=c.cycleH;d.animOut.top=b.cycleH/2;d.animOut.height=0});b.cssBefore.height=0;b.cssBefore.left=0};a.fn.cycle.transitions.cover=function(d,c,b){var e=b.direction||"left",f=d.css("overflow","hidden").width(),g=d.height();b.before.push(function(b,c,d){a.fn.cycle.commonReset(b,c,d);d.cssAfter.display="";e=="right"?d.cssBefore.left=
-f:e=="up"?d.cssBefore.top=g:e=="down"?d.cssBefore.top=-g:d.cssBefore.left=f});b.animIn.left=0;b.animIn.top=0;b.cssBefore.top=0;b.cssBefore.left=0};a.fn.cycle.transitions.uncover=function(d,c,b){var e=b.direction||"left",f=d.css("overflow","hidden").width(),g=d.height();b.before.push(function(b,c,d){a.fn.cycle.commonReset(b,c,d,!0,!0,!0);e=="right"?d.animOut.left=f:e=="up"?d.animOut.top=-g:e=="down"?d.animOut.top=g:d.animOut.left=-f});b.animIn.left=0;b.animIn.top=0;b.cssBefore.top=0;b.cssBefore.left=
0};a.fn.cycle.transitions.toss=function(d,c,b){var e=d.css("overflow","visible").width(),f=d.height();b.before.push(function(b,c,d){a.fn.cycle.commonReset(b,c,d,!0,!0,!0);!d.animOut.left&&!d.animOut.top?a.extend(d.animOut,{left:e*2,top:-f/2,opacity:0}):d.animOut.opacity=0});b.cssBefore.left=0;b.cssBefore.top=0;b.animIn.left=0};a.fn.cycle.transitions.wipe=function(d,c,b){var e=d.css("overflow","hidden").width(),f=d.height();b.cssBefore=b.cssBefore||{};var g;b.clip&&(/l2r/.test(b.clip)?g="rect(0px 0px "+
f+"px 0px)":/r2l/.test(b.clip)?g="rect(0px "+e+"px "+f+"px "+e+"px)":/t2b/.test(b.clip)?g="rect(0px "+e+"px 0px 0px)":/b2t/.test(b.clip)?g="rect("+f+"px "+e+"px "+f+"px 0px)":/zoom/.test(b.clip)&&(d=parseInt(f/2,10),c=parseInt(e/2,10),g="rect("+d+"px "+c+"px "+d+"px "+c+"px)"));b.cssBefore.clip=b.cssBefore.clip||g||"rect(0px 0px 0px 0px)";d=b.cssBefore.clip.match(/(\d+)/g);var j=parseInt(d[0],10),k=parseInt(d[1],10),l=parseInt(d[2],10),o=parseInt(d[3],10);b.before.push(function(b,c,d){if(b!=c){var g=
a(b),t=a(c);a.fn.cycle.commonReset(b,c,d,!0,!0,!1);d.cssAfter.display="block";var x=1,n=parseInt(d.speedIn/13,10)-1;(function u(){var a=j?j-parseInt(x*(j/n),10):0,b=o?o-parseInt(x*(o/n),10):0,c=l<f?l+parseInt(x*((f-l)/n||1),10):f,d=k<e?k+parseInt(x*((e-k)/n||1),10):e;t.css({clip:"rect("+a+"px "+d+"px "+c+"px "+b+"px)"});x++<=n?setTimeout(u,13):g.css("display","none")})()}});a.extend(b.cssBefore,{display:"block",opacity:1,top:0,left:0});b.animIn={left:0};b.animOut={left:0}}})(jQuery);
(function(a){window.XDomainRequest&&a.ajaxTransport(function(d){if(d.crossDomain&&d.async){if(d.timeout)d.xdrTimeout=d.timeout,delete d.timeout;var c;return{send:function(b,e){function f(b,d,f,l){c.onload=c.onerror=c.ontimeout=a.noop;c=void 0;e(b,d,f,l)}c=new XDomainRequest;c.onload=function(){f(200,"OK",{text:c.responseText},"Content-Type: "+c.contentType)};c.onerror=function(){f(404,"Not Found")};c.onprogress=function(){};c.ontimeout=function(){f(0,"timeout")};c.timeout=d.xdrTimeout||Number.MAX_VALUE;
c.open(d.type,d.url);c.send(d.hasContent&&d.data||null)},abort:function(){if(c)c.onerror=a.noop,c.abort()}}}})})(jQuery);
(function(a,d){var c=a.console||d,b=a.document,e=a.navigator,f=a.sessionStorage||!1,g=a.setTimeout,j=a.clearTimeout,k=a.setInterval,l=a.clearInterval,o=a.JSON,p=a.alert,h=a.History=a.History||{},m=a.history;try{f.setItem("TEST","1"),f.removeItem("TEST")}catch(w){f=!1}o.stringify=o.stringify||o.encode;o.parse=o.parse||o.decode;if(typeof h.init!=="undefined")throw Error("History.js Core has already been loaded...");h.init=function(){if(typeof h.Adapter==="undefined")return!1;typeof h.initCore!=="undefined"&&
h.initCore();typeof h.initHtml4!=="undefined"&&h.initHtml4();return!0};h.initCore=function(){if(typeof h.initCore.initialized!=="undefined")return!1;else h.initCore.initialized=!0;h.options=h.options||{};h.options.hashChangeInterval=h.options.hashChangeInterval||100;h.options.safariPollInterval=h.options.safariPollInterval||500;h.options.doubleCheckInterval=h.options.doubleCheckInterval||500;h.options.disableSuid=h.options.disableSuid||!1;h.options.storeInterval=h.options.storeInterval||1E3;h.options.busyDelay=
h.options.busyDelay||250;h.options.debug=h.options.debug||!1;h.options.initialTitle=h.options.initialTitle||b.title;h.options.html4Mode=h.options.html4Mode||!1;h.options.delayInit=h.options.delayInit||!1;h.intervalList=[];h.clearAllIntervals=function(){var a,b=h.intervalList;if(typeof b!=="undefined"&&b!==null){for(a=0;a<b.length;a++)l(b[a]);h.intervalList=null}};h.debug=function(){h.options.debug&&h.log.apply(h,arguments)};h.log=function(){var a=!(typeof c==="undefined"||typeof c.log==="undefined"||
typeof c.log.apply==="undefined"),e=b.getElementById("log"),d,f,g,k;a?(f=Array.prototype.slice.call(arguments),d=f.shift(),typeof c.debug!=="undefined"?c.debug.apply(c,[d,f]):c.log.apply(c,[d,f])):d="\n"+arguments[0]+"\n";f=1;for(g=arguments.length;f<g;++f){k=arguments[f];if(typeof k==="object"&&typeof o!=="undefined")try{k=o.stringify(k)}catch(j){}d+="\n"+k+"\n"}e?(e.value+=d+"\n-----\n",e.scrollTop=e.scrollHeight-e.clientHeight):a||p(d);return!0};h.getInternetExplorerMajorVersion=function(){return h.getInternetExplorerMajorVersion.cached=
typeof h.getInternetExplorerMajorVersion.cached!=="undefined"?h.getInternetExplorerMajorVersion.cached:function(){for(var a=3,e=b.createElement("div"),c=e.getElementsByTagName("i");(e.innerHTML="<\!--[if gt IE "+ ++a+"]><i></i><![endif]--\>")&&c[0];);return a>4?a:!1}()};h.isInternetExplorer=function(){return h.isInternetExplorer.cached=typeof h.isInternetExplorer.cached!=="undefined"?h.isInternetExplorer.cached:Boolean(h.getInternetExplorerMajorVersion())};h.emulated=h.options.html4Mode?{pushState:!0,
hashChange:!0}:{pushState:!Boolean(a.history&&a.history.pushState&&a.history.replaceState&&!(/ Mobile\/([1-7][a-z]|(8([abcde]|f(1[0-8]))))/i.test(e.userAgent)||/AppleWebKit\/5([0-2]|3[0-2])/i.test(e.userAgent))),hashChange:Boolean(!("onhashchange"in a||"onhashchange"in b)||h.isInternetExplorer()&&h.getInternetExplorerMajorVersion()<8)};h.enabled=!h.emulated.pushState;h.bugs={setHash:Boolean(!h.emulated.pushState&&e.vendor==="Apple Computer, Inc."&&/AppleWebKit\/5([0-2]|3[0-3])/.test(e.userAgent)),
safariPoll:Boolean(!h.emulated.pushState&&e.vendor==="Apple Computer, Inc."&&/AppleWebKit\/5([0-2]|3[0-3])/.test(e.userAgent)),ieDoubleCheck:Boolean(h.isInternetExplorer()&&h.getInternetExplorerMajorVersion()<8),hashEscape:Boolean(h.isInternetExplorer()&&h.getInternetExplorerMajorVersion()<7)};h.isEmptyObject=function(a){for(var b in a)if(a.hasOwnProperty(b))return!1;return!0};h.cloneObject=function(a){a?(a=o.stringify(a),a=o.parse(a)):a={};return a};h.getRootUrl=function(){var a=b.location.protocol+
"//"+(b.location.hostname||b.location.host);b.location.port&&(a+=":"+b.location.port);a+="/";return a};h.getBaseHref=function(){var a=b.getElementsByTagName("base"),e=null;e="";a.length===1&&(e=a[0],e=e.href.replace(/[^\/]+$/,""));(e=e.replace(/\/+$/,""))&&(e+="/");return e};h.getBaseUrl=function(){return h.getBaseHref()||h.getBasePageUrl()||h.getRootUrl()};h.getPageUrl=function(){return((h.getState(!1,!1)||{}).url||h.getLocationHref()).replace(/\/+$/,"").replace(/[^\/]+$/,function(a){return/\./.test(a)?
a:a+"/"})};h.getBasePageUrl=function(){return h.getLocationHref().replace(/[#\?].*/,"").replace(/[^\/]+$/,function(a){return/[^\/]$/.test(a)?"":a}).replace(/\/+$/,"")+"/"};h.getFullUrl=function(a,b){var e=a,c=a.substring(0,1);b=typeof b==="undefined"?!0:b;/[a-z]+\:\/\//.test(a)||(e=c==="/"?h.getRootUrl()+a.replace(/^\/+/,""):c==="#"?h.getPageUrl().replace(/#.*/,"")+a:c==="?"?h.getPageUrl().replace(/[\?#].*/,"")+a:b?h.getBaseUrl()+a.replace(/^(\.\/)+/,""):h.getBasePageUrl()+a.replace(/^(\.\/)+/,""));
return e.replace(/\#$/,"")};h.getShortUrl=function(a){var b=h.getBaseUrl(),e=h.getRootUrl();h.emulated.pushState&&(a=a.replace(b,""));a=a.replace(e,"/");h.isTraditionalAnchor(a)&&(a="./"+a);return a=a.replace(/^(\.\/)+/g,"./").replace(/\#$/,"")};h.getLocationHref=function(a){a=a||b;if(a.URL===a.location.href)return a.location.href;if(a.location.href===decodeURIComponent(a.URL))return a.URL;if(a.location.hash&&decodeURIComponent(a.location.href.replace(/^[^#]+/,""))===a.location.hash)return a.location.href;
if(a.URL.indexOf("#")==-1&&a.location.href.indexOf("#")!=-1)return a.location.href;return a.URL||a.location.href};h.store={};h.idToState=h.idToState||{};h.stateToId=h.stateToId||{};h.urlToId=h.urlToId||{};h.storedStates=h.storedStates||[];h.savedStates=h.savedStates||[];h.normalizeStore=function(){h.store.idToState=h.store.idToState||{};h.store.urlToId=h.store.urlToId||{};h.store.stateToId=h.store.stateToId||{}};h.getState=function(a,b){typeof a==="undefined"&&(a=!0);typeof b==="undefined"&&(b=!0);
var e=h.getLastSavedState();!e&&b&&(e=h.createStateObject());if(a)e=h.cloneObject(e),e.url=e.cleanUrl||e.url;return e};h.getIdByState=function(a){var b=h.extractId(a.url),e;if(!b)if(e=h.getStateString(a),typeof h.stateToId[e]!=="undefined")b=h.stateToId[e];else if(typeof h.store.stateToId[e]!=="undefined")b=h.store.stateToId[e];else{for(;;)if(b=(new Date).getTime()+String(Math.random()).replace(/\D/g,""),typeof h.idToState[b]==="undefined"&&typeof h.store.idToState[b]==="undefined")break;h.stateToId[e]=
b;h.idToState[b]=a}return b};h.normalizeState=function(a){var b;if(!a||typeof a!=="object")a={};if(typeof a.normalized!=="undefined")return a;if(!a.data||typeof a.data!=="object")a.data={};b={};b.normalized=!0;b.title=a.title||"";b.url=h.getFullUrl(a.url?a.url:h.getLocationHref());b.hash=h.getShortUrl(b.url);b.data=h.cloneObject(a.data);b.id=h.getIdByState(b);b.cleanUrl=b.url.replace(/\??\&_suid.*/,"");b.url=b.cleanUrl;a=!h.isEmptyObject(b.data);if((b.title||a)&&h.options.disableSuid!==!0)b.hash=
h.getShortUrl(b.url).replace(/\??\&_suid.*/,""),/\?/.test(b.hash)||(b.hash+="?"),b.hash+="&_suid="+b.id;b.hashedUrl=h.getFullUrl(b.hash);if((h.emulated.pushState||h.bugs.safariPoll)&&h.hasUrlDuplicate(b))b.url=b.hashedUrl;return b};h.createStateObject=function(a,b,e){a={data:a,title:b,url:e};return a=h.normalizeState(a)};h.getStateById=function(a){a=String(a);return h.idToState[a]||h.store.idToState[a]||d};h.getStateString=function(a){a={data:h.normalizeState(a).data,title:a.title,url:a.url};return o.stringify(a)};
h.getStateId=function(a){return h.normalizeState(a).id};h.getHashByState=function(a){return h.normalizeState(a).hash};h.extractId=function(a){return((a=/(.*)\&_suid=([0-9]+)$/.exec(a.indexOf("#")!=-1?a.split("#")[0]:a))?String(a[2]||""):"")||!1};h.isTraditionalAnchor=function(a){return!/[\/\?\.]/.test(a)};h.extractState=function(a,b,e){var c=null,d,f;b=b||!1;(d=h.extractId(a))&&(c=h.getStateById(d));c||(f=h.getFullUrl(a),(d=h.getIdByUrl(f)||!1)&&(c=h.getStateById(d)),!c&&b&&!h.isTraditionalAnchor(a)&&
(c=h.createStateObject(null,e||null,f)));return c};h.getIdByUrl=function(a){return h.urlToId[a]||h.store.urlToId[a]||d};h.getLastSavedState=function(){return h.savedStates[h.savedStates.length-1]||d};h.getLastStoredState=function(){return h.storedStates[h.storedStates.length-1]||d};h.hasUrlDuplicate=function(a){var b=!1;return b=(b=h.extractState(a.url))&&b.id!==a.id};h.storeState=function(a){h.urlToId[a.url]=a.id;h.storedStates.push(h.cloneObject(a));return a};h.isLastSavedState=function(a){var b=
!1;if(h.savedStates.length)a=a.id,b=h.getLastSavedState(),b=b.id,b=a===b;return b};h.saveState=function(a){if(h.isLastSavedState(a))return!1;h.savedStates.push(h.cloneObject(a));return!0};h.getStateByIndex=function(a){var b=null;return b=typeof a==="undefined"?h.savedStates[h.savedStates.length-1]:a<0?h.savedStates[h.savedStates.length+a]:h.savedStates[a]};h.getCurrentIndex=function(){var a=null;return a=h.savedStates.length<1?0:h.savedStates.length-1};h.getHash=function(a){a=h.getLocationHref(a);
return h.getHashByUrl(a)};h.unescapeHash=function(a){a=h.normalizeHash(a);return a=decodeURIComponent(a)};h.normalizeHash=function(a){return a.replace(/[^#]*#/,"").replace(/#.*/,"")};h.setHash=function(a,e){var c;if(e!==!1&&h.busy())return h.pushQueue({scope:h,callback:h.setHash,args:arguments,queue:e}),!1;h.busy(!0);if((c=h.extractState(a,!0))&&!h.emulated.pushState)h.pushState(c.data,c.title,c.url,!1);else if(h.getHash()!==a)h.bugs.setHash?(c=h.getPageUrl(),h.pushState(null,null,c+"#"+a,!1)):b.location.hash=
a;return h};h.escapeHash=function(b){b=h.normalizeHash(b);b=a.encodeURIComponent(b);h.bugs.hashEscape||(b=b.replace(/\%21/g,"!").replace(/\%26/g,"&").replace(/\%3D/g,"=").replace(/\%3F/g,"?"));return b};h.getHashByUrl=function(a){a=String(a).replace(/([^#]*)#?([^#]*)#?(.*)/,"$2");return a=h.unescapeHash(a)};h.setTitle=function(a){var e=a.title,c;if(!e&&(c=h.getStateByIndex(0))&&c.url===a.url)e=c.title;if(!e)e=h.options.initialTitle;try{b.getElementsByTagName("title")[0].innerHTML=e.replace("<","&lt;").replace(">",
"&gt;").replace(" & "," &amp; ")}catch(d){}b.title=e;return h};h.queues=[];h.busy=function(a){if(typeof a!=="undefined")h.busy.flag=a;else if(typeof h.busy.flag==="undefined")h.busy.flag=!1;if(!h.busy.flag){j(h.busy.timeout);var b=function(){var a,e;if(!h.busy.flag)for(a=h.queues.length-1;a>=0;--a)if(e=h.queues[a],e.length!==0)e=e.shift(),h.fireQueueItem(e),h.busy.timeout=g(b,h.options.busyDelay)};h.busy.timeout=g(b,h.options.busyDelay)}return h.busy.flag};h.busy.flag=!1;h.fireQueueItem=function(a){return a.callback.apply(a.scope||
h,a.args||[])};h.pushQueue=function(a){h.queues[a.queue||0]=h.queues[a.queue||0]||[];h.queues[a.queue||0].push(a);return h};h.queue=function(a,b){typeof a==="function"&&(a={callback:a});if(typeof b!=="undefined")a.queue=b;h.busy()?h.pushQueue(a):h.fireQueueItem(a);return h};h.clearQueue=function(){h.busy.flag=!1;h.queues=[];return h};h.stateChanged=!1;h.doubleChecker=!1;h.doubleCheckComplete=function(){h.stateChanged=!0;h.doubleCheckClear();return h};h.doubleCheckClear=function(){if(h.doubleChecker)j(h.doubleChecker),
h.doubleChecker=!1;return h};h.doubleCheck=function(a){h.stateChanged=!1;h.doubleCheckClear();if(h.bugs.ieDoubleCheck)h.doubleChecker=g(function(){h.doubleCheckClear();h.stateChanged||a();return!0},h.options.doubleCheckInterval);return h};h.safariStatePoll=function(){var b=h.extractState(h.getLocationHref());if(!h.isLastSavedState(b))return b||h.createStateObject(),h.Adapter.trigger(a,"popstate"),h};h.back=function(a){if(a!==!1&&h.busy())return h.pushQueue({scope:h,callback:h.back,args:arguments,
queue:a}),!1;h.busy(!0);h.doubleCheck(function(){h.back(!1)});m.go(-1);return!0};h.forward=function(a){if(a!==!1&&h.busy())return h.pushQueue({scope:h,callback:h.forward,args:arguments,queue:a}),!1;h.busy(!0);h.doubleCheck(function(){h.forward(!1)});m.go(1);return!0};h.go=function(a,b){var e;if(a>0)for(e=1;e<=a;++e)h.forward(b);else if(a<0)for(e=-1;e>=a;--e)h.back(b);else throw Error("History.go: History.go requires a positive or negative integer passed.");return h};if(h.emulated.pushState){var t=
function(){};h.pushState=h.pushState||t;h.replaceState=h.replaceState||t}else h.onPopState=function(b,e){var c=!1;c=!1;h.doubleCheckComplete();if(c=h.getHash())return(c=h.extractState(c||h.getLocationHref(),!0))?h.replaceState(c.data,c.title,c.url,!1):(h.Adapter.trigger(a,"anchorchange"),h.busy(!1)),h.expectedStateId=!1;(c=(c=h.Adapter.extractEventData("state",b,e)||!1)?h.getStateById(c):h.expectedStateId?h.getStateById(h.expectedStateId):h.extractState(h.getLocationHref()))||(c=h.createStateObject(null,
null,h.getLocationHref()));h.expectedStateId=!1;if(h.isLastSavedState(c))return h.busy(!1),!1;h.storeState(c);h.saveState(c);h.setTitle(c);h.Adapter.trigger(a,"statechange");h.busy(!1);return!0},h.Adapter.bind(a,"popstate",h.onPopState),h.pushState=function(b,e,c,d){if(h.getHashByUrl(c)&&h.emulated.pushState)throw Error("History.js does not support states with fragement-identifiers (hashes/anchors).");if(d!==!1&&h.busy())return h.pushQueue({scope:h,callback:h.pushState,args:arguments,queue:d}),!1;
h.busy(!0);var f=h.createStateObject(b,e,c);h.isLastSavedState(f)?h.busy(!1):(h.storeState(f),h.expectedStateId=f.id,m.pushState(f.id,f.title,f.url),h.Adapter.trigger(a,"popstate"));return!0},h.replaceState=function(b,e,c,d){if(h.getHashByUrl(c)&&h.emulated.pushState)throw Error("History.js does not support states with fragement-identifiers (hashes/anchors).");if(d!==!1&&h.busy())return h.pushQueue({scope:h,callback:h.replaceState,args:arguments,queue:d}),!1;h.busy(!0);var f=h.createStateObject(b,
e,c);h.isLastSavedState(f)?h.busy(!1):(h.storeState(f),h.expectedStateId=f.id,m.replaceState(f.id,f.title,f.url),h.Adapter.trigger(a,"popstate"));return!0};if(f)try{h.store=o.parse(f.getItem("History.store"))||{}}catch(x){h.store={}}else h.store={};h.normalizeStore();h.Adapter.bind(a,"unload",h.clearAllIntervals);h.saveState(h.storeState(h.extractState(h.getLocationHref(),!0,b.title)));if(f)h.onUnload=function(){var a,b;try{a=o.parse(f.getItem("History.store"))||{}}catch(e){a={}}a.idToState=a.idToState||
{};a.urlToId=a.urlToId||{};a.stateToId=a.stateToId||{};for(b in h.idToState)h.idToState.hasOwnProperty(b)&&(a.idToState[b]=h.idToState[b]);for(b in h.urlToId)h.urlToId.hasOwnProperty(b)&&(a.urlToId[b]=h.urlToId[b]);for(b in h.stateToId)h.stateToId.hasOwnProperty(b)&&(a.stateToId[b]=h.stateToId[b]);h.store=a;h.normalizeStore();a=o.stringify(a);try{f.setItem("History.store",a)}catch(c){if(c.code===DOMException.QUOTA_EXCEEDED_ERR)f.length&&(f.removeItem("History.store"),f.setItem("History.store",a));
else throw c;}},h.intervalList.push(k(h.onUnload,h.options.storeInterval)),h.Adapter.bind(a,"beforeunload",h.onUnload),h.Adapter.bind(a,"unload",h.onUnload);if(!h.emulated.pushState&&(h.bugs.safariPoll&&h.intervalList.push(k(h.safariStatePoll,h.options.safariPollInterval)),e.vendor==="Apple Computer, Inc."||(e.appCodeName||"")==="Mozilla"))if(h.Adapter.bind(a,"hashchange",function(){h.Adapter.trigger(a,"popstate")}),h.getHash())h.Adapter.onDomLoad(function(){h.Adapter.trigger(a,"hashchange")})};(!h.options||
!h.options.delayInit)&&h.init()})(window);
(function(a){var d=a.document,c=a.setInterval||c,b=a.History=a.History||{};if(typeof b.initHtml4!=="undefined")throw Error("History.js HTML4 Support has already been loaded...");b.initHtml4=function(){if(typeof b.initHtml4.initialized!=="undefined")return!1;else b.initHtml4.initialized=!0;b.enabled=!0;b.savedHashes=[];b.isLastHash=function(a){var c=b.getHashByIndex();return a===c};b.isHashEqual=function(a,b){a=encodeURIComponent(a).replace(/%25/g,"%");b=encodeURIComponent(b).replace(/%25/g,"%");return a===
b};b.saveHash=function(a){if(b.isLastHash(a))return!1;b.savedHashes.push(a);return!0};b.getHashByIndex=function(a){var c=null;return c=typeof a==="undefined"?b.savedHashes[b.savedHashes.length-1]:a<0?b.savedHashes[b.savedHashes.length+a]:b.savedHashes[a]};b.discardedHashes={};b.discardedStates={};b.discardState=function(a,c,d){var j=b.getHashByState(a);b.discardedStates[j]={discardedState:a,backState:d,forwardState:c};return!0};b.discardHash=function(a,c,d){b.discardedHashes[a]={discardedHash:a,backState:d,
forwardState:c};return!0};b.discardedState=function(a){a=b.getHashByState(a);return b.discardedStates[a]||!1};b.discardedHash=function(a){return b.discardedHashes[a]||!1};b.recycleState=function(a){var c=b.getHashByState(a);b.discardedState(a)&&delete b.discardedStates[c];return!0};if(b.emulated.hashChange)b.hashChangeInit=function(){b.checkerFunction=null;var e="",f,g,j,k=Boolean(b.getHash());b.isInternetExplorer()?(f=d.createElement("iframe"),f.setAttribute("id","historyjs-iframe"),f.setAttribute("src",
"#"),f.style.display="none",d.body.appendChild(f),f.contentWindow.document.open(),f.contentWindow.document.close(),g="",j=!1,b.checkerFunction=function(){if(j)return!1;j=!0;var c=b.getHash(),d=b.getHash(f.contentWindow.document);if(c!==e){e=c;if(d!==c)g=c,f.contentWindow.document.open(),f.contentWindow.document.close(),f.contentWindow.document.location.hash=b.escapeHash(c);b.Adapter.trigger(a,"hashchange")}else d!==g&&(g=d,k&&d===""?b.back():b.setHash(d,!1));j=!1;return!0}):b.checkerFunction=function(){var c=
b.getHash()||"";c!==e&&(e=c,b.Adapter.trigger(a,"hashchange"));return!0};b.intervalList.push(c(b.checkerFunction,b.options.hashChangeInterval));return!0},b.Adapter.onDomLoad(b.hashChangeInit);if(b.emulated.pushState)b.onHashChange=function(e){e=e&&e.newURL||b.getLocationHref();var c=b.getHashByUrl(e);e=null;if(b.isLastHash(c))return b.busy(!1),!1;b.doubleCheckComplete();b.saveHash(c);if(c&&b.isTraditionalAnchor(c))return b.Adapter.trigger(a,"anchorchange"),b.busy(!1),!1;e=b.extractState(b.getFullUrl(c||
b.getLocationHref()),!0);if(b.isLastSavedState(e))return b.busy(!1),!1;b.getHashByState(e);if(c=b.discardedState(e))return b.getHashByIndex(-2)===b.getHashByState(c.forwardState)?b.back(!1):b.forward(!1),!1;b.pushState(e.data,e.title,encodeURI(e.url),!1);return!0},b.Adapter.bind(a,"hashchange",b.onHashChange),b.pushState=function(e,c,d,j){d=encodeURI(d).replace(/%25/g,"%");if(b.getHashByUrl(d))throw Error("History.js does not support states with fragment-identifiers (hashes/anchors).");if(j!==!1&&
b.busy())return b.pushQueue({scope:b,callback:b.pushState,args:arguments,queue:j}),!1;b.busy(!0);var k=b.createStateObject(e,c,d),l=b.getHashByState(k),o=b.getState(!1);o=b.getHashByState(o);var p=b.getHash(),h=b.expectedStateId==k.id;b.storeState(k);b.expectedStateId=k.id;b.recycleState(k);b.setTitle(k);if(l===o)return b.busy(!1),!1;b.saveState(k);h||b.Adapter.trigger(a,"statechange");!b.isHashEqual(l,p)&&!b.isHashEqual(l,b.getShortUrl(b.getLocationHref()))&&b.setHash(l,!1);b.busy(!1);return!0},
b.replaceState=function(e,c,d,j){d=encodeURI(d).replace(/%25/g,"%");if(b.getHashByUrl(d))throw Error("History.js does not support states with fragment-identifiers (hashes/anchors).");if(j!==!1&&b.busy())return b.pushQueue({scope:b,callback:b.replaceState,args:arguments,queue:j}),!1;b.busy(!0);var k=b.createStateObject(e,c,d),l=b.getHashByState(k),o=b.getState(!1),p=b.getHashByState(o),h=b.getStateByIndex(-2);b.discardState(o,k,h);l===p?(b.storeState(k),b.expectedStateId=k.id,b.recycleState(k),b.setTitle(k),
b.saveState(k),b.Adapter.trigger(a,"statechange"),b.busy(!1)):b.pushState(k.data,k.title,k.url,!1);return!0};if(b.emulated.pushState&&b.getHash()&&!b.emulated.hashChange)b.Adapter.onDomLoad(function(){b.Adapter.trigger(a,"hashchange")})};typeof b.init!=="undefined"&&b.init()})(window);
(function(a,d){var c=a.History=a.History||{},b=a.jQuery;if(typeof c.Adapter!=="undefined")throw Error("History.js Adapter has already been loaded...");c.Adapter={bind:function(a,c,d){b(a).bind(c,d)},trigger:function(a,c,d){b(a).trigger(c,d)},extractEventData:function(a,b,c){return b&&b.originalEvent&&b.originalEvent[a]||c&&c[a]||d},onDomLoad:function(a){b(a)}};typeof c.init!=="undefined"&&c.init()})(window);
if(/(MSIE [7-9]\.|Opera.*Version\/(10\.[5-9]|(11|12)\.)|Chrome\/([1-9]|10)\.|Version\/[2-4][\.0-9]+ Safari\/|Version\/(4\.0\.[4-9]|4\.[1-9]|5\.0)[\.0-9]+? Mobile\/.*Safari\/|Android [1-2]\.|BlackBerry.*WebKit)/.test(navigator.userAgent)&&!/(IEMobile)/.test(navigator.userAgent)){var ss_set={"notifications disabled":"\ud83d\udd15","notification disabled":"\ud83d\udd15",notificationsdisabled:"\ud83d\udd15",notificationdisabled:"\ud83d\udd15","telephone disabled":"\ue300",telephonedisabled:"\ue300","writing disabled":"\ue071",
"remove calendar":"\uf071","calendar remove":"\uf071","calendar delete":"\uf073",writingdisabled:"\ue071","delete calendar":"\uf073","pencil disabled":"\ue071",calendarremove:"\uf071","phone disabled":"\ue300","check calendar":"\uf072","navigate right":"\u25bb",pencildisabled:"\ue071",removecalendar:"\uf071","calendar check":"\uf072",deletecalendar:"\uf073","download cloud":"\ueb00","battery medium":"\uea11",calendardelete:"\uf073","cloud download":"\ueb00","medium battery":"\uea11","ellipsis chat":"\ue399",
mediumbattery:"\uea11","bell disabled":"\ud83d\udd15",clouddownload:"\ueb00","shopping cart":"\ue500",calendarcheck:"\uf072",phonedisabled:"\ue300","female avatar":"\ud83d\udc67",notifications:"\ud83d\udd14","call disabled":"\ue300","battery empty":"\uea13",navigateright:"\u25bb","empty battery":"\uea13",batterymedium:"\uea11",checkcalendar:"\uf072","navigate down":"\uf501","navigate left":"\u25c5",downloadcloud:"\ueb00",navigateleft:"\u25c5",ellipsischat:"\ue399",navigatedown:"\uf501",batteryempty:"\uea13",
"battery high":"\uea10",notification:"\ud83d\udd14","battery full":"\ud83d\udd0b",calldisabled:"\ue300",femaleavatar:"\ud83d\udc67","rotate right":"\u21bb","calendar add":"\uf070","high battery":"\uea10",emptybattery:"\uea13","cloud upload":"\ueb40","direct right":"\u25b9","full battery":"\ud83d\udd0b","add calendar":"\uf070","upload cloud":"\ueb40",belldisabled:"\ud83d\udd15","fast forward":"\u23e9","skip forward":"\u23ed","mobile phone":"\ud83d\udcf1",shoppingcart:"\ue500","direct left":"\u25c3",
"low battery":"\uea12",skipforward:"\u23ed",rotateright:"\u21bb","male avatar":"\ud83d\udc64","direct down":"\u25be",videocamera:"\ud83d\udcf9","female user":"\ud83d\udc67",information:"\u2139","thumbs down":"\ud83d\udc4e",photographs:"\ud83c\udf04",calendaradd:"\uf070","rotate left":"\u21ba","high volume":"\ud83d\udd0a",batteryhigh:"\uea10","credit card":"\ud83d\udcb3",batteryfull:"\ud83d\udd0b","navigate up":"\uf500","dollar sign":"\ud83d\udcb2",fastforward:"\u23e9",mobilephone:"\ud83d\udcf1","battery low":"\uea12",
addcalendar:"\uf070",fullbattery:"\ud83d\udd0b",uploadcloud:"\ueb40","delete date":"\uf073","remove date":"\uf071","volume high":"\ud83d\udd0a",directright:"\u25b9",cloudupload:"\ueb40",highbattery:"\uea10",navigation:"\ue670",smartphone:"\ud83d\udcf1",screenshot:"\u2316",dollarsign:"\ud83d\udcb2",creditcard:"\ud83d\udcb3","hard drive":"\ue7b0",femaleuser:"\ud83d\udc67",maleavatar:"\ud83d\udc64",removedate:"\uf071",microphone:"\ud83c\udfa4","low volume":"\ud83d\udd09","volume low":"\ud83d\udd09",
highvolume:"\ud83d\udd0a","check date":"\uf072",volumehigh:"\ud83d\udd0a",deletedate:"\uf073","cell phone":"\ud83d\udcf1",directions:"\ue672",photograph:"\ud83c\udf04","half heart":"\ue1a0",thumbsdown:"\ud83d\udc4e",disapprove:"\ud83d\udc4e",lowbattery:"\uea12","down right":"\u2b0a",batterylow:"\uea12",thumbnails:"\ue9a3",navigateup:"\uf500",attachment:"\ud83d\udcce",visibility:"\ud83d\udc40","pull quote":"\u201c",descending:"\u25be",directdown:"\u25be",directleft:"\u25c3",connection:"\ueb85",rotateleft:"\u21ba",
eyedropper:"\ue200",volumelow:"\ud83d\udd09",stopwatch:"\u23f1",warehouse:"\ue602",paperclip:"\ud83d\udcce",backspace:"\u232b",ascending:"\u25b4","half star":"\ue1a1",cellphone:"\ud83d\udcf1",lightbulb:"\ud83d\udca1","thumbs up":"\ud83d\udc4d","down left":"\u2b0b",newspaper:"\ud83d\udcf0","direct up":"\u25b4",checkdate:"\uf072",halfheart:"\ue1a0","bar chart":"\ud83d\udcca",harddrive:"\ue7b0","male user":"\ud83d\udc64","pie chart":"\ue570",downright:"\u2b0a","skip back":"\u23ee",musicnote:"\u266b",
dashboard:"\uf000",briefcase:"\ud83d\udcbc",pullquote:"\u201c",telephone:"\ud83d\udcde",checkmark:"\u2713",lowvolume:"\ud83d\udd09",buildings:"\ud83c\udfe2",crosshair:"\u2316","open book":"\ud83d\udcd6","add date":"\uf070",notebook:"\ud83d\udcd3",document:"\ud83d\udcc4",skipback:"\u23ee",typeface:"\ued01",transfer:"\u21c6",redirect:"\u21aa",computer:"\ud83d\udcbb",contract:"\uee01",question:"\u2753","sign out":"\uee02",download:"\ueb01",pictures:"\ud83c\udf04",subtract:"-",settings:"\u2699",database:"\ue7a0",
location:"\ue6d0",signpost:"\ue672",navigate:"\ue670",calendar:"\ud83d\udcc5",barchart:"\ud83d\udcca",openbook:"\ud83d\udcd6",maleuser:"\ud83d\udc64",ellipsis:"\u2026",envelope:"\u2709",facetime:"\ue320","end call":"\ue300",halfstar:"\ue1a1",favorite:"\u22c6",thumbsup:"\ud83d\udc4d","up right":"\u2b08",bookmark:"\ud83d\udd16",keywords:"\ue100",downleft:"\u2b0b",trashcan:"\ue0d0",insecure:"\ud83d\udd13",unlocked:"\ud83d\udd13",previous:"\u25c5",directup:"\u25b4","zoom out":"\ue003",dropdown:"\u25be",
piechart:"\ue570",caution:"\u26d4",desktop:"\ud83d\udcbb","zoom in":"\ue002",display:"\ud83d\udcbb",monitor:"\ud83d\udcbb",windows:"\ue202",warning:"\u26a0",descend:"\u25be","package":"\ud83d\udce6",upright:"\u2b08",droplet:"\ud83d\udca7",keyword:"\ue100",printer:"\u2399","private":"\ud83d\udd12",avatars:"\ud83d\udc65",dictate:"\ud83c\udfa4",battery:"\ud83d\udd0b",zoomout:"\ue003",checked:"\u2713",speaker:"\ud83d\udd08",comment:"\ud83d\udcac",forward:"\u27a1","up left":"\u2b09",approve:"\ud83d\udc4d",
endcall:"\ue300",compass:"\ue671",retweet:"\uf600",loading:"\ueb83",shuffle:"\ud83d\udd00",syncing:"\ueb82",visible:"\ud83d\udc40",airplay:"\ue800",adddate:"\uf070",picture:"\ud83c\udf04",dislike:"\ud83d\udc4e",compose:"\ud83d\udcdd",refresh:"\u21bb",columns:"\ue9a2",signout:"\uee02","log out":"\uee02",target:"\u25ce",cursor:"\ue001",search:"\ud83d\udd0e",zoomin:"\ue002",tablet:"\uea01",laptop:"\uea00",funnel:"\ue9b0",upload:"\ueb41",attach:"\ud83d\udcce",filter:"\ue9b0",pencil:"\u270e",ascend:"\u25b4",
eraser:"\u2710",locked:"\ud83d\udd12",secure:"\ud83d\udd12",unlock:"\ud83d\udd13",replay:"\u21ba","public":"\ud83d\udd13",repeat:"\ud83d\udd01",folder:"\ud83d\udcc1",upleft:"\u2b09",iphone:"\ud83d\udcf1",tagged:"\ue100",rewind:"\u23ea",record:"\u25cf",layout:"\ueda0",action:"\uee00",expand:"\u2922",sample:"\ue200",layers:"\ue202",videos:"\ud83d\udcf9",photos:"\ud83c\udf04",stroke:"\ue241",logout:"\uee02",images:"\ud83c\udf04",hyphen:"-",remove:"-",camera:"\ud83d\udcf7",volume:"\ud83d\udd08","delete":"\u2421",
avatar:"\ud83d\udc64",locate:"\ue670",mobile:"\ud83d\udcf1",pause:"\ue8a0",zelda:"\ue1a0",write:"\u270e",nodes:"\ueb85",merge:"\ueb81",alert:"\u26a0",video:"\ud83d\udcf9",world:"\ud83c\udf0e",print:"\u2399",trash:"\ue0d0",photo:"\ud83c\udf04",right:"\u27a1",image:"\ud83c\udf04",phone:"\ud83d\udcde",reply:"\u21a9",heart:"\u2665",minus:"-",erase:"\u2710",quote:"\u201c",check:"\u2713",sound:"\ud83d\udd08",flask:"\uf4c0",share:"\uee00",close:"\u2421",email:"\u2709",inbox:"\ud83d\udce5",visit:"\uee00",
audio:"\u266b",music:"\u266b",users:"\ud83d\udc65",price:"\ud83d\udcb2",house:"\u2302",timer:"\u23f1",cloud:"\u2601",eject:"\u23cf",earth:"\ud83c\udf0e",globe:"\ud83c\udf0e",clock:"\u23f2",list:"\ued50",time:"\u23f2",cell:"\ud83d\udcf1",zoom:"\ue002",date:"\ud83d\udcc5",home:"\u2302",ipad:"\uea01",bell:"\ud83d\udd14",cost:"\ud83d\udcb2",cart:"\ue500",view:"\ud83d\udc40",gear:"\u2699",user:"\ud83d\udc64",talk:"\ud83d\udcac",chat:"\ud83d\udcac",look:"\ud83d\udc40",fork:"\ueb80",mail:"\u2709",send:"\ue350",
link:"\ud83d\udd17",move:"\ue070",call:"\ud83d\udcde",plus:"+",exit:"\uee02",fill:"\ue240",info:"\u2139",crop:"\ue201",play:"\u25b6",star:"\u22c6",help:"\u2753",work:"\ud83d\udcbc",stop:"\u25a0",drop:"\ud83d\udca7",love:"\u2665",edit:"\u270e",rows:"\ue9a1",city:"\ud83c\udfe2",like:"\ud83d\udc4d",redo:"\u21bb",flag:"\u2691",font:"\ued01",tags:"\ue100",down:"\u2b07",grid:"\ue9a0",text:"\ued00",left:"\u2b05",back:"\u2b05",skip:"\u23ed",page:"\ud83d\udcc4",news:"\ud83d\udcf0",sync:"\ueb82",file:"\ud83d\udcc4",
wifi:"\ueb84",next:"\u25bb",undo:"\u21ba",book:"\ud83d\udcd5",lock:"\ud83d\udd12",idea:"\ud83d\udca1",key:"\ud83d\udd11",tag:"\ue100",fax:"\ud83d\udce0",map:"\ue673",out:"\uee00",rss:"\ue310",add:"+",ban:"\ud83d\udeab",cog:"\u2699",eye:"\ud83d\udc40",hdd:"\ue7b0",box:"\ud83d\udce6",pin:"\ud83d\udccd",mic:"\ud83c\udfa4",up:"\u2b06"};if(typeof ss_icons!=="object"||typeof ss_icons!=="object"){var ss_icons=ss_set,ss_keywords=[],i;for(i in ss_set)ss_keywords.push(i)}else for(i in ss_set)ss_icons[i]=ss_set[i],
ss_keywords.push(i);if(typeof ss_legacy!=="function"){(function(a,d){typeof module!="undefined"?module.exports=d():typeof define=="function"&&typeof define.amd=="object"?define(d):this[a]=d()})("ss_ready",function(a){function d(a){for(j=1;a=c.shift();)a()}var c=[],b,e=document,f=e.documentElement,g=f.doScroll,j=/^loade|c/.test(e.readyState);return e.addEventListener&&e.addEventListener("DOMContentLoaded",b=function(){e.removeEventListener("DOMContentLoaded",b,!1);d()},!1),g&&e.attachEvent("onreadystatechange",
b=function(){/^c/.test(e.readyState)&&(e.detachEvent("onreadystatechange",b),d())}),a=g?function(b){self!=top?j?b():c.push(b):function(){try{f.doScroll("left")}catch(c){return setTimeout(function(){a(b)},50)}b()}()}:function(a){j?a():c.push(a)}});var ss_legacy=function(a){if(!a instanceof Object)return!1;if(a.length)for(var d=0;d<a.length;d++)ss_legacy(a[d]);else if(a.value)a.value=ss_liga(a.value);else if(a.nodeValue)a.nodeValue=ss_liga(a.nodeValue);else if(a.innerHTML)a.innerHTML=ss_liga(a.innerHTML)},
ss_getElementsByClassName=function(a,d){if(document.querySelectorAll)return document.querySelectorAll("."+d);for(var c=[],b=RegExp("(^| )"+d+"( |$)"),e=a.getElementsByTagName("*"),f=0,g=e.length;f<g;f++)b.test(e[f].className)&&c.push(e[f]);return c},ss_liga=function(a){var d=RegExp(ss_keywords.join("|").replace(/[-[\]{}()*+?.,\\^$#\s]/g,"\\$&"),"gi");return a.replace(d,function(a){return ss_icons[a.toLowerCase()]})};ss_ready(function(){document.getElementsByClassName?ss_legacy(document.getElementsByClassName("ss-icon")):
ss_legacy(ss_getElementsByClassName(document.body,"ss-icon"))})}}
(function(){(function(a){var b={},e=a.TraceKit,d=[].slice,g="?";b.noConflict=function(){a.TraceKit=e;return b};b.wrap=function(a){return function(){try{return a.apply(this,arguments)}catch(e){throw b.report(e),e;}}};b.report=function(){function e(a,c){var g=null;if(!c||b.collectWindowErrors){for(var k in o)if(Object.prototype.hasOwnProperty.call(o,k))try{o[k].apply(null,[a].concat(d.call(arguments,2)))}catch(j){g=j}if(g)throw g;}}function g(a,c,d){var f=null;h?(b.computeStackTrace.augmentStackTraceWithInitialElement(h,
c,d,a),f=h,p=h=null):(f={url:c,line:d},f.func=b.computeStackTrace.guessFunctionName(f.url,f.line),f.context=b.computeStackTrace.gatherContext(f.url,f.line),f={mode:"onerror",message:a,url:document.location.href,stack:[f],useragent:navigator.userAgent});e(f,"from window.onerror");if(m)return m.apply(this,arguments);return!1}function l(g){var k=d.call(arguments,1);if(h)if(p===g)return;else{var l=h;p=h=null;e.apply(null,[l,null].concat(k))}var r=b.computeStackTrace(g);h=r;p=g;a.setTimeout(function(){p===
g&&(p=h=null,e.apply(null,[r,null].concat(k)))},r.incomplete?2E3:0);throw g;}var o=[],p=null,h=null,m,w=!0;l.subscribe=function(b){if(w!==!0)m=a.onerror,a.onerror=g,w=!0;o.push(b)};l.unsubscribe=function(a){for(var b=o.length-1;b>=0;--b)o[b]===a&&o.splice(b,1)};return l}();b.computeStackTrace=function(){function e(d){if(!Object.prototype.hasOwnProperty.call(u,d)){var f="";if(d.indexOf(document.domain)!==-1)if(b.remoteFetching)try{var g;try{g=new a.XMLHttpRequest}catch(k){g=new a.ActiveXObject("Microsoft.XMLHTTP")}g.open("GET",
d,!1);g.send("");f=g.responseText}catch(j){f=""}else f="";u[d]=f?f.split("\n"):[]}return u[d]}function d(a,b){var c=/function ([^(]*)\(([^)]*)\)/,f=/['"]?([0-9A-Za-z$_]+)['"]?\s*[:=]\s*(function|eval|new Function)/,k="",h=e(a),l;if(!h.length)return g;for(var n=0;n<10;++n)if(k=h[b-n]+k,typeof k!=="undefined")if(l=f.exec(k))return l[1];else if(l=c.exec(k))return l[1];return g}function f(a,c){var d=e(a);if(!d.length)return null;var g=[],k=Math.floor(b.linesOfContext/2),h=Math.min(d.length,c+(k+b.linesOfContext%
2)-1);for(k=Math.max(0,c-k-1);k<h;++k)typeof d[k]==="undefined"||g.push(d[k]);return g.length>0?g:null}function o(a){return a.replace(/[\-\[\]{}()*+?.,\\\^$|#]/g,"\\$&")}function p(a){return o(a).replace("<","(?:<|&lt;)").replace(">","(?:>|&gt;)").replace("&","(?:&|&amp;)").replace('"','(?:"|&quot;)').replace(/\s+/g,"\\s+")}function h(a,b){for(var c,d,f=0,g=b.length;f<g;++f)if((c=e(b[f])).length)if(c=c.join("\n"),d=a.exec(c))return{url:b[f],line:c.substring(0,d.index).split("\n").length,column:d.index-
c.lastIndexOf("\n",d.index)-1};return null}function m(a,b,c){b=e(b);a=RegExp("\\b"+o(a)+"\\b");var d;c-=1;if(b&&b.length>c&&(d=a.exec(b[c])))return d.index;return null}function w(b){var e=[a.location.href],d=document.getElementsByTagName("script");b=""+b;var f;for(f=0;f<d.length;++f){var g=d[f];g.src&&e.push(g.src)}(d=/^function(?:\s+([\w$]+))?\s*\(([\w\s,]*)\)\s*\{\s*(\S[\s\S]*\S)\s*\}\s*$/.exec(b))?(f=d[1]?"\\s+"+d[1]:"",g=d[2].split(",").join("\\s*,\\s*"),d=o(d[3]).replace(/;$/,";?"),d=RegExp("function"+
f+"\\s*\\(\\s*"+g+"\\s*\\)\\s*{\\s*"+d+"\\s*}")):d=RegExp(o(b).replace(/\s+/g,"\\s+"));if(f=h(d,e))return f;if(d=/^function on([\w$]+)\s*\(event\)\s*\{\s*(\S[\s\S]*\S)\s*\}\s*$/.exec(b)){b=d[1];d=p(d[2]);if(f=h(RegExp("on"+b+"=[\\'\"]\\s*"+d+"\\s*[\\'\"]","i"),e[0]))return f;if(f=h(RegExp(d),e))return f}return null}function t(a,b,e,c){b={url:b,line:e};if(b.url&&b.line){a.incomplete=!1;if(!b.func)b.func=d(b.url,b.line);if(!b.context)b.context=f(b.url,b.line);if(c=/ '([^']+)' /.exec(c))b.column=m(c[1],
b.url,b.line);if(a.stack.length>0&&a.stack[0].url===b.url)if(a.stack[0].line===b.line)return!1;else if(!a.stack[0].line&&a.stack[0].func===b.func)return a.stack[0].line=b.line,a.stack[0].context=b.context,!1;a.stack.unshift(b);return a.partial=!0}else a.incomplete=!0;return!1}function x(a,c){for(var e=/function\s+([_$a-zA-Z\xA0-\uFFFF][_$a-zA-Z0-9\xA0-\uFFFF]*)?\s*\(/i,f=[],j={},h=!1,l,r,o=x.caller;o&&!h;o=o.caller)if(!(o===n||o===b.report)){r={url:null,func:g,line:null,column:null};if(o.name)r.func=
o.name;else if(l=e.exec(o.toString()))r.func=l[1];if(l=w(o)){r.url=l.url;r.line=l.line;if(r.func===g)r.func=d(r.url,r.line);var p=/ '([^']+)' /.exec(a.message||a.description);if(p)r.column=m(p[1],l.url,l.line)}j[""+o]?h=!0:j[""+o]=!0;f.push(r)}c&&f.splice(0,c);e={mode:"callers",name:a.name,message:a.message,url:document.location.href,stack:f,useragent:navigator.userAgent};t(e,a.sourceURL||a.fileName,a.line||a.lineNumber,a.message||a.description);return e}function n(b,n){var o=null;n=n==null?0:+n;
try{for(var t=/ line (\d+), column (\d+) in (?:<anonymous function: ([^>]+)>|([^\)]+))\((.*)\) in (.*):\s*$/i,u=b.stacktrace.split("\n"),w=[],v,G=0,E=u.length;G<E;G+=2)if(v=t.exec(u[G])){var I={line:+v[1],column:+v[2],func:v[3]||v[4],args:v[5]?v[5].split(","):[],url:v[6]};if(!I.func&&I.line)I.func=d(I.url,I.line);if(I.line)try{I.context=f(I.url,I.line)}catch(K){}if(!I.context)I.context=[u[G+1]];w.push(I)}o=w.length?{mode:"stacktrace",name:b.name,message:b.message,url:document.location.href,stack:w,
useragent:navigator.userAgent}:null;if(o)return o}catch(S){if(r)throw S;}try{if(b.stack){t=/^\s*at (?:((?:\[object object\])?\S+(?: \[as \S+\])?) )?\(?((?:file|http|https):.*?):(\d+)(?::(\d+))?\)?\s*$/i;u=/^\s*(\S*)(?:\((.*?)\))?@((?:file|http|https).*?):(\d+)(?::(\d+))?\s*$/i;var R=b.stack.split("\n");w=[];var L,J,ba=/^(.*) is undefined$/.exec(b.message);v=0;for(var O=R.length;v<O;++v){if(L=u.exec(R[v]))J={url:L[3],func:L[1]||g,args:L[2]?L[2].split(","):"",line:+L[4],column:L[5]?+L[5]:null};else if(L=
t.exec(R[v]))J={url:L[2],func:L[1]||g,line:+L[3],column:L[4]?+L[4]:null};else continue;if(!J.func&&J.line)J.func=d(J.url,J.line);if(J.line)J.context=f(J.url,J.line);w.push(J)}if(w[0]&&w[0].line&&!w[0].column&&ba)w[0].column=m(ba[1],w[0].url,w[0].line);o=w.length?{mode:"stack",name:b.name,message:b.message,url:document.location.href,stack:w,useragent:navigator.userAgent}:null}else o=null;if(o)return o}catch(da){if(r)throw da;}try{var V=b.message.split("\n");if(V.length<4)o=null;else{R=/^\s*Line (\d+) of linked script ((?:file|http|https)\S+)(?:: in function (\S+))?\s*$/i;
L=/^\s*Line (\d+) of inline#(\d+) script in ((?:file|http|https)\S+)(?:: in function (\S+))?\s*$/i;J=/^\s*Line (\d+) of function script\s*$/i;ba=[];var N=document.getElementsByTagName("script");O=[];var C,H,y,M;for(H in N)Object.prototype.hasOwnProperty.call(N,H)&&!N[H].src&&O.push(N[H]);H=2;for(y=V.length;H<y;H+=2){N=null;if(C=R.exec(V[H]))N={url:C[2],func:C[3],line:+C[1]};else if(C=L.exec(V[H])){N={url:C[3],func:C[4]};var ca=+C[1],X=O[C[2]-1];if(X&&(M=e(N.url))){M=M.join("\n");var A=M.indexOf(X.innerText);
if(A>=0)N.line=ca+M.substring(0,A).split("\n").length}}else if(C=J.exec(V[H])){var U=a.location.href.replace(/#.*$/,""),W=C[1],Z=RegExp(p(V[H+1]));M=h(Z,[U]);N={url:U,line:M?M.line:W,func:""}}if(N){if(!N.func)N.func=d(N.url,N.line);var D=f(N.url,N.line),aa=D?D[Math.floor(D.length/2)]:null;N.context=D&&aa.replace(/^\s*/,"")===V[H+1].replace(/^\s*/,"")?D:[V[H+1]];ba.push(N)}}o=ba.length?{mode:"multiline",name:b.name,message:V[0],url:document.location.href,stack:ba,useragent:navigator.userAgent}:null}if(o)return o}catch(Y){if(r)throw Y;
}try{if(o=x(b,n+1))return o}catch(Q){if(r)throw Q;}return{mode:"failed"}}var r=!1,u={};n.augmentStackTraceWithInitialElement=t;n.guessFunctionName=d;n.gatherContext=f;n.ofCaller=function(a){try{throw Error();}catch(b){return n(b,(a==null?0:+a)+2)}};return n}();if(!b.remoteFetching)b.remoteFetching=!0;if(!b.collectWindowErrors)b.collectWindowErrors=!1;if(!b.linesOfContext||b.linesOfContext<1)b.linesOfContext=11;a.TraceKit=b})(window);var a;a=function(){function a(b){var e,c,g,j;this.options=b!=null?
b:{};this.stackInfo=this.options.stackInfo||this.options.error&&TraceKit.computeStackTrace(this.options.error);this.trace=this._parseBacktrace((c=this.stackInfo)!=null?c.stack:void 0);this["class"]=(g=this.stackInfo)!=null?g.name:void 0;this.message=(j=this.stackInfo)!=null?j.message:void 0;this.source=this.stackInfo&&this._extractSource(this.stackInfo.stack);this.url=document.URL;this.project_root=d.configuration.project_root;this.environment=d.configuration.environment;this.component=d.configuration.component;
this.action=d.configuration.action;this.context={};c=d.context;for(e in c)b=c[e],this.context[e]=b;if(this.options.context)for(e in c=this.options.context,c)b=c[e],this.context[e]=b}a.prototype.toJSON=function(){return JSON.stringify({notifier:{name:"honeybadger.js",url:"https://github.com/honeybadger-io/honeybadger-js",version:d.version,language:"javascript"},error:{"class":this["class"],message:this.message,backtrace:this.trace,source:this.source},request:{url:this.url,component:this.component,
action:this.action,context:this.context,cgi_data:this._cgiData()},server:{project_root:this.project_root,environment_name:this.environment}})};a.prototype._parseBacktrace=function(a){var c,f,g,j,k,l;a==null&&(a=[]);c=[];g=0;for(j=a.length;g<j;g++)if(f=a[g],!((k=f.url)!=null&&k.match(/honeybadger(?:\.min)?\.js/)))c.push({file:((l=f.url)!=null?l.replace(d.configuration.project_root,"[PROJECT_ROOT]"):void 0)||"unknown",number:f.line,method:f.func});return c};a.prototype._extractSource=function(a){var c,
d,g,j,k;a==null&&(a=[]);g={};a=(c=(d=a[0])!=null?d.context:void 0)!=null?c:[];c=j=0;for(k=a.length;j<k;c=++j)d=a[c],g[c]=d;return g};a.prototype._cgiData=function(){var a,c,d;a={};for(c in navigator)d=navigator[c],typeof d!=="object"&&(a[c.split(/(?=[A-Z][a-z]*)/).join("_").toUpperCase()]=d);a.HTTP_USER_AGENT=a.USER_AGENT;delete a.USER_AGENT;if(document.referrer.match(/\S/))a.HTTP_REFERER=document.referrer;return a};return a}();var d;d=function(){function c(){}c.version="0.0.2";c.default_configuration=
{api_key:null,host:"api.honeybadger.io",ssl:!0,project_root:window.location.protocol+"//"+window.location.host,environment:"production",component:null,action:null,disabled:!0,onerror:!1};c.configured=!1;c.configure=function(a){var c,d;a==null&&(a={});if(this.configured===!1)typeof a.disabled==="undefined"&&(a.disabled=!1),this.configured=!0;for(c in a)d=a[c],this.configuration[c]=d;TraceKit.collectWindowErrors=!1;return this};c.configuration={reset:function(){var a,e,d;c.configured=!1;d=c.default_configuration;
for(a in d)e=d[a],c.configuration[a]=e;TraceKit.collectWindowErrors=!1;return c}};c.configuration.reset();c.context={};c.resetContext=function(a){a==null&&(a={});this.context=a;return this};c.setContext=function(a){var c,d;a==null&&(a={});for(c in a)d=a[c],this.context[c]=d;return this};c.notify=function(b,c){c==null&&(c={});if(this.configuration.disabled===!0)return!1;b&&(c.error=b);return this._sendRequest((new a(c)).toJSON())};c._sendRequest=function(a){return this._crossDomainPost("http"+(this.configuration.ssl&&
"s"||"")+"://"+this.configuration.host+"/v1/notices.html",a)};c._crossDomainPost=function(a,c){var d,g;d=document.createElement("iframe");g="_hb_"+(new Date).getTime();document.body.appendChild(d);d.style.display="none";d.contentWindow.name=g;d=document.createElement("form");d.target=g;d.action=a;d.method="POST";g=document.createElement("input");g.type="hidden";g.name="payload";g.value=c;d.appendChild(g);g=document.createElement("input");g.type="hidden";g.name="api_key";g.value=this.configuration.api_key;
d.appendChild(g);document.body.appendChild(d);return d.submit()};c._handleTraceKitSubscription=function(a){return c.notify(null,{stackInfo:a})};return c}.call(this);TraceKit.report.subscribe(d._handleTraceKitSubscription);(typeof exports!=="undefined"&&exports!==null?exports:this).Honeybadger=d}).call(this);
instrument_function(function(a){(function(){if(a.report_errors){requires({$:"jquery",Mustache:"mustache"});var d=$.fn.ready,c=$.fn.on,b=$.fn.livequery;$.fn.ready=function(){var a=Array.prototype.splice.call(arguments,0,arguments.length),b=a[0],c;if(typeof b==="function")c=instrument_function(b),c.guid=b.guid=b.guid||(jQuery.guid+=1),a[0]=c;return d.apply(this,a)};$.fn.on=function(){for(var a=Array.prototype.splice.call(arguments,0,arguments.length),b=3,d,j;b>0;){if(typeof a[b]==="function")d=a[b],
j=instrument_function(d),j.guid=d.guid=d.guid||(jQuery.guid+=1),a[b]=j;b-=1}return c.apply(this,a)};$.fn.livequery=function(){var a=Array.prototype.splice.call(arguments,0,arguments.length),c,d;if(a[1])c=a[1],d=instrument_function(c),d.guid=c.guid=c.guid||(jQuery.guid+=1),a[1]=d;if(a[2])c=a[2],d=instrument_function(c),d.guid=c.guid=c.guid||(jQuery.guid+=1),a[2]=d;return b.apply(this,a)}}})(this)})(this);
instrument_function(function(a){a.KEY={J:74,K:75,UP:38,DOWN:40,LEFT:37,RIGHT:39,DEL:46,TAB:9,ENTER:13,SPACE:32,ESC:27,COMMA:188,PAGEUP:33,PAGEDOWN:34,BACKSPACE:8}})(this);instrument_function(function(a){(function(){a.ksr_navigate=function(a){typeof ksr_before_unload==="function"?ksr_before_unload(function(){window.location=a}):window.location=a}})()})(this);
instrument_function(function(){(function(a){function d(b,c){this.$elem=b;this.$close_a=b.find("a.modal_dialog_close");var d=b.children(),j=d.children(),k=j.children();d=b.add(d).add(j).add(k).add(this.$close_a);this.options=a.extend({close_link:d,scroll_margin:20,ignore_parent:!1,prevent_close:!1},c);(this.prevent_close=this.options.prevent_close)&&this.$close_a.hide();this.options.ignore_parent||this._bind_parent_modal();this._remember_original_css();this._attach()}function c(c,d){var g,j=a([]);
a.each(b,function(a){url_equals(c,a,{include_query:!0})&&(g=this)});if(!g)j=a.create_modal_dialog(d.title||"","spinner",d),j.addClass("spinning"),g=j.data("modal_dialog"),g.remote_url=c,g.remote_xhr=a.ajax({url:c,type:"get",dataType:d.dataType,beforeSend:d.beforeSend,success:function(b){b=a(b);d.remote_modal_dialog_contents_loaded&&d.remote_modal_dialog_contents_loaded.apply(this,[b,d,c]);j.find(".modal_dialog_body").html(b);j.removeClass("spinning");j.trigger("size_change");j.trigger("modal_dialog:remote_dialog_loaded")},
error:function(){j.trigger("modal_dialog:errored",arguments);j.remove();delete b[c]}}),d.do_not_cache||(b[c]=g);return g}a.fn.modal_dialog=function(b){b=b||{};return a(this).each(function(){var c=a(this).data("modal_dialog");c||(c=new d(a(this),b),a(this).data("modal_dialog",c));c.open(b.event)})};var b={};a.create_modal_dialog=function(b,c,g){g=g||{};b.length&&(b="<h4>"+b+"</h4>");b=a('<div class="modal_dialog '+(g.theme!==void 0?g.theme:"dark")+(g.class_name!==void 0?" "+g.class_name:"")+'"'+(g.id!==
void 0?' id="'+g.id+'" ':" ")+'style="display: none;"><div class="modal_dialog_ie6_background"></div><div class="modal_dialog_outer"><div class="modal_dialog_sizer"><div class="modal_dialog_inner"><div class="modal_dialog_content"><div class="modal_dialog_head">'+b+'<a class="modal_dialog_close" href="#"><span class="ss-icon ss-delete"></span></a></div><div class="modal_dialog_body">'+c+'</div></div></div><span class="modal_dialog_ie_hack"></span></div></div></div>');a("body").append(b);g=new d(b,
g);b.data("modal_dialog",g);return b};a.open_remote_modal_dialog=function(a,b){b=b||{};var d=c(a,b);d.open(b.event);return d};a.extend(d.prototype,{_attach:function(){if(!this._attached){var b=this,c=a(this.options.close_link);this._attached=!0;this.overflow_scroll=this.$elem.css("overflow")==="scroll";this.$elem.on("close.modal_dialog",function(){b.close()});this.$elem.on("size_change.modal_dialog",function(){b._on_size_changed()});this.$elem.on("prevent_close.modal_dialog",function(){b._set_prevent_close(!0)});
this.$elem.on("allow_close.modal_dialog",function(){b._set_prevent_close(!1)});a(window).on("resize.modal_dialog",function(){b._on_size_changed()});c.on("click.modal_dialog",function(a){c.index(a.target)!==-1&&(b.close(a),a.preventDefault())});this.$elem.keypress(function(a){a.keyCode===27&&(b.close(a),a.preventDefault())})}},_detach:function(){this._attached=!1;a(this.options.close_link).off("click.modal_dialog");this.$elem.off("size_change.modal_dialog");a(window).off("resize.modal_dialog")},_bind_parent_modal:function(){this.$parent_modal=
a([]);this.$elem.on("before_close.modal_dialog",function(){a(this).data("modal_dialog").$parent_modal.show();a([])})},_on_size_changed:function(a){var b=this.$elem.find("div.modal_dialog_inner");!this.overflow_scroll&&b.height()>this._get_viewport_height()?this._resize_to_position_absolute(a):this._resize_to_position_fixed()},_resize_to_position_fixed:function(){this._apply_original_css()},_resize_to_position_absolute:function(b){a.browser.msie&&a.browser.version<"7"&&(this.$elem[0].style.removeExpression("top"),
this.$elem[0].style.removeExpression("height"));var c=a("body").height(),d=a("body")[0].scrollTop+a("html")[0].scrollTop,j=this.$elem.find("div.modal_dialog_inner"),k=j.height(),l=this.options.scroll_margin,o=d+k+l*2;c=o>c?o:c;k=c-d-k-l*2;o=this.$elem.css("position")==="absolute";this.$elem.css("position","absolute");this.$elem.css("top","0");this.$elem.css("height",c);if(!o||b)j.css("margin-top",d+l),j.css("margin-bottom",k)},_remember_original_css:function(){this._elem_original_css={};this._inner_original_css=
{};var b=this.$elem.find("div.modal_dialog_inner"),c=["position","top"],d=["margin-top","margin-bottom"],j=this;a.each(c,function(a){a=c[a];j._elem_original_css[a]=j.$elem.css(a)});a.each(d,function(a){a=d[a];j._inner_original_css[a]=b.css(a)})},_get_viewport_height:function(){return a.browser.msie?window.document.documentElement.clientHeight:window.innerHeight},_apply_original_css:function(){var a,b,c=this.$elem.find("div.modal_dialog_inner");for(a in this._elem_original_css)this._elem_original_css.hasOwnProperty(a)&&
(b=this._elem_original_css[a],this.$elem.css(a,b));for(a in this._inner_original_css)this._inner_original_css.hasOwnProperty(a)&&(b=this._inner_original_css[a],c.css(a,b));this.$elem.css("height","100%")},_set_prevent_close:function(a){(this.prevent_close=a)?this.$close_a.hide():this.$close_a.show()},open:function(b){var c=this.$elem.parents("body");c.length&&c.append(this.$elem);if(!this.options.ignore_parent)this.$parent_modal=a(".modal_dialog:visible"),this.$parent_modal.hide();this.$elem.show();
this._on_size_changed(!0);this.overflow_scroll&&a("html").css("overflow","hidden");this.$elem.trigger("modal_dialog:opened",[b]);this._attach()},close:function(b){if(!this.prevent_close&&(this.$elem.trigger("before_close.modal_dialog",[b]),!b||!b.isDefaultPrevented()))this._detach(),this.options.do_not_cache?this.$elem.remove():this.$elem.hide(),this.overflow_scroll&&a("html").css("overflow","visible"),this.$elem.trigger("closed.modal_dialog",[b])}});a.modal_confirm=function(b,c){var d,j;c=a.extend({},
{message:"Do you really want to do this?",confirm_text:"Confirm",cancel_text:"Cancel",title:"Are you sure?"},c);d=a.create_modal_dialog(c.title,'<div style="max-width:600px;">'+c.message+'<p class="clearfix"><a class="confirm button button_blue left" href="#">'+c.confirm_text+'</a><a class="cancel button-space left" href="#">'+c.cancel_text+"</a></p></div>");j=d.data("modal_dialog");d.find(".cancel").click(function(a){a.preventDefault();j.close()});d.find(".confirm").click(function(a){a.preventDefault();
b();j.close()});j.open()}})(jQuery)})(this);
instrument_function(function(){(function(a){function d(b,c){this.$elem=b;this.$form=b.closest("form");this.options=a.extend({delay:400,minimum_characters:3,serialize:this.$form,client_side_cache:!0,process_data:!1,dataType:"json"},c);this.url=this.options.url||this.$form.attr("action");this.ajax_url=this.options.file_extension?this.ensure_file_extension(this.options.file_extension):this.url;this.search_xhr=this.last_search=!1;this.cache=this.options.client_side_cache?{}:!1;this.active=!0;this._attach()}
var c;a.fn.livesearch=function(b){b=b||{};return a(this).each(function(){var c=a(this).data("livesearch");c||(c=new d(a(this),b),a(this).data("livesearch",c))})};a.extend(d.prototype,{_attach:function(){var a=this;this.$elem.attr("autocomplete","off");this.$elem.on("keypress cut paste input",function(){a.active&&(clearTimeout(c),c=setTimeout(function(){a.search()},a.options.delay))});if(!this.options.process_data)this.options.serialize.on("change",function(){a.search()});this.$elem.on("livesearch:suspend",
function(){a.active=!1});this.$elem.on("livesearch:activate",function(){a.active=!0});this.$elem.on("livesearch:cancel",function(){a.search_xhr&&a.search_xhr.abort();a.last_search=!1})},ensure_file_extension:function(a){var c=window.location.host.replace(/[^\w\d]/g,function(a){return"\\"+a});return this.url.replace(RegExp("((?:"+c+")?[^\\.$#\\?]+)(\\.\\w*|)($|#|\\?)"),function(c,e,d,k){return e+"."+a+k})},suspend_while:function(a){this.active=!1;a();var c=this;setTimeout(function(){c.active=!0},100)},
search:function(){var b=this,c=this.options.serialize.serialize();this.options.process_data&&(c=this.options.process_data.apply(this,[c]),typeof c==="object"&&(c=a.param(c)));if(c!==this.last_search&&!(this.$elem.val().length<this.options.minimum_characters))this.search_xhr&&this.search_xhr.abort(),this.cache&&this.cache[c]&&typeof this.cache[c]!=="function"?this.$elem.trigger("livesearch:results",[this.cache[c]]):(this.$elem.trigger("livesearch:searching"),this.$elem.addClass("searching"),this.search_xhr=
a.ajax({type:"get",url:this.ajax_url,dataType:this.options.dataType,data:c,global:!1,success:function(a){a!==null&&(b.$elem.trigger("livesearch:results",[a]),b.$elem.removeClass("searching"),b.cache&&(b.cache[c]=a))},error:function(){b.$elem.trigger("livesearch:ajax_error");b.$elem.removeClass("searching")},statusCode:{304:function(){}}})),this.last_search=c}})})(jQuery)})(this);
instrument_function(function(a){(function(d){function c(a,b){this.$elem=a;this.options=d.extend({update_input:!0,no_results_html:"Sorry, we couldn't find anything.",ignore_history:!0,process_results:function(a){return a}},b);var c=this.$elem.closest(".field_with_icon"),j=d([]);j=c.length?c.siblings(".results"):this.$elem.siblings(".results");j.length?(this.$results=j,this.$results.find("div.no_results").remove()):(this.$results=d('<div class="results"></div>'),c.length?c.after(this.$results):this.$elem.after(this.$results));
this.$results.find("ul.result_list").length||this.$results.append('<ul class="result_list"></ul>');this.$no_results=d('<div class="no_results">'+this.options.no_results_html+"</div>");this.$no_results.hide();this.$results.append(this.$no_results);this.handle_optional_content();this.livesearch=a.livesearch(this.options).data("livesearch");this._attach()}var b={UP:38,DOWN:40,DEL:46,TAB:9,ENTER:13,ESC:27,COMMA:188,PAGEUP:33,PAGEDOWN:34,BACKSPACE:8};d.fn.livesearch_input_dropdown=function(a){a=a||{};
return d(this).each(function(){var b=d(this).data("livesearch.input_dropdown");b||(b=new c(d(this),a),d(this).data("livesearch.input_dropdown",b))})};d.extend(c.prototype,{_attach:function(){var a=this;this.$elem.on("livesearch:results",function(b,c){a.options.process_results&&(c=a.options.process_results(c));a.show_results(c);a.push_history(c)});this.bind_results();this.bind_popstate();this.$elem.on((d.browser.opera?"keypress":"keydown")+".autocomplete",function(c){var d=!!a.$results.find(".selected").length;
switch(c.keyCode){case b.UP:d?(d=a.$results.find(".selected").prev(":not(.not_result)"),d.length||(d=a.$results.find("li:not(.not_result)").last()),a.select(d,!1)):a.select(a.$results.find("li:not(.not_result)").last(),!1);c.preventDefault();break;case b.DOWN:d?(d=a.$results.find(".selected").next(":not(.not_result)"),d.length||(d=a.$results.find("li:not(.not_result)").first()),a.select(d,!1)):a.select(a.$results.find("li:not(.not_result)").first(),!1);c.preventDefault();break;case b.ENTER:d=a.$results.find(".selected");
if(!d.length&&a.input_can_submit())break;a.select(d,!0);c.preventDefault()}})},history_api_supported:function(){return a.history&&a.history.pushState},bind_popstate:function(){if(this.history_api_supported()&&!this.options.ignore_history){var b=this;this.replacing_history_state=!1;a.onpopstate=function(a){a.state&&a.state.livesearch?(b.show_results(a.state.livesearch.results),b.livesearch.suspend_while(function(){b.$elem.val(a.state.livesearch.input_value).trigger("input")})):b.reset(!0)}}},input_can_submit:function(){var a=
this.livesearch.search_xhr.readyState;return this.options.input_can_submit_on_enter&&!(a>0&&a<4)&&this.$elem.is(":focus")},bind_results:function(){var a=this;this.$results.find("li").on("click",function(){a.select(d(this),!0)});this.$results.find("li").on("mouseover",function(){a.select(d(this));a.unselect_on_mouseout=!0});this.$results.on("mouseout",function(){a.unselect_on_mouseout&&a.unselect_currently_selected()});this.$elem.on("livesearch:reveal_results",function(){a.reveal_results()})},build_result_names_list:function(a){var b=
[],c=this;d.each(a,function(){var a=this;c.options.return_name_from_result?a=c.options.return_name_from_result(this):this!=="string"&&(a=this[0]);b.push(a)});return b},show_results:function(a){var b=this.$results.children("ul"),c=d([]),j;if(a.results)j=a,a=a.results;this.unselect_currently_selected();b.empty();a.length?(this.$no_results.hide(),b.show()):(this.$no_results.show(),b.hide());c=this.build_result_names_list(a);d.each(c,function(c){var g=d("<li>"+this+"</li>");g.data("livesearch_result",
a[c]);b.append(g)});j&&j.count>a.length&&(j="see all "+j.count+" results",c=d("<a>").attr({href:this.livesearch.url+"?"+this.livesearch.last_search,title:j,"class":"see_all not_result"}).html(j).wrap("<li>"),b.append(c));this.bind_results();this.$elem.trigger("livesearch:reveal_results")},push_history:function(a){if(this.history_api_supported()&&!this.options.ignore_history)typeof a==="string"&&(a=JSON.parse(a)),a={livesearch:{input_value:this.$elem.val(),results:a}},this.replacing_history_state?
(history.replaceState(a),this.replacing_history_state=!1):history.pushState(a,"","?"+this.livesearch.last_search)},reveal_results:function(){var a=this;this.$results.slideDown(function(){d(window).resize();a.$results.trigger("sticky_bar:fix_to_bottom");a.$results.trigger("shifted")})},reset:function(a){this.$results.hide();this.$elem.val("");a&&this.$results.children("ul.result_list").html("")},unselect_currently_selected:function(){var a=this.$results.children("ul").children("li.selected");a.trigger("livesearch:unselect");
a.removeClass("selected");this.unselect_on_mouseout=!1},select:function(a,b){var c=this;a.is(".not_result")||(this.unselect_currently_selected(),a.addClass("selected"),this.options.update_input&&this.livesearch.suspend_while(function(){c.$elem.val(a.text());c.$elem.focus()}),a.trigger("livesearch:soft_select"),b&&a.trigger("livesearch:selected",[a.data("livesearch_result")]))},handle_optional_content:function(){this.options.prepend&&this.$results.prepend(this.options.prepend)}})})(jQuery)})(this);
instrument_function(function(){(function(a){a.fn.livesearch_pretty_input_dropdown=function(d){d=d||{};return a(this).each(function(){function c(){this.value?g.show():g.hide()}function b(){f.val("");f.trigger("livesearch:cancel").trigger("livesearch:close_results")}var e=a(this),f=e.find("input[type=text]"),g=e.find(".ss-delete"),j=f.siblings(".ss-search"),k;f.livesearch_input_dropdown(a.extend(d,{update_input:!1}));k=f.data("livesearch.input_dropdown");c.call(f[0]);f.on("keypress cut paste input livesearch:close_results blur",
c);f.on("livesearch:searching",function(){j.removeClass("ss-search").addClass("icon-loading-small")});f.on("livesearch:results livesearch:ajax_error",function(){j.removeClass("icon-loading-small").addClass("ss-search")});f.on("livesearch:results",function(){if(!d.input_can_submit_on_enter){var a=f.siblings(".results");k.select(a.find("li:first"))}});g.on("click",function(){f.focus();b()});f.on("livesearch:close_results",function(){f.siblings(".results").slideUp(function(){a(window).resize();a(this).trigger("sticky_bar:fix_to_bottom")})});
f.on("blur",function(){f.val().length<3&&b()})})}})(jQuery)})(this);instrument_function(function(){(function(a){a.fn.livesearch_navigator=function(){return a(this).each(function(){var d=a(this);d.livesearch_pretty_input_dropdown();d.on("livesearch:selected",function(a,b){if(b)window.location=b[1]})})}})(jQuery)})(this);
instrument_function(function(){(function(a){a.fn.livesearch_selector=function(d){d=a.extend({url:!1,cancel_copy:"Cancel",target_input:!1},d);return a(this).each(function(){function c(){e.hide();e.attr("disabled","disabled");e.siblings(".ss-delete, .ss-search").hide();var b=a('<div class="field-selected"><span class="value">'+e.val()+'</span><a class="ss-icon ss-delete cancel-link" href="#">'+d.cancel_copy+"</a></div>");e.siblings("div.field-selected").remove();e.after(b);e.siblings(".results").slideUp();
e.trigger("livesearch_selector:select",[e.val()]);b.find("a.cancel-link").click(function(a){a.preventDefault();e.val("");b.remove();e.removeAttr("disabled");e.siblings(".ss-delete, .ss-search").show();e.show();e.focus();f.val("");e.trigger("dirty");e.trigger("livesearch_selector:unselect")})}var b=a(this),e=b.find('input[type="text"]'),f=d.target_input||b.find('input[type="hidden"]'),g=e.siblings(".ss-search"),j;b.addClass("search");f.val()&&e.val()&&c();d.url=d.url||b.closest("form").attr("action");
b.livesearch_pretty_input_dropdown(d);j=e.data("livesearch.input_dropdown");e.on("livesearch:searching",function(){g.removeClass("ss-search").addClass("icon-loading-small")});e.on("livesearch:results livesearch:ajax_error",function(){g.removeClass("icon-loading-small").addClass("ss-search")});e.on("livesearch:results",function(){var a=e.siblings(".results");j.select(a.find("li:first"))});b.on("livesearch:selected",function(a,b){b&&(e.val(b[0]),f.val(b[1]),c())})})}})(jQuery)})(this);
instrument_function(function(){(function(a){a.fn.livesearch_multi_selector=function(d){d=a.extend({url:!1,cancel_copy:"Remove",sortable:!1,update_input:!1},d);return a(this).each(function(){function c(b){var c=a('<a class="ss-icon ss-delete cancel-link" href="#">'+d.cancel_copy+"</a>"),e=b.find(".destroy");b.append(c);e.val()&&e.val()!=="false"&&b.hide();c.click(function(a){a.preventDefault();b.fadeOut(function(){e.val("1");e.length||b.remove()})})}var b=a(this),e=b.find('input[type="text"]'),f=e.closest(".field_with_icon"),
g=b.find("ol.search-selected,ul.search-selected"),j=e.siblings(".ss-search"),k=e.attr("name"),l=e.siblings(".position").attr("name"),o=d;o.url=d.url||b.closest("form").attr("action");e.livesearch_input_dropdown(o);d.sortable&&g.sortable({containment:"document",axis:"y",update:function(){g.find("input.position").each(function(b){a(this).val(b)})}});b.addClass("search");e.attr("name","");g.find("li").each(function(){c(a(this))});e.on("livesearch:searching",function(){j.removeClass("ss-search").addClass("icon-loading-small")});
e.on("livesearch:results livesearch:ajax_error",function(){j.removeClass("icon-loading-small").addClass("ss-search")});b.on("livesearch:selected",function(b,j){if(j){var o=k.replace("[template]","["+g.children("li").length+"]"),w=!1;l&&(w=l.replace("[template]","["+g.children("li").length+"]"));o=a("<li>"+j[0]+'<input type="hidden" name="'+o+'" value="'+j[1]+'"/></li>');d.sortable&&(w&&o.append('<input type="hidden" class="position" name="'+w+'" />'),g.find("input.position").each(function(b){a(this).val(b)}));
g.append(o);c(o);e.val("");f.siblings(".results").slideUp();e.trigger("livesearch:cancel")}})})}})(jQuery)})(this);
instrument_function(function(){(function(a){function d(c,b){this.$elem=c;this.options=b;this.$target=this.options.target||c;this.offset=this.options.sprite_orientation&&this.options.sprite_orientation==="horizontal"?this.$target.width():this.$target.height();this.index=0;this.playing=!0;this.$index_control_children=this.options.index_control?this.options.index_control.children():a([]);if(!this.options.should_autoadvance_callback)this.options.should_autoadvance_callback=function(){return!0};this.number=
this.options.number||this.$index_control_children.length;this.update_offset();this._attach();b.play_delay&&this.playing_timer()}a.fn.spriteshow=function(c){c=c||{};return a(this).each(function(){var b=a(this).data("spriteshow");b||(b=new d(a(this),c),a(this).data("spriteshow",b))})};a.extend(d.prototype,{_attach:function(){var c=this;this.$index_control_children.click(function(b){b.preventDefault();c.set_index(a(this).index());c.pause()});this.options.controls&&(this.options.controls.children(".left").click(function(a){a.preventDefault();
c.page_left();c.pause()}),this.options.controls.children(".right").click(function(a){a.preventDefault();c.page_right();c.pause()}),this.options.controls.children(".play-pause").click(function(){c.playing?c.pause():c.play()}))},update_offset:function(){var c=a([]);if(this.options.effect==="fade")c=this.$target.clone(),this.$target.css("position","absolute"),this.$target.after(c),this.$target.fadeOut(function(){a(this).remove()}),this.$target=c;this.current_offset=this.index*this.offset;this.options.sprite_orientation&&
this.options.sprite_orientation==="horizontal"?this.$target.css("background-position","-"+this.current_offset.toString()+"px 0"):this.$target.css("background-position","0 -"+this.current_offset.toString()+"px")},set_index:function(a){this.index=a;this.$index_control_children.removeClass("selected");this.$index_control_children.filter(":eq("+a.toString()+")").addClass("selected");this.$target.trigger("spriteshow:index",[a]);this.update_offset()},page_left:function(){var a=this.index-1;a<0&&(a=this.number-
1);this.set_index(a)},page_right:function(){var a=this.index+1;a>=this.number&&(a=0,this.options.play_once&&this.pause());this.set_index(a)},playing_timer:function(){var a=this;this.play_timeout=setTimeout(function(){a.playing&&a.options.should_autoadvance_callback()&&a.page_right();if(a.options.pause_when_behind_by){var b=(new Date).getTime();a.last_play_date&&Math.abs(a.last_play_date-b-a.options.play_delay)>a.options.pause_when_behind_by?(a.slow_strikes?a.slow_strikes+=1:a.slow_strikes=0,a.slow_strikes>
3&&a.pause()):a.slow_strikes=0;a.last_play_date=b}a.playing_timer()},this.options.play_delay)},play:function(){this.playing=!0;this.options.controls&&this.options.controls.children(".play-pause").removeClass("spriteshow-play").addClass("spriteshow-pause")},pause:function(){this.playing=!1;this.options.controls&&this.options.controls.children(".play-pause").removeClass("spriteshow-pause").addClass("spriteshow-play")}})})(jQuery)})(this);
instrument_function(function(){$.fn.validate=function(){var a=!0;if(!this.is(":input"))return this.find(":input").validate();this.each(function(){var d=$(this),c=!1,b=d.data("validations");b&&b.length&&(_.each(b,function(b){var f=b[0];b=b[1]||{};if((typeof b.when!=="function"||b.when())&&!f.call(d,d.val()))return a=!1,c=!0,!1}),c?$.each($.fn.validate.defaults.on_invalid,function(a,b){b(d)}):$.each($.fn.validate.defaults.on_valid,function(a,b){b(d)}))});return a};$.fn.validate.defaults={on_valid:[function(a){$(a).trigger("validate:invalid")}],
on_invalid:[function(a){$(a).trigger("validate:valid")}]};(function(a){function d(c){return function(b){this.each(function(){var e=a(this);e.data("validations")||e.data("validations",[]);e.data("validations").push([c,b])});return this}}a.fn.validates_format=d(function(c){return c.match(RegExp(a(this).data("format")))});a.fn.validates_min_length=d(function(c){return c.length>=parseInt(a(this).data("minlength"),10)});a.fn.validates_max_length=d(function(c){return c.length<=parseInt(a(this).data("maxlength"),
10)});a.fn.validates_presence=d(function(c){return!!a.trim(c)});a.fn.validates_email=d(function(a){return a.match(/^.+@.+\..{2,4}$/)});a.fn.validates_luhn_check=d(function(a){a=String(a).replace(/[^\d]/g,"");var b=0,e,d,g;for(d=a.length-1;d>=0;d-=1)e=parseInt(a[d],10),g=d%2+1,b+=e>4&&g===2?e*g%10+1:e*g;return b%10===0})})(jQuery)})(this);
instrument_function(function(){(function(a){a.fn.confirm_submit=function(d){d=d||{};return a(this).each(function(){var c=a(this);c.on("submit.confirm_submit",function(b){b.preventDefault();b=a.create_modal_dialog(d.title||"Are you sure?",'<div class="modal_delete_confirmation"><p class="copy">'+(d.copy||"Really, buddy?")+'</p><div class="buttons"><a href="#" class="yes button button_green">'+(d.yes_copy||"Yes")+'</a><a href="#" class="no button">'+(d.no_copy||"No thanks!")+"</a></div></div>");c.removeAttr("submitting");
b.find("a.yes").on("click",function(a){a.preventDefault();c.off("submit.confirm_submit");if(d.on_confirm_submit)d.on_confirm_submit();c[0].submit()});b.find("a.no").on("click",function(b){b.preventDefault();a(this).trigger("close")});b.data("modal_dialog").open()})})}})(jQuery)})(this);
instrument_function(function(a){(function(d){var c=function(){},b=["log","debug","info","warn","error","assert","dir","dirxml","group","groupEnd","time","timeEnd","count","trace","profile","profileEnd"],e;if(a.console)d.console=a.console;else{d.console={};for(e=0;e<b.length;e+=1)d.console[b[e]]=c}})(jQuery)})(this);
instrument_function(function(){(function(){$.fn.in_place_editor=function(){return $(this).each(function(){function a(){c.addClass("inactive");d.show()}var d=$(this),c=d.next("form.in_place_editor"),b=c.find(".button"),e=d.siblings(".trigger_editor")||d,f=c.find("input.text"),g=!1;e.on("click",function(){c.css("width",d.width()+"px");f.css("fontSize",d.css("fontSize"));d.hide();c.removeClass("inactive");f.focus()});b.on("click",function(){f.val(d.text());a()});c.on("submit",function(b){b.preventDefault();
g||(c.addClass("submitting"),g=!0,$.ajax({url:c.attr("action").replace(/(\.\w+)?$/,".js"),data:c.serialize(),type:"POST",complete:function(){c.removeClass("submitting");g=!1},success:function(){var b=f.val();d.html(b);a();g=!1;c.siblings(".clippy_parent").find("a.clippy").data("text",b)},error:function(a){a=JSON.parse(a.responseText);var b="<p>Oops, there was a problem with your submission";c.removeClass("submitting");g=!1;a.errors?(b+=":<br/>"+$.map(a.errors,function(a,b){return b+": "+a}),b+="</p>"):
b+=". Please refresh the page before trying again.</p>";growl({error:$(b).html()})}}))})})}})();$("span.in_place_editor").in_place_editor()})(this);
instrument_function(function(a){(function(d){function c(a){this.$c=d(a);a=this.$c.find("video");if(a.get(0)&&a.get(0).canPlayType&&(a.get(0).canPlayType("video/mp4")||a.hasClass("has_webm")))this.$video=a,this.video=a.get(0),d.browser.chrome&&this.$video.attr("controls","controls").removeAttr("controls"),this.$c.addClass("vertically_center");this.initialize();(window.location.search.match(/play=1/)||this.$c.hasClass("autoplay"))&&this.play();this.add_size_class();this.bind_events()}d.fn.ksr_video=
function(){return d(this).each(function(){var a=d(this).data("ksr_video");a||(a=new c(d(this)),d(this).data("ksr_video",a))})};d.extend(c.prototype,{overlay:function(){var a=this;this.$c.children(":not(video)").hide();this.$overlay=d('<div class="overlay"><span class="button-playvideo"></span></div>');this.$overlay.on("click touchstart",function(c){a.initialize_flash();a.$overlay.remove();c.preventDefault()});this.$c.append(this.$overlay)},bind_events:function(){var a=this;this.$c.on("ksr_video:play",
function(){a.play()});this.$c.on("ksr_video:pause",function(){a.pause()});this.$c.on("ksr_video:mute",function(){a.mute()});this.$c.on("ksr_video:unmute",function(){a.unmute()});this.$c.on("ksr_video:destroy",function(){a.destroy()});this.$c.on("ksr_video:seek",function(c,d,g){a.seek(d,g)})},add_size_class:function(){this.$c.removeClass("small medium large");this.$c.width()>600?this.$c.addClass("large"):this.$c.width()>400?this.$c.addClass("large"):this.$c.addClass("small")},bind_video_element:function(){var a=
this,c=this.$video,d=!0;this.$video.on("loadedmetadata",function(){a.$c.trigger("ksr_video:loaded")});c.bind("ended",function(){a.$c.trigger("ksr_video:ended")});c.on("play",function(){a.$c.trigger("ksr_video:playing",[d]);d=!1});c.on("pause",function(){a.$c.trigger("ksr_video:paused")});c.on("progress",function(){var c,e=a.video.buffered,d=[];if(e.length)for(c=0;c<e.length;c+=1)d.push(e.end(c));c=_.max(d);a.$c.trigger("ksr_video:buffer_change",[c,c/a.video.duration*100])});c.on("timeupdate",function(){a.$c.trigger("ksr_video:time_update",
[a.video.currentTime])})},bind_controls:function(){function a(b){var c=Math.floor(b/60);b=Math.floor(b-c*60);return c+":"+(b<10?"0":"")+b}function c(){l.removeClass("visible")}function f(){k.video.duration&&k.$c.find(".total_time").text(a(k.video.duration))}function g(){var a=k.video.volume*100+"%";k.video.muted?r.closest(".volume").addClass("muted"):r.closest(".volume").removeClass("muted");t.width(a);x.css("left",a)}function j(a,b){function c(e){e=((e.pageX||e)-a.offset().left)/a.width();e>0&&e<
1&&b(e)}a.on("mousedown",function(b){a.on("mousemove",c);b.preventDefault();d(window).one("mouseup",function(b){c(b);b.preventDefault();a.off("mousemove")})});a.on("touchmove",function(a){a.preventDefault();c(a.originalEvent.targetTouches[0].pageX)})}var k=this,l=this.$c.find(".player_controls"),o=l.find(".progress_container .progress_bg"),p=o.find(".buffer"),h=o.find(".progress"),m=o.find(".progress_handle"),w=l.find(".volume_container .progress_bg"),t=w.find(".progress"),x=w.find(".progress_handle"),
n=l.find("span.current_time"),r=l.find(".volume span"),u=l.find(".playpause"),z={x:0,y:0},q=!1;this.$c.on("mousemove touchstart touchmove",function(a){var b={x:a.pageX,y:a.pageY};if(k.playing()&&(a.type==="touchstart"||Math.abs(b.x-z.x)+Math.abs(b.y-z.y)>20))l.addClass("visible"),clearTimeout(q),q=setTimeout(c,2E3),z=b});f();typeof FastClick!=="undefined"&&this.$video.each(function(){new FastClick(this)});this.$video.on("click",function(){k.playpause()});this.$c.find(".play_button_big").on("click touchstart",
function(){k.play()});this.$video.on("loadedmetadata",function(){f();g()}).on("volumechange",function(){g()}).on("play",function(){u.removeClass("play").addClass("pause");clearTimeout(q);q=setTimeout(c,2E3)}).on("pause",function(){u.removeClass("pause").addClass("play");l.addClass("visible");clearTimeout(q)});u.on("click touchstart",function(a){k.playpause();a.preventDefault()});l.find("a.fullscreen").on("click touchstart",function(a){if(document.fullscreenEnabled||document.mozFullscreenEnabled||
document.webkitFullscreenEnabled){var b=k.$c.get(0);document.fullscreenElement||document.mozFullscreenElement||document.webkitFullscreenElement?document.cancelFullscreen?document.cancelFullscreen():document.mozCancelFullscreen?document.mozCancelFullscreen():document.webkitCancelFullScreen&&document.webkitCancelFullScreen():b.requestFullscreen?b.requestFullscreen():b.mozRequestFullscreen?b.mozRequestFullscreen():b.webkitRequestFullscreen&&b.webkitRequestFullscreen()}else k.$c.toggleClass("fullscreen");
a.preventDefault()});j(o,function(a){k.video.currentTime=k.video.duration*a});j(w,function(a){k.video.volume=a});if(d("body").is(".touchable"))t.hide();else r.on("click touchstart",function(){k.mute_toggle()});this.$c.on("ksr_video:buffer_change",function(a,b,c){p.width(c+"%")});this.$c.on("ksr_video:time_update",function(c,e){var d=e/k.video.duration*100;h.width(d+"%");m.css("left",d+"%");n.text(a(e))})},play:function(){this.video?this.$c.find("video").show().get(0).play():this.jwplayer.play();this.playing()&&
this.$c.addClass("has_played")},pause:function(){this.playing()&&(this.video?this.video.pause():this.jwplayer.pause())},playpause:function(){this.playing()?this.pause():this.play();return this.playing()},seek:function(a,c){typeof c==="undefined"&&(c=!1);this.video?(this.video.currentTime=a,c?this.video.pause():this.video.play()):(this.jwplayer.seek(a),this.jwplayer.pause(c))},mute_toggle:function(){this.video&&(this.video.muted?this.unmute():this.mute());return this.video.muted},mute:function(){this.jwplayer?
this.jwplayer.setMute(!0):this.video.muted=!0},unmute:function(){this.jwplayer?this.jwplayer.setMute(!1):this.video.muted=!1},destroy:function(){this.$c.empty();this.$c.removeData("ksr_video")},current_position:function(){return this.video?this.video.currentTime:this.jwplayer.getPosition()},duration:function(){return this.jwplayer?this.jwplayer.getDuration():this.video.duration},playing:function(){return this.video?!this.video.paused:this.jwplayer.getState().toLowerCase()==="playing"},initialize_flash:function(){var b=
"v"+parseInt(Math.random()*1E8,10),c=this.$c.data("external_flashvars")||{},d=this;this.$c.append('<div id="'+b+'"></div>');swfobject.embedSWF("//d3mlfyygrfdi2i.cloudfront.net/321f/kickplayer.swf",b,this.$c.data("dimensions").width,this.$c.data("dimensions").height,"9.0.115","/swf/expressInstall.swf",_.extend(c,{displayheight:this.$c.height(),file:encodeURI(this.$c.attr("data-video")),image:encodeURI(this.$c.attr("data-image")),backcolor:"000000",screencolor:"000000",controlbar:"over","controlbar.idlehide":"true",
autostart:!0,skin:"//d3mlfyygrfdi2i.cloudfront.net/cc3a/kickskin.swf"}),{allowscriptaccess:"always",allowfullscreen:"true",wmode:"opaque",menu:"false"},{id:"ksr_player_"+b,"class":"ksr_player",name:"ksr_player_"+b},function(b){var c=!0;a.player_reference=b.ref;b.success?(d.$c.find("video").remove(),d.jwplayer=jwplayer(b.ref),d.jwplayer.onReady(function(){d.$c.trigger("ksr_video:loaded")}),d.jwplayer.onPlay(function(){d.$c.trigger("ksr_video:playing",[c]);c=!1}),d.jwplayer.onPause(function(){d.$c.trigger("ksr_video:paused")}),
d.jwplayer.onComplete(function(){d.$c.trigger("ksr_video:ended")}),d.jwplayer.onBufferChange(function(a){var b=a.duration*(a.bufferPercent/100);isNaN(b)||d.$c.trigger("ksr_video:buffer_change",[b,a.bufferPercent])})):(d.$video=d.$c.find("video"),d.video=d.$video.get(0),d.$overlay.remove(),d.$c.children().show(),d.$c.find(".play_button_big").removeAttr("style"),d.video&&(d.initialize(),d.play()))})},initialize:function(a){this.video?(a&&this.play(),this.bind_controls(),this.bind_video_element(),this.$video.css({height:"100%"}).removeAttr("style")):
a?this.initialize_flash():this.overlay()}})})(jQuery)})(this);
instrument_function(function(){(function(a){function d(c){this.$container=a(c);this.embed()}a.fn.sound_player=function(){return a(this).each(function(){var c=a(this).data("ksr_video");c||(c=new d(a(this)),a(this).data("sound_player",c))})};a.extend(d.prototype,{embed:function(c){var b="v"+parseInt(Math.random()*1E8,10),e=this;this.$container.find("span").attr("id",b);swfobject.embedSWF("https://d3mlfyygrfdi2i.cloudfront.net/321f/kickplayer.swf",b,this.$container.width(),this.$container.height(),"9.0.115",
"https://d3mlfyygrfdi2i.cloudfront.net/7b65/expressInstall.swf",{displayheight:this.$container.height(),file:encodeURI(this.$container.attr("data-file")),backcolor:"000000",screencolor:"000000",controlbar:"bottom","controlbar.idlehide":"false",autostart:c,audioonly:!0,skin:"https://d3mlfyygrfdi2i.cloudfront.net/cc3a/kickskin.swf"},{allowscriptaccess:"always",wmode:"opaque",menu:"false"},{id:"sound_player_"+b,"class":"ksr_player",name:"sound_player_"+b},function(b){b.success?e.jwplayer=jwplayer(b.ref):
(b=a("<audio />",{src:e.$container.attr("data-file"),controls:!0,autoplay:c}),e.$container.html(b),e.$audio=b)});this.initialized=!0}})})(jQuery)})(this);
instrument_function(function(){(function(a){function d(c,b){this.$elem=c;this.xhr=!1;this.paused=b.paused||!1;this.options=a.extend({},{threshold:500,trigger_next:"scroll",load_next_after:!1,prepend_next:!1,dataType:"html",extra_params:{},$context:a(window),page_by:function(a){return a?a+1:1},page_param:"page",url:!1},b);this.current_page=this.options.page_by();this.bind_events()}a.fn.mobius=function(c){c=c||{};return a(this).each(function(){var b=a(this).data("mobius");b||(b=new d(a(this),c),a(this).data("mobius",
b))})};a.extend(d.prototype,{bind_events:function(){var c=this;typeof this.options.trigger_next==="string"?(this.options.$context.on(this.options.trigger_next,function(){c.check_for_more()}),c.check_for_more()):this.options.trigger_next.jquery&&this.options.trigger_next.click(function(b){b.preventDefault();a(this).addClass("loading_next");c.load_next()})},clear_extra_params:function(){this.options.extra_params={}},add_param:function(c,b){var e={};e[c]=b;a.extend(this.options.extra_params,e)},set_extra_params:function(a){this.options.extra_params=
a},pause:function(){this.paused=!0},play:function(){this.paused=!1},check_for_more:function(){if(!this.paused){var a=this.options.$context.scrollTop()+this.options.$context.height(),b=this.$elem.offset().top,e=this.$elem.get(0).scrollHeight;a-b>e-this.options.threshold&&this.load_next()}},load_next:function(){this.load_page(this.options.page_by(this.current_page),this.options.load_next_after,!0)},load_page:function(c,b,e){var d=parseInt(c,10),g=this;if(!isNaN(d)){if(!b||!b.length)b=!1;if(!this.xhr)this.$elem.trigger("mobius:loading_page"),
this.xhr=a.ajax({type:"get",dataType:this.options.dataType,url:this.build_paged_url(d),success:function(c){g.xhr=!1;if(g.options.dataType==="html"){c=a("<div>"+c+"</div>").find(".mobius").children();if(!c.length){g.$elem.trigger("mobius:error",["No mobius found in page #"+d+"."]);return}b?b.after(c):g.options.prepend_next?g.$elem.prepend(c):g.$elem.append(c);g.options.trigger_next.jquery&&g.options.trigger_next.removeClass("loading_next")}g.$elem.trigger("mobius:loaded_page",[d,c]);if(e||!b)g.current_page=
d},error:function(){g.xhr=!1}})}},build_paged_url:function(c){var b=window.location.toString().replace(window.location.search,"").replace(window.location.hash,""),e=typeof this.options.extra_params==="undefined"?"":typeof this.options.extra_params==="string"?this.options.extra_params:a.param(this.options.extra_params),d=/(.*)#$/;d.test(b)&&(b=d.exec(b)[1]);e&&(e="&"+e);if(this.options.url)b=this.options.url;return b.toString()+"?"+this.options.page_param+"="+c+e}})})(jQuery)})(this);
instrument_function(function(){(function(a){function d(b,c){this.$elem=b;this.options=a.extend({},{adjust_on:"mobius:loaded_page scroll resize sticky_bar:position load hashchange",parent:b.parent(),attach_to:"top",lock_to_bottom:!0},c);(!this.options.parent||!this.options.parent.length)&&a.console.log("WARNING: sticky bar has no parent");this.paused=!1;this.last_scroll_top=0;this.fixed=this.last_up=!1;this.original_top=b.offset().top;this.original_bottom=this.original_top+b.height();this.update_window_larger_then_elem();
this.attach_to_top=this.options.attach_to==="top";this.attach_to_bottom=!this.attach_to_top;this.bind_events();this.reposition()}function c(b,c){this.$elem=b;this.options=a.extend({},{adjust_on:"shifted scroll resize load hashchange"},c);this.original_top=b.offset().top;this.bind_events();this.reposition()}a.fn.sticky_bar=function(b){b=b||{};return a(this).each(function(){var c=a(this).data("stickybar");c?a(this).trigger("shifted"):(c=new d(a(this),b),a(this).data("stickybar",c))})};a.fn.simple_sticky_bar=
function(b){b=b||{};return a(this).each(function(){var e=a(this).data("simple_stickybar");e?a(this).trigger("shifted"):(e=new c(a(this),b),a(this).data("simple_stickybar",e))})};a.extend(c.prototype,{bind_events:function(){var b=this;a(window).on(this.options.adjust_on,function(a){b.reposition(a)})},reposition:function(){a(window).scrollTop()<this.original_top?(this.$elem.css("position","static"),this.$elem.css("top","auto")):(this.$elem.css("position","fixed"),this.$elem.css("top",0))}});a.extend(d.prototype,
{bind_events:function(){var b=this;a(window).resize(function(a){a.target===window&&b.update_window_larger_then_elem()});a(document).on("shifted",function(){b.fixed=!1;b.$elem.css("position","static");b.$elem.css("top","auto");b.$elem.css("bottom","auto");b.original_top=b.$elem.offset().top;b.original_bottom=b.original_top+b.$elem.height();b.reposition()});a(window).on(this.options.adjust_on,function(a){b.paused||b.reposition(a)});this.$elem.on("sticky_bar:fix_to_bottom",function(){b.fixed=!0;b.$elem.css("position",
"fixed");b.$elem.css("top",-(b.$elem.height()-a(window).height()))});this.$elem.on("sticky_bar:pause",function(){b.paused=!0});this.$elem.on("sticky_bar:unpause",function(){b.paused=!1})},update_window_larger_then_elem:function(){this.window_larger_then_elem=a(window).height()>this.$elem.height()},reposition:function(b){var c=a(window).scrollTop(),d=c+a(window).height(),g=this.$elem.offset().top,j=g+this.$elem.height(),k=this.options.parent;k=k.offset().top+k.outerHeight();b=b&&b.type==="scroll";
var l=c>this.last_scroll_top?!1:!0,o=l!==this.last_up?!0:!1;if(this.attach_to_top&&c<this.original_top||this.attach_to_bottom&&d>this.original_bottom)this.fixed=!1,this.$elem.css("position","static"),this.$elem.css("top","auto"),this.$elem.css("bottom","auto");else if(this.options.lock_to_bottom&&!this.window_larger_then_elem&&d>k)this.fixed=!1,this.$elem.css("position","absolute"),this.$elem.css("top",k-this.$elem.outerHeight());else if(this.options.lock_to_bottom&&this.window_larger_then_elem&&
c+this.$elem.height()>k)this.fixed=!1,this.$elem.css("position","absolute"),this.$elem.css("top",k-this.$elem.outerHeight());else if(!o||!b){if(!this.fixed)if(this.attach_to_top)if(this.window_larger_then_elem||(!b||l)&&c<g)this.fixed=!0,this.$elem.css("position","fixed"),this.$elem.css("top",0);else{if((!b||!l)&&d>j)this.fixed=!0,this.$elem.css("position","fixed"),this.$elem.css("top",-(this.$elem.height()-a(window).height()))}else if(this.window_larger_then_elem||(!b||!l)&&d>j)this.fixed=!0,this.$elem.css("position",
"fixed"),this.$elem.css("bottom",0)}else if(!this.window_larger_then_elem)this.fixed=!1,this.$elem.css("position","absolute"),this.$elem.css("top",g),this.$elem.css("bottom","auto");this.was_fixed!==this.fixed&&this.$elem.trigger("sticky_bar:fixed_changed",[this.fixed]);this.last_scroll_top=c;this.last_up=l}})})(jQuery)})(this);
instrument_function(function(a){(function(d){function c(b){a.history&&a.history.replaceState?history.replaceState(null,null,b):window.location.replace(b)}d.fn.persistent_paging=function(){return d(this).each(function(){function a(){var b=[];d.each(f,function(){b.push([this[0],this[2].offset().top,this[2]])});f=b}var e=d(this),f=[[1,0,e.find(".page")]],g=[],j=!1,k=e.data("mobius"),l=/^#p(\d*)/.exec(window.location.hash);l&&parseInt(l[1],10)!==1&&(e.one("mobius:loaded_page",function(a,b,c){d.scrollTo(c.offset().top+
70)}),k.load_page(parseInt(l[1],10)));e.on("mobius:loaded_page",function(c,g,j){function l(){if(this[0]===t)return w=!0,!1}c=[];var w,t;f.push([g,!1,j]);a();for(t=1;t<=f[f.length-1][0];t+=1)w=!1,d.each(f,l),w||c.push(t);c.length?d.each(c,function(){var a=f[0],b=parseInt(this,10),c=d([]),g=[];g=d([]);var j=d([]);d.each(f,function(){this[0]>a[0]&&this[0]<b&&(a=this)});c=a[2].next(".missing");c.length?(g=c.data("missing_pages"),d.inArray(b,g)===-1&&(g.push(b),c.data("missing_pages",g))):(c=e.siblings(".missing").clone(),
g=c.find(".loading"),j=c.find(".load_more"),c.data("missing_pages",[b]),c.find("a").click(function(a){var b=c.data("missing_pages"),d=b.pop();a.preventDefault();b.length&&c.data("missing_pages",b);j.addClass("loading");k.load_page(d,c);e.one("mobius:loaded_page",function(){j.removeClass("loading")})}),a[2].after(c),g.hide(),c.show())}):e.find("div.missing").remove()});d(document).scroll(function(){var a=d(window).scrollTop();d.each(f,function(){a>this[1]&&(g=this)});g[0]!==j&&(c("#p"+g[0]),d(document).trigger("infinite_scroll:scrolled_to",
[g[0]]),j=g[0])})})}})(jQuery)})(this);
instrument_function(function(){(function(a){function d(a,b){this.$elem=a;this.options=b;this.total_elements=a.find(b.items).length;a.serialScroll(b);this.bind_events()}a.fn.infinite_carousel=function(c){c=c||{};return a(this).each(function(){var b=a(this).data("infinite_carousel");b||(b=new d(a(this),c),a(this).data("infinite_carousel",b))})};a.extend(d.prototype,{bind_events:function(){var a=this;this.$elem.on("notify.serialScroll",function(b,e){a.total_elements=a.$elem.find(a.options.items).length+
1;e+1>=a.total_elements-a.options.step&&a.$elem.trigger("infinite_carousel:last_page")})}})})(jQuery)})(this);
instrument_function(function(){(function(){$.fn.tabs=function(){return $(this).each(function(){var a=$(this);a.on("activate",function(d,c){var b=$(c);b=$("#"+b.data("pane"));a.data("pane")&&a.data("pane").trigger("deactivated");a.data("pane",b.trigger("activated"))});a.children().on("click",function(){$(this).parent().trigger("activate",$(this))})})};$.fn.panes=function(){var a=$(this);return a.each(function(){a.children().on("activated",function(){$(this).show()}).on("deactivated",function(){$(this).hide()})})}})()})(this);
instrument_function(function(){(function(a){function d(c,b){this.$elem=c;this.val=0;this.options=a.extend({},{frame_count:10,frame_step:40,frame_duration:30,format_numbers:!0,max_digits:5,keyframes:["","0","1","2","3","4","5","6","7","8","9",","],framesets:null},b);this.val=this.$elem.attr("rel");this.keyframes=this.options.keyframes;this.framesets=this.options.framesets;var e;this.framesets||this.init_framesets();for(e=0;e<this.options.max_digits;e+=1)this.init_digit(e);this.write(this.val,!0)}a.fn.ticker=
function(c){c=c||{};return a(this).each(function(){var b=a(this).data("ticker");b||(b=new d(a(this),c),a(this).data("ticker",b))})};a.extend(d.prototype,{read:function(){return this.val},write:function(c,b){this.val=String(c||"");this.$elem.attr("rel",this.val);var e=(this.options.format_numbers?formatters.format_number(this.val,0):this.val).split(""),d=this.$elem.find(".ticker_digit"),g,j,k,l,o,p,h,m;for(m=0;m<e.length-d.length;m+=1)this.init_digit(m+d.length);d=this.$elem.find(".ticker_digit");
for(m=0;m<d.length;m+=1){g=a(d[m]);j=g.html();k=e[m]?String(e[m]):"";l=a.inArray(k,this.keyframes);o=this.framesets[l][0];p=a.inArray(g.html(),this.keyframes);h=[];g.html(k).data("tween_id",g.data("tween_id")+1);if(!k||k===j||b)h=h.concat(o);else for(;p!==l;)h=h.concat(this.framesets[p]),p+=1,p=p>=this.keyframes.length?1:p;this.tween(g.data("tween_id"),g,h)}},init_framesets:function(){var a,b;this.framesets=[];for(a=0;a<this.keyframes.length;a+=1){this.framesets.push([]);for(b=0;b<this.options.frame_count;b+=
1)this.framesets[a].push(a*this.options.frame_count*this.options.frame_step+b*this.options.frame_step)}},init_digit:function(c){c=a(this.$elem.find(".ticker_digit").get(c));c.length||(c=a('<span class="ticker_digit">&nbsp;</span>').prependTo(this.$elem));c.data("tween_id",1)},digit_count:function(){return this.$elem.find(".ticker_digit").length},remove_digit:function(a){a.remove();this.pad_digits()},tween:function(a,b,e){if(e.length)if(b.data("tween_id")!==a)return!1;else{var d=this;setTimeout(function(){var g=
e.shift();b.css({"background-position":"0px "+-1*g+"px"});d.tween(a,b,e)},this.options.frame_duration)}}})})(jQuery)})(this);
instrument_function(function(a){(function(d){function c(a,b,c){this.url=a;this.finished=b||function(){};this.options=d.extend({delay:3E4,on_error:function(){},on_complete:function(){},continue_on_error:!1},c);this.running=this.xhr=!1;this.go()}var b;d.pollster=function(a,b,d){return new c(a,b,d)};a.Pollster=c;c.prototype.start=function(){var a=this;this.running=!0;b=setTimeout(function(){a.go()},this.options.delay)};c.prototype.stop=function(){this.running=!1;clearTimeout(b)};c.prototype.go=function(){var a=
!1,b=this;if(!this.xhr)this.xhr=d.ajax({url:this.url,dataType:"json",type:"get",global:!1,success:function(c){(a=b.finished(c))?b.stop():b.start()},error:function(){b.options.continue_on_error&&(a?b.stop():b.start());b.options.on_error()},complete:function(){b.xhr=!1;b.options.on_complete()}})}})(jQuery)})(this);
instrument_function(function(){(function(a){a.fn.preload_background_image=function(){return this.each(function(){var d;var c=a(this).css("backgroundImage"),b=/[("]([^()"]+)[")]/;try{d=b.exec(c)[1]}catch(e){d=!1}if(d)(new Image).src=d})}})(jQuery)})(this);
instrument_function(function(){(function(a){a.fn.serialize_without_blank=function(){var d,c=[];this.find(":input").each(function(){if(a.trim(this.value)===""&&!this.disabled)c.push(this),this.disabled=!0});d=this.serialize();_.each(c,function(a){a.disabled=!1});return d}})(jQuery)})(this);
instrument_function(function(){(function(a){a.fn.term_form=function(){this.each(function(){var d=a(this);d.find(".text").on("input keydown paste cut",function(){a.trim(a(this).val())?a("form.term .ss-delete").show():a("form.term .ss-delete").hide()}).trigger("input").on("blur",function(){d.submit()});d.find(".ss-delete").on("click",function(){a("form.term .text").val("").trigger("input").focus();d.submit()});d.find(".text").on("focus",function(){a(this).addClass("focused")});d.find(".text").on("blur",
function(){var c=a(this);c.val()||c.removeClass("focused")})});return this}})(jQuery)})(this);instrument_function(function(){$.parseEscapedJSON=function(a){a=a.replace(/[\u2028\u2029]/g," ").replace(/&#39;/g,"'");return $.parseJSON(_.unescape(a))}})(this);
instrument_function(function(){$(function(){function a(){$.console.log("xdreceiver did not initialize")}var d=$("iframe#api_xdreceiver"),c=d[0],b=[],e;$.api_ajax=function(){b.push(arguments)};d.load(function(){try{$.api_ajax=c.contentWindow.jQuery.ajax,monkey_patch_ajax_protocol_matching({name:"api_ajax",callback:$.api_ajax}),_.each(b,function(a){$.api_ajax.apply(this,a)})}catch(d){$.api_ajax=a,a()}clearTimeout(e)});e=setTimeout(a,1E4)})})(this);
instrument_function(function(){(function(a){function d(b,c){this.$div=b;this.options=a.extend({previous_month_text:"< Prev",next_month_text:"Next >",month_texts:["January","February","March","April","May","June","July","August","September","October","November","December"],day_of_week_texts:["S","M","T","W","T","F","S"]},c);this._extract_options();this._attach();this._redraw()}function c(a){b?b.firstChild.nodeValue=a:(b=document.createElement("div"),b.appendChild(document.createTextNode(a)));return b.innerHTML}
a.fn.calendar_date_picker=function(b){return this.each(function(){var c=a(this);c=new d(c,b);a(this).data("calendar_date_picker",c)})};a.extend(d.prototype,{_copy_date:function(a){return new Date(a.getFullYear(),a.getMonth(),a.getDate())},_copy_date_with_time:function(a,b){if(!a)return a;var c=this._copy_date(a),d=(b||"").split(":");c.setHours(+d[0]||0);c.setMinutes(+d[1]||0);return c},_copy_time:function(a){if(!a)return null;var b=""+a.getHours();b.length===1&&(b="0"+b);a=""+a.getMinutes();a.length===
1&&(a="0"+a);return b+":"+a},_copy_month:function(a){return new Date(a.getFullYear(),a.getMonth(),1)},_next_month:function(a){return new Date(a.getFullYear(),a.getMonth()+1,1)},_previous_month:function(a){return new Date(a.getFullYear(),a.getMonth()-1,1)},_next_date:function(a){return new Date(a.getFullYear(),a.getMonth(),a.getDate()+1,a.getHours(),a.getMinutes())},_previous_date:function(a){return new Date(a.getFullYear(),a.getMonth(),a.getDate()-1,a.getHours(),a.getMinutes())},_same_year:function(a,
b){return a.getFullYear()===b.getFullYear()},_same_month:function(a,b){return this._same_year(a,b)&&a.getMonth()===b.getMonth()},_last_date_of_month:function(a){return new Date(a.getFullYear(),a.getMonth()+1,0)},_selected_date_date_in_focus_month:function(){if(this.selected_date&&this._same_month(this.selected_date,this.focus_date))return this.selected_date.getDate()},_extract_options:function(){this.today_date=this._copy_date(this.options.today_date||new Date);if(this.options.selected_date)this.selected_date=
this._copy_date(this.options.selected_date);this.focus_date=this._copy_month(this.options.focus_date||this.selected_date||this.today_date);this.time=this._does_datetime()?this._copy_time(this.options.selected_date||this.options.today_date||new Date):!1},_refresh_calendar_table_classes:function(a){var b=this._selected_date_date_in_focus_month();a=a.children("tbody");var c=a.find("a.selected");c.removeClass("selected");c.parent().removeClass("selected");b=a.find("a:eq("+(b-1)+")");b.addClass("selected");
b.parent().addClass("selected")},_attach:function(){var a=this;this.$div.bind("calendar_date_picker:select_date",function(b,c){a.select_date(c)})},_bind_dom_table_events:function(){var b=this,c=this.$div.children().children("table"),d=c.children(":eq(0)").children().children(),j=d.children("a.previous_month");j.text(this.options.previous_month_text);j.click(function(a){a.preventDefault();b._on_previous_month_clicked()});j=d.children("a.next_month");j.text(this.options.next_month_text);j.click(function(a){a.preventDefault();
b._on_next_month_clicked()});d.children(".month, .year").on("click",function(){b.focus_date=new Date;b._refresh_calendar()});c.children("tbody").click(function(c){var d=a(a.browser.msie?c.srcElement:c.target);d[0]&&d[0].nodeName==="A"&&(c.preventDefault(),c=b._copy_date_with_time(b.focus_date,b.time),c.setDate(+d.text()),d=b._copy_date_with_time(b.selected_date,b.time),b.options.allow_deselect&&d&&c-d===0?b.select_date(void 0):b.select_date(c))})},_bind_dom_time_events:function(){if(this._does_datetime()){var a=
this,b=this.$div.children().children("div.time").find("input");b.time_field();b.trigger("time_field:set_time",this.time);b.bind("time_field:time_changed",function(b,c){if(!a.selected_date)a.selected_date=new Date;var d=a._copy_date_with_time(a.selected_date,c);a.select_date(d)})}},_does_datetime:function(){return this.options.time_text!==void 0},_on_previous_month_clicked:function(){this.focus_date=this._previous_month(this.focus_date);this._refresh_calendar()},_on_next_month_clicked:function(){this.focus_date=
this._next_month(this.focus_date);this._refresh_calendar()},_redraw:function(){this.$div.empty();this.$div.append('<div class="calendar_date_picker">'+this._table_html()+this._time_div_html()+"</div>");this._bind_dom_table_events();this._bind_dom_time_events()},_refresh_calendar:function(){this.$div.children().children("table").replaceWith(this._table_html());this._bind_dom_table_events()},select_date:function(a,b){var c=a?this._copy_date(a):void 0,d=b?b:a?this._copy_time(a):void 0;if(!((this.selected_date?
this.selected_date.valueOf():void 0)===(c?c.valueOf():void 0)&&d===this.time)){this.selected_date=c;if(this._does_datetime())this.time=d,this.$div.find("input").trigger("time_field:set_time",d);this.$div.trigger("calendar_date_picker:date_selected",[this._copy_date_with_time(this.selected_date,this.time)]);this.focus_date=this._copy_month(this.selected_date||this.today_date);this._refresh_calendar();this._refresh_calendar_table_classes(this.$div.find("table"))}},_table_html:function(){return"<table>"+
this._thead_month_html()+this._thead_days_of_week_html()+this._tbody_html()+"</table>"},_thead_month_html:function(){return'<thead class="month"><tr><th colspan="7"><a class="previous_month" href="#"></a><a class="next_month" href="#"></a><span class="month">'+c(this.options.month_texts[this.focus_date.getMonth()])+'</span> <span class="year">'+this.focus_date.getFullYear()+"</span></th></tr></thead>"},_thead_days_of_week_html:function(){return'<thead class="days_of_week"><tr><th>'+this._days_of_week_ths().join("</th><th>")+
"</th></tr></thead>"},_tbody_html:function(){var a=this._copy_month(this.focus_date).getDay(),b=1,c=this._last_date_of_month(this.focus_date).getDate(),d=this._selected_date_date_in_focus_month(),k=this._same_month(this.focus_date,this.today_date)&&this.today_date.getDate(),l=[];l.push(this._date_tds(a,d,k,b,c));for(b=8-a;b<=c;b+=7)l.push(this._date_tds(0,d,k,b,c));return"<tbody><tr>"+l.join("</tr><tr>")+"</tr></tbody>"},_date_tds:function(a,b,c,d,k){for(var l=[],o=0;o<a;o+=1)l.push("<td></td>");
for(a=d;l.length<7&&a<=k;a+=1)o=[],a===b&&o.push("selected"),a===c&&o.push("today"),o=o.length?' class="'+o.join(" ")+'"':"",l.push("<td"+o+'><a href="#"'+o+">"+a+"</a></td>");for(b=k+1;b<d+7;b+=1)l.push("<td></td>");return l.join("")},_days_of_week_ths:function(){return a.map(this.options.day_of_week_texts,c)},_time_div_html:function(){return this._does_datetime()?'<div class="time"><label>'+c(this.options.time_text)+'<input type="text" /></label></div>':""}});var b})(jQuery)})(this);
instrument_function(function(){(function(a){function d(c,b){this.$field=c;this.$calendar=void 0;this.options=a.extend({calendar:{},position:"right"},b);this._in_manual_edit=!1;this._blurs_to_ignore=-1;this._attach()}a.fn.datetime_picker_field=function(c){return this.each(function(){new d(a(this),c)})};a.extend(d.prototype,{_attach:function(){var a=this;this.$field.focus(function(){a._in_time_field=!1;a._ensure_calendar()});this.$field.blur(function(){a._hide_calendar_or_refocus();a._blurs_to_ignore-=
1});a.$field.bind("keypress cut paste input",function(){a._handle_edit()})},_ensure_calendar:function(){if(this.$calendar)return this.$calendar;var c=this,b=a("<div></div>"),d=a.extend({selected_date:this.get_selected_datetime()},this.options.calendar);b.css("position","absolute");b.css("z-index","1000");this.options.position==="bottom"?(b.css("left",this.$field.offset().left),b.css("top",this.$field.offset().top+this.$field.outerHeight()+20)):(b.css("left",this.$field.offset().left+this.$field.width()+
20),b.css("top",this.$field.offset().top));b.hide();this._get_surrounding_element().append(b);b.calendar_date_picker(d);b.mousedown(function(){c._in_time_field=!1;c._blurs_to_ignore+=1});b.find("label").mousedown(function(a){c._in_time_field=!0;c._blurs_to_ignore+=1;a.stopPropagation()});b.find("input").blur(function(){c._hide_calendar_or_refocus();c._blurs_to_ignore-=1});c._blurs_to_ignore=0;b.bind("calendar_date_picker:date_selected",function(a,b){if(!c._in_manual_edit){var d=c.options.format_callback(b);
d!==c.$field.val()&&(c.$field.val(d),c.$field.trigger("input"),c.options.calendar.time_text||(c._hide_calendar(),c._focus_next()))}});b.find(".time input").bind("keydown",function(b){b.keyCode===13&&(a(this).blur(),c._hide_calendar())});this.$calendar=b;b.fadeIn();this.options.open_calendar_callback&&this.options.open_calendar_callback();return this.$calendar},_hide_calendar:function(){if(this.$calendar)this.$calendar.fadeOut(function(){a(this).remove()}),this.$calendar=void 0,this.options.close_calendar_callback&&
this.options.close_calendar_callback()},_focus_next:function(){var a=this.$field.parents("form:eq(0)").find(":input"),b=a.index(this.$field);b>-1&&b+1<a.length&&a.eq(b+1).focus()},_reformat_value:function(){this.$field.val(this.options.format_callback(this.get_selected_datetime()))},_hide_calendar_or_refocus:function(){var a=this;this._blurs_to_ignore<=0?(this._hide_calendar(),this._reformat_value()):window.setTimeout(function(){a._in_time_field?a.$calendar&&a.$calendar.length&&a.$calendar.find("input").focus():
a.$field.focus()})},_handle_edit:function(){this._in_manual_edit=!0;this.$calendar&&this.$calendar.trigger("calendar_date_picker:select_date",this.get_selected_datetime());this._in_manual_edit=!1},get_selected_datetime:function(){return this.options.parse_callback(this.$field.val())},_get_surrounding_element:function(){return this.options.surrounding_element?a(this.options.surrounding_element):a("body")}})})(jQuery)})(this);
instrument_function(function(){(function(a){function d(c,b){this.$field=c;this.options=a.extend({on_invalid:null},b);this._value=this._current_time_from_field();this._attach()}a.fn.time_field=function(c){return a(this).each(function(){new d(a(this),c)})};a.extend(d.prototype,{_attach:function(){var a=this;a.$field.bind("blur",function(){a._handle_edit()});this.$field.bind("time_field:set_time",function(b,d){a.set_time(d)})},_s_to_time:function(a){if(typeof Date.Parsing==="object")return(a=Date.parse(a))?
a.toString("HH:mm"):this.options.on_invalid;var b,d=a.match(/^\s*(\d\d?)(:(\d\d))?\s*([ap]m?)?\s*$/i);a=!d;if(!a){var f=+d[1]%12;b=+d[3]||0;var g=(d[4]||"").match(/p/i);d[4]||(g=+d[1]>=12);+d[1]>23&&(a=!0);+d[1]>12&&d[4]&&(a=!0);b>59&&(a=!0);+d[1]<1&&d[4]&&(a=!0);d=""+(f+(g?12:0));d.length===1&&(d="0"+d);b=""+b;b.length===1&&(b="0"+b);b=d+":"+b}return a?this.options.on_invalid:b},_time_to_s:function(a){if(typeof Date.Parsing==="object")return(a=Date.parse(a))?a.toString("h:mm tt"):this.options.on_invalid;
var b=a&&a.match(/(\d\d):(\d\d)/);return b?(a=+b[1],b=""+ +b[2],b.length===1&&(b="0"+b),""+(a%12?a%12:12)+":"+b+(a>=12?"pm":"am")):""},_current_time_from_field:function(){return this._s_to_time(this.$field.val())},_reset_field_value:function(){this._value!==this._current_time_from_field()&&this.$field.val(this._time_to_s(this._value))},set_time:function(a){if(a!==this._value)this._value=a,this.$field.trigger("time_field:time_changed",this._value);this._reset_field_value()},_handle_edit:function(){this.set_time(this._current_time_from_field())}})})(jQuery)})(this);
instrument_function(function(){$(function(){$.fn.sync_form=function(a){var d=$(this),c=function(){};a=a||{};d.data("updating")?d.data("dirty",(d.data("dirty")||[]).concat(a)):(d.data("updating",!0),$.ajax({type:a.type||d.attr("method"),url:a.url||d.attr("action"),data:a.data||d.serialize(),dataType:"json",global:!1,context:d,beforeSend:a.beforeSend,success:function(b){(a.success||c).apply(this,arguments);d.trigger("form_synced",[b]);d.data("dirty")&&d.data("dirty").length&&setTimeout(function(){for(var a=
{};$.isEmptyObject(a)&&d.data("dirty").length;)a=d.data("dirty").shift();d.sync_form(a)},100);b.url&&d.attr("action",b.url)},error:a.error,complete:function(){(a.complete||c).apply(this,arguments);d.data("updating",!1)}}))}})})(this);
instrument_function(function(){(function(a){var d={};a.publish=function(){var c=Array.prototype.slice.call(arguments),b=c.shift();d[b]&&a.each(d[b],function(){this.apply(a,c)})};a.subscribe=function(a,b){d[a]||(d[a]=[]);d[a].push(b);return[a,b]};a.unsubscribe=function(c){d[c]&&a.each(d[c],function(a,e){this===e&&d[c].splice(a,1)})}})(jQuery)})(this);
instrument_function(function(a){(function(){a.oauth_url=function(a){return typeof api_oauth_token!=="undefined"?URI(a).addQuery("oauth_token",api_oauth_token).toString():a}})()})(this);instrument_function(function(a){(function(){a.shuffle=function(a){var c,b,e=a.length;if(e)for(;e;)e-=1,b=Math.floor(Math.random()*(e+1)),c=a[b],a[b]=a[e],a[e]=c;return a}})()})(this);
instrument_function(function(){(function(a){a.support.fontFace=function(){var a,c=document,b=c.head||c.getElementsByTagName("head")[0]||docElement,e=c.createElement("style");c=c.implementation||{hasFeature:function(){return!1}};e.type="text/css";b.insertBefore(e,b.firstChild);a=e.sheet||e.styleSheet;return(c.hasFeature("CSS2","")?function(b){if(!a||!b)return!1;var c=!1;try{a.insertRule(b,0),c=!/unknown/i.test(a.cssRules[0].cssText),a.deleteRule(a.cssRules.length-1)}catch(e){}return c}:function(b){if(!a||
!b)return!1;a.cssText=b;return a.cssText.length!==0&&!/unknown/i.test(a.cssText)&&a.cssText.replace(/\r+|\n+/g,"").indexOf(b.split(" ")[0])===0})('@font-face { font-family: "font"; src: "font.ttf"; }')}})(jQuery)})(this);instrument_function(function(a){(function(d){d.support.JSON=function(){return typeof a.JSON!=="undefined"}})(jQuery)})(this);instrument_function(function(a){(function(d){d.support.localStorage=function(){return!!a.localStorage}})(jQuery)})(this);
instrument_function(function(a){(function(){var d={};a.render=function(a,b,e){var f=d[a]||function(a){return a},g={},j=$("#template-"+a.replace("/","_")),k=$.trim(j.html());!_.isArray(e)&&_.isObject(e)?g=e:(e=_.isArray(e)?e:_.isString(e)?[e]:[],_.each(e,function(a){var b=$("#template-"+a.replace("/","_")),c=$.trim(b.html());if(!b.length)throw"Could not find Mustache template: "+a;g[a]=c}));if(!j.length)throw"Could not find Mustache template: "+a;return Mustache.render(k,f(b),g)};a.presenters=d})()})(this);
instrument_function(function(){function a(a,c,b){a=$(a);var e=_.map(_.keys(c),function(a){return"#"+a}).join(", ");a.delegate(e,"change",function(){$(this).trigger("state_change")});a.delegate(e,"state_change",function(){var a=$(this),d=a.val();_.each(c[a[0].id],function(a,c){var e=$("#"+c),f=e.add(e.prev("label")),p=e.val(),h=_.result(a,d),m;typeof e.data("options")==="undefined"&&e.data("options",e.find("option"));_.isRegExp(h)&&(h=e.option_values(function(a){return a.match(h)}));_.isArray(h)&&
(h=_.map(h,function(a){return'[value="'+a+'"]'}).join(", "));h?(m=$(e.data("options")),_.isString(h)&&(m=m.filter(h)),b.include_blank&&(m=$("<option>").add(m)),e.html(m),f.show(),e.val()!==p&&e.trigger("change")):(b.default_control(f),e.trigger("change"))})})}$.fn.option_values=function(a){var c=$(this).first().find("option").map(function(b,c){var f=c.value;if(typeof a==="function"&&!a(f))return!1;return f});return _(c).without(!1)};$.fn.select_machine=function(d,c){var b={default_control:function(a){a.hide()}};
$(this).each(function(){a(this,d,$.extend(b,c))});return this}})(this);
instrument_function(function(){(function(a){window.XDomainRequest&&a.ajaxTransport(function(d){if(d.crossDomain&&d.async){if(d.timeout)d.xdrTimeout=d.timeout,delete d.timeout;var c;return{send:function(b,e){function f(b,d,f,l){c.onload=c.onerror=c.ontimeout=c.onprogress=a.noop;c=void 0;e(b,d,f,l)}c=new window.XDomainRequest;c.open(d.type,d.url);c.onload=function(){f(200,"OK",{text:c.responseText},"Content-Type: "+c.contentType)};c.onerror=function(){f(404,"Not Found")};c.onprogress=function(){};if(d.xdrTimeout)c.ontimeout=
function(){f(0,"timeout")},c.timeout=d.xdrTimeout;c.send(d.hasContent&&d.data||null)},abort:function(){if(c)c.onerror=a.noop(),c.abort()}}}})})(jQuery)})(this);
instrument_function(function(a){(function(){function d(a,b){var c,d;c=_(a).map(function(a,c){var e=!1;c.match(/^\!/)&&(e=!0,c=c.replace(/^\!/,""));_.isArray(a)||(a=[a]);a=_(a).map(function(a){return a+""});d=_(a).include(b[c]+"");return e?!d:d});return _(c).inject(function(a,b){return a||b},c[0])}function c(a,b){var c=_(a).map(function(a){return d(a,b)});return _(c).inject(function(a,b){return a&&b},c[0])}function b(d,e,f){$(d).find("."+e+f.id).each(function(d,e){var g,k;g="";var j=$(e);k=j.data("conditions");
var l=j.attr("itemprop");typeof l!=="undefined"?g=l.match(/\[(\w*)\]/)[1]:j.data("attr")&&(g=j.data("attr"));typeof k!=="undefined"?(typeof k==="string"&&(k=JSON.parse(k)),g=(k=c(k,f))?JSON.parse(j.data("render")):"",j.data("evaluation")!==k&&(j.html(g),j.data("evaluation",k),g.length&&b(j,"Project",f))):typeof g!=="undefined"&&typeof f[g]!=="undefined"&&(j.data("value",f[g]),j.attr("data-value",f[g]),a.refresh_node(j))})}function e(a){this.template=a;this.conditions=[]}function f(a){var b;typeof a===
"string"&&(b={},b[a]=!0,a=b);return a}requires({$:"jquery",_:"../../../../vendor/assets/javascripts/bower_components/underscore/underscore.js",formatters:"../onloads/initializers/formatting_helpers.js"});var g,j={};packages.Schwamm=j;g={money:function(a){if(typeof a.precision==="undefined")a.precision=0;var b=formatters.currency_symbol_mappings[a.currency]+this.number(a);!a.without_code&&formatters.currency_trailing_code_mappings[a.currency]&&(b+=" "+a.currency);return b},shorter_money:function(a){a.value<
100?a.precision=2:(a.precision=0,a.value=Math.floor(a.value));return this.money(a)},number:function(a){return formatters.format_number(a.value,a.precision||0)},pluralize:function(a){return formatters.pluralize(a.word,a.value)},percent:function(a){a.value=parseFloat(a.value)/parseFloat(a.of)*100;return this.number(a)+"%"},time_ago_in_words:function(a){if(a.value){if(typeof a.value==="number"||typeof a.value==="string"&&a.value.match(/^\d+$/))a.value=parseInt(a.value*1E3,10)}else return"?";var b,c;
a=moment(a.value);var d=Math.floor(moment().diff(a)/1E3);$.each(formatters.distance_date_intervals,function(a,c){b=c;if(c[0]>d)return!1});c={m:Math.round(d/60),h:Math.round(d/3600),d:Math.round(d/86400),t:a.format("MMM D"),y:a.format("MMM D, YYYY")};a=$.map(c,function(a,b){return b});a=RegExp("%(["+a.join("")+"])","g");a=b[1].replace(a,function(a,b){return c[b]});if(a.match(/NaN|undefined/))return"";return a},distance_date:function(a){return this.time_ago_in_words(a)}};a.refresh_node=function(a){var b;
b=a.data("format");b=(b=a.data("format"))&&typeof g[b]==="function"?g[b](a.data()):a.data("value");a.html(b)};a.update_record=function(a,c){var d=["state","ended","is_starred"],e=$("."+a+c.id+"_cxt");e.each(function(b,f){_.each(d,function(b){var d;d=RegExp(a+"-"+b+"\\S+\\s?","g");d=$(f).attr("class").match(d).join(" ");b=a+"-"+b+"-"+c[b];e.removeClass(d);e.addClass(b)})});b(document,a,c)};j.FormattingHelpers=g;j.presenter=function(a,b,c){var d=new Schnurrbart(a,b),e={},f={};if($.isArray(c))$.each(c,
function(a,b){e[b]=b});else if(typeof c==="object")e=c;else return;$.each(e,function(a,b){var c;$.isArray(b)||(b=[b]);c=d.hasOwnProperty(a)?a:"tag";f[a]=d[c].apply(d,b)});return f};Schnurrbart=function(a,b){this.model_name=a;this.proxy=b;this.class_name=a+this.proxy.id;this.constructor.schnurrbarts[this.class_name]=this};if(typeof exports!=="undefined")exports.Schnurrbart=Schnurrbart;Schnurrbart.schnurrbarts={};Schnurrbart.prototype.tag=function(a,b){b||(b={});var c;return b.format?this.format(a,
b):(c=this.proxy[a],this.render_tag(a,c,b))};Schnurrbart.prototype.pluralize=function(a,b){return this.format_on(b,{format:"pluralize",word:a})};Schnurrbart.prototype.format_on=function(a,b){b||(b={});b.attr=a;return this.format(null,b)};Schnurrbart.prototype.format=function(a,b){var c=a||b.attr;c&&(b=$.extend({value:this.proxy[c]},b));if($.inArray(b.format,formatters.currency_formats)>=0)b.currency=this.proxy.currency;c=this.formatting_helper(b);return this.render_tag(a,c,b)};Schnurrbart.prototype.render_tag=
function(a,b,c,d){c||(c={});c=this.base_html_options(a,c);a=$("<data>");a.attr(c);a.html(b);if(d)return a;return a[0].outerHTML};Schnurrbart.prototype.base_html_options=function(a,b){b||(b={});var c={"class":this.class_name};$.extend(c,this.data_attributes(b));if(a)c.itemprop=this.itemprop(a);return c};Schnurrbart.prototype.itemprop=function(a){return this.model_name+"["+a+"]"};Schnurrbart.prototype.data_attributes=function(a){a||(a={});var b={};$.each(a,function(a,c){b["data-"+a]=c});return b};Schnurrbart.prototype.formatting_helper=
function(a){return j.FormattingHelpers[a.format](a)};Schnurrbart.prototype["if"]=function(a){return(new e(this))["if"](a)};Schnurrbart.prototype.if_not=function(a){return(new e(this)).if_not(a)};Schnurrbart.context_methods={Project:{state:["live","started","submitted","canceled","suspended","successful","failed","purged"],is_starred:[!0],ended:[!0]}};Schnurrbart.prototype.context_classes=function(){var a=this.constructor.context_methods[this.model_name],b=[],c=this;b.push(this.class_name+"_cxt");
_.each(a,function(a,d){b.push(c.model_name+"-"+d.replace(/\W/g,"")+"-"+c.proxy[d])});return b.join(" ")};e.prototype["if"]=function(a){this.condition("and",!0,a);return this};e.prototype.and=e.prototype["if"];e.prototype.if_not=function(a){this.condition("and",!1,a);return this};e.prototype.unless=e.prototype.if_not;e.prototype.and_not=e.prototype.if_not;e.prototype.or=function(a){this.condition("or",!0,a);return this};e.prototype.or_not=function(a){this.condition("or",!1,a);return this};e.prototype.then=
function(){var a=this;return function(){return function(b,c){a.value=c(b);return a.html()}}};e.prototype.condition=function(a,b,c){var d;_.isObject(c)||(d={},d[c]=!0,c=d);b===!1&&_.each(_(c).keys(),function(a){c["!"+a]=c[a];delete c[a]});a==="or"?(a=f(this.conditions[this.conditions.length-1]),c=f(c),this.conditions[this.conditions.length-1]=$.extend(!0,a,c)):a==="and"&&this.conditions.push(c);return this};e.prototype.evaluation=function(){if(typeof this.cached_evaluation==="undefined")this.cached_evaluation=
c(this.conditions,this.template.proxy);return this.cached_evaluation};e.prototype.content=function(){return this.evaluation()?this.value:""};e.prototype.html=function(){var a=$("<data>");a.attr(this.html_options());a.html(this.content());return a[0].outerHTML};e.prototype.html_options=function(){return{"class":this.template.class_name,"data-conditions":JSON.stringify(this.conditions),"data-render":JSON.stringify(this.value),"data-evaluation":c}}})()})(this);
instrument_function(function(a){var d={mailcheck:{threshold:2,defaultDomains:["yahoo.com","google.com","hotmail.com","gmail.com","me.com","aol.com","mac.com","live.com","comcast.net","googlemail.com","msn.com","facebook.com","verizon.net","sbcglobal.net","att.net","gmx.com","mail.com","ymail.com","hotmail.co.uk","yahoo.co.uk","live.co.uk"],defaultTopLevelDomains:["co.uk","com","net","org","info","edu","gov","mil"],whitelistRegexes:[/ymail.com/,/yahoo\.co\./,/yahoo\.com\./,/hotmail\.co\./,/hotmail\.com\./],
run:function(a){a.domains=a.domains||d.mailcheck.defaultDomains;a.topLevelDomains=a.topLevelDomains||d.mailcheck.defaultTopLevelDomains;a.distanceFunction=a.distanceFunction||d.sift3Distance;a.ignoreTLDs=a.ignoreTLDs||!1;var b=d.mailcheck.suggest(encodeURI(a.email),a.domains,a.topLevelDomains,a.distanceFunction,a.ignoreTLDs);b?a.suggested&&a.suggested(b):a.empty&&a.empty()},suggest:function(a,b,d,f,g){a=a.toLowerCase();a=this.splitEmail(a);b=this.findClosestDomain(a.domain,b,f);var j;for(f=0;f<this.whitelistRegexes.length;f+=
1)if(j=this.whitelistRegexes[f],j.exec(a.domain))return!1;if(b){if(b!==a.domain)return{address:a.address,domain:b,full:a.address+"@"+b}}else if(!g&&(d=this.findClosestDomain(a.topLevelDomain,d),a.domain&&d&&d!==a.topLevelDomain))return g=a.domain,b=g.substring(0,g.lastIndexOf(a.topLevelDomain))+d,{address:a.address,domain:b,full:a.address+"@"+b};return!1},findClosestDomain:function(a,b,d){var f,g=99,j=null,k;if(!a||!b)return!1;if(!d)d=this.sift3Distance;for(k=0;k<b.length;k+=1){if(a===b[k])return a;
f=d(a,b[k]);f<g&&(g=f,j=b[k])}return g<=this.threshold&&j!==null?j:!1},sift3Distance:function(a,b){var d=0,f=0,g=0,j=0,k;if(a===null||a.length===0)return b===null||b.length===0?0:b.length;if(b===null||b.length===0)return a.length;for(;d+f<a.length&&d+g<b.length;){if(a.charAt(d+f)===b.charAt(d+g))j+=1;else for(k=g=f=0;k<5;k+=1){if(d+k<a.length&&a.charAt(d+k)===b.charAt(d)){f=k;break}if(d+k<b.length&&a.charAt(d)===b.charAt(d+k)){g=k;break}}d+=1}return(a.length+b.length)/2-j},splitEmail:function(a){a=
a.split("@");var b,d,f,g="";if(a.length<2)return!1;for(b=0;b<a.length;b+=1)if(a[b]==="")return!1;d=a.pop();f=d.split(".");if(f.length===0)return!1;else if(f.length===1)g=f[0];else{for(b=1;b<f.length;b+=1)g+=f[b]+".";f.length>=2&&(g=g.substring(0,g.length-1))}return{topLevelDomain:g,domain:d,address:a.join("@")}}}};a.jQuery&&function(a){a.fn.mailcheck=function(a){var c=this,f,g;if(a.suggested)f=a.suggested,a.suggested=function(a){f(c,a)};if(a.empty)g=a.empty,a.empty=function(){g.call(null,c)};a.email=
this.val();d.mailcheck.run(a)}}(jQuery)})(this);instrument_function(function(a){(function(){a.url_equals=function(a,c,b){a=URI(a).absoluteTo(window.location);c=URI(c).absoluteTo(window.location);b=b||{};b.ignore_query&&(a.search({}),c.search({}));return a.equals(c)}})()})(this);instrument_function(function(){$(function(){$(document).on("click","ul.faqs_alt li .question",function(a){$(this).parent("li").toggleClass("expanded");track("FAQ Toggle",{question:$(this).text().trim()});a.preventDefault()})})})(this);
instrument_function(function(){(function(){function a(){this.initialize.apply(this,arguments)}requires({$:"jquery",_:"../../../../../vendor/assets/javascripts/bower_components/underscore/underscore.js"});packages.Model=a;a.inheritance_chain=[];a.inheritance_chain.push(function(){var a={};return{extend:function(a){function b(){this.initialize.apply(this,arguments)}b.inheritance_chain=this.inheritance_chain||[];typeof a==="function"&&b.inheritance_chain.push(a);_.each(b.inheritance_chain,function(a){_.extend(b,
a())});_.extend(b.prototype,this.prototype);return b},listen:function(a,b){var d=this;_.isObject(a)&&_.each(a,function(a,b){d.listen(b,a)});if(typeof this.listeners==="undefined")this.listeners={};if(typeof this.listeners._global==="undefined")this.listeners._global=[];if(typeof a==="function")this.listeners._global.push(a);else return typeof this.listeners[a]==="undefined"&&(this.listeners[a]=[]),this.listeners[a].push(b),this},_broadcast:function(a,b,d){if(typeof this.listeners==="undefined")this.listeners=
{};if(typeof this.listeners._global==="undefined")this.listeners._global=[];var f,g=this;b=b||"";_.each(_.keys(a),function(f){typeof a[f]==="object"&&a[f]!==null&&!_.isArray(a[f])&&g._broadcast(a[f],b+f+".",d);typeof g.listeners[b+f]!=="undefined"&&_.each(g.listeners[b+f],function(b){b.call(g,a,d)})});if(!b)for(f=0;f<this.listeners._global.length;f+=1)this.listeners._global[f].call(this,a,d)},on_initialize:function(a){if(typeof this.initializers==="undefined")this.initializers=[];this.initializers.push(a)},
get_computed_values:function(){return a},set_computed_value:function(c,b,e){var f=this;a[c]=b;e&&_.isArray(e.changes_on)&&_.each(e.changes_on,function(a){f.prototype.on_change(a,function(){var a={};a[c]=this.get(c);this._broadcast(a)})})}}});_.extend(a,a.inheritance_chain[0]());a.prototype.initialize=function(a){var c=this,b=arguments;this.data={};a&&this.set(a);_.each(this.constructor.initializers,function(a){a.apply(c,b)});this.data.id&&(this.constructor.records[this.data.id]=this);this.constructor._broadcast({"new":this.data})};
a.prototype.on_change=a.prototype.listen=a.listen;a.prototype.change=function(){this._broadcast({})};a.prototype._broadcast=a._broadcast;a.prototype.set=function(a,c,b){function e(a,b){var c={},d;for(d in b)if(b.hasOwnProperty(d))if(typeof b[d]==="object"&&b[d]!==null)c[d]=a?e(a[d],b[d]):b[d];else if(!a||a[d]!==b[d])c[d]=b[d];return c}function f(a,b){var c={},d=a.shift();c[d]=a.length?f(a,b):b;return c}typeof a==="object"?b=c:a=typeof a==="string"?f(a.split("."),c):{};b||(b={});c=e(this.data,a);this.data=
_.extend(this.data,a);this._broadcast(c,void 0,b);return this};a.prototype.get=function(a){if(typeof a==="string"){if(typeof this.constructor.get_computed_values()[a]==="function")return this.constructor.get_computed_values()[a].call(this.data);a=a.split(".");var c=this.data;_.each(a,function(a){c=c[a]});return _.clone(c)}else return jQuery.extend(!0,{},this.data,this.compute_values())};a.prototype.compute_values=function(){var a=this.data,c={};_.each(this.constructor.get_computed_values(),function(b,
e){c[e]=b.call(a)});return c}})()})(this);
instrument_function(function(a){ApplicationModel=Model.extend(function(){return{records:{},find:function(a){var c=this;return _.isArray(a)?_.compact(_.map(a,function(a){return c.records[a]})):this.records[a]},every:function(a){_.each(this.records,a);this.listen("new",function(c){a.call(this,c["new"])})},has:function(d,c){function b(a){typeof a!=="object"?a=[a]:a.get&&(a=[a.get("id")]);return a}if(typeof this.prototype["has_"+d]==="undefined"){var e=c.through;this.prototype[d]=[];this.on_initialize(function(){this.on_change(d+
"_fetched",function(b){var c=this[d];b=_.compact(_.map(b[d+"_fetched"]||[],function(b){if(b&&b.id&&!_.include(c,b.id))return(new a[e](b)).get("id")}));this["set_"+d](_.union(c,b))})});this.prototype["get_"+d]=function(){return a[e].find(this[d])};this.prototype["has_"+d]=function(a){a=b(a);return a.length&&_(this[d]).difference(a).length===0};this.prototype["add_"+d]=function(a){a=b(a);a=_(a).difference(this[d]);if(a.length)this["set_"+d](_.union(this[d],a))};this.prototype["remove_"+d]=function(a){a=
b(a);a=_(a).intersection(this[d]);if(a.length)this["set_"+d](_(this[d]).difference(a))};this.prototype["set_"+d]=function(a){a=b(a);if(!_.isEqual(_.clone(a).sort(),_.clone(this[d]).sort())){this[d]=a;var c={};c[d]=a;this._broadcast(c)}}}}}});ApplicationModel.on_initialize(function(){this.data.id&&(this.constructor.records[this.data.id]=this)});_.each(["Backing","Checkout","Comment","Post","Project","User","ZendeskUser"],function(d){a[d]=ApplicationModel.extend()});Project.on_initialize(function(){if(typeof update_record===
"function")this.on_change(function(){update_record("Project",this.get())})});Project.has("creator",{through:"User"});Project.has("backers",{through:"User"});User.has("created_projects",{through:"Project"});User.has("backed_projects",{through:"Project"});User.has("backings",{through:"Backing"});User.prototype.api_url=function(a,c){var b=this.get("urls").api.user;if(b){typeof a==="string"&&(b=b.replace(/([^\?]*)(.*)/,function(b,c,g){return c+"/"+a+g}));if((c||typeof c==="undefined"&&a===!0)&&api_oauth_token)b=
oauth_url(b).replace(/http:/,"https:");return b}};Comment.on_initialize(function(){if(typeof update_record==="function")this.on_change(function(){update_record("Comment",this.get())})});Post.set_computed_value("post_likes",function(){if(this.likes_count<=0)return"";return this.likes_count+" "+formatters.pluralize("like",this.likes_count)},{changes_on:["likes_count","has_liked"]});Post.set_computed_value("post_likes_namepile",function(){var a,c;if(this.likes_count<=0)return"";a=[];a=_.map(this.likers,
function(a){return'<a href="'+a.urls.web.user+'" title="'+a.name+'">'+a.name+"</a>"});this.has_liked&&(typeof current_user==="undefined"?a.unshift("You"):a.unshift('<a href="'+current_user.data.urls.web.user+'" title="You">You</a>'));c=parseInt(this.likes_count,10)-a.length;c>0&&(this.urls&&this.urls.web&&this.urls.web.likes?a.push('<a href="'+this.urls.web.likes+'" title="see names" id="full_namepile">'+c+(a.length>0?" more ":" ")+formatters.pluralize("person",c)+"</a>"):a.push(c+" "+(a.length>0?
"more ":"")+formatters.pluralize("person",c)));return formatters.to_sentence(a)+" like"+(this.likes_count===1&&!this.has_liked?"s":"")+" this update."},{changes_on:["likes_count","likers","has_liked"]});Post.on_initialize(function(){if(typeof update_record==="function")this.on_change(function(){update_record("Post",this.get())})})})(this);
instrument_function(function(a){(function(){function d(){return URI(History.getState().url)}var c=Model.extend();c.uri=c.prototype.uri=function(){return d()};c.on_initialize(function(a,c,f,g){this.$view=c;this.template=f;this.original_uri=g.url?URI(g.url).equals(d().clone().query(""))?d():URI(g.url):d();this.current_params="";this.param_change_listeners=[];this.options=g;d().equals()?a&&this.change_params(d().query()):this.set_params(d().query(),!0);this.bind_events()});c.prototype.on_change_params=
function(a){this.param_change_listeners.push(a)};c.prototype.change_params=function(a){this.$view.html(render(this.template,this.get()));if(this.options.mobius_on&&!this.mobius)this.mobius=this.init_mobius(this.options.mobius_on);this.current_params=a;a!==d().query()?History.pushState({params:a},null,this.original_uri.query(a).hash("").toString()):History.replaceState({params:a},null,d().query(a).hash("").toString());this.mobius&&function(){var c=this.$mobius_context();this.mobius.current_page=1;
this.mobius.set_extra_params(a);this.mobius.$elem=this.$mobius_on();if(c.get(0)!==this.mobius.options.$context.get(0))this.mobius.options.$context=c,this.mobius.bind_events();this.get("total_pages")>1?(this.mobius.play(),this.mobius.check_for_more(),$(".mobius_load_more").show()):(this.mobius.pause(),$(".mobius_load_more").hide())}.apply(this);_.each(this.param_change_listeners,function(c){typeof c==="function"&&c(a)});this.change()};c.prototype.set_params=function(a,c){var d=this.original_uri.clone().query(a||
!1),g=this;if(!c&&a===this.current_params)return!1;$.ajax({url:d.suffix("json").toString(),dataType:"json",success:function(c){g.set(c);g.change_params(a)},error:function(a){growl({error:a.responseText})}});return!0};c.prototype.bind_events=function(){var a=this;$(window).on("statechange",function(){var c=History.getState().data;c&&typeof c.params==="string"&&a.set_params(c.params)})};c.prototype.$mobius_on=function(){var a=this.$view.find(".mobius_on");if(!a.length)a=this.$view;return a};c.prototype.$mobius_context=
function(){var a=this.$view.find(".mobius_context");a.length||(a=$(window));return a};c.prototype.init_mobius=function(a){var c=this,d=this.$mobius_on(),g=this.$mobius_context();this.$view.on("mobius:loaded_page",function(d,f,g){g[a]=c.get(a).concat(g[a]);f>=g.total_pages?(c.mobius.pause(),$(".mobius_load_more").hide()):(c.mobius.play(),$(".mobius_load_more").show());delete g.params.page;c.set(g)});return d.mobius({dataType:"json",url:this.original_uri.clone().query("").toString(),$context:g,paused:!0}).data("mobius")};
a.Location=c})()})(this);instrument_function(function(a){if(typeof current_project==="string")a.current_project=new Project($.parseEscapedJSON(current_project))})(this);instrument_function(function(a){$(function(){if(typeof current_user==="string")a.current_user=new User($.parseEscapedJSON(current_user))})})(this);
instrument_function(function(a){(function(){if(typeof current_checkout==="string")a.current_checkout=new Checkout($.parseEscapedJSON(current_checkout)),current_checkout.on_change(function(a,c){c.do_not_track||(a.reward?track("Checkout Reward Changed",namespace_keys("reward",a.reward)):typeof a.domestic!=="undefined"?track("Checkout Domestic Changed",_.extend(namespace_keys("reward",this.get("reward")),{reward_domestic:a.domestic})):a.amount&&track("Checkout Amount Changed",{amount:a.amount}))})})()})(this);
instrument_function(function(a){(function(){var d=[];a.track=function(){d.push(arguments)};$(function(){function c(a,b){_.each(_.keys(b),function(c){b[a+"_"+c]=b[c];delete b[c]});return b}function b(a){a=typeof a.get==="function"?a.get():a;var b=_.pick(a,["backers_count","country","currency","deadline","goal","last_update_published_at","launched_at","name","pledged","state","updates_count"]),d=moment.unix(a.deadline);b.pid=a.id;if(a.category)b.category_name=a.category.name,b.parent_category=a.category.parent?
a.category.parent.name:a.category.name;if(a.location)b.location=a.location.name;b.ref_tag=URI().query(!0).ref;b.hours_remaining=_.max([d.diff(moment(),"hours",!0),0]);b.duration=d.diff(moment.unix(a.launched_at),"days",!0);b.percent_raised=a.pledged/a.goal;if(a.rewards)b.rewards_count=a.rewards.count;b.has_video=a.video!==null;c("project",b);b.user_is_backer=a.is_backing;b.user_has_starred=a.is_starred;b.user_is_project_creator=typeof current_user!=="undefined"&&current_user.get("id")===a.creator.id;
return b}function e(a,c){mixpanel.track(a,_.extend({page_id:$("body").attr("id")},!_.contains(["undefined","string"],typeof current_project)?b(current_project):{},f,c))}var f,g;if(typeof mixpanel_id!=="undefined"){if($.support.localStorage&&$.support.localStorage()&&localStorage.mixpanel_debug==="true")a.mixpanel_debug=!0;mixpanel.init(mixpanel_id,{debug:mixpanel_debug});(g=read_cookie("ios_mp_distinct_id"))&&mixpanel.identify(g);a.visitor_id=function(){var a=read_cookie("mp_"+mixpanel_id+"_mixpanel");
return a!==null?$.parseJSON(decodeURIComponent(a)).distinct_id:null}();if(/^[0-9]+$/.test(a.visitor_id))mixpanel.unregister("distinct_id"),a.visitor_id=null;mixpanel.track_pageview();f={client_type:$("body.app_request").length?"native":"web",device_format:$("body.phone").length?"phone":$("body.tablet").length?"tablet":"desktop",ip_address:current_ip,ip_datacenter:current_ip_datacenter,window_inner_width:window.innerWidth,window_inner_height:window.innerHeight,screen_width:screen.width,screen_height:screen.height,
screen_avail_width:screen.availWidth,screen_avail_height:screen.availHeight,user_logged_in:typeof current_user!=="undefined",iphone_uuid:typeof ios_app_uuid!=="undefined"?ios_app_uuid:void 0,enabled_features:_.keys(enabled_features)};g=read_cookie("user_analytics_properties");g!==null&&(_.extend(f,$.parseJSON(decodeURIComponent(g))),mixpanel.name_tag(f.user_uid));_.each(d,function(a){e.apply(this,a)});a.track=e;a.track_links=function(a,c,d){window.setTimeout(function(){mixpanel.track_links(a,c,function(a){a=
$(a);return _.extend({selected_link:a.attr("data-original_text")?a.data("original_text"):$.trim(a.text()),page_id:$("body").attr("id")},!_.contains(["undefined","string"],typeof current_project)?b(current_project):{},d)})},1)};a.mixpanel_project=b;a.namespace_keys=c}})})()})(this);
instrument_function(function(){$(function(){$(document).on("mouseover","li.menu-dropdown",function(){$(this).find(".menu-submenu").show()});$(document).on("mouseout","li.menu-dropdown",function(){$(this).find(".menu-submenu").hide()});$(document).on("click",".hit-list li",function(){var a=$(this).find("a.target");if(a.length)window.location=a.attr("href")})})})(this);
instrument_function(function(){(function(){var a=History.isTraditionalAnchor;if(typeof History!=="undefined")History.isTraditionalAnchor=function(d){return d.indexOf("remote_modal_dialog")===0?!0:a.apply(this,arguments)}})();$(function(){$(".modal_dialog").livequery(function(){var a=$(this),b=a.attr("id");$(document).on("click","a.link_to_"+b,function(b){a.modal_dialog({event:b});b.preventDefault()});a.closest(".pop_modal_on_load").length&&a.modal_dialog()});$(document).on("click","a.remote_modal_dialog",
function(a){a.preventDefault();$(this).is(".disabled")||(a=$.open_remote_modal_dialog(URI($(this).attr("href")).suffix("js").toString(),{title:$(this).attr("data-modal-title"),id:$(this).attr("data-modal-id"),do_not_cache:$(this).attr("data-do_not_cache")?!0:!1,class_name:$(this).attr("data-modal-class"),theme:$(this).attr("data-modal-theme"),ignore_parent:$(this).attr("data-ignore_parent")?!0:!1,remote_modal_dialog_contents_loaded:function(a){a=a.find(".move_to_head");$("#global-zeroclipboard-html-bridge").css("position",
"fixed");a.length&&($("head").append(a.children()),a.remove())},dataType:"html"}),$(this).data("modal_dialog",a),a.$elem.on("modal_dialog:remote_dialog_loaded",function(){try{typeof FB!=="undefined"&&FB.XFBML&&FB.XFBML.parse()}catch(a){$.console.log(a)}}),track("Modal Dialog View",{modal_class:$(this).attr("data-modal-class"),modal_title:$(this).attr("data-modal-title"),page_id:$("body").attr("id")}))}).each(function(){var a=$(this);a.is(".pop_modal_on_load")&&a.click()});$(document).on("click","a.modal_dialog_close",
function(a){a.preventDefault();$("#global-zeroclipboard-html-bridge").css("position","absolute");$(this).trigger("close.modal_dialog")});$(document).on("click",".modal_dialog .pagination a",function(a){var b=$(this).closest(".modal_dialog_body"),d=$(this);b.height(b.height());a.preventDefault();$.ajax({url:d.attr("href"),type:"get",dataType:"html",beforeSend:function(a){a.setRequestHeader("Accept","text/javascript, */*")},success:function(a){b.html(a);$.scrollTo(b)}})});var a=/^#modal_dialog:([\-_a-zA-Z0-9]+)$/.exec(window.location.hash),
d=/^#remote_modal_dialog:(.*)$/.exec(window.location.hash);a&&(a=a[1],$("#"+a).modal_dialog(),window.location.replace("#"));d&&($("a.remote_modal_dialog").each(function(){url_equals(decodeURIComponent(d[1]),decodeURIComponent($(this).attr("href")))&&$(this).click()}),window.location.replace("#"));$("a.generate_modal_dialog").livequery(function(){var a=$(this),b=_.pick(a.data(),"id");$.create_modal_dialog(a.data("title"),a.data("content"),b)})})})(this);instrument_function(function(){})(this);
instrument_function(function(){$.videos_changed=function(){$(".video-player:visible").each(function(){$(this).ksr_video()})};$(document).on("ksr_video:pause_all_videos",function(){$(".video-player").trigger("ksr_video:pause")});$(".video-player:visible").livequery(function(){$(this).ksr_video()})})(this);instrument_function(function(){$(document).on("click","a[data-ping]",function(){var a=$(this).attr("data-ping");a&&($(this).removeAttr("data-ping"),$.get(a))})})(this);
instrument_function(function(){$(document).on("timer_added",".ksr_page_timer",function(){new ProjectTimer(this,window.ksr_page_clock)});$(".ksr_page_timer").livequery(function(){this.ksr_page_timer||$(this).trigger("timer_added")})})(this);
instrument_function(function(a){a.read_cookie=function(a){a+="=";var c=document.cookie.split(";"),b,e;for(b=0;b<c.length;b+=1){for(e=c[b];e.charAt(0)===" ";)e=e.substring(1,e.length);if(e.indexOf(a)===0)return e.substring(a.length,e.length)}return null};a.destroy_cookie=function(a,c){c||(c="/");window.document.cookie=a+"=; expires=Thu, 01 Jan 1970 00:00:01 GMT; path="+c}})(this);
instrument_function(function(a){$("#growl_section").on("click",function(a){$(a.target).is($(this))&&$(this).fadeOut("fast")});a.growl=function(a,c){$.each(a,function(a,d){typeof c==="undefined"&&(c={});if(a==="error")c.sticky=!0,$("#growl_section").addClass("sticky");$("#growl_section").jGrowl(d,$.extend(c,{theme:a,beforeOpen:function(){$("#growl_section").fadeIn("fast")},close:function(){$("#growl_section").fadeOut("fast")}}))})}})(this);
instrument_function(function(){$("span.character_counter").livequery(function(){var a=$(this);$(document).on("keyup",a.attr("rel"),function(){a.html(parseInt($(this).attr("maxlength"),10)-$(this).val().length)})})})(this);instrument_function(function(){$("form").livequery("submit",function(a){var d=$(this);d.attr("submitting")?a.preventDefault():d.attr("target")||($(window).unload(function(){d.removeAttr("submitting")}),d.attr("submitting","true"))})})(this);
instrument_function(function(){$(function(){$(document).tipsy({gravity:"s",live:"a.tip"});$(document).tipsy({gravity:"s",live:".tipsy"});$(document).tipsy({gravity:"n",html:!0,live:".tipsy_below",fade:!0});$(document).tipsy({gravity:"s",html:!0,live:".tipsy_above",fade:!0})})})(this);instrument_function(function(){$(document).on("click","input#share_a_link",function(){$("#share_a_link").focus().select()})})(this);
instrument_function(function(){$(".keep-or-delete").livequery(function(){var a=$(this).closest("li"),d=$(this).find("a").show(),c=$(this).find(".checkbox").hide();d.on("click",function(){d.attr("disabled")||(c.prop("checked",!1),a.hide(),a.trigger("nested_attributes_list:removed"))})});$("a.add-another").livequery(function(){var a=$(this).show(),d=$(a.attr("rel")).hide();a.on("click",function(c){var b=(new Date).getTime(),e=d.clone().attr("id","").show();e.find("input, textarea, select").each(function(a,
c){c.name=c.name.replace(/new_[a-z_]*/,b)});e.find(".checkbox").prop("checked",!0);a.attr("data-target-selector")?$(a.attr("data-target-selector")).append(e):d.before(e);e.trigger("nested_attributes_list:added");c.preventDefault()})})})(this);
instrument_function(function(){$("form.requires-confirmation").livequery("submit",function(a){var d=$(this);$(this).find("input.confirmation").is(":checked")||(setTimeout(function(){d.removeAttr("submitting")},100),growl({error:"Please accept the Guidelines."}),a.preventDefault())})})(this);
instrument_function(function(){$(document).on("click",".removeable .remove",function(){var a=$(this);(!a.data("confirm")||confirm(a.data("confirm")))&&$.post(a.attr("href"),{_method:"delete"},function(){a.parents(".removeable").fadeOut(400,function(){$(this).remove()})});return!1})})(this);
instrument_function(function(a){KsrJSON={get:function(a,c,b,e){if(b.hasClass("loading"))return!1;b.trigger("before_ksrjson",[b,e]);$.ajax({url:a,type:c||"GET",data:{format:"json"},dataType:"json",beforeSend:function(){b.addClass("loading")},success:function(a){KsrJSON.parse_response(a,b)},complete:function(){b.removeClass("loading")}});return!1},enable_form:function(a,c){a.ajaxForm({url:a.attr("action"),data:{format:"json"},dataType:"json",beforeSubmit:function(){if(a.data("disabled"))return growl({error:"Sorry, still waiting for a response. Please try refreshing if this problem persists."}),
!1;if(a.find("input.confirmation"))return a.find("input.confirmation").attr("checked")},beforeSend:function(b){b.setRequestHeader("Accept","text/javascript, */*");c.addClass("loading");a.data("disabled",!0)},beforeSerialize:function(){a.trigger("ajaxForm:beforeSerialize")},success:function(b){KsrJSON.parse_response(b,c,a)},error:function(b){KsrJSON.parse_error(b,c,a)},complete:function(){c.removeClass("loading");a.data("disabled",!1)}})},parse_response:function(a,c,b){var e={open:function(){$(b).trigger("jGrowl.open_"+
a.status)},close:function(){$(b).trigger("jGrowl.close_"+a.status)}},f;c.trigger("ksr_json:complete",a);$.isArray(a.flash)&&$.isArray(a.flash[0])?growl($.map(a.flash,function(a){return a[a.length-1]}),e):a.flash&&growl(a.flash,e);a.page_load&&$.console.log(a.page_load);switch(parseInt(a.status,10)){case 200:case 406:e=$(a.data);a.data&&a.data.length>0&&(a.modal?(e=$.create_modal_dialog("",a.data),e.data("modal_dialog").open(),typeof FB!=="undefined"&&FB.XFBML.parse(e.find(".modal_dialog_body")[0])):
(e.find("a.cancel").length>0?(f=c.contents().detach(),e.find("a.cancel").one("click",function(){c.contents().remove();f.appendTo(c);return!1})):c.contents().remove(),c.html(e),c.trigger("size_change"),typeof FB!=="undefined"&&FB.XFBML.parse(c[0])));a.tooltips&&a.tooltips.length>0&&c.append(a.tooltips);$('meta[name="csrf-token"]').attr("content",a.auth_token);break;case 204:c.remove();break;case 302:window.location.href=a.data.replace(/.json$/,"");break;case 303:c.load(a.data,function(){$('meta[name="csrf-token"]').attr("content",
a.auth_token)});break;case 304:break;case 500:growl({error:"Sorry, something went wrong. We've been notified and are looking into it."});break;case 422:growl({error:"Sorry, something went wrong. Your form may have expired -- please refresh and try again?"});break;default:$.console.log(a.status)}return a},parse_error:function(a,c,b){KsrJSON.parse_response({flash:{},status:a.status,data:a.body},c,b)}};a.match_protocol=function(a){var c=/^\w+:\/\//,b;if(c.test(a))b=window.location.protocol,a=a.replace(c,
b+"//");return a};a.monkey_patch_ajax_protocol_matching=function(a){$[a.name]=function(c){if(c.url&&(!c.dataType||c.dataType!=="jsonp"))c.url=match_protocol(c.url);return a.callback.call(this,c)}};(function(){_.each([{name:"ajax",callback:$.ajax},{name:"api_ajax",callback:$.api_ajax}],function(a){a.callback&&monkey_patch_ajax_protocol_matching(a)})})();$(document).ajaxSend(function(a,c,b){b.type!=="GET"&&c.setRequestHeader("X-CSRF-Token",$('meta[name="csrf-token"]').attr("content"))});$("form[data-ksrjson]").livequery(function(){var a=
$([]);$(this).attr("data-target")?a=$($(this).attr("data-target")):$(this).closest(".ajax-container").length?a=$(this).closest(".ajax-container"):$(this).closest(".modal_dialog").length>0&&(a=$(this));a.length>0&&KsrJSON.enable_form($(this),a)});$(document).on("click","a[data-ksrjson]",function(a){var c=$(this),b=$(c.attr("data-target"));a.preventDefault();b.length===0&&(b=c.closest(".ajax-container"));if(b.length===0)return!0;return KsrJSON.get(c.attr("href"),c.attr("data-ksrmethod"),b,this)});$(".ajax-container .async-reload").livequery(function(){function a(){$.ajax({url:window.location.href,
data:{format:"json"},dataType:"json",success:function(b){b=KsrJSON.parse_response(b,c);c.trigger("after_asyncreload");b.status===304&&setTimeout(a,1E3)}})}var c=$(this).closest(".ajax-container");a()})})(this);instrument_function(function(){$(function(){$(document).on("click",".location_list .big_locations li",function(){window.location=$(this).find(".name a").attr("href")})})})(this);
instrument_function(function(){$(".field.search.location-search").livequery(function(){var a=$(this);a.on("livesearch_selector:select",function(){$(this).siblings("span.input-tip").hide();$(this).parent().siblings("span.input-tip").hide();$(this).trigger("shifted")});a.on("livesearch_selector:unselect",function(){$(this).siblings("span.input-tip").show();$(this).parent().siblings("span.input-tip").show();$(this).trigger("shifted")});a.livesearch_selector({url:"/locations/find.js",cancel_copy:"",process_data:function(){return{q:this.$elem.val()}}})});
$("input.date").livequery(function(){$(this).datetime_picker_field({calendar:{allow_deselect:!1,previous_month_text:"<",next_month_text:">"},parse_callback:function(a){return a?moment(a,"MM/D/YYYY hh:mm a").toDate():new Date},format_callback:function(a){return a?moment(a).format("MM/D/YYYY hh:mm a"):""}})});$("input.datetime").livequery(function(){var a=$(this),d=a.data("options")||{};a.datetime_picker_field(_.extend({calendar:{allow_deselect:!1,previous_month_text:"<",next_month_text:">",time_text:"Time:"},
position:a.is(".position_calendar_below")?"bottom":"right",parse_callback:function(a){return a?moment(a,"MM/D/YYYY hh:mm a").toDate():new Date},format_callback:function(a){return a?moment(a).format("MM/D/YYYY hh:mm a"):""}},d))});(function(){var a=$("form ul.sortable, form ol.sortable, form tbody.sortable"),d=!1;a.find(".move").length&&(d=".move");a.find(".move").click(function(a){a.preventDefault()});a.sortable({containment:"document",axis:"y",handle:d,update:function(){a.find("input.position").each(function(a){$(this).val(a)})}});
a.each(function(){var a=$(this);a.closest("form").submit(function(){a.find("input.position").each(function(a){$(this).val(a)})})});$(document).on("click",".dropdown_container .title",function(){var a=$(this).parents(".dropdown_container");a.is(".open")?a.removeClass("open"):(a.addClass("open"),setTimeout(function(){$(window).one("click",function(b){$(b.target).closest(a).length||a.removeClass("open")})},0))})})()})(this);
instrument_function(function(){$(function(){$(".mobius.click").livequery(function(){var a=$(this),d=a.parent().find("a.load_more");a.mobius({trigger_next:d,prepend_next:a.data("mobius_append")?!1:!0,url:a.data("mobius_url")||!1});a.data("mobius");a.on("mobius:loaded_page",function(c,b,e){a.parent().find(".count .current").text(a.find("li.item").length);e.data("last_page")?d.parent().hide():d.parent().show()})});$(".mobius:not(.click)").livequery(function(){function a(){g=d.find("*[data-cursor]:last")}
var d=$(this),c,b,e,f,g,j;if(!d.find(".page").data("last_page"))a(),j=g.length,c=d.mobius({url:d.data("url"),paused:d.is(".paused"),page_param:j?"cursor":"page",extra_params:d.data("extra_params")||"",page_by:function(b){return j?(a(),g.data("cursor")):b?b+1:1}}).data("mobius"),d.length&&(b=$(".mini_footer"),f=$("#etc"),f.mouseenter(function(){b.css({opacity:1})}),b.mouseleave(function(){b.css({opacity:0})}),d.on("mobius:loaded_page",function(a,f,g){g.data("last_page")?(c.pause(),d.siblings(".load_more").hide(),
e=b.clone(),b.remove()):(c.play(),d.siblings(".load_more").show(),$("body").append(e))}))})})})(this);
instrument_function(function(){$(function(){var a,d=!1;$(document).on("zeroclipboard:initialize",".zeroclipboard",function(){d?a.glue($(".zeroclipboard")):ZeroClipboard.detectFlashSupport()&&(ZeroClipboard.setDefaults({moviePath:"/assets/bower_components/zeroclipboard/ZeroClipboard.swf"}),a=new ZeroClipboard,a.setHandCursor(!0),a.addEventListener("onComplete",function(a,b){$(document).trigger("zeroclipboard:click");var d=$(this),f;d.is(".clippy")&&d.data("text")+""===b.text&&(f=d.text(),d.text("Copied!"),
setTimeout(function(){d.text(f)},1E3))}),a.glue($(".zeroclipboard")),d=!0)}).on("mouseenter",".zeroclipboard",function(){ZeroClipboard.detectFlashSupport()&&a.setText($(this).data("text"))});$(".zeroclipboard").livequery(function(){$(this).trigger("zeroclipboard:initialize")});$(document).on("send_clippy_away",".zero_clipboard_wrapper",function(){$(this).css({top:"0",left:"-100000px"})});$(document).on("tab",function(){$(".zero_clipboard_wrapper").trigger("send_clippy_away")})})})(this);
instrument_function(function(){$(function(){$(".overlabels .field label.overlabel").livequery(function(){var a=$(this),d=a.siblings("input:not([type=hidden]), textarea, .wym_box");d.length||(d=a.parent(".field_with_errors").siblings(".field_with_errors").find("input, textarea"));d.length?(a.addClass("overlabel-apply"),d.val()&&a.hide(),d.focus(function(){$(this).val()&&a.hide();a.addClass("field_focused")}).blur(function(){$(this).val()||a.show();a.removeClass("field_focused")}).on("keydown input change paste cut",
function(){var c=$(this);setTimeout(function(){c.val()?a.hide():a.show()},1)}),a.click(function(){d.attr("disabled")||d.focus()})):a.hide()})})})(this);
instrument_function(function(){$(function(){if(!$.support.JSON()||!$.support.localStorage())track("Project Bar Unsupported Browser");else{var a=$("#project_bar"),d=localStorage.history;try{d=$.parseJSON(d),d.version<2&&function(){var a=[];try{localStorage.history_v1=localStorage.history}catch(c){}$.each(d.projects,function(){this.project?a.push(this):a.push({project:{id:this.id,creator:{name:this.byline},photo:{little:"http://s3.amazonaws.com/ksr/projects/"+this.id+"/photo-little.jpg"},urls:{web:{project:this.path}},
name:this.title},last_seen_on:this.last_seen_on})});d={projects:a,version:2}}()}catch(c){d={projects:[],version:2}}d===null&&(d={projects:[],version:2});typeof current_project!=="undefined"&&function(){if(current_project.get("id")){$.each(d.projects,function(a){var b=this.project;if(b&&b.urls.web.project&&url_equals(b.urls.web.project,current_project.get("urls").web.project)){b=d.projects;var c=b.slice(a+1||b.length);b.length=a<0?b.length+a:a;b.push.apply(b,c)}});d.projects.push({last_seen_on:(new Date).toString(),
project:current_project.data});if(d.projects.length>200)track("Project Bar History Trimming"),d.projects=d.projects.slice(-200);try{localStorage.history=JSON.stringify(d)}catch(a){}}}();a.length&&function(){function b(){if(k){var b=a.find("h1.next");a.find(".next, .prev").addClass("disabled").removeClass("enabled");l!==o&&a.find(".next").removeClass("disabled").addClass("enabled");l!==0&&a.find(".prev").removeClass("disabled").addClass("enabled");l===o?b.fadeIn():b.fadeOut()}}var c=a.find("ol.projects"),
f=c.parent(),g=c.find(".page:last ol"),j=!1,k=!1,l=0,o;d.projects&&d.projects.length>1&&($.each(d.projects.slice(0,d.projects.length-1).reverse(),function(){if(this!==window){var a=this.project,b=new Date(this.last_seen_on);if(a){a.image_prefix=c.children().length===1?"":"data-";a.seen_on_formatted=b.getMonth()+1+"/"+b.getDate()+"/"+b.getFullYear();if(a.photo&&typeof a.photo.little==="string")a.photo.little=a.photo.little.replace(/images\/compass\//,"assets/compass/");a=$(render("projects/_history_bar_project",
a));g.children().length>2&&(g=$('<li class="page"><ol></ol></li>'),c.append(g),k=!0,g=g.find("ol"));g.append(a)}}}),k&&a.find(".arrow").show(),a.removeClass("hidden"));f.serialScroll({items:"li.page",lazy:!0,lock:!1,cycle:!1,duration:500,easing:"easeOutExpo"});a.on("click",".arrow",function(a){a.preventDefault();j||(c.find("li img").each(function(){var a=$(this);a.data("src")&&a.attr("src",a.data("src"))}),j=!0)});a.on("click",".next:not(.disabled)",function(){track("Project Bar Next Page");f.trigger("next");
l+=1;b()});a.on("click",".prev:not(.disabled)",function(){track("Project Bar Previous Page");f.trigger("prev");l-=1;b()});o=c.children("li.page:last").index();b()}()}})})(this);
instrument_function(function(a){$(document).ready(function(){if(typeof _gat!=="undefined"){var d,c,b=0;if(typeof JSON!=="undefined"&&typeof localStorage!=="undefined")try{d=JSON.parse(localStorage.history)}catch(e){}if(d&&d.projects)b=d.projects.length;d=$("#projects_show").length>0?$("#about").attr("data-project-state"):"NA";c=$("#project_category").length>0?$("#project_category").attr("data-project-category"):"NA";try{a.pageTracker=_gat._createTracker(analytics_vars.google_analytics_id),pageTracker._setCustomVar(1,
"project-category",c,3),pageTracker._setCustomVar(2,"logged-in-user-pageviews",analytics_vars.logged_in,3),pageTracker._setCustomVar(3,"social-user",analytics_vars.social_user,3),pageTracker._setCustomVar(4,"repeat-project-viewer",b,1),pageTracker._setCustomVar(5,"project-state",d,3)}catch(f){}try{pageTracker._trackPageview()}catch(g){}}})})(this);
instrument_function(function(){var a;jQuery(document).on("livesearch:results",function(c,b){var d,f=$(c.target).val();d=b.projects?b.projects.length:b.length;a=$(c.target).attr("data-tracker-name");typeof pageTracker!=="undefined"&&pageTracker._trackEvent(a,"Term",f,parseInt(d,10))});var d;jQuery(document).on("livesearch:searching",function(){d=!0});jQuery(document).on("livesearch:cancel",function(){d&&(typeof pageTracker!=="undefined"&&pageTracker._trackEvent(a,"Cancels"),d=!1)});jQuery(document).ready(function(){var a;
try{a=JSON.parse(localStorage.history)}catch(b){return}$("#project_bar").length>0&&typeof pageTracker!=="undefined"&&a&&a.projects.length>1&&($("#project_bar").livequery(function(){pageTracker._trackEvent("Project Bar","Show")}),$("#project_bar .next").on("click",function(){pageTracker._trackEvent("Project Bar","Next")}),$("#project_bar .prev").on("click",function(){pageTracker._trackEvent("Project Bar","Previous")}),$("#project_bar .minimize").on("click",function(){pageTracker._trackEvent("Project Bar",
"Minimized")}),$("#project_bar .maximize").on("click",function(){pageTracker._trackEvent("Project Bar","Maximized")}))});jQuery(document).ready(function(){$(".home-editorial-title").on("click",function(){var a=$(this).html();typeof pageTracker!=="undefined"&&pageTracker._trackEvent("Faux-Category on Homepage Clicks",a)})});jQuery(document).ready(function(){$(".home-editorial-title").on("click",function(){var a=$(this).html();typeof pageTracker!=="undefined"&&pageTracker._trackEvent("Faux-Category on Homepage Clicks",
a)})});jQuery(document).ready(function(){$(".export").find("a").on("click",function(){typeof pageTracker!=="undefined"&&pageTracker._trackEvent("Export Reward Report","Download Click")})});jQuery(document).ready(function(){$("#results_properties").livequery(function(){var a=$(this).children("#number_of_results").text(),b=$(this).children("#term").text();typeof pageTracker!=="undefined"&&pageTracker._trackEvent("Search Results","Term",b,parseInt(a,10))})});jQuery(document).ready(function(){$("#pledges_login_or_signup #growl_section .error").livequery(function(){var a=
$(this).children(".message").html(),b=$(document).attr("URL");typeof pageTracker!=="undefined"&&pageTracker._trackEvent("Checkout Login Errors",a,b)});$("#checkout-signup .fieldset-errors").livequery(function(){var a=$(this).children("ul").children(),b=$(document).attr("URL");$.each(a,function(a,c){c=c.innerHTML;typeof pageTracker!=="undefined"&&pageTracker._trackEvent("Checkout Signup Errors",c,b)})});$("#sessions_new #growl_section .error").livequery(function(){var a=$(this).children(".message").html(),
b=$(document).attr("URL");typeof pageTracker!=="undefined"&&pageTracker._trackEvent("Regular Login Errors",a,b)});$("#new_user .fieldset-errors").livequery(function(){var a=$(this).children("ul").children(),b=$(document).attr("URL");$.each(a,function(a,c){c=c.innerHTML;typeof pageTracker!=="undefined"&&pageTracker._trackEvent("Regular Signup Errors",c,b)})})});jQuery(document).ready(function(){$(".share-box").on("click","a",function(){var a=$(this).attr("data-tracker-name");typeof pageTracker!=="undefined"&&
pageTracker._trackEvent("Sharing",a)});$("#checkout-project-share").on("click","a",function(){var a=$(this).attr("data-tracker-name");typeof pageTracker!=="undefined"&&pageTracker._trackEvent("Sharing",a)});$(document).on("zeroclipboard:click",function(){typeof pageTracker!=="undefined"&&pageTracker._trackEvent("Sharing","Copied Link")});$(document).on("fb:loaded",function(){FB.Event.subscribe("edge.create",function(){typeof pageTracker!=="undefined"&&pageTracker._trackEvent("Sharing","Facebook Like")})})});
$(function(){var a;$("#video-section object").livequery(function(){a=$(this)[0];$("#projects_show").size>0&&$("#button-back-this-proj").attr("href");$(document).attr("URL")});$(document).on("click","#video-section",function(){$("#button-back-this-proj").attr("href");$(document).attr("URL");if(a){var b=a;b.addModelListener("TIME","timeStats");b.addModelListener("STATE","getState")}});$(window).on("beforeunload",function(){})});jQuery(document).on("modal_dialog:opened",function(a){a=$(a.target).find(".modal_dialog_head h4").text();
typeof pageTracker!=="undefined"&&pageTracker._trackEvent("Modal Dialog","Opened",a)});jQuery(document).ready(function(){$(".faq-question a").click(function(){var a=$("body[id]").length?$("body").attr("id"):"No ID",b=$(this).closest(".faq"),d=$(this).find(".question").text();typeof pageTracker!=="undefined"&&!b.hasClass("expanded")&&pageTracker._trackEvent("FAQ","Expanded - "+a,d)})});jQuery(document).ready(function(){$(document).on("click","a#edit_survey_response",function(){typeof pageTracker!==
"undefined"&&pageTracker._trackEvent("Surveys","Click","Edit Survey Response")})});jQuery(document).ready(function(){$(document).on("click","ul#admin-menu > li > a",function(){typeof pageTracker!=="undefined"&&pageTracker._trackEvent("Admin","Nav Click",$(this).text())})});jQuery(document).ready(function(){var a=0;$(".scissors").on("click",function(){a<2?(typeof pageTracker!=="undefined"&&pageTracker._trackEvent("Scissors","Clicks"),a+=1):typeof pageTracker!=="undefined"&&pageTracker._trackEvent("Scissors",
"Chops")})});jQuery(document).ready(function(){var a=1;$(document).on("infinite_scroll:scrolled_to",function(b,d){if(d>a){var f=window.location.pathname+window.location.search+window.location.hash;typeof pageTracker!=="undefined"&&pageTracker._trackPageview(f);a=d}})})})(this);instrument_function(function(){$(function(){var a=$(document).children();$.support.fontFace()||a.removeClass("fontface")})})(this);
instrument_function(function(){$(document).ready(function(){$(".sortable_table").tablesorter({sortInitialOrder:"desc",textExtraction:function(a){var d;d=$(a).closest("td").attr("data-table-value");return typeof d!=="undefined"?d:a.innerHTML.replace(/[,?!\s,%$]/g,"")}})})})(this);
instrument_function(function(){(function(){$(document).on("click","a.facebook_login",function(a){var d=$(this);a.preventDefault();FB.usingButton=!0;FB.login(function(a){if(a.authResponse){var b=window,e;e=d.attr("href");a=$.param({fbsr:a.authResponse.signedRequest});e=e.indexOf("?")===-1?e+"?"+a:e+"&"+a;b.location=e}FB.usingButton=!1},{scope:"email,user_location,user_hometown,user_likes"})})})()})(this);
instrument_function(function(){(function(){var a={$:"jquery",_:"../../../../../vendor/assets/javascripts/bower_components/underscore/underscore.js"},d={};if(typeof require==="function")for(var c in a)a.hasOwnProperty(c)&&(this[c]=require(a[c]));if(typeof exports!=="undefined"){if(typeof module!=="undefined"&&module.exports)exports=module.exports=d;exports.formatters=d}else this.formatters=this.formatters||d;d=_.extend(this.formatters||{},{currency_symbol:function(a){return this.currency_symbol_mappings[a]},
money:function(a,c,d){isNaN(d)&&(d=0);return this.currency_symbol(a)+this.format_number(c,d)},format_number:function(a,c,d,g){c=isNaN(c)?2:Math.abs(c);d=d||".";g=typeof g==="undefined"?",":g;var j=a<0?"-":"",k=String(parseInt(a=Math.abs(a).toFixed(c),10)),l;l=(l=k.length)>3?l%3:0;return j+(l?k.substr(0,l)+g:"")+k.substr(l).replace(/(\d{3})(?=\d)/g,"$1"+g)+(c?d+Math.abs(a-k).toFixed(c).slice(2):"")},pluralize:function(a,c){function d(a,b){var f=k[p+(c===1?0:1)-p%2];typeof b!=="undefined"&&(f=f.replace(/\(.*\)/,
b));return f}function g(a,b){return b.toUpperCase()}for(var j=a,k=["zombie","zombies","cow()","ki(i?)ne","move","moves","sex","sexes","child","children","man","men","person","people","database","databases","quiz","quizzes","matrix","matrices","(vert|ind)ex","(vert|ind)ices","(^ox)","(^ox)en","(alias|status)","(alias|status)es","(octop|vir)us","(octop|vir)i","(cris|ax|test)is","(cris|ax|test)es","shoe","shoes","o","oes","bus","buses","(m|l)ouse","(m|l)ice","(x|ch|ss|sh)","(x|ch|ss|sh)es","movie","movies",
"series","series","([^aeiouy]|qu)y","([^aeiouy]|qu)ies","([lr])f","([lr])ves","tive","tives","hive","hives","([^f])fe","([^f])ves","(analy|ba|diagno|parenthe|progno|synop|the)sis","(analy|ba|diagno|parenthe|progno|synop|the)ses","([ti])um","([ti])a","news","news","([^s])","()s"],l=_.map(k,function(a){return RegExp(a+"$","i")}),o=!1,p=0,h;!o&&p<k.length;)p+=1,h=l[p],a.match(h)&&(o=!0,j=a.replace(h,d),a.match(/^[A-Z][^A-Z]+$/)?j=j.replace(/^([a-z])/,g):a.match(/^[A-Z]+$/)&&(j=j.toUpperCase()));return j},
capitalize:function(a){if(typeof a!=="string")return"";return a.replace(/^(\w)|\s(\w)/g,function(a){return a.toUpperCase()})},to_sentence:function(a,c){c=$.extend({},{words_connector:", ",two_words_connector:" and ",last_word_connector:", and "},c);switch(a.length){case 0:return"";case 1:return String(a[0]);case 2:return a[0]+c.two_words_connector+a[1];default:return a.slice(0,-1).join(c.words_connector)+c.last_word_connector+_.last(a)}}})})()})(this);
instrument_function(function(a){a.Spinner=a.Spinner||{};Spinner.defaults={className:""}})(this);instrument_function(function(a){$(function(){a._qoptions={qacct:"p-34IbSpw2K94Sg"};$.getScript("//secure.quantserve.com/quant.js")})})(this);instrument_function(function(a){$(function(){a._sf_async_config={uid:5536,domain:window.location.hostname.replace("www.","")};a._sf_endpt=(new Date).getTime();$.getScript("//a248.e.akamai.net/chartbeat.download.akamai.com/102508/js/chartbeat.js")})})(this);instrument_function(function(){$(function(){$.getScript("//platform.twitter.com/widgets.js")})})(this);
instrument_function(function(){$(".sound_player:visible").livequery(function(){$(this).sound_player()})})(this);instrument_function(function(){$(function(){$(".render_mustache").livequery(function(){var a=$(this),d=_.extend(a.data("data"),a.data("extend")),c=a.data("partials").split(","),b=a.data("template");a.append(render(b,d,c))})})})(this);instrument_function(function(){$.fn.validate.defaults.on_valid.push(function(a){$(a).removeClass("errored")});$.fn.validate.defaults.on_invalid.push(function(a){$(a).addClass("errored")})})(this);
instrument_function(function(a){a.Honeybadger&&a.honeybadger_configuration&&Honeybadger.configure(honeybadger_configuration)})(this);
instrument_function(function(a){(function(){function d(){var a=navigator.language,c=_.map(navigator.mimeTypes,function(a){return a.type}).join(","),d=_.map(navigator.plugins,function(a){return a.name+"|"+a.filename+"|"+a.description}).join("\n"),g;try{g=_.pluck(document.getElementById("font-detect-swf").fonts(),"fontName")}catch(j){g=[]}return{language:a,mime_types:c,plugins:d,fonts:g.join.call(g,","),screen_resolution:screen.availWidth+"x"+screen.availHeight+"x"+screen.colorDepth,time_zone:(new Date).getTimezoneOffset(),
user_agent:navigator.userAgent}}function c(){var a={onReady:String(function(a){$(document).trigger("fontsDetected",[a])}),swfObjectId:"font-detect-swf"},c=document.createElement("div");c.id="font-detect-swf";document.body.appendChild(c);swfobject.embedSWF("/assets/FontList.swf","font-detect-swf","1","1","9.0.0",!1,a,{allowScriptAccess:"always",menu:"false"},{id:"font-detect-swf",name:"font-detect-swf"})}a.log_device=function(){var a=function(){$.post("/devices",{device:d()})};swfobject.hasFlashPlayerVersion("9.0.0")?
($(document).on("fontsDetected",a),c()):a.call()};Math.random()<0.05&&a.log_device()})()})(this);
instrument_function(function(){(function(){presenters["backer_report/_index"]=function(a){_.each(_.keys(a.facets),function(d){_.each(_.keys(a.facets[d]),function(c){a.facets[d][c]={count:a.facets[d][c]}})});a.facets.must_have_creator_note={"true":{},"false":{}};a.currency_symbol=current_project.get("currency_symbol");a.not_filtered=!0;if(a.params){_.each(_.keys(a.params),function(d){_.has(a.facets,d)?(a.facets[d][a.params[d]]||(a.facets[d][a.params[d]]={}),a.facets[d][a.params[d]].selected=!0):(a.facets[d]=
{})[a.params[d]]={selected:!0}});a.params.sort_by&&(a.params["sort_by_"+a.params.sort_by]=" "+(a.params.asc_or_desc||"asc"));if(a.params.reward_id){a.selected_reward=_.findWhere(a.rewards,{id:parseInt(a.params.reward_id,10)});if(!a.selected_reward)a.selected_reward=_.findWhere(a.rewards,{id:"none"});a.selected_reward.selected=!0}_.each(["survey_answered","completed","must_have_creator_note","status"],function(d){if(a.params[d])a.not_filtered=!1})}if(a.project.state==="successful")a.project.is_successful=
!0;a.show_facets=a.total_entries>0||!(a.params&&a.params.term&&!a.params.creator_note&&!a.params.creator_note_not);a.formatted_total_entries=formatters.format_number(a.total_entries,0);_.each(a.rewards,function(a){a.formatted_minimum=formatters.format_number(a.minimum,0);a.truncated_description=a.reward.length>35?a.reward.substring(0,35)+"\u2026":a.reward});return a}})()})(this);
instrument_function(function(){(function(){presenters["backer_report/_row"]=function(a){a.formatted_pledged_at=moment(a.pledged_at*1E3).format("MMM D, YYYY");a.formatted_survey_answered_at=moment(a.survey_answered_at*1E3).format("MMM D, YYYY");a.formatted_amount=formatters.format_number(a.amount,2);a.currency_symbol=current_project.get("currency_symbol");a.is_domestic=a.domestic===!0;a.is_international=a.domestic===!1;return a}})()})(this);
instrument_function(function(){(function(){presenters["funnels/_backing"]=function(a){a.formatted_pledged_at=moment(a.pledged_at*1E3).format("MMM D, YYYY");a.project_successful=a.project.state==="successful";a.project_live=a.project.state==="live";a.project_failed=a.project.state==="failed";a.project_canceled=a.project.state==="canceled";a.project_suspended=a.project.state==="suspended";return a}})()})(this);
instrument_function(function(){(function(){presenters["funnels/_backing_details"]=function(a){a.formatted_created_at=moment(a.pledged_at*1E3).format("MMM D, YYYY");a.project.formatted_deadline=moment(a.project.deadline*1E3).format("MMM D, YYYY");if(a.reward&&a.reward.reward.match(/^no reward$/i))a.reward=void 0;if(a.reward)a.reward.formatted_estimated_delivery_on=moment(a.reward.estimated_delivery_on*1E3).format("MMM YYYY");a.pledged_live=a.status==="pledged"&&a.project.state==="live";a.pledged_failed_or_canceled=
a.status==="pledged"&&(a.project.state==="failed"||a.project.state==="canceled");a.collected=a.status==="collected";a.errored=a.status==="errored";a.canceled_or_dropped=a.status==="canceled"||a.status==="dropped";a.project_successful=a.project.state==="successful";a.project_live=a.project.state==="live";a.project_failed=a.project.state==="failed";a.project_canceled=a.project.state==="canceled";a.project_suspended=a.project.state==="suspended";a.show_status_tooltip=a.status==="pledged"&&(a.project.state===
"failed"||a.project.state==="canceled"||a.project.state==="suspended");return a}})()})(this);
instrument_function(function(){(function(){presenters["funnels/_project_details"]=function(a){a.formatted_money=formatters.money(a.currency,a.pledged);if(a.launched_at)a.formatted_launched_at=moment(a.launched_at*1E3).format("MMM D, YYYY");a.formatted_created_at=moment(a.created_at*1E3).format("MMM D, YYYY");a.formatted_deadline=moment(a.deadline*1E3).format("MMM D, YYYY");a.successful=a.state==="successful";a.live=a.state==="live";a.failed=a.state==="failed";a.started=a.state==="started";a.submitted=
a.state==="submitted";a.canceled=a.state==="canceled";a.suspended=a.state==="suspended";a.ended=a.state==="successful"||a.state==="failed"||a.state==="canceled";a.preview_link=(new URI(a.urls.web.edit)).fragment("preview").toString();return a}})()})(this);instrument_function(function(){(function(){window.presenters["funnels/_text"]=function(a){if(a.backing)a.backing.formatted_amount=formatters.format_number(a.backing.amount);return a}})()})(this);
instrument_function(function(a){(function(){presenters["funnels/contact"]=function(d){var c=d.user,b=a.funnel_user_backings?a.funnel_user_backings.length-_.compact(a.funnel_user_backings).length:0;d.projects=_.map(c.get_created_projects(),function(a){a=a.get();if(a.launched_at)a.formatted_launched_at=moment(a.launched_at*1E3).format("MMM D, YYYY");a.formatted_created_at=moment(a.created_at*1E3).format("MMM D, YYYY");a.formatted_deadline=moment(a.deadline*1E3).format("MMM D, YYYY");a.successful=a.state===
"successful";a.live=a.state==="live";a.failed=a.state==="failed";a.started=a.state==="started";a.submitted=a.state==="submitted";a.canceled=a.state==="canceled";a.suspended=a.state==="suspended";return a});d.project_groups=_.map(_.groupBy(d.projects,function(a){if(a.state==="live")return"Live projects";if(a.ended)return"Ended projects";return"Started projects"}),function(a,b){return{k:b,v:a}});d.backings=_.map(c.get_backings().slice(0,32),function(a){a=a.get();a.project.formatted_deadline=moment(a.project.deadline*
1E3).format("MMM D, YYYY");a.formatted_pledged_at=moment(a.pledged_at*1E3).format("MMM D, YYYY");a.project_successful=a.project.state==="successful";a.project_live=a.project.state==="live";a.project_failed=a.project.state==="failed";a.project_canceled=a.project.state==="canceled";a.project_suspended=a.project.state==="suspended";return a});d.any_subjects=d.projects.length+d.backings.length;d.repeat_creator=d.projects.length>1;d.repeat_backer=c.get("backings_count")>1;d.backings_count=c.get("backings_count")-
b;d.show_more_backings=c.get("backings_count")>32-b;if(d.projects.length&&!d.backings.length)d.select_phrase_one="Select your project.",d.select_phrase_two="your project?";else if(!d.projects.length&&d.backings.length)d.select_phrase_one="Select your pledge.",d.select_phrase_two="a pledge?";else if(d.projects.length&&d.backings.length)d.select_phrase_one="Select a pledge or project.",d.select_phrase_two="one of your projects or pledges?";if(c.data.avatar&&!c.data.avatar.thumb.match(/\/missing_thumb\.png/))c.show_avatar=
!0;d.o=JSON.stringify(d);return d}})()})(this);
instrument_function(function(){(function(){presenters["funnels/index"]=function(a){a.sections=[];a.funnels=_.map(a.funnels,function(a){a.breadcrumbs=_.compact([a.section_title,a.item_title]).join(" > ");if(a.section_title){if(!a.item_title)a.item_title=a.section_title}else a.section_title=a.item_title;return a});var d=_.groupBy(a.funnels,function(a){return a.section_title||a.item_title}),c=$("a[data-topic]").data("topic");a.sections=[];_.each({project:["Project idea & tips","Creator requirements",
"Tips","Starting a new project","Funds/payments","Identity verification","Editing my project","My submission","My backers","Project updates","Why would a project be suspended?","What happens when a project is suspended?","Using the site"],pledge:["Why is my pledge dropped?","What happened to my pledge?","Pledge problems","Money/payments","My reward","Survey","Using the site"],projects:["Project idea & tips","Creator requirements","Editing my project","Tips","Funds/payments","My backers","Project updates",
"Using the site"],backings:["Pledge problems","Money/payments","Rewards","Using the site"],other:["Using the site","Press","Jobs","Copyright","Stats","Partnerships"]}[c],function(b){d[b]&&(a.sections.push({section_title:b,funnels:_.sortBy(d[b],function(a){return a.importance})}),delete d[b])});_.each(d,function(b,c){a.sections.push({section_title:c,funnels:_.sortBy(b,function(a){return a.importance})})});a.sections=_.map(a.sections,function(a){return a.funnels.length===1&&a.funnels[0].item_title===
a.section_title?a.funnels[0]:a});return a}})()})(this);
instrument_function(function(){(function(){presenters["message_threads/_index"]=function(a){var d=[],c=a.facets.read?a.facets.read[a.user]:0,b=a.total_entries-c;a.facets.read={};c>0&&(a.facets.read["true"]=c);b>0&&(a.facets.read["false"]=b);_.each(_.keys(a.facets),function(b){_.each(_.keys(a.facets[b]),function(c){a.facets[b][c]={count:a.facets[b][c]}})});typeof current_project==="undefined"?(_.each(a.projects,function(b){var c=a.facets.projects?a.facets.projects[b[1]]:void 0,g=parseInt(a.params.project,
10)===b[1];b={name:b[0],truncated_name:b[0].substring(0,35)+(b[0].length>35?"\u2026":""),id:b[1],count:c||0,selected:g};d.push(b);if(g)a.selected_project=b}),a.projects=d,a.has_projects=a.projects&&a.projects.length>0):a.has_projects=!1;if(a.params&&(_.each(_.keys(a.params),function(b){_.has(a.facets,b)?(a.facets[b][a.params[b]]||(a.facets[b][a.params[b]]={}),a.facets[b][a.params[b]].selected=!0):(a.facets[b]={})[a.params[b]]={selected:!0}}),a.params.project==="other"))a.selected_project={truncated_name:"Other projects",
other:!0};return a}})()})(this);instrument_function(function(){(function(){presenters["message_threads/_row"]=function(a){a.formatted_sent_at=moment(a.sent_at*1E3).format("MMM D, YYYY");return a}})()})(this);
instrument_function(function(){(function(){window.presenters["message_threads/_show"]=function(a){a.is_creator=a.project.creator.id===current_user.get("id");a.project.is_live=a.project.state==="live";if(a.backing)a.backing.reward.formatted_estimated_delivery_on=moment(a.backing.reward.estimated_delivery_on*1E3).format("MMM D, YYYY"),a.backing.is_creator=a.is_creator;a.messages=_.map(a.messages,function(d){d.sender=_.findWhere(a.participants,{id:d.sender_id});return presenters["messages/_show"](d)});
return a}})()})(this);instrument_function(function(){(function(){window.presenters["messages/_show"]=function(a){a.formatted_created_at=moment(a.created_at*1E3).format("MMM D, YYYY");a.is_recipient=typeof current_user!=="undefined"?current_user.get("id")===a.recipient_id:!1;return a}})()})(this);instrument_function(function(){})(this);
instrument_function(function(){(function(){presenters["projects/_baseball_card_tall"]=function(a){a.currency_symbol=formatters.currency_symbol(a.currency);a.percent_raised=a.pledged/a.goal*100;a.percent_raised_rounded=Math.round(a.percent_raised);a.percent_raised_to_100=Math.min(100,a.percent_raised);a.formatted_money=formatters.format_number(a.pledged,0);a.formatted_goal=formatters.format_number(a.goal,0);a.formatted_backers_count=formatters.format_number(a.backers_count,0);a.javascript_deadline=
a.deadline*1E3;a.formatted_deadline=moment(a.javascript_deadline).format("MMM D, YYYY");a.formatted_state_changed_at=moment(a.state_changed_at).format("MMM D, YYYY");$.each(["live","successful","canceled","failed"],function(){var d=String(this);a[d+"?"]=a.state===d});a["live_or_successful?"]=a.state==="live"||a.state==="successful";a["video?"]=a.video!==null&&a.video!==void 0;a["potd_today?"]=moment(a.potd_at*1E3).isSame(new Date,"day");a.json=JSON.stringify(a);return a};presenters["projects/_baseball_card"]=
presenters["projects/_baseball_card_tall"]})()})(this);
instrument_function(function(){(function(){presenters["projects/_verify_identity_questions"]=function(a){function d(a,b){var c;a.index=b;e=a["answer-type"]==="single"?"radio":"checkbox";for(c in a.choice)if(a.choice.hasOwnProperty(c))f=a.choice[c],f["question-id"]=a["question-id"],f.type=e,f.index=b;return a}a=a.questions;var c,b,e,f;if(a.question["question-id"])a.question=[d(a.question,0)];else for(c in a.question)a.question.hasOwnProperty(c)&&(b=a.question[c],a.question[c]=d(b,c));return a}})()})(this);
instrument_function(function(){(function(){presenters["projects/_video_mode"]=function(a){var d=new Schnurrbart("Project",a);if(a.location)a.location.first_name=a.location.name.split(",")[0];return _.extend({},a,{percent_raised:a.pledged/a.goal*100,context_classes:d.context_classes(),if_starred:d["if"]("is_starred").then(),if_not_starred:d.if_not("is_starred").then(),javascript_deadline:a.deadline*1E3})}})()})(this);
instrument_function(function(){$(function(){$(document).on("click",".activity_mini_comment .excerpt a",function(a){a.preventDefault();a=$(this).parents("blockquote.excerpt");var d=a.siblings("blockquote.everything");a.hide();d.css("display","inline")})})})(this);instrument_function(function(){$(function(){$(document).on("submit",".NS_backer_backing_notes__form",function(){var a=$(this);a.trigger("backer_backing_note:added",[a.data("backing_id"),a.find("textarea").val()])})})})(this);
instrument_function(function(){$(function(){$(".NS-backer_report__header").length&&($(document).on("submit","#send_message_dialog form.choose_tier",function(a){var d=$(this),c=d.find("option:selected"),b=c.data("reward_id"),e=c.data("backers_count"),f=c.data("minimum"),g=$("#send_message_dialog .reward_"+b);a.preventDefault();track("Message Tier Selected");b?(d.find(".error").hide(),g.length?(d.hide(),g.show()):$.ajax({url:c.val(),type:"get",dataType:"html",beforeSend:function(a){a.setRequestHeader("Accept",
"text/javascript, */*")},success:function(a){g=$('<div class="reward reward_'+b+'">'+a+"</div>");var c=g.find("form");c.find("textarea").validates_presence();c.on("submit",function(a){a.preventDefault();c.validate()&&$.ajax({url:c.attr("action"),type:c.attr("method"),data:c.serialize(),dataType:"json",success:function(){var a=g.siblings(".success");g.hide();g.find("textarea").val("");a.find(".count").text(e);f?a.find(".tier").show().find(".money").text(current_project.get("currency_symbol")+parseInt(f,
10)):a.find(".tier").hide();a.show()}})});d.hide();d.closest(".modal_dialog_body").append(g);c.find("textarea").focus()}})):d.find(".error").show()}),$(document).on("submit","#send_message_dialog form.messages-new-box",function(){track("Message Tier Sent")}),$(document).on("click","#send_message_dialog span.cancel",function(){$("#send_message_dialog .choose_tier").show();$("#send_message_dialog .reward").hide()}),$(document).on("click","#send_message_dialog .success .new_message",function(a){a.preventDefault();
track("Message Tier Another Message");$("#send_message_dialog .choose_tier").show();$("#send_message_dialog .success").hide()}))})})(this);
instrument_function(function(){$(function(){function a(a,b){b.closest(d).addClass("generating");$.pollster(a,function(a){if(a.backer_report)a=a.backer_report;a.email_url&&$(d+" a.email_me").attr("href",a.email_url).show();return a.uploaded||a.state&&a.state==="completed"?($(d+" .progress .bar").width("100%"),$(d+" .success a.download").attr("href",a.download_url),$(d).removeClass("generating").addClass("success"),!0):(typeof a.percent!=="undefined"&&$(d+" .progress .bar").width(a.percent+"%"),!1)},
{delay:500,continue_on_error:!0})}var d=".NS-backer_report_export";$(document).on("submit",d+" form",function(c){var b=$(this),d=b.find("select").val(),f=b.find(".select").data("all_reports_url");c.preventDefault();d&&(d==="all"?(track("Backer Report Export",{export_type:"all"}),$.ajax({type:"post",url:f,dataType:"json",success:function(c){a(c.poll_url,b)}})):(track("Backer Report Export",{export_type:"tier"}),$.ajax({type:"get",url:d,data:"new=true",dataType:"json",success:function(c){a(c.poll_url,
b)}})))});$(document).on("click",d+" a.email_me",function(a){a.preventDefault();a=$(this);$.ajax({url:a.attr("href"),type:"post",dataType:"json",success:function(a){a&&a.status!==200?this.error():$(d).find(".email_me_container").empty().html("We'll send you an email when this report is ready.")},error:function(){$(d).find(".email_me_container").empty().html('There was an error requesting the email. <a href="#" class="email_me">Try again</a>.')}})});$(document).on("click",d+" a.reset",function(a){track("Backer Report Another Export");
$(d).removeClass("generating").removeClass("success");$(d).find(".email_me_container").empty().html('<a href="#" class="email_me">Email me when ready</a>');$(d).find(".bar").css("width","0%");a.preventDefault()})})})(this);
instrument_function(function(a){$(function(){function d(){return URI(History.getState().url)}function c(){$("form.term").term_form().bind("submit",function(a){a.preventDefault();a=$(this);j.set_params(a.serialize_without_blank());track("Backer Report Search",{term:a.find(":input").val()})})}function b(){var a={};$(".dropdown a.selected").each(function(){var b=$(this);_.extend(a,URI(b.attr("href")).query(!0))});j.set_params($.param(a),!0)}function e(a){a.is(".selected")||($("#main tbody tr").removeClass("selected"),
a.addClass("selected"),o=!0,$(".NS_backers__info:visible").trigger("close").length&&a.find(".backer a").click(),o=!1,a.index()>a.parent().children().length-10&&!j.mobius.paused&&j.mobius.load_next())}function f(){var a=$("#main tbody tr.selected");a.length?e(a.next()):e($("#main tbody tr:first"))}function g(){var a=$("#main tbody tr.selected");a.length?e(a.prev()):e($("#main tbody tr:last"))}if(a.backers){var j,k=[],l=d(),o=!1,p=l.query(!0).show_responses||$.support.localStorage()&&localStorage.backer_report_show_responses;
j=new Location(null,$("#main"),"backer_report/_index",{mobius_on:"backers"});track("Backer Report View");if($.support.localStorage()&&_.has(l.query(!0),"show_responses"))localStorage.backer_report_show_responses=l.query(!0).show_responses;typeof p==="string"&&(p=p==="true");j.on_change_params(function(){k=[];c();(function(){var a=d().query(!0).reward_id,b=$(".NS-backer_report__header .remote_modal_dialog");a&&b.attr("href",URI(b.attr("href")).removeSearch("reward_id").addSearch("reward_id",a))})();
$("form.term .text").trigger("keydown");!j.get("params.reward_id")&&j.get("params.status")!=="dropped"&&($("#reward, #reward_message, ul.dropdown li.all").remove(),$(".reward_tiers .title > span.reward b").text("All rewards"));var a=$("#main input[name=note]:visible, #main input[name=note_not]:visible");a.focus();a.val(a.val());j.change()});$(document).on("click","#main table th",function(a){var b=$(this).data("sort"),c=d(),e=c.search(!0);b&&(a.preventDefault(),a=e.asc_or_desc==="asc"&&e.sort_by===
b?"desc":"asc",c.removeSearch("asc_or_desc").addSearch("asc_or_desc",a),c.removeSearch("sort_by").addSearch("sort_by",b),track("Backer Report Sort",{selected_sort:b,selected_order:a}),j.set_params(c.query()))});j.on_change(function(){var a=$("#main");_.each(this.get("backers"),function(b){if(!_.contains(k,b.id))k.push(b.id),b.project_is_successful=j.get("project.state")==="successful",b.show_responses=p,a.find("table tbody").append(render("backer_report/_row",b))})});$(window).on("statechange",function(){var a=
History.getState().data;a&&(typeof a.params==="string"&&j.set_params(a.params),typeof a.modal_url==="string"?$.open_remote_modal_dialog(a.modal_url):(o=!0,$(".modal_dialog:has(.NS_backers__info):visible").trigger("close"),o=!1))});$(window).on("set_params",function(a,b){j.set_params(b)});$(document).on("click","#main .dropdown a",function(a){var c=$(this),d=c.closest(".dropdown"),e=d.closest(".dropdown_container");d.find("a").removeClass("selected");c.addClass("selected");b();a.preventDefault();e.hasClass("reward_tiers")?
track("Backer Report Reward Filter",{selected_tier:$.trim($(this).find("b").text())}):e.hasClass("views")&&track("Backer Report Views Filter",{selected_tier:$.trim($("#main .reward_tiers .title b").text()),selected_view:$.trim($(this).find("span").text())})});$(document).on("keyup","form.facets input[name=note], form.facets input[name=note_not]",function(a){a.which===13&&$(this).trigger("change")});$(document).on("click","#main table tbody tr a",function(){var a=$(this);e(a.closest("tr"))});$(window).on("backer_completed",
function(a,b,c){$("#main table tbody tr td.completed a, .NS_backers__info a.completed_toggle").filter("[data-backer_id="+b+"]").toggleClass("completed",c)});$(window).on("creator_backing_note:added",function(a,b,c){$("#main table tbody tr[data-backing_id="+b+"] td.notes a").text(c)});$(window).on("message_sent",function(a,b,c){$("#main table tbody tr[data-backing_id="+b+"] td.actions a").html('<span class="ss-icon ss-mail"></span> ('+c+")")});$(window).on("modal_dialog:opened",function(a){a=$(a.target).data("modal_dialog");
History.busy()||History.pushState({modal_url:a.remote_url},null,d().hash("").toString())});$(window).on("modal_dialog:remote_dialog_loaded",function(a){a=$(a.target);var b=a.data("modal_dialog").$elem.find("div[data-backing-id]").data("backing-id"),c=$('tr[data-backing_id="'+b+'"]');b=c.prev("tr");c=c.next("tr");a=a.find(".NS_backers__info");c.length&&$('<a class="next button button_dark big" href="#"><span class="ss-icon ss-navigateright"></span></a>').click(function(a){a.preventDefault();f();track("Backer Info Modal Next",
{event_type:"click"})}).prependTo(a.find(".controls"));b.length&&$('<a class="prev button button_dark big" href="#"><span class="ss-icon ss-navigateleft"></span></a>').click(function(a){a.preventDefault();g();track("Backer Info Modal Previous",{event_type:"click"})}).prependTo(a.find(".controls"))});$(window).on("closed.modal_dialog",function(){if(!o){var a=$.param(j.get("params")),b=l.clone();History.pushState({params:a},null,b.query(a).hash("").toString())}});$(window).on("keydown",function(a){if(!$(a.target).is(":input"))switch(a.keyCode){case KEY.J:case KEY.RIGHT:f();
track("Backer Info Modal Next",{event_type:"keyboard"});break;case KEY.K:case KEY.LEFT:g();track("Backer Info Modal Previous",{event_type:"keyboard"});break;case KEY.ENTER:$(".NS_backers__info:visible").trigger("close").length||$("#main tbody tr.selected td.backer a").click()}});j.set($.parseEscapedJSON(a.backers));j.change_params(l.query());a.backers=j}})})(this);
instrument_function(function(){$(function(){$(document).on("click",".NS_backers__info .pledge .reward_details",function(a){a.preventDefault();a=$(this).closest(".pledge");a.find(".description").toggle();a.find(".description_short").toggle();a.trigger("resize")});$(document).on("click",".NS_backers__info a.completed_toggle, #backer_report_index #main table tbody tr td.completed a",function(a){var d=$(this),c=d.is(".completed"),b;$.ajax({url:d.attr("href"),type:"put",dataType:"json",data:{"backer[completed]":!c},
success:function(a){d.trigger("backer_completed",[d.data("backer_id"),!c,a.completed_at]);d.toggleClass("completed",!c);a.completed_at&&d.find("span.date").text(a.completed_at)}});d.closest(".modal_dialog").length?b="backer_modal":d.closest("td.completed").length&&(b="backer_row");c?track("Rewards Sent Unchecked",{context:b}):track("Rewards Sent Checked",{context:b});a.preventDefault()});$(document).on("click",".NS_backers__info .backer_tabs a",function(a){a.preventDefault();a=$(this).attr("rel");
var d=$("."+a);$(".NS_backers__info .panel").hide();d.show();$(".backer_tabs li").removeClass("selected");$(this).closest("li").addClass("selected");track("Backer Info Modal Toggle Tab",{selected_tab:a})});$(document).on("ksr_json:complete",".NS_backers__info .messages_panel",function(){var a=$(this),d=a.find(".message").length+1;a.trigger("message_sent",[a.data("backing-id"),d])});$(document).on("message_sent",".NS_backers__info .messages_panel",function(a,d,c){$(this).closest(".NS_backers__info").find(".messages_link").html('Messages <span class="count">'+
c+"</span>")})})})(this);instrument_function(function(){$(function(){var a=$("body#backers_search"),d=$(".mobius",a).data("mobius");a.length&&typeof d!=="undefined"&&d.add_param("term",$("#main").data("term"))})})(this);
instrument_function(function(){$(function(){$(document).on("click",".NS_backings__info .tab-nav a",function(a){a.preventDefault();a=$(this).attr("rel");var d=$("."+a);$(".NS_backings__info .panel").hide();d.show();$(".tab-nav li").removeClass("selected");$(this).closest("li").addClass("selected");track("Backing Info Modal Toggle Tab",{selected_tab:a})});$(document).on("ksr_json:complete",".NS_backings__info .messages_panel",function(){var a=$(this),d=a.find(".message").length+1;a.trigger("message_sent",
[a.data("backing-id"),d])});$(document).on("message_sent",".NS_backings__info .messages_panel",function(a,d,c){$(this).closest(".NS_backings__info").find(".messages_link").html('Messages <span class="count">'+c+"</span>")});$(document).on("click",".NS_backings__info a.backer_completed_at",function(a){var d=$(this),c=$(this).find("input.checkbox:first"),b=!c.is(":checked");a.preventDefault();$.ajax({url:d.attr("href"),data:{"backing[backer_completed]":!b},dataType:"json",type:"PUT",success:function(){c.prop("checked",
!b)}})})})})(this);
instrument_function(function(){$(function(){function a(a){a.is(".selected")||($("#main tbody tr").removeClass("selected"),a.addClass("selected"),f=!0,$(".NS_backings__info:visible").trigger("close").length&&a.find(".more a").click(),f=!1)}function d(){var b=$("#main tbody tr.selected");b.length?a(b.next()):a($("#main tbody tr:first"))}function c(){var b=$("#main tbody tr.selected");b.length?a(b.prev()):a($("#main tbody tr:last"))}var b=$("#backings_index"),e=URI(History.getState().url),f=!1;b.length&&
(b.on("click","a.backer_completed_at",function(a){var b=$(this),c=$(this).find("input.checkbox:first"),d=!c.is(":checked");a.preventDefault();$.ajax({url:b.attr("href"),data:{"backing[backer_completed]":!d},dataType:"json",type:"PUT",success:function(){c.prop("checked",!d)}})}),b.on("click","table th.sortable",function(a){a.preventDefault();window.location=$(this).data("href")}),$(window).on("statechange",function(){var a=History.getState().data;a&&(typeof a.modal_url==="string"?$.open_remote_modal_dialog(a.modal_url):
(f=!0,$(".modal_dialog:has(.NS_backings__info):visible").trigger("close"),f=!1))}),b.on("click","#main table tbody tr a.remote_modal_dialog",function(){a($(this).closest("tr"))}),$(window).on("modal_dialog:opened",function(a){a=$(a.target).data("modal_dialog");History.busy()||History.pushState({modal_url:a.remote_url},null,URI(History.getState().url).hash("").toString())}),$(window).on("modal_dialog:remote_dialog_loaded",function(a){a=$(a.target);var b=a.data("modal_dialog").$elem.find("div[data-backing_id]").data("backing_id"),
e=$('tr[data-backing_id="'+b+'"]');b=e.prev("tr");e=e.next("tr");a=a.find(".NS_backings__info");e.length&&$('<a class="next button button_dark big" href="#"><span class="ss-icon ss-navigateright"></span></a>').click(function(a){a.preventDefault();d()}).prependTo(a.find(".controls"));b.length&&$('<a class="prev button button_dark big" href="#"><span class="ss-icon ss-navigateleft"></span></a>').click(function(a){a.preventDefault();c()}).prependTo(a.find(".controls"))}),$(window).on("closed.modal_dialog",
function(){if(!f){var a=e.clone();History.pushState(null,null,a.hash("").toString())}}),$(window).on("keydown",function(a){if(!$(a.target).is(":input"))switch(a.keyCode){case KEY.J:case KEY.RIGHT:d();break;case KEY.K:case KEY.LEFT:c();break;case KEY.ENTER:$(".NS_backings__info:visible").trigger("close").length||$("#main tbody tr.selected td.more a").click()}}))})})(this);
instrument_function(function(){$(function(){var a=$("body#blog_posts_category"),d;a.length&&(d=$("#sidebar",a),d.sticky_bar({parent:d.closest("#content")}),d=$(".mobius",a),$("div.load_more",a).show(),$("div.pagination",a).hide(),d.persistent_paging())})})(this);
instrument_function(function(){$(function(){var a=$("body#checkouts_interstitial");a.length&&(a.on("click",".amazon-payments-logo",function(){track("Clicked Amazon Payments Logo")}),$(".amazon_payments_footer").click(function(){location.href=$(".amazon-link").attr("href")}))})})(this);
instrument_function(function(){$(function(){var a=$("body#checkouts_thanks");a.length&&($(".short_url",a).click(function(){$(this).select()}),$(".verifying",a).livequery(function(){$.pollster($(this).data("poll_url"),function(a){if(a.state!=="verifying")return window.location.reload(),!0},{delay:2500})}))})})(this);
instrument_function(function(){$(function(){$(".NS_comments__comment").length&&($(document).on("click",".NS_comments__comment a.report_spam",function(a){a.preventDefault();var d=$(this),c=this,b=d.closest(".comment");$.modal_confirm(function(){return KsrJSON.get(d.data("url"),"post",b.find(".ajax-container"),c)},{message:'<p>We review all reports with care, but please keep in mind that we only remove comments that violate the <a href="http://www.kickstarter.com/help/community" title="Kickstarter Community Guidelines">Kickstarter Community Guidelines</a>. Critical comments are tough, but they don\'t always qualify as abusive or spam.</p>',
title:"Report this comment to Kickstarter",confirm_text:"Yes, report as spam"})}),$(document).on("ksr_json:complete",".NS_comments__comment .spam_reported",function(a,d){var c=$(this).closest(".comment"),b=c.find(".report_spam");b.hide();d.status===200&&!b.is(".admin")&&c.find(".body").hide()}))})})(this);
instrument_function(function(){$(function(){var a=$("form#new_comment");if(a.length)a.on("click",":submit",function(d){if(current_project&&current_project.get("comments_loaded")&&current_project.get("comments_count")-current_project.get("comments_loaded")>50)return!0;d.preventDefault();var c=a.find("input.submit"),b=c.val();d=$("#comments").find(".comments li:first");var e=_.reduce(a.serializeArray(),function(a,b){a[b.name]=b.value;return a},{});if(d.length&&current_project&&current_project.get("comments_loaded"))e.cursor=
parseInt(d.attr("id").match(/\d+/)[0],10);c.hasClass("disabled")||(c.addClass("disabled"),c.val("Posting..."),$.ajax({type:a.attr("method"),url:a.attr("action"),dataType:"json",data:e,success:function(b){var c=a.closest("#comments"),d=c.find(".list-comments"),e=c.find("header");if(_.isArray(b.flash)&&_.isArray(b.flash[0]))b.flash=_.object(b.flash);growl(b.flash);b.html&&(a.each(function(){typeof this.reset!=="undefined"&&this.reset()}),d.length||(d=$('<ol class="list-comments click"><li class="page"><ol class="comments"></ol></li></ol>'),
e.length?e.after(d):c.append(d)),b.comments_count&&current_project&&current_project.get("comments_loaded")&&(current_project.set("comments_loaded",current_project.get("comments_loaded")+$(b.html).length),current_project.set("comments_count",b.comments_count)),$("#project-edit-nav .preview .count").text(function(a,b){return parseInt(b,10)+1}),d.closest(".project_preview_comments").addClass("has_comments"),$("body#proposals_show").length?d.append(b.html):d.find(".page ol.comments").prepend(b.html))},
complete:function(){c.removeClass("disabled");c.val(b)}}))})})})(this);
instrument_function(function(){(function(){function a(a){typeof a==="undefined"&&(a={});var d=a.comments_count||current_project.get("comments_count");a=a.comments_loaded||current_project.get("comments_loaded");d-=a;b.text(d);c.find(".pluralize").text(formatters.pluralize("comment",d));d>0?c.show():c.hide()}function d(a,b){var c=$(this),d=(new URI(this.href)).removeQuery("cursor").addQuery({cursor:a});b==="asc"&&d.addQuery({direction:b});$.ajax({url:d.toString(),beforeSend:function(){c.addClass("loading")},
complete:function(){c.removeClass("loading")},success:function(a){var c=b==="asc"?"prepend":"append";b==="asc"&&current_project.set("comments_loaded",a.comments_count);current_project.set("comments_count",a.comments_count);$("ol.list-comments ol.comments:first")[c](a.comments)},error:function(){growl({error:"Sorry, we couldn't load comments just now. Please refresh the page to get updated comments."})}})}var c=$(".load_new_comments"),b,e,f,g;c.length&&(b=c.find("span.new_comments_count"),e=c.find("a"),
f=$(".Project"+current_project.get("id")+'[itemprop="Project[comments_count]"]'),f=$.trim(f.text()),f=f.replace(/\D/g,""),current_project.set("comments_count",parseInt(f,10)),$(".latest_comment").livequery(function(){g||(g=!0,current_project.on_change("comments_count",a),current_project.on_change("comments_loaded",a));current_project.set("comments_loaded",current_project.get("comments_count"));a()}),$(".earliest_comment").livequery(function(){$("a.older_comments").hide()}),$(".comment").livequery(function(){var a=
{},b;$(this).find('[itemprop="Comment[created_at]"]').each(function(c,d){var e=$(d),f;if(e.attr("itemprop")&&(f=e.attr("itemprop").match(/Comment\[(\w+)\]/)))a[f[1]]=JSON.parse(e.data("value")),b||(b=e.attr("class").match(/Comment(\d+)/)[1])});(Comment.find(b)||new Comment({id:b})).set(a)}),e.click(function(a){if(!$(this).hasClass(".loading"))a.preventDefault(),a=$(".comments li:first"),track("Project Comment Load New"),current_project.get("comments_count")-current_project.get("comments_loaded")>
50?window.location.href=window.location.href:d.call(this,a.attr("id").match(/\d+/)[0],"asc")}),$(".older_comments").click(function(a){a.preventDefault();a=$(".comments li:last");!$(this).hasClass(".loading")&&a.length&&(track("Project Comment Load Older"),d.call(this,a.attr("id").match(/\d+/)[0],"desc"))}),$(".comment-moderation, .backer_info","ol.list-comments").livequery(function(){$(this).removeClass("hidden")}),$(document).on("submit","ol.list-comments form.delete_comment",function(a){a.preventDefault();
a=$(this);var b=a.closest(".comment");$.ajax({url:a.attr("action"),dataType:"json",type:"delete",success:function(){b.hide();$("#project-edit-nav .preview .count").text(function(a,b){return parseInt(b,10)-1});$(".NS_comments__comment").length||$(".project_preview_comments").removeClass("has_comments")}})}))})()})(this);
instrument_function(function(){$(function(){var a=$("#company_form_section");a.length&&($(document).on("change",'#company_form_section input[name="type"]',function(){$("#type_business").is(":checked")?$("#company_form_section #business_id_section").show():$("#company_form_section #business_id_section").hide()}),$("#company_form_section #business_id_section :input:not(.optional)").validates_presence(),$(document).find("#company_form_section #beneficiary_lookup_link").length&&($(document).on("change",
'#company_form_section input[name="type"]',function(){$("#type_business").is(":checked")?$("#company_form_section #company_submit").addClass("disabled"):$("#company_form_section #company_submit").removeClass("disabled")}),$(document).on("input cut paste keydown","#company_form_section #business_id",function(){$("#company_form_section #company_submit").addClass("disabled")}),$(document).on("click","#company_form_section #beneficiary_lookup_link",function(a){var c=$(this),b=c.closest("#company_form_section").find("#business_id"),
e=c.closest("#company_form_section").find("#business_id_section"),f=$('<p id="beneficiary_errors"/>'),g=c.closest("#company_form_section").find("#beneficiary_lookup"),j=$('<div class="spinner" />').spin({lines:8,length:4,width:2,radius:5,speed:2,color:"#ffffff"});a.preventDefault();f.empty();g.empty();b.validate()?$.ajax({type:"get",url:c.attr("href"),dataType:"json",data:{business_id:b.val()},success:function(a){a.error!==void 0?(e.find("#beneficiary_errors").remove(),e.prepend(f.html(a.error))):
(e.find("#beneficiary_errors").remove(),g.html(a.data),$("#company_form_section #company_submit").removeClass("disabled"))},beforeSend:function(){c.after(j)},complete:function(){j.remove()}}):(e.find("#beneficiary_errors").remove(),e.prepend(f.html("Please enter a Companies House Number.")))})),$(document).on("submit","#company_form_section form#company_form",function(d){var c=$(this),b=a.find("input.radio[name=type]:checked").val(),e=a.find("#business_id_section"),f=$('<p id="beneficiary_errors"/>'),
g=$('<div class="spinner" />').spin({lines:8,length:4,width:2,radius:5,speed:2,color:"#ffffff"});d.preventDefault();$("#company_form_section #company_submit").is(".disabled")?d.preventDefault():b!=="individual"&&b!=="business"?d.preventDefault():b==="business"&&!e.validate()?d.preventDefault():$.ajax({type:"post",url:c.attr("action"),dataType:"json",data:c.serialize(),success:function(a){a.error!==void 0?(e.find("#beneficiary_errors").remove(),e.prepend(f.html(a.error))):(f.remove(),c.closest("#account-setup-panel").html(a.data))},
beforeSend:function(){c.after(g)},complete:function(){g.remove()}})}))})})(this);instrument_function(function(){$(function(){$(document).on("submit","#beneficiary_container form.beneficiary_reset",function(){var a=$(this),d=$('<div class="spinner" />').spin({lines:8,length:4,width:2,radius:5,speed:2,color:"#ffffff"});a.closest("#beneficiary_container").append(d)})})})(this);
instrument_function(function(){$(function(){if($("body.country_signups").length)$("input#signup_email").validates_presence().validates_email(),$("form#new_signup").on("submit",function(a){var d=$(this);a.preventDefault();if(!d.validate())return!1;$.ajax({url:d.attr("action"),data:d.serialize(),type:d.attr("method"),dataType:"json",success:function(){$(".submitting").hide();$(".submitted").show()},error:function(){d.find("#signup_email").addClass("errored")}})}),localStorage.banner_canada_hide=!0})})(this);
instrument_function(function(){$(function(){$(document).on("submit",".NS_creator_backing_notes__form",function(){var a=$(this);typeof pageTracker!=="undefined"&&pageTracker._trackEvent("Backing Notes","Save",$("body").attr("id"));a.trigger("creator_backing_note:added",[a.data("backing_id"),a.find("textarea").val()])})})})(this);
instrument_function(function(){$(function(){function a(){var a=!0;$("#card_accountNumber").trigger("input");$("#card_accountNumber.valid").length?$("#card_accountNumber").closest("li").removeClass("invalid"):(a=!1,$("#card_accountNumber").closest("li").addClass("invalid"));$(".required :input:not(#card_accountNumber)").each(function(){var b=$(this);b.is("#billTo_state_default")||($.trim(b.val())?b.closest("li").removeClass("invalid"):(b.closest("li").addClass("invalid"),a=!1))});$("#card_cvNumber").each(function(){$.trim($(this).val()).match(/\d{3,4}/)===
null?($(this).closest("li").addClass("invalid"),a=!1):$(this).closest("li").removeClass("invalid")});$("#card_expirationMonth").each(function(){var b=$(this),c=$("#card_expirationYear"),d=b.closest("li");parseInt(c.val()+b.val(),10)<parseInt(d.data("min_date"),10)?(d.addClass("invalid"),a=!1):d.removeClass("invalid")});return a}function d(){var a=$("#billTo_country").val(),b=$("#billTo_state");a!=="US"&&a!=="CA"?(b.closest("li").hide().removeClass("required").find("select").attr("disabled",!0),b.siblings("#billTo_state_default").attr("disabled",
!1)):(b.siblings("#billTo_state_default").attr("disabled",!0),b.closest("li").show().addClass("required").find("select").hide().attr("disabled",!0),a==="US"?(b.closest("li").find("label").text("State"),b.show().attr("disabled",!1)):(b.closest("li").find("label").text("Province"),$("#billTo_state_ca").show().attr("disabled",!1)))}var c=$("#credit_card_form"),b=$("#credit_card_form form");c.length&&(b.on("submit",function(b){if(a()){var c=$("#saving-layer");b=$("#billTo_postalCode");var d=b.val();for(d=
d.replace("-","");d.length<5;)d="0"+d;d=d.substring(0,10);b.val(d);c.show();setTimeout(function(){c.find(".modal_dialog_body").html("<h3>Well, this is embarrassing.</h3><p>Processing your pledge is taking longer than usual. If you'd like, you can refresh and try again.</p><p>Not to worry: you can only back a project once, so you will never be double-charged.</p>");c.removeClass("spinning");$.ajax({url:"/client_error",type:"post",data:{error:"cybersource timeout",url:window.location.toString()}})},
3E4)}else b.preventDefault()}),$(document).on("change","#billTo_country",d),d(),$("#card_accountNumber",c).on("keyup input paste cut",function(){var a=$(this),b=a.val().replace(/[^0-9]/g,""),c=$("#card_cardType"),d;d="000";/^5[1-5]/.test(b)?d="002":/^4/.test(b)?d="001":/^3[47]/.test(b)&&(d="003");var k=$("ul#card_cardType_list");b=String(b);var l=0,o,p=b.length,h,m;if(p<10)b=!1;else{for(h=p-1;h>=0;h-=1)o=String(b[h]),o=parseInt(o,10),m=p-1-h,l+=m%2===0?o:o>4?o*2%10+1:o*2;b=l%10===0?!0:!1}b?(a.addClass("valid"),
a.closest("li").removeClass("invalid"),c.val(d),k.addClass("selected").children().removeClass("selected").filter("#cardType_"+d).addClass("selected")):(a.removeClass("valid"),k.removeClass("selected").children().removeClass("selected"))}),function(){var a=$(".no_stored_cards form"),b=$(".selected input.card_toggle");$("#credit_card_form .errored").length&&(b=$("#new-card input.card_toggle"));b.length||(b=$("input.card_toggle:first"));$(document).on("change click","input.card_toggle",function(b){b.preventDefault();
b=$(this);var c=$("#new_card_form"),d;b.is("input.card_toggle")||(b=b.find("input.card_toggle"));d=$("input.card_toggle").not(b);d.prop("checked",!1);b.prop("checked",!0);d.closest(".payment_option").removeClass("selected");b.closest(".payment_option").addClass("selected");b.closest("#new-card").length?(c.slideDown(400,"easeOutQuad"),a=c.find("form")):(c.slideUp(400,"easeOutQuad"),a=b.closest("form"))});$(document).on("click",".pledge-submit",function(b){a.submit();b.preventDefault()});b.prop("checked",
!0).trigger("change")}())})})(this);
instrument_function(function(){$(".NS-curated_page_projects-new").livequery(function(){var a=$(this),d=a.find("form.curated_pages_form"),c=parseInt($("div.blurb .character_counter .number:first",a).text(),10);$(".blurb textarea",a).validates_max_length().validates_presence();$(".blurb",a).on("validate:invalid",function(){$(this).addClass("errored")});$(document).on("validate:valid",".blurb, .meta h1",function(){$(this).removeClass("errored")});$("div.blurb",a).on("keypress cut paste input",function(){var a=
$(this),d=a.find("textarea").val().length;d=c-d;a.find("textarea").validate();a.find(".character_counter .number").text(d)});a.find(".save").click(function(){var a=d.find(".buttons .loading");$("div.blurb textarea").validate()&&(a.show(),$.ajax({type:d.attr("method"),url:d.attr("action"),data:d.serialize(),dataType:"json",global:!1,success:function(c){d.trigger("close.modal_dialog");d.trigger("project_added_to_curated_page",[c]);a.hide()}}))});a.find(".cancel").click(function(){$(this).trigger("close.modal_dialog")})})})(this);
instrument_function(function(){$(function(){var a=$("#curated_pages_show"),d=$("#curated_pages_show form.curated_pages_form");d.length&&function(){function c(a){var b=a.siblings(".value"),c=a.children("span.add_prompt");if(!b.siblings("textarea:visible, input:visible").length)return $.trim(b.text())===""?(c.show(),a.addClass("empty")):(c.hide(),a.removeClass("empty")),a}function b(){var a=$("li.curated_page_project:visible:not(.new)");a=a.length-a.find("div.blurb.errored").length;if($.trim($("#curated_page_title:not(:visible)").val())===
"")return!1;if($.trim($("#curated_page_description:not(:visible)").val())==="")return!1;if(a<1)return!1;return!0}function e(){var a=$(".submit.launch, #add_shortcut_url");b()?a.removeAttr("disabled").removeClass("disabled"):a.attr("disabled",!0).addClass("disabled")}function f(a){var b=$('<div class="buttons"></div>'),c=a.val(),d=$('<div class="save button button_green small">Save</div>'),e=$('<div class="cancel button small">Cancel</div>'),f=$('<span class="loading icon-loading-small"></span>');
d.click(function(){a.trigger("close")});e.click(function(){a.val(c);a.trigger("close")});f.hide();b.append(d);b.append(e);b.append(f);return b}function g(){var a=$("form.curated_page_projects_order");a.find("input.project").remove();h=!1;l.find("input.id").each(function(){var b=parseInt($(this).val(),10);isNaN(b)?h=!0:a.append('<input type="hidden" class="project" value="'+b+'" name="order[]">')});a.sync_form()}function j(a){var b={};a.data("livesearch_result")?(b.html=a.data("livesearch_result").html,
b.id=a.data("livesearch_result").id):(b.html=a.data("html"),b.id=a.data("id"));b.card='<div class="project-card-wrap">'+$(b.html).find("div.project-card-wrap").html()+"</div>";return b}var k=$("#main.published"),l=$("ul.project-card-list.live",a),o=$(".tools .delete").closest("form"),p=!!k.length,h=!1,m=$(".find_projects .project-results ul.result_list",a).clone(),w=$(".find_projects .project-results div.instructions",a).clone(),t=!!m.length,x;$(document).on("form_synced","form.header_form",function(a,
b){var d=$(this);b.curated_page&&b.curated_page.description&&(d=d.find(".description .value").html(b.curated_page.description),c(d.siblings(".edit_prompt")))});$(document).on("form_synced","li.curated_page_project > form",function(a,b){var d=$(this);b.curated_page_project&&b.curated_page_project.blurb&&(d=d.find(".blurb .value").html(b.curated_page_project.blurb),c(d.siblings(".edit_prompt")))});a.on("click",".value:not(.image), .edit_prompt",function(){function a(b){b.target!==c[0]&&!$(b.target).is("a.cancel, a.save")&&
$(document).off("click",a)}var b=$(this),c=$(this).siblings("input, textarea");!c.is(":visible")&&!b.closest("ul.successful").length&&(c.show().focus(),c.parent().append(f(c)),setTimeout(function(){$(document).on("click",a)},100),b.is(".empty")?b.find(".add_prompt").hide():b.hide(),b.siblings(".value").hide(),b.trigger("field_opened"))});$(".edit_prompt",d).each(function(){c($(this))});a.on("close","input:not(.not_edit_in_place), textarea",function(){function a(){e.show();p||d.show();b.siblings(".buttons").remove();
b.hide();b.trigger("field_closed")}var b=$(this),d=b.siblings(".edit_prompt"),e=b.siblings(".value");b.validate()?b.is("textarea")?(b.siblings(".buttons").find(".loading").css("display","inline-block"),b.closest("form").sync_form({success:function(b){b.valid&&a()},complete:function(){b.siblings(".buttons").find(".loading").hide()}})):(e.text(b.val()),c(d),a(),b.closest("form").sync_form()):b.focus()});$(document).on("keydown","#curated_pages_show form.curated_pages_form input:not(.not_edit_in_place)",
function(a){a.keyCode===13&&(a.preventDefault(),$(this).trigger("close"));a.keyCode===27&&(a.preventDefault(),$(this).siblings(".buttons").find(".cancel").click())});a.on("mouseenter mouseleave","ul.project-card-list.live li.curated_page_project .project",function(a){var b=$(this).find(".move");a.type==="mouseenter"||a.type==="mouseover"?b.show():b.hide()});l.sortable({containment:"document",placeholder:"curated_page-placeholder",handle:".move",revert:300,tolerance:"pointer",items:"> li.curated_page_project:not(.new)",
update:function(){g()}});$(document).on("click","li.curated_page_project a.remove",function(a){a.preventDefault();var b=$(this);a=b.closest("form");var c,d,f=parseInt(a.find("input.project_id").val(),10);m.find("li").each(function(){$(this).attr("data-id")===f&&$(this).show()});a.sync_form({type:"delete",success:function(){d&&b.closest("li.curated_page_project").remove();c=!0}});b.closest("li.curated_page_project").fadeOut(function(){e();c&&$(this).remove();d=!0})});$(".blurb textarea, .meta .description textarea").livequery(function(){$(this).validates_max_length().validates_presence()});
$("#curated_page_title").data("validations",[function(a){if(a.length||!p)return!0;return!1}]);$(document).on("field_opened",".blurb",function(){$(this).find(".label").show();$(this).find(".character_counter").show()});$(document).on("field_closed",".blurb",function(){$(this).find(".label").hide();$(this).find(".character_counter").hide()});$(document).on("field_opened",".meta .description",function(){$(this).find(".character_counter").show()});$(document).on("field_closed",".meta .description",function(){$(this).find(".character_counter").hide()});
$(document).on("validate:invalid",".blurb, .meta h1, .meta .description",function(){$(this).addClass("errored")});$(document).on("validate:valid",".blurb, .meta h1, .meta .description",function(){$(this).removeClass("errored")});$(document).on("keypress cut paste input field_opened","div.blurb, .meta .description",function(a){var b=$(this),c=b.find("textarea").val().length;c=parseInt(b.find("textarea").data("maxlength"),10)-c;a.type!=="field_opened"&&b.find("textarea").validate();b.find(".character_counter .number").text(c)});
$(document).on("form_synced","li.curated_page_project",function(a,b){var c=$(this),d=c.find("form");b.valid&&(d.attr("action",b.url),d.attr("method","put"),d.find("#curated_page_project_id").val(b.curated_page_project.id),h&&g(),c.css("border","0"))});$(document).on("click",".image a.remove",function(a){a.preventDefault();var b=$(this);$.ajax({url:b.attr("href"),type:"delete",dataType:"text",contentType:"application/x-www-form-urlencoded",success:function(a){b.closest(".image").find("img").attr("src",
a)}})});a.on("click",".add_project",function(){$(this).closest("li.curated_page_project").find(".find_projects").toggle()});$(document).on("livesearch:soft_select livesearch:unselect",".find_projects .project-results ul.result_list li",function(a){var b=$(this),c=$(this).closest("li.curated_page_project").find(".project");a.type==="livesearch:soft_select"?(a=j(b),a.card&&(a=$(a.card),c.children(".add_project").hide(),c.find(".project-card-wrap").remove(),c.append(a))):(c.find(".project-card-wrap").remove(),
c.children(".add_project").show())});$(document).on("livesearch:selected",".find_projects .project-results ul.result_list li",function(a){a.preventDefault();var b=$(this),c=j(b);a=$('<li class="curated_page_project">'+c.html+"</li>");var d=b.closest("li.curated_page_project"),e;b.trigger("livesearch:unselect");m.find("li").each(function(){$(this).attr("data-id")===c.id&&$(this).hide()});t?(d.find("ul.result_list").replaceWith(m.clone()),d.find(".project-results > h2").text("My Backed Projects"),x.bind_results()):
(d.find("ul.result_list").empty().before(w.clone()),d.find(".project-results > h2").text("Adding Projects"));x.livesearch.last_search=!1;d.find("input.input-search").val("").blur();b=d.find("input.exclude");e="";l.children("li.curated_page_project").each(function(){var a=$(this).find("input.project_id").val();a&&(e+=a+",")});e+=a.find("input.project_id").val();b.val(e);d.find(".find_projects").hide();d.before(a);a.find(".blurb .value").click()});$(document).on("livesearch:results",".find_projects",
function(){$(this).find(".project-results > h2").text("Search Results");$(this).find(".project-results > .instructions").remove()});$(".find_projects input.input-search").livequery(function(){var a=$(this),b=$(this).siblings("input.exclude"),c=a.siblings(".ss-search");x=a.livesearch_input_dropdown({url:a.data("livesearch-url"),serialize:a.add(b),cancel_copy:"",client_side_cache:!1,update_input:!1,return_name_from_result:function(a){return a.name}}).data("livesearch.input_dropdown");a.on("livesearch:searching",
function(){c.removeClass("ss-search").addClass("icon-loading-small")});a.on("livesearch:results livesearch:ajax_error",function(){c.removeClass("icon-loading-small").addClass("ss-search")})});$(document).on("form_synced",e);e();p&&($(document).on("mouseenter","li.curated_page_project, .image.value",function(){$(this).find("a.remove").show()}).on("mouseleave","li.curated_page_project, .image.value",function(){$(this).find("a.remove").hide()}),$(document).on("mouseenter","ul.project-card-list.live .value, .value ~ textarea, .value ~ input",
function(){$(this).siblings(".edit_prompt").show()}).on("mouseleave",".value, .value ~ textarea, .value ~ input",function(){$(this).siblings(".edit_prompt:not(.empty)").hide()}));$(document).on("click","#new_root_slug .cancel",function(a){a.preventDefault();$(this).trigger("close.modal_dialog")});$(document).on("submit","#new_root_slug",function(a){a.preventDefault();var b=$(this),c=b.find(".shortcut.url");c.addClass("processing");c.removeClass("invalid");c.find(".error_message").text("");$.ajax({url:b.attr("action"),
type:b.attr("method"),data:b.serialize(),dataType:"json",success:function(a){c.removeClass("processing");if(a.valid){b.trigger("close.modal_dialog");var d=$(".tools .launch");d.length&&d.closest("form").submit();$("#add_shortcut_url").replaceWith('<a class="button button_red shortcut_url" href="'+a.url+'">'+a.url+"</a>")}else b.removeAttr("submitting"),c.addClass("invalid"),c.find(".error_message").text(a.errors.slug[0])}})});o.confirm_submit({title:"Delete your Curated Page",copy:"Are you sure you want to delete your current Curated Page?",
yes_copy:"Yes, delete!",no_copy:"Nevermind"})}()})})(this);instrument_function(function(){$(function(){var a=$("body.discover"),d,c=$(".mobius",a);a.length&&c.length&&(d=$("#sidebar",a),d.sticky_bar({parent:d.closest("#content")}),$("div.load_more",a).show(),$("div.pagination",a).hide(),c.persistent_paging())})})(this);instrument_function(function(){$(function(){$("#location-search.NS-discover_sidebar").livequery(function(){$(this).livesearch_navigator({no_results_html:"Sorry, no projects there!"})})})})(this);
instrument_function(function(){$(function(){var a=$("body#discover_list");if(a.length)a.find("select.navigation_dropdown").on("change",function(){$(this).closest("form").submit()})})})(this);
instrument_function(function(){$(function(){$("#dmca_claims_new").length&&($("#claimer_type_owner").click(function(){$("#part_b").show();$("#owner_name").hide();$("#none_of_above_error").hide();$("#dmca_claim_owner_name").val("")}),$("#claimer_type_representative").click(function(){$("#part_b").show();$("#owner_name").show();$("#none_of_above_error").hide()}),$("#claimer_type_none").click(function(){$("#part_b").hide();$("#none_of_above_error").show()}),$('input.radio[id^="claimer_type"]').each(function(a,
d){d.checked&&d.click()}))})})(this);instrument_function(function(){$(function(){$("#events_fourth_birthday").length&&($("#the_right_way").hover(function(){$("body").addClass("reveal")},function(){$("body").removeClass("reveal")}),function(a){$(a).each(function(){(new Image).src=this})}(["https://d3mlfyygrfdi2i.cloudfront.net/5429/rsvp-awful.gif"]))})})(this);
instrument_function(function(){$(function(){if($("body#events_projectjam").length)$(document).on("click",".signup_tout",function(){$("html, body").animate({scrollTop:$("#signup").offset().top},300)})})})(this);
instrument_function(function(){$(function(){function a(a){$("#sidebar .subcat-list").find("li").removeClass("current");c.find('a[data="'+a+'"]').parent("li").addClass("current")}var d=$("#faqs_show"),c=$("#sidebar").find("a.current").siblings(".subcat-list"),b=!1;d.length&&($(document).on("click","h2.subcat a",function(){$.scrollTo("#header-wrap",800,{easing:"easeOutExpo"})}),$(document).on("click","#sidebar a",function(){var c=$(this).attr("data");b=!0;a(c);$.scrollTo("#"+c,800,{easing:"easeOutExpo",
onAfter:function(){b=!1}})}),c.find("li").first().addClass("current"),$(".list-faqs li").waypoint(function(){b||a($(this).attr("id"))}))})})(this);
instrument_function(function(){$(function(){$(document).on("click",".NS-features__toggle a",function(a){a.preventDefault();a=$(this);var d=a.closest(".NS-features__toggle"),c=d.hasClass("featured");$.ajax({type:c?"delete":"post",url:a.attr("href"),dataType:"json",success:function(a){a.featured?d.addClass("featured"):d.removeClass("featured");a.remove_featurings_path&&d.find(".featured a").attr("href",a.remove_featurings_path)}})})})})(this);
instrument_function(function(){$(function(){$("#project-issues form").livequery(function(){var a=$(this),d=$(this).find("input.submit"),c=$(this).find(".footer");a.find(".tabs").tabs();a.find(".tabs > li").click(function(){$(this).find("input.radio").attr("checked",!0)});a.find(".panes").panes();a.find(".panes > .pane").on("activated",function(){$(this).find("textarea,select,input").attr("disabled",!1);d.show();c.show()}).on("deactivated",function(){$(this).find("textarea,select,input").attr("disabled",
!0)}).trigger("deactivated").parent().show();a.find(".tabs").trigger("activate",a.find("input:checked").closest("li"));a.find("#prohibited_link").click(function(a){a.stopPropagation();window.open($(this).attr("href"));return!1})})})})(this);
instrument_function(function(){$(function(){var a=$(".NS-forms_categorization_field");a.length&&a.each(function(){function a(b){var c=$('<a class="remove" href="#">remove</a>'),d=b.find(".destroy");d.val()&&d.val()!=="false"&&b.hide();c.click(function(a){a.preventDefault();b.fadeOut(function(){d.val("1");d.length||b.remove()})});b.append(c)}var c=$(this),b=$(".new",c),e=b.find(".template"),f=$("ol.selected",c);f.children("li").each(function(){a($(this))});b.children("a").on("click",function(b){b.preventDefault();
var c=e.find("select"),k=c.siblings(".position");b=$("<li></li>");var l=c.clone(),o,p;o=!!k.length;p=f.children("li").length;c=c.attr("name").replace("[template]","["+p+"]");p=o?k.attr("name").replace("[template]","["+p+"]"):!1;k=o?k.clone():$([]);l.attr("name",c);o&&k.attr("name",p);b.append(l);o&&b.append(k);a(b);f.append(b)})})})})(this);
instrument_function(function(){$(function(){$(document).on("mouseenter",".friend_button.following",function(){$(this).closest(".ajax-container").hasClass("loading")||($(this).addClass("unfollow"),$(this).text("Unfollow"))}).on("mouseleave",".friend_button.following",function(){$(this).closest(".ajax-container").hasClass("loading")||($(this).removeClass("unfollow"),$(this).text("Following"))});$(document).on("click",".friend_button.follow",function(){$(this).text("Following")});$(document).on("click",
".friend_button.following",function(){$(this).text("Follow")});$(document).on("mouseenter",".friend_button.blocked",function(){$(this).closest(".ajax-container").hasClass("loading")||$(this).text("Unblock")}).on("mouseleave",".friend_button.blocked",function(){$(this).closest(".ajax-container").hasClass("loading")||$(this).text("Blocked")});$(document).on("click",".friend_button.blocked",function(){$(this).removeClass("blocked");$(this).text("Follow")});$(document).on("click",".friend .block_user",
function(){$(this).hide();$(this).parent().find(".friend_button").removeClass("follow").removeClass("following").addClass("blocking").text("Blocked")});$(document).on("click","#unfollow a",function(a){var d=$(this);a.preventDefault();current_project.set("is_starred",!1);$.ajax({url:d.attr("href"),dataType:"json",type:"POST"})})})})(this);
instrument_function(function(){$(function(){$("#friends_ticker_wrap").length&&($("#friends_ticker_wrap").sticky_bar({parent:$("body"),attach_to:"bottom"}),$(document).on("click",".friend_button.follow",function(){$("#friends_ticker_wrap").is(":hidden")&&($("#friends_ticker_wrap").slideDown("fast"),setTimeout(function(){$(document).trigger("shifted")},100))}))})})(this);
instrument_function(function(){$(function(){var a=$("#friends_find, #friends_index, #friends_projects, #friends_following, #friends_followers, #friends_blocked, #friends_opt_out"),d,c,b;a.length&&($(document).on("mobius:loaded_page",".friends.ajax-container",function(){$(document).trigger("shifted")}),b=[[0,40,80,120,160,200,240,280,320,360,400,440],[440,480,520,560,600,640,680,720,760,800,840],[840,880,920,960,1E3,1040,1080,1120,1160,1200,1240],[1240,1280,1320,1360,1400,1440,1480,1520,1560,1600,
1640],[1640,1680,1720,1760,1800,1840,1880,1920,1960,2E3],[2E3,2040,2080,2120,2160,2200,2240,2280,2320,2360,2400],[2440,2480,2520,2560,2600,2640,2680,2720,2760,2800],[2800,2840,2880,2920,2960,3E3,3040,3080,3120,3160,3200,3240],[3240,3280,3320,3360,3400,3440,3480,3520,3560,3600,3640],[3640,3680,3720,3760,3800,3840,3880,3920,3960,4E3,4040],[4040,4080,4120,4160,4200,4240,4280,4320,4360,4400,4440,4480],[4440,4480,4520,4560,4600,4640,4680,4720,4760,4800,4840,4880]],d=$("#friends_ticker .ticker.backed_projects",
a).ticker({framesets:b}).data("ticker"),c=$("#friends_ticker .ticker.followed_people",a).ticker({framesets:b}).data("ticker"),$(".spinner").livequery(function(){$(this).spin({lines:8,length:4,width:3,radius:5,speed:2,color:"#808080"})}),$(document).on("before_ksrjson",".friend.ajax-container",function(a,b,g){a=$(g);b=parseInt($(this).find(".follow_status").data("backed_projects"),10);a.hasClass("block_user")||(a.hasClass("follow")?(d.write(parseInt(d.read(),10)+b),c.write(parseInt(c.read(),10)+1)):
a.hasClass("following")&&(d.write(parseInt(d.read(),10)-b),c.write(parseInt(c.read(),10)-1)))}),$("form.edit_user input.checkbox").change(function(){$(this).closest("form").submit()}),$("form.edit_user").submit(function(a){$.ajax({type:this.method,url:this.action,data:$(this).serialize(),beforeSend:function(a){a.setRequestHeader("Accept","text/javascript");$("form.edit_user").removeClass("highlight").removeClass("animate")},error:function(){},success:function(){$("form.edit_user").addClass("highlight").addClass("animate")}});
a.preventDefault()}))})})(this);
instrument_function(function(a){(function(){function d(a){var b;if(a.project)(b=Project.find(a.project.id))?b.set(a.project):b=new Project(a.project),window.current_project=b;else if(Project.find(a.id))b=Project.find(a.id),b.set(a),window.current_project=b}function c(a,b){if(typeof a.offset==="function")a=a.offset().top;typeof b==="undefined"&&(b={});_.defaults(b,{close_enough:100});var c=Math.max.apply(this,$("html, body").map(function(a,b){return b.scrollTop}).get()),d=c+$(window).height()-b.close_enough<
a;c=c>a+b.close_enough;(b.force||d||c)&&$("html, body").animate({scrollTop:a-20},500,"easeOutExpo")}function b(){var a;if(typeof p==="string")return p;else if(_.isObject(p))return a=_.keys(p)[0],_.compact([a,p[a].id]).join("_")}function e(){$("#open_ticket .container").find(".success, .error").remove()}function f(a,b){track("Contact "+a,_.extend({time_on_page:moment()-o},h,j.data,b))}var g=$("#funnels_contact"),j=new Model,k,l,o,p,h={texts_loaded:0},m=0,w=!0,t=!0;if(g.length&&(o=moment(),a.funnel_user)){typeof a.funnel_user._broadcast===
"undefined"&&(typeof a.funnel_user==="string"&&(l=JSON.parse(_.unescape(a.funnel_user))),l=new User(l));h.uid=l.get("id");if(typeof funnel_user_backings==="string")a.funnel_user_backings=JSON.parse(_.unescape(funnel_user_backings)),m=_.compact(funnel_user_backings).length,l._broadcast({backings_fetched:funnel_user_backings});if(typeof funnel_user_created_projects==="string")a.funnel_user_created_projects=JSON.parse(_.unescape(funnel_user_created_projects)),l._broadcast({created_projects_fetched:funnel_user_created_projects});
f("Page Load");History.Adapter.bind(window,"statechange",function(){var a=_.extend({topic:null,subject:null,funnel:null},History.getState().data);t&&(w=!1,!a.subject&&(a.topic==="pledge"||a.topic==="project")&&j.set("topic",null),j.set(a),w=!0)});j.on_change(function(a){if(w){a=_.pick(a,"funnel","subject","topic");var b;_.each(a,function(a,c){a&&(b=c)});b&&(t=!1,History.pushState(this.data,"",""),t=!0)}});j.on_change({topic:function(a){a=$('a[data-topic="'+a.topic+'"]');var b;$("#summary, #pledge_project_summary, #answers").addClass("hide");
g.find(".options li").removeClass("current");j.set("subject",null);a.length?($("#funnels_main").addClass("started"),f("Select Topic"),b=a.closest("li"),b.addClass("current"),a.is('[data-subjects="true"]')?(a=new URI(a.attr("href")),$("#"+a.fragment()+" li").length===1?$("#"+a.fragment()).find('li a[data-fetch="subject"]').click():($("#subjects").show(),c($("#subjects")),$(".side").addClass("hide"),$("#"+a.fragment()).removeClass("hide"))):($("#subjects").hide(),p={},p[$.trim(a.text())]={},a.data("fetch")===
"subject"&&(w=!1,j.set("subject",a.attr("href")),w=!0))):($("#funnels_main").removeClass("started"),$("#subjects").hide(),$("#new_zendesk_ticket").removeClass("open closed none"))},subject:function(a){$("#text").html("");try{delete window.current_project}catch(b){window.current_project=void 0}a.subject?(f("Select Subject"),$.ajax({type:"GET",dataType:"JSON",url:a.subject,beforeSend:function(){$("#answers").addClass("loading")},complete:function(){$("#answers").removeClass("loading")},success:function(a){var b,
e;if(a.subject){for(e in a.subject)if(a.subject.hasOwnProperty(e)){p=a.subject;b=a.subject[e];d(b);break}$("#pledge_project_summary").removeClass("hide");b=_.extend({},b,{other_backings:l.backings.length>=1,other_projects:l.created_projects.length>=1});$("#pledge_project_summary .container").html(render("funnels/_"+e+"_details",b));$("#subjects").hide()}k=_.map(a.funnels,function(a){return a.funnel});$("#answers").removeClass("hide");$("#funnels").html(render("funnels/index",{funnels:k}));a.subject?
c($("#pledge_project_summary"),{force:!0}):c($("#funnels"),{force:!0})}})):($("#pledge_project_summary").addClass("hide"),$("#pledge_project_summary .container").html(""),$("#answers").addClass("hide"),$("#funnels").html(""))},funnel:function(a){if(a.funnel){var d=$('[data-funnel_id="'+a.funnel+'"]'),e=_.find(k,function(b){return b.id===a.funnel});$.ajax({type:"GET",url:d.attr("href"),beforeSend:function(){$("#text").addClass("loading")},complete:function(){$("#text").removeClass("loading")},success:function(a){var d=
_.extend(p,{text:a.funnel_text,user:l.data,funnel:e});$(document).trigger("got_json",[d]);$("#text").html(render("funnels/_text",d,{text_body:a.funnel_text.body}));f("Funnel",{funnel_name:e.item_title||e.section_title,funnel_section:e.section_title,funnel_text_name:a.funnel_text.title,ticketable:e.ticketable!=="none",texts_loaded:h.texts_loaded+1});$("#zendesk_ticket_ticket_requester_id").attr("value",l.get("email")||"");$("#zendesk_ticket_ticket_tags").attr("value",e.zendesk_tag);$("#zendesk_ticket_funnel_id").attr("value",
e.id);$("#zendesk_ticket_funnel_subject").attr("value",b());$("#new_zendesk_ticket").removeClass("open closed none").addClass(e.ticket_field);c($("#text"))}})}else $("#text").html(""),$("#new_zendesk_ticket").find("textarea, input.text").attr("value",""),$("#zendesk_ticket_ticket_requester_id").attr("value",""),$("#zendesk_ticket_ticket_tags").attr("value",""),$("#zendesk_ticket_funnel_id").attr("value",""),$("#zendesk_ticket_funnel_subject").attr("value",""),$("#new_zendesk_ticket").removeClass("open closed none")}});
$(document).on("click",".quick_links a",function(){var a=$(this);f("Click Quick Link",{text:a.text(),href:a.attr("href")})});j.on_change(function(){e()});$(document).on("click",".options a",function(a){a.preventDefault();j.set("topic",null);j.set("topic",$(this).data("topic"))});$(document).on("click",'#subjects a[data-fetch="subject"]',function(a){a.preventDefault();j.set("subject",this.href)});$(document).on("click","a.select_new",function(a){a.preventDefault();f("Select Different Subject");a=j.get("topic");
j.set("topic",null);j.set("topic",a)});$(document).on("click","a.funnel",function(a){a.preventDefault();j.set("funnel",$(this).data("funnel_id"))});$(document).on("click","li.open > span, li.open > a",function(a){a.preventDefault();a=$(this).parent();var b=a.find("> ul");b.length?(a.closest(".side_container").addClass("opened"),f("Select Section",{section_title:$(this).text()})):a.closest(".side_container").removeClass("opened");$("li.open:not(.stay_open) > ul").hide();b.show()});$(document).on("click",
"a.show_more_backings",function(a){a.preventDefault();var b=this;a=(new URI(b.href+"?"+(new URI).query())).toString();f("Load More Pledges");$.ajax({url:a,data:{cursor:_.last(l.get_backings()).get("pledged_at")},beforeSend:function(){$(b).addClass("loading")},complete:function(){$(b).removeClass("loading")},success:function(a){l._broadcast({backings_fetched:a.backings});a=l.get_backings().slice(m);a=_.map(a,function(a){a=a.get();a.formatted_created_at=moment(a.created_at*1E3).format("MMM D, YYYY");
return render("funnels/_backing",a)}).join("");$(b).replaceWith(a)}})});$(document).on("click","#funnels a",function(a){a.preventDefault();a=$(this).closest("li");a.siblings().removeClass("selected");a.addClass("selected")});$(document).on("click",".open_a_ticket",function(a){a.preventDefault();f("Open Ticket Form");$("#new_zendesk_ticket").removeClass("closed").addClass("open")});$(document).on("click","#new_zendesk_ticket input:submit",function(a){a.preventDefault();var b=$(this),d=b.closest("form");
d.is(".submitting")||(d.addClass("submitting"),b.data("original_text",b.val()),b.val("Submitting..."),$("#zendesk_ticket_time_on_page").attr("value",moment()-o),l&&l.data&&window.current_user&&window.current_user.data&&l.data.id!==window.current_user.data.id&&$("#zendesk_ticket_ticket_requester_id").attr("value",l.get("email")+".ksr"),_.each(["description","subject"],function(a){a=$("#zendesk_ticket_ticket_"+a);a.val()===a.attr("placeholder")&&a.val("")}),$.ajax({type:"POST",data:d.serialize(),url:$(this).closest("form").attr("action"),
beforeSend:function(){e();f("Submit Ticket")},complete:function(){d.removeClass("submitting");b.val(b.data("original_text"))},success:function(){$(".funnels .contact_funnels").html(render("funnels/_ticket_success"));$("html, body").animate({scrollTop:0},800,"easeOutExpo");f("Ticket Success")},error:function(a){a=_.flatten(_.compact(_.map(JSON.parse(a.responseText),function(a,b){var c={base:"",requester:"email",subject:"question",description:"details"}[b]||b;return _.map(a,function(a){return _.compact([formatters.capitalize(c),
a]).join(" ")})})));f("Ticket Error",a);$("#open_ticket .container").prepend(render("funnels/_ticket_error",{errors:a}));c($("#open_ticket"))}}))});$(".prompt_login").length&&($(".contact_funnels").hide(),$(".prompt_login a.anonymously").on("click",function(a){a.preventDefault();$(".prompt_login").hide();$(".contact_funnels").show()}));$(".contact_funnels").prepend(render("funnels/contact",{user:l},{backing:$.trim($("#template-funnels__backing").html()),project:$.trim($("#template-funnels__project").html())}));
$(document).on("click","a.login",function(){f("Select Log In")});$(document).on("click","a.anonymously",function(a){a.preventDefault();f("Select No Account")})}})()})(this);
instrument_function(function(){(function(){var a=$("body.faqs").find(window.location.hash),d=$("#term.help");a.length&&!a.find(".subcat").length&&a.animate({backgroundColor:"#f6f2ae"},{duration:2E3,complete:function(){$(this).animate({backgroundColor:"#ffffff"},{duration:2500})}});$("body.help #main_content form.search").livequery(function(){$(this).livesearch_pretty_input_dropdown({input_can_submit_on_enter:!0,file_extension:"json",ignore_history:!1})});$(document).on("livesearch:selected","#search .results li",
function(a,b){if(b&&b[1])window.location.href=b[1]});$(document).on("click","body.help form.search .submit",function(){$(this).closest("form").submit()});$(document).on("livesearch:reveal_results","#term.help",function(){$(this).addClass("expanded");$(this).parents("#search").children(".submit").addClass("expanded")});$(document).on("livesearch:close_results","#term.help",function(){$(this).removeClass("expanded");$(this).parents("#search").children(".submit").removeClass("expanded")});$("body.help").click(function(a){a=
$(a.target);!a.is("#term")&&!a.closest("#search").length&&d.trigger("livesearch:close_results")});d.on("focus",function(){var a=d.data("livesearch");a&&a.search_xhr&&a.search_xhr.readyState===4&&d.trigger("livesearch:reveal_results")})})()})(this);instrument_function(function(){$(function(){$(document).on("change","body#help_copyright form.select_country",function(){$(this).submit()})})})(this);instrument_function(function(){$(function(){$("body#help_fees form.select_country").on("change",function(){$(this).submit()})})})(this);
instrument_function(function(){$(function(){function a(a){a.find(".category_row").slideToggle("fast");a.find(".default_sort").toggleClass("headerSortUp");a.closest("table").toggleClass("collapsed");a.find(".arrow").toggleClass("flipped");a.hasClass("collapsed")?(a.find(".details").text("See Categories"),pageTracker._trackEvent("Help Stats","Collapsed",a.attr("name"))):(a.find(".details").text("Hide Categories"),pageTracker._trackEvent("Help Stats","Expanded",a.attr("name")))}function d(a,c,d){if(typeof d!==
"undefined"){b.find(".content").html('<span class="num date">'+c+"</span>"+d);a=$(a);c=a.offset();d=a.closest("table, .explanation").offset();var j=b.width(),k=b.height(),l=parseInt(b.css("padding-right").replace("px",""),10);a.closest(".explanation").length&&(c.left-=50);b.css({position:"absolute",left:c.left-j-(l-1)+90,top:d.top-k-20});b.find(".nipple").css({left:j+5,top:k+12,position:"absolute"});b.fadeIn("fast")}else b.fadeOut("fast")}var c=$("#help_stats"),b=$(".bubble");c.length&&($(".toggle_details").click(function(){var b=
$(this).closest("table");a(b)}),$("th").click(function(){var b=$(this).closest("table");b.hasClass("collapsed")&&a(b)}),$("td, th").hover(function(){var a=$(this).closest("table").find("th").eq($(this).index()),b=a.data("header-explanation");a=a.html().replace("<br>"," ");d(this,a,b)}),$(".explanation").hover(function(){var a=$(this),b=a.find("[data-header-explanation]"),c=b.data("header-explanation");a=a.find("p").text();d(b,a,c)}),$("table, .explanation").mouseleave(function(){b.fadeOut("fast")}))})})(this);
instrument_function(function(){$(function(){$(".NS_jobs__why_work_at_kickstarter").length&&($("span.carousel").hover(function(){var a=$(this).attr("data"),d=$(this).attr("data_caption");a!==""&&(a==="video"?($(this).closest(".section").find(".video").delay(100).fadeIn(200),$(this).closest(".section").find("video")[0].play()):$(this).closest(".section").css({"background-image":"url("+a+")","-webkit-background-size":"cover"}),d!==""?$(this).closest(".section").find(".caption").text(d):$(this).closest(".section").find(".caption").text(""),
$(this).closest(".section").find("h1, p").css({visibility:"hidden"}),$(this).css({visibility:"visible"}),$(this).closest(".section").append('<a href="#close" class="close">Close</a>'))},function(){var a=$(this).attr("data"),d=$(this).closest(".section").attr("data_caption");$(this).closest(".section").css({"background-image":"url("+$(this).closest(".section").attr("data")+")"});$(this).closest(".section").find("h2, p").css({visibility:""});$(this).css({visibility:""});d!==""?$(this).closest(".section").find(".caption").text(d):
$(this).closest(".section").find(".caption").text("");a==="video"&&($(this).closest(".section").find(".video").fadeOut(200),$(this).closest(".section").find("video")[0].pause());$(".close").remove()}),$(document).on("click",".section .close",function(a){$(this).css({"background-image":"url("+$(this).attr("data")+")"});a.preventDefault()}),$(".gallery_links .next").click(function(){$(".gallery_links ul").offset().left>0&&$(".gallery_links ul").animate({marginLeft:"-720px"},500,"easeOutExpo",function(){$(".gallery_links .prev").removeClass("disabled");
$(".gallery_links .next").addClass("disabled")})}),$(".gallery_links .prev").click(function(){$(".gallery_links ul").offset().left<0&&$(".gallery_links ul").animate({marginLeft:"0px"},500,"easeOutExpo",function(){$(".gallery_links .next").removeClass("disabled");$(".gallery_links .prev").addClass("disabled")})}),$(document).on("click",".gallery_links li",function(){var a=$(this).attr("data");$(".gallery_links li").removeClass("selected");$(this).addClass("selected");$(".galleries .video:not(#"+a+
") .video-player").trigger("ksr_video:pause");$(".galleries").find("#"+a).parent().animate({height:640},600,"easeOutExpo",function(){$(this).find(".gallery").fadeOut();$(".galleries").find("#"+a).fadeIn(function(){$(this).children(".video-player").ksr_video().trigger("ksr_video:play")});$.scrollTo($(this).parents(".section").find(".galleries"),{duration:1200,easing:"easeOutExpo"})})}),$(".galleries .close_link").click(function(a){$(".video-player").trigger("ksr_video:pause");$(".gallery_links li").removeClass("selected");
$(this).parent().children(".gallery").fadeOut(500,function(){$(this).parent(".galleries").animate({height:"0px"},500,"easeOutExpo")});a.preventDefault()}),function(a){$(a).each(function(){(new Image).src=this})}(["https://d3mlfyygrfdi2i.cloudfront.net/jobs_greatest_city_2_1600.jpg","https://d3mlfyygrfdi2i.cloudfront.net/jobs_its_fun_happy_hours_1600.jpg","https://d3mlfyygrfdi2i.cloudfront.net/jobs_its_fun_beach_1600.jpg","https://d3mlfyygrfdi2i.cloudfront.net/jobs_its_fun_workshops_1600.jpg","https://d3mlfyygrfdi2i.cloudfront.net/jobs_its_fun_movies_1600.jpg",
"https://d3mlfyygrfdi2i.cloudfront.net/jobs_its_fun_lunch_alt_1600.jpg"]))})})(this);instrument_function(function(){$(function(){$("#jobs_show").length&&$("#sidebar").sticky_bar({parent:$("#jobs_show_wrap")})})})(this);
instrument_function(function(){$(function(){function a(){var a=$("#admin_wrap");f.offsetParent().scrollTop()===0?f.is(":hidden")?f.slideDown(function(){e.height(a.height())}):f.slideUp():f.offsetParent().animate({scrollTop:0},"slow","easeInOutQuad",function(){f.is(":hidden")&&f.slideDown(function(){e.height(a.height())})})}var d=$(".NS_layouts__admin_navigation"),c=$("a.open_panel",d),b=$("#admin_panel"),e=$("#admin-nav-prop"),f=$("#admin_panel_wrap");if(d.length&&(c.click(function(b){a();b.preventDefault()}),
$(window).on("keydown",function(c){if(c.which===KEY.SPACE&&!$(c.target).is(":input"))if(f.is(":visible")){var d=b.find("details[open]").add("#running-board-wrap"),k=0;d.each(function(a){window.scrollY>=this.offsetTop-e.height()&&(k=a)});d=k===d.length-1?d.get(0):d.get(k+1);window.scrollTo(0,d.offsetTop-e.height());c.preventDefault()}else a()}),window.location.hash==="#admin_panel"))$.fx.off=!0,a("local"),$.fx.off=!1,window.location.hash="#"})})(this);
instrument_function(function(){$(function(){var a=$("#mega-footer-wrap");a.length&&function(){function d(a){a>9||(g.removeClass(e[f]),f+=1,f===e.length&&(f=0),g.addClass(e[f]),setTimeout(function(){d(a+1)},100))}var c=0,b=$("#mega-footer").width()/3,e=["icon-scissors-1","icon-scissors-2","icon-scissors-3"],f=0,g=$("span.scissors",a);g.click(function(){c+=1;d(0);g.animate({marginLeft:b*c},1E3,function(){c===3&&(g.hide(),a.height(a.height()),a.addClass("gone"),$("html").addClass("gone"),$("#footer-wrap").hide(),
a.find("#mega-footer").animate({marginTop:[a.height(),"easeInOutExpo"],opacity:0},1E3))})});$(".lockups-area").cycle({timeout:5E3})}()})})(this);
instrument_function(function(){$(function(){$("#learn_more_panel").livequery(function(){function a(){$("#learn_more_dialog_content").removeClass("page0 page1 page2 page3").addClass("page"+b)}function d(a,b){typeof pageTracker!=="undefined"&&pageTracker._trackEvent("Homepage Events",a,b)}var c=$(this),b=0;c.closest(".modal_dialog").attr("id","learn_more_modal");c.serialScroll({items:".panel",lazy:!0,lock:!1,step:1,cycle:!1,duration:500,easing:"easeOutExpo"});a();c.on("click",".next",function(){c.trigger("next");
b+=1;d("Learn more modal next");a()});c.on("click",".prev",function(){c.trigger("prev");b-=1;d("Learn more modal previous");a()});c.closest(".modal_dialog").on("modal_dialog:opened",function(){$.fx.off=!0;c.trigger("goto",[b]);$.fx.off=!1})})})})(this);
instrument_function(function(){$(function(){function a(a){(o=a)?l.addClass("selecting"):(l.removeClass("selecting"),k.find("li.search_result").removeClass("selected"))}function d(){j.trigger("livesearch:cancel");j.val("");x.hide();w.hide();m.hide();g.slideUp(function(){l.empty();h.empty();m.empty()});$("body").removeClass("searching")}function c(){k.find("li.search_result").length<4?g.find(".arrow").addClass("disabled"):(g.find(".arrow").removeClass("disabled"),k.data("cur_page")===0&&k.find(".prev").addClass("disabled"),
k.data("cur_page")===k.data("last_page")&&k.find(".next").addClass("disabled"))}function b(a){a.preventDefault();f.removeAttr("submitting")}function e(a){if(a)f.off("submit",b);else f.on("submit",b)}if(typeof current_user!=="undefined")current_user.on_change("name",function(a){$("#menu-sub .user_context strong").text(a.name)});$.support.localStorage()&&(localStorage.removeItem("banner_canada_projects_animated"),localStorage.banner_country_projects_hide||($(".country_tout").removeClass("hidden"),localStorage.banner_country_projects_animated?
($(".country_tout").css({"margin-top":"0px"}),$(".country_tout").addClass("expanded")):$(".country_tout").delay(1200).animate({marginTop:"0px"},400,"easeOutExpo",function(){$(this).addClass("expanded");localStorage.banner_country_projects_animated=!0})),$(".country_tout .close").click(function(){try{localStorage.banner_country_projects_hide=!0}catch(a){}$(".country_tout").animate({"margin-top":"-40px"},400,"easeOutExpo");$(".country_tout").removeClass("expanded");$(".country_tout").addClass("hidden")}),
$(".country_tout a").on("click",function(){try{localStorage.banner_country_projects_hide=!0}catch(a){}}));$("#menu-sub > .dropdown > a").click(function(a){a.preventDefault();var b=$(this).closest(".dropdown"),c=!0;b.is("#menu-sub-me")?b.trigger("user_dropdown:open"):b.addClass("selected");b.find("span.count").remove();$(document).on("click."+b.attr("id"),function(a){c?c=!1:$(a.target).parents(".dropdown-child").length||($(document).off("click."+b.attr("id")),b.removeClass("selected"))})});$(window).on("keydown",
function(a){!$(".NS-site_leanback").length&&a.keyCode===38&&window.scrollY===0&&$("a#leanback").click()});if(!($.browser.msie&&$.browser.version<=6||$("body.touchable").length)){var f=$("#header form.search"),g=$("#search_results-wrap"),j=f.find("input#term"),k=$("#search_results"),l=$("#search_results_panel"),o=!1,p=j.siblings(".ss-search"),h=k.find("h2.header"),m=k.find("p.footer"),w=f.find(".ss-directup"),t=k.find(".close"),x=f.find(".ss-delete");l.serialScroll({items:"li.search_result",lazy:!0,
lock:!1,step:4,cycle:!1,duration:500,easing:"easeOutExpo"});g.on("click",".next:not(.disabled)",function(){l.trigger("next");k.data("cur_page",k.data("cur_page")+1);c();o&&a(!1)});g.on("click",".prev:not(.disabled)",function(){l.trigger("prev");k.data("cur_page",k.data("cur_page")-1);c();o&&a(!1)});j.livesearch({file_extension:"json",process_data:function(){return{term:$.trim(j.val())}}}).data("livesearch");j.on("livesearch:searching",function(){p.removeClass("ss-search").addClass("icon-loading-small");
$("body").addClass("searching");e(!1)});j.on("keypress cut paste input",function(a){a.keyCode!==13&&e(!1)});j.on("livesearch:results livesearch:ajax_error",function(){p.removeClass("icon-loading-small").addClass("ss-search");e(!0)});j.on("livesearch:results",function(b,d){if(d.projects.length){var e=$("<ol></ol>");h.html(d.header);d.footer?(m.html(d.footer),m.show()):(m.empty(),m.hide());_.each(d.projects,function(a,b){var c="";b===0&&(c=" alpha");!d.see_more&&b===d.projects.length-1&&(c=" omega");
e.append('<li class="search_result'+c+'">'+render("projects/_baseball_card_tall",a)+"</li>")});d.see_more&&e.append('<li class="search_result see_more omega">'+d.see_more+"</li>");l.html(e);l.trigger("goto",[0]);k.data("cur_page",0);k.data("last_page",Math.floor((e.children().length-1)/4));c();a(!1);w.show();g.slideDown("fast");$("body").addClass("searching")}else $("body").removeClass("searching")});$(window).on("scroll",function(){g.is(":visible")&&$(window).scrollTop()>k.offset().top+k.height()&&
d()});$(document).click(function(a){$(a.target).closest("#search_results-wrap").length||d()});j.on("keypress cut paste input",function(){this.value?x.show():(x.hide(),d())});x.on("click",function(){d();j.focus()});t.on("click",d);$(document).on("select","#search_results li.search_result",function(){var b=$(this),d=k.find("li.search_result.selected").removeClass("selected");b.addClass("selected");a(!0);b.index()>d.index()&&b.index()%4===0?l.trigger("goto",[b.index()]):b.index()<d.index()&&d.index()%
4===0&&l.trigger("goto",[d.index()-4]);k.data("cur_page",Math.floor(b.index()/4));c()});j.on("keydown",function(b){var c=k.find("li.selected"),d=!!c.length;switch(b.keyCode){case KEY.UP:a(!1);b.preventDefault();break;case KEY.DOWN:d||k.find("li.search_result:first").trigger("select");a(!0);b.preventDefault();break;case KEY.LEFT:if(!o)break;d?c.prev("li").trigger("select"):k.find("li.search_result:first").trigger("select");b.preventDefault();break;case KEY.RIGHT:if(!o)break;d?c.next("li").trigger("select"):
k.find("li.search_result:last").trigger("select");b.preventDefault();break;case KEY.ENTER:if(!o)break;d=c.find("h2 strong a").attr("href");c.is(".see_more")&&(d=c.find("a.search-see-more").attr("href"));if(!d)break;window.location=d;b.preventDefault();break;case KEY.ESC:a(!1),b.preventDefault()}})}})})(this);
instrument_function(function(){$(function(){function a(){b.find("#menu-me-backed").length&&b.find(".dropdown-child").addClass("backer");b.find("#menu-me-created").length&&b.find(".dropdown-child").addClass("creator")}function d(c){var d=b.children("#menu-me-children");if($.support.localStorage())try{localStorage.user_dropdown_backer_creator_columns_html=c}catch(e){}d.children(".NS_layouts__user_dropdown_backer_creator_columns").remove();d.append(c);a()}function c(a){f||(f=$.ajax({url:b.data("user_dropdown_backer_creator_columns_path"),
type:"get",dataType:"html",beforeSend:function(a){a.setRequestHeader("Accept","text/javascript, */*")},success:function(a){d(a);e=!0},complete:function(){a&&a();f=!1}}))}var b=$(".NS_layouts__user_dropdown"),e=!1,f=!1;(function(){if($.support.localStorage()){var a=localStorage.user_dropdown_backer_creator_columns_html;a&&(d(a),e=!0)}})();a();$("#menu-sub-me").on("user_dropdown:open",function(){var a=$(this);e?a.addClass("selected"):c(function(){a.addClass("selected")})});$("#menu-sub-me > a").one("click",
function(){track("Account Menu Dropdown");c()});$(document).on("user_dropdown:refresh_from_remote",function(){c()});$("body").is(".just_logged_out")&&localStorage&&delete localStorage.user_dropdown_backer_creator_columns_html})})(this);instrument_function(function(){$(function(){$(".video_player").livequery(function(){$(this).ksr_video()})})})(this);
instrument_function(function(){(function(){function a(a,c){var d=a.add(c);d.siblings().removeClass("current_tab");d.addClass("current_tab");$(document).trigger("tab")}function d(a){if(typeof a!=="string")return"";return a.replace(/.$/,function(a){return a==="e"?"able":a+"able"})}function c(a){if(typeof a!=="string")return"";return a.replace(/.$/,function(a){return a==="e"?"ed":a+"ed"})}$("body.admin").delegate(".tab","click",function(){var b=$(this),c=b.attr("class").match(/tab_\d+/),d,g=b.find("a");
c&&(d=$("."+c[0].replace(/tab/,"pane")));c&&d.length&&(g.length&&$.trim(d.html())===""?(b.addClass("submitting"),$.ajax({url:g.attr("href")+".js",type:"GET",complete:function(c){b.removeClass("submitting");d.html(c.responseText);a(b,d)}})):a(b,d),history.pushState(null,null,g.attr("href")))});$("body.admin").delegate(".tab_label a","click",function(a){a.preventDefault()});$("body.admin").delegate(".expand, .collapse","click",function(a){a.preventDefault();$(this).add($(this).siblings(".expand, .collapse, .expandable")).toggle()});
$("body.admin").delegate(".batch_action .select_all","click",function(a){a.preventDefault();a=$(this);var c=a.closest(".batch_action").parent().find("input.checkbox:not([disabled])");c.length?a.text()==="Select all"?(c.attr("checked",!0),a.text("Deselect all")):(c.attr("checked",!1),a.text("Select all")):growl({error:"Nothing to select."})});$("body.admin").delegate(".batch_action input.submit","click",function(a){a.preventDefault();var e=$(this),f=e.closest("form"),g=e.closest(".batch_action");a=
g.parent();var j=a.find("input.checkbox:checked"),k=j.map(function(a,b){var c;c=b.id;c=typeof c!=="string"?"":(c=c.match(/\d+/))?c[0]:null;return c}).get(),l=e.attr("name"),o=f.attr("action"),p=g.data("type"),h=p.replace(/s$/,""),m={};e=a.find(".batch_"+l+"_info").data("confirm_url");a.find("input.checkbox:not(checked)").each(function(){$(this).parent().removeClass("highlight")});if(j.length){var w=[];j.each(function(){$(this).hasClass(d(l))?$(this).parent().removeClass("highlight"):(w.push($(this)),
$(this).parent().addClass("highlight"))});w.length?growl({error:"You selected "+w.length+" "+formatters.pluralize(p,w.length)+" that cannot be "+c(l)+". Please unselect those and try again."}):(m[p]=k,$.ajax({url:e,data:m,type:"get"}).done(function(a){$.modal_confirm(function(){$.ajax({type:"PUT",url:o,data:m,success:function(){j.each(function(){var a=$(this);a.attr({checked:!1,disabled:!0});a.closest("."+h).addClass(c(l)).find(".status").html(c(l))});growl({success:"Selected "+p+" were "+c(l)})},
error:function(){growl({error:"There was a problem "+l+"ing one or more of those "+p+". Please refresh the page and try again."})}})},{title:"Batch "+l,message:a,confirm_text:formatters.capitalize(l)+" "+k.length+" "+formatters.pluralize(p,k.length),cancel_text:"cancel"===l?"never mind":"cancel"})}))}else growl({error:"No "+p+" selected to "+l+"."})});$(document).on("submit",".zendesk_ticket form",function(a){var c=$(this);c.find(".submit").hide();c.find(".loading").show();a.preventDefault();$.ajax({url:c.attr("action"),
type:"POST",data:c.serialize(),dataType:"JSON",success:function(a){a="https://kickstarter.zendesk.com/tickets/"+a.id;var b=$("<a/>");b.attr("href",a);b.text(a);b.addClass("associated_zendesk_ticket right");c.closest(".modal_dialog").trigger("close");growl({success:"Ticket sent successfully!"});$("#send_to_zendesk").append(b)},complete:function(){c.find(".submit").show();c.find(".loading").hide()}})})})()})(this);
instrument_function(function(){$(function(){function a(a){a=a||$(".mobius");a.each(function(){var a=$(this).data("mobius");if(a)for(var b in a.clear_extra_params(),c)c.hasOwnProperty(b)&&a.add_param(b,c[b])})}var d=$("body.profile");if(d.length){$("body#users_show").length&&(typeof history.pushState!=="undefined"&&history.pushState(null,null,window.location.pathname),$("#animated_pie",d).spriteshow({number:63,play_delay:40,pause_when_behind_by:0,play_once:!0,sprite_orientation:"horizontal"}),$("#animated_pie").on("spriteshow:index",
function(a,c){c===43&&($("#category_circle").fadeIn(100),$("#animated_pie").fadeOut(1E3));c===0&&$(this).fadeOut()}));var c=URI().query(!0);$("#small_circle").on("navigate",function(a,e){d.is("#users_show")?(c=URI(e).query(!0),$.ajax({url:e,type:"get",success:function(a){a=$(a).find("#main");$("#main").replaceWith(a)}})):window.location=e});a();$(".mobius").livequery(function(){a($(this))})}})})(this);
instrument_function(function(){$(function(){$(document).on("project_added_to_curated_page",function(a,c){var b=$("#add_to_curated_page_widget .button-curate");b.addClass("on");b.attr("href",c.edit_url)});if(typeof current_project!=="undefined")current_project.on_change("pledged",function(){var a=$("#stats"),c=a[0].className.match(/digits_\d+/),b="digits_"+Math.floor(current_project.get("pledged")).toString().length;c&&c[0]!==b&&a.removeClass(c[0]).addClass(b)});var a={};$(".poll[data-dynamic]").livequery(function(){function d(a){var c;
typeof a!=="object"&&(a=JSON.parse(a));if(c=Project.find(a.project.id)){var d;if(a.poll_interval_override)d=a.poll_interval_override;else{d=b;var e=a.project;c.get("pledged")!==e.pledged||c.get("comments_count")!==e.comments_count?(d-=Math.ceil((d-j)/2),d=Math.max(d,j)):d=Math.min(d+10,k)}b=d;c.set(a.project);g(b)}}var c=$(this),b=parseInt(c.data("dynamic"),10),e=c.data("end_time"),f=c.data("poll_url"),g,j=5,k=60;if(f&&!(typeof b!=="number"||isNaN(b)))g=function(b){a[f]=setTimeout(function(){a[f]=
$.ajax({global:!1,url:f,data:{deadline:e},success:d})},b*1E3)},g(b)},function(){var d=a[$(this).data("poll_url")];typeof d==="number"?clearTimeout(d):typeof d.abort==="function"&&d.abort()})})})(this);
instrument_function(function(){$(function(){function a(a){return a.closest("#preview, .render_mustache").data("data")}var d=".NS_message_threads__show";$(document).on("click",d+" .pledge_details_link",function(a){$(d).find(".pledge_details").toggleClass("visible");$(document).trigger("resize");$(this).toggleClass("selected");track("Message Info Toggle",{text:$.trim($(this).text())});a.preventDefault()});$(d+":visible").livequery(function(){function c(a){$.ajax({url:e.urls.web.read,type:"put"});$("#thread_"+
e.id+", "+d).removeClass("unread");a&&a.preventDefault()}var b=$(this),e=a(b);c();$(d+" .mark_as_unread").on("click",function(a){$.ajax({url:e.urls.web.unread,type:"put"});$("#thread_"+e.id+", "+d).addClass("unread");a&&a.preventDefault();track("Message Read Toggle",{toggled_to:"unread"})});$(d+" .mark_as_read").on("click",c)});$(document).on("submit",d+" form.reply",function(c){var b=$(this),e="messages";typeof current_project!=="undefined"&&(e="project_messages");b.closest(".modal_dialog").length&&
(e="backer_modal");$("body").attr("id")==="backers_show"&&(e="backer_page");$("body").attr("id")==="backings_show"&&(e="backings_page");$.ajax({url:b.attr("action"),type:b.attr("method"),dataType:"json",data:b.serialize()+"&"+$.param({"mp[message_context]":e}),success:function(c){var e=a(b),j=b.closest(d).find("ul.messages");j.append(render("messages/_show",c)).trigger("message_sent",e?[e.backing?e.backing.id:void 0,j.children().length]:[]);$(document).trigger("resize");b.get(0).reset()}});c.preventDefault()});
$(document).on("focus",d+" form.reply textarea",function(){var a=$(this);a.closest("form.reply").addClass("replying");a.removeAttr("placeholder")});$(document).on("click",d+" .respond_link",function(a){$(d+" form.reply textarea").focus();track("Message Reply Click");a.preventDefault()})})})(this);
instrument_function(function(a){$(function(){function d(){$("form.term").term_form().on("submit",function(a){a.preventDefault();a=$(this);l.set_params(a.serialize_without_blank())&&track("Message Inbox Search",{selected_project:$.trim($("#content .projects .title b").text()),term:a.find("input#term").val()})})}function c(a){j=$("#preview");j.html(render("message_threads/_show",a,"messages/_show")).data("data",a);g=$(f);k=g.find(".messages_container");var b=$("form.reply"),c=$(f).find(".respond_shortcut");
$("#message_threads").removeClass("full_width");setTimeout(function(){$("#preview_container").fadeIn(function(){e();$("#content ul.threads").height()>j.height()&&$("#preview").simple_sticky_bar();if(a.messages.length>1){var b=$(f+" ul.messages li.message:last-child");k.scrollTo(b)}})},250);k.scroll(function(){var a=$(this),d=b.position()||{top:0};a.height()-d.top+220<=0?c.removeClass("hidden"):c.addClass("hidden")}).scroll();track("Message Thread View")}function b(){var a={};$(".dropdown a.selected").each(function(){var b=
$(this);_.extend(a,URI(b.attr("href")).query(!0))});l.set_params($.param(a),!0)}function e(){if(j.length){var a=j.get(0).offsetTop-$(window).scrollTop(),b=$(window).height(),c=g.find(".backing").height();a<0&&(a=0);a=b-c-a;k.height(a);j.css("margin-bottom",$(window).height()-a-60);g.trigger("shifted");$(f+" ul.messages").height()>=k.height()?$(f+" .respond").removeClass("hidden"):$(f+" .respond").addClass("hidden")}}if($("#message_threads_index, #message_threads_show").length){var f=".NS_message_threads__show",
g=$(f),j=$([]),k=$([]);track("Message Inbox View");var l=new Location($.parseEscapedJSON(a.threads),$("#content"),"message_threads/_index",{url:$("#content").data("message_threads_url"),mobius_on:"message_threads"});l.on_change(function(a){var b=$("#content ul.threads"),c=!(!this.get("params")||!this.get("params.debug"));_.each(a.message_threads||this.get("message_threads"),function(a){c||delete a.debug;a.id&&b.append(render("message_threads/_row",a))})});l.change();d();l.on_change_params(d);$(document).on("change",
"form.params",function(a){a.preventDefault();a=$(this);l.set_params(a.serialize_without_blank())});$(document).on("click","li.thread > a",function(a){var b=$(this),c=b.data("api_url");c&&($.api_ajax({url:oauth_url(c),dataType:"json",success:function(a){$("li.thread").removeClass("selected");b.closest("li.thread").addClass("selected");History.pushState({selected_thread:a},null,typeof current_project!=="undefined"?a.urls.web.project_message_thread:a.urls.web.message_thread)}}),a.preventDefault())});
$(window).on("statechange",function(){var a=History.getState().data;a&&typeof a.selected_thread!=="undefined"&&c(a.selected_thread)});window.selected_thread&&c($.parseEscapedJSON(window.selected_thread));l.get("params.flag")&&$(".message_"+l.get("params.flag")+" .report-spam a").click();$(document).on("click","#content .dropdown a",function(a){var c=$(this),d=c.closest(".dropdown"),e=d.closest(".dropdown_container");d.find("a").removeClass("selected");c.addClass("selected");b();e.hasClass("projects")?
track("Message Inbox Project Filter",{selected_project:$.trim($(this).text())}):e.hasClass("views")&&track("Message Inbox Views Filter",{selected_project:$.trim($("#content .projects .title b").text()),selected_view:$.trim($(this).text())});a.preventDefault()});$(document).on("scroll",e);$(document).on("focus",f+" #message_body",function(){k.animate({scrollTop:$("ul.messages").height()+60},1200,"easeOutExpo")});$(document).add(window).resize(function(){e()});a.threads=l}})})(this);
instrument_function(function(){$(function(){$(document).on("submit","form#new_message",function(a){a.preventDefault();var d=$(this);d.hasClass("disabled")||$.ajax({type:d.attr("method"),url:d.attr("action"),dataType:"json",data:d.serialize(),success:function(a){a.error?d.find("textarea").closest("fieldset").addClass("field_with_errors"):(d.trigger("message_sent"),KsrJSON.parse_response(a,d.closest(".ajax-container")))},complete:function(){d.removeClass("disabled")}})});if(History.emulated.pushState)$("a.messages_nav").on("click",
function(a){URI(document.referrer).path()==="/messages"&&(history.back(),a.preventDefault())});$(document).on("click","#mark_as_spam_dialog a.spam",function(a){a.preventDefault();a=$(this);$.post($(this).attr("href"),null,null,"json");$(this).trigger("close.modal_dialog");growl({success:"Thanks, we'll check it out"});$('a[href^="/messages/'+a.attr("id")+'/report"]').replaceWith("Thanks for reporting this. We'll check it out")})})})(this);
instrument_function(function(){(function(a){a(document).on("click",".message .report-spam a",function(d){d.preventDefault();var c=a(this),b=this,e=c.closest(".message");d=e.clone();var f=a('<p class="flagged_message"><em class="spam_reported"></em></p>');d.find("span.report-spam").remove();a.modal_confirm(function(){e.find(".body").before(f);return KsrJSON.get(c.data("url"),"post",f.find("em"),b)},{message:d.html(),confirm_text:"Report message as spam",title:"Report this message to Kickstarter"})});
a(document).on("ksr_json:complete",".message .spam_reported",function(d,c){var b=a(this).closest(".message"),e=b.find(".report-spam");e.hide();c.status===200&&!e.is(".admin")&&b.find(".body").hide()})})(jQuery)})(this);
instrument_function(function(){$(function(){function a(){$("#hero").height($(window).height());$("#video_container video").css({"margin-left":-Math.round($("#video_container video").width()/2),"margin-top":-Math.round($("#video_container video").height()/2)});$("#video_container img").css({"margin-left":-Math.round($("#video_container img").width()/2),"margin-top":-Math.round($("#video_container img").height()/2)})}var d=$("#mobile_index");if(d.length){var c=$("#email_or_phone_message",d),b=!1;$(window).resize(function(){a()});
$(document).on("submit","#send_mobile_link_form",function(a){a.preventDefault();var d=$(this);b||(b=!0,$.ajax({type:"post",url:"/mobile/send_link",dataType:"json",data:{email_or_phone:d.find("#email_or_phone").val()},success:function(a){a.success?(c.removeClass("error").html(a.success),d.remove()):a.error&&c.addClass("error").html(a.error)},complete:function(){b=!1}}))});$(document).on("closed.modal_dialog","#send_mobile_link_dialog",function(a){a.preventDefault();$("#send_mobile_link_form",d).length||
c.html("You should already have a link from us &mdash; check your email or your text messages!")});setTimeout(function(){a();$("body").removeClass("loading")},100)}})})(this);
instrument_function(function(){$(function(){function a(c){var b=c.data("frame")||0,d=c.data("timeout");c.data("animating")&&(c.find("img").hide(),c.find("img").eq(b).show(),c.data("frame",b<2?b+1:0),d&&clearTimeout(d),d=setTimeout(function(){a(c)},200),c.data("timeout",d))}var d=$("body#newsletters_index");d.length&&d.find("li.newsletter-item").livequery("mouseenter",function(){$(this).data("animating",!0);a($(this))}).livequery("mouseleave",function(){$(this).data("animating",!1)})})})(this);
instrument_function(function(){$(function(){$(document).on("submit","ol.admin-notes form",function(){var a=$("#admin-menu .note_count"),d;if(d=a.text().match(/^(\d+)/))d=parseInt(d[1],10),a.text(d+1+" notes")})})})(this);
instrument_function(function(){$(function(){function a(){c.scrollTop()<b.position().top+b.height()-c.height()-e.height()?$(".checkout_actions").addClass("shadow"):$(".checkout_actions").removeClass("shadow")}var d=$(".checkout_actions_wrap"),c=$(window),b=$("#main"),e=$(".checkout_actions_prop");d.length&&(a(),$(window).scroll(function(){a()}),$(window).resize(function(){a()}),$(document).on("shifted",function(){a()}))})})(this);
instrument_function(function(){$(function(){function a(a,c){return isNaN(a)?"$0.00":"$"+formatters.format_number(a*c,a*c<2?2:0)+" USD"}$(".pledges__checkout_amount input#backing_amount").livequery(function(){function d(){c.val()?(e.text(a(parseFloat(c.val()),parseFloat(b.data("rate")))),b.css("visibility","visible"),b.addClass("show")):(b.css("visibility","hidden"),b.removeClass("show"))}var c=$(this),b=c.closest(".pledges__checkout_amount").find(".fx-estimate"),e=b.find("span");c.on("input cut paste keyup",
function(){d()});d()})})})(this);
instrument_function(function(){$(function(){$(".pledges__checkout_faqs").length&&($(document).on("click",".pledges__checkout_faqs .faq-question a",function(a){var d=$(this).closest(".faq");d.toggleClass("expanded");track("Toggled Pledge Checkout FAQ",{pledge_faq_question:d.find(".question").text()});a.preventDefault()}),$("body#pledges_edit").length&&setTimeout(function(){$(".faqs li#change_my_pledge_amount").addClass("expanded");$(".faqs li#change_my_reward_selection").addClass("expanded");$(".faqs li#cancel_my_pledge").length&&
$(".faqs li#cancel_my_pledge").addClass("expanded")},800))})})(this);
instrument_function(function(){$(function(){var a=$(".pledges__checkout_rewards");$(document).on("click",".pledges__checkout_rewards .toggle_reward_description",function(){$(this).closest(".description.short").hide();$(this).parent().parent().find(".description.full").show();return!1});a.length&&(a.on("change",".reward input.radio",function(){var d=$(this);d=d.parent().offset().top+d.parent().outerHeight();var c=$(".checkout_actions_wrap").offset().top,b=$(".reward input.radio:checked").closest(".reward"),
e=parseInt($(".text#backing_amount").attr("value").replace(/[^0-9\.]/,""),10),f=b.data("reward");if(isNaN(e)&&f)e=f.minimum;$(".reward",a).removeClass("selected");b.addClass("selected");current_checkout.set({amount:e,reward:f});$(".checkout_actions").hasClass("animated")||($(".checkout_actions_wrap").sticky_bar({parent:$("body"),attach_to:"bottom"}),$(".checkout_actions").addClass("animated"));c<d&&$(window).scrollTop(window.pageYOffset+d-c)}),$(".reward input.radio:checked").trigger("change"),$(".checkout_rewards .reward:not(.disabled)").mouseenter(function(){$(this).addClass("hovering")}).mouseleave(function(){$(this).removeClass("hovering")}),
$(document).on("click",".checkout_rewards .reward:not(.disabled)",function(){$(this).children("input.radio").attr("checked","checked").trigger("change")}))})})(this);
instrument_function(function(){$(function(){function a(a){var b=a.closest("form").find(d);a=a.find(".shipping_option");var e=b.find(".shipping_setting");b=b.find(".shipping_message");a.length?(b.html(a.clone()),e.attr("disabled",!1),e.val()==="1"&&b.addClass("backer_domestic")):(b.empty(),e.attr("disabled",!0))}var d=".NS_pledges__checkout_shipping";$(d).find(".no-js input").attr("disabled",!0);$(document).on("change",".pledges__checkout_rewards .reward input.radio",function(){var c=$(".reward input.radio:checked").closest(".reward");
a(c)});a($(".reward input.radio:checked").closest(".reward"));$(".modal_dialog:visible "+d).livequery(function(){a($(this).closest(".modal_dialog").find(".reward.shipping.visible"))});$(document).on("click",d+" .shipping_message a",function(a){var b=$(this),e=b.closest(d).find(".shipping_setting"),f=b.closest(".shipping_message");b=b.closest("form").find(".pledges__checkout_rewards");a.preventDefault();b.hasClass("modal")?b.find(".reward.visible"):b.find(".reward.selected");e.val()==="1"?(f.removeClass("backer_domestic"),
e.val("0"),current_checkout.set("domestic",!1)):(f.addClass("backer_domestic"),e.val("1"),current_checkout.set("domestic",!0))})})})(this);instrument_function(function(){$(function(){$(document).on("click",".pledges__checkout_summary .toggle_reward_description",function(a){$(this).closest(".description.short").hide();$(this).parent().parent().find(".description.full").show();a.preventDefault()})})})(this);
instrument_function(function(){$(function(){$(".NS_pledges__form #backing_amount").on("blur",function(){current_checkout.set({amount:parseInt($(this).attr("value").replace(/[^0-9\.]/,""),10)})})})})(this);
instrument_function(function(){$(function(){$(".NS_pledges__no_ship").livequery(function(){var a=$(this),d=$("form.NS_pledges__form, form.manage_pledge"),c=d.find(".fields_and_submit"),b=d.closest(".modal_dialog"),e=b.data("modal_dialog");a.find("a.override").click(function(a){a.preventDefault();$(this).trigger("close");d.data("override",!0);d.removeAttr("submitting");d.find(".shipping_option.domestic input[type=hidden]").val("1");d.submit()});a.find("a.button_green").click(function(d){d.preventDefault();
$(this).trigger("close");e&&(a.hide(),c.show(),b.find("h1").show())})})})})(this);
instrument_function(function(){$(function(){var a=$("body#pledges_edit"),d=$("body#pledges_edit form.manage_pledge"),c=$(".radio:checked").attr("id");a.length&&d.length&&($(document).on("submit","body#pledges_edit form.manage_pledge",function(a){var c=$("body#pledges_edit form input.radio:checked"),d=parseFloat(c.attr("alt"));c=c.attr("alt");var g=$("body#pledges_edit form input#backing_amount").val();d===0?$("#confirm-adjust-reward-amount").html("No reward"):$("#confirm-adjust-reward-amount").html("Reward: "+
c);$("#confirm-adjust-pledge-amount").html("Pledge: "+formatters.currency_symbol(current_project.get("currency"))+g);$("#confirm-adjust-pledge").modal_dialog();a.preventDefault()}),a.on("click",".faq-question a",function(){var a=$(this).closest(".faq");track("Toggled Pledge Edit FAQ",{pledge_faq_question:a.find(".question").text()})}),$(".flash-error").livequery(function(){var a,c=parseInt($(".text#backing_amount").attr("value").replace(/,/,""),10);a=typeof $(".radio:checked").attr("alt")!=="undefined"?
parseInt($(".radio:checked").attr("alt").replace(/,/,""),10):null;track("Errored Pledge Selection",{pledge_tier_amount:parseInt(a,10),pledge_error_text:$(this).text(),pledge_input_amount:parseInt(c,10)})}),$(document).on("click",".amzn-payments",function(){track("Clicked Amazon Payments Logo")}),$(".pledges__checkout_rewards .checkout_rewards .radio").change("click",function(){var a=$(this).attr("id");a!==c&&track("Selected Reward Tier",{pledge_amount_selected:parseInt($(this).attr("alt").replace(/[^0-9\.]/,
""),10),shipping_applicable:$(this).closest(".reward").data("shipping_applicable"),pledge_context:$("body").attr("id"),project_country:current_project.data.country});c=a}),$(document).on("click","body#pledges_edit .confirm-yes",function(){d.removeAttr("submitting");$(document).off("submit","body#pledges_edit form.manage_pledge");d.submit();return!1}),$(document).on("click","a.cancel",function(a){a.preventDefault();$(this).trigger("close.modal_dialog")}),$(document).on("before_close.modal_dialog",
function(){d.removeAttr("submitting")}))})})(this);
instrument_function(function(){$(function(){$("body#pledges_new").length&&($("a.show_all_rewards").click(function(a){$(this).parents(".checkout_rewards").find("li:hidden").show();$(this).parents(".checkout_rewards").removeClass("clicked_reward");$(this).parents(".show_all").hide();a.preventDefault();$(document).trigger("shifted");track("Expanded Rewards")}),$(".flash-error").livequery(function(){var a,d=parseInt($(".text#backing_amount").attr("value").replace(/[^0-9\.]/,""),10);a=typeof $(".radio:checked").attr("alt")!==
"undefined"?parseInt($(".radio:checked").attr("alt").replace(/[^0-9\.]/,""),10):null;track("Errored Pledge Selection",{pledge_tier_amount:parseInt(a,10),pledge_error_text:$(this).text(),pledge_input_amount:parseInt(d,10)})}),$(document).on("click",".amzn-payments",function(){track("Clicked Amazon Payments Logo")}),location.search.indexOf("edit_from_interstitial=shipping")!==-1?track("Clicked Edit Shipping",{shipping_applicable:$(".radio:checked").parent().data("shipping_applicable"),project_country:current_project.get("country")}):
location.search.indexOf("edit_from_interstitial=amount")!==-1&&track("Clicked Edit Amount",{shipping_applicable:$(".radio:checked").parent().data("shipping_applicable"),project_country:current_project.get("country")}))})})(this);
instrument_function(function(){(function(){if($(".project_post_summary").length)$(document).on("click",".project_post_summary .post_likes_small button",function(a){a.preventDefault();a=$(this).closest("form");$.ajax({url:a.attr("action"),dataType:"json",type:"POST",success:function(a){if(a.modal){var c=$.create_modal_dialog("",a.data);c.data("modal_dialog").open();typeof FB!=="undefined"&&FB.XFBML.parse(c.find(".modal_dialog_body")[0])}a.post&&(Post.find(a.post.id)||new Post({id:a.post.id})).set(a.post)}})})})()})(this);
instrument_function(function(){$(function(){if($("body#posts_edit").length)$(document).on("click",".wym_tools li a",function(){track("Editor Tool Click",{tool_clicked:$(this).attr("title"),context:"post_edit_body"})})})})(this);
instrument_function(function(){$(function(){var a=$("body#posts_show");a.length&&(a.on("click",".namepile a#full_namepile",function(a){a.preventDefault();var c=$(this);$.ajax({url:c.attr("href"),dataType:"json",type:"GET",success:function(a){a=_.map(a.users,function(a){return Mustache.render('<a href="{{url}}">{{name}}</a>',a)});a=formatters.to_sentence(a);c.parent().html(a+" like this update.")}})}),a.on("click",".post_likes button",function(a){a.preventDefault();a=$(this).closest("form");$.ajax({url:a.attr("action"),
dataType:"json",type:"POST",success:function(a){if(a.modal){var b=$.create_modal_dialog("",a.data);b.data("modal_dialog").open();typeof FB!=="undefined"&&FB.XFBML.parse(b.find(".modal_dialog_body")[0])}a.post&&(Post.find(a.post.id)||new Post({id:a.post.id})).set(a.post)}})}))})})(this);
instrument_function(function(){$(function(){var a=$(".NS-projects__admin_keyboard_control");if(a.length)$(document).on("keydown",function(d){if(d.ctrlKey){var c=a.find("#project_moderated_state"),b=a.find("form"),e="";switch(d.which){case 82:e="recommended";break;case 80:e="promising";break;case 65:e="acceptable";break;case 84:e="tolerated";break;default:return}c.val(e);$.ajax({url:b.attr("action"),type:b.attr("method"),dataType:"json",data:b.serialize(),success:function(){growl({info:e})}});$("#admin-nav-wrap span.moderation_status").text(e.substring(0,
3))}})})})(this);instrument_function(function(){$(function(){var a=$(".NS_projects__creator_nav");a.length&&(a.find(".close").click(function(){var a=$("body");a.hasClass("creator_nav_visible")?(a.removeClass("creator_nav_visible"),track("Creator Nav Toggle",{toggled_to:"hidden"})):(a.addClass("creator_nav_visible"),track("Creator Nav Toggle",{toggled_to:"visible"}))}),track_links("#creator_nav a.track","Creator Nav Link Click"),$(".ss-help").tipsy({gravity:"w"}))})})(this);
instrument_function(function(){$(function(){if($(".NS_projects__edit_submission").length)$(document).on("click",".NS_projects__edit_submission a.reply",function(a){var d=$(".NS_projects__edit_submission .reply_container form");a.preventDefault();d.is(":visible")?d.slideUp(300,"easeOutQuad"):d.slideDown(300,"easeOutQuad",function(){$(this).find("textarea").focus()});return!1})})})(this);
instrument_function(function(){$(function(){function a(){$("ul.faqs li.faq:not(.deleted) input.position").each(function(a,c){$(c).val(a+1)})}var d=$("#project_faqs_edit"),c=$([]);if(d.length){if(window.location.pathname.match(/\/faqs$/))window.location.hash="project-faqs";c=$("#faq-template").children().clone();d.on("click","form .link_to_new_question",function(){var b=c.clone(!0,!0),d=(new Date).getTime();b.find("input,textarea,select").each(function(a,b){var c=$(b);c.attr("id",c.attr("id").replace(/new_project_faq/,
d)).attr("name",c.attr("name").replace(/new_project_faq/,d));c.is(".delete")&&c.val(0)});b.removeClass("hidden").appendTo("#project-faqs ul.faqs");a();return!1});d.on("click",".faq .delete",function(a){a.preventDefault();a=$(this).closest("li.faq");a.find("input.delete").val(1);a.addClass("deleted").fadeOut("slow");return!1});$("#project-faqs ul.faqs",d).sortable({containment:"#project_faqs_edit",placeholder:"project-faq-placeholder",handle:".move",axis:"y",tolerance:"pointer",items:"li.faq",start:function(a,
c){$(".project-faq-placeholder").css("height",c.item.height()+"px");c.item.addClass("reordering")},stop:function(a,c){c.item.removeClass("reordering")},update:a})}})})(this);instrument_function(function(){$(function(){var a=$(".share-container a.facebook");a.click(function(d){window.open(a.attr("href"),"Facebook","width=600px,height=450px");d.preventDefault()})})})(this);
instrument_function(function(){$(function(){$(".NS-projects-rightcol-rewards a.pledge").on("click",function(a){var d=current_user.get("id")===current_project.get("creator.id");if(current_project.get("is_backing")||d)a.preventDefault(),a.stopPropagation()});$(".NS-projects-rightcol-rewards a.pledge").on("click",function(a){current_project.get("state")!=="live"&&(a.preventDefault(),a.stopPropagation())})})})(this);
instrument_function(function(){$(function(){var a=$(".NS_projects__project_share");a.length&&($(document).on("fb:loaded",function(){FB.api(URI.encode("http://www.kickstarter.com"+window.location.pathname),function(d){d=window.formatters.format_number(d.shares||d.likes||0,0);a.find(".facebook .count").text(d)})}),a.find(".facebook a").click(function(a){a.preventDefault();a=$(this).attr("href");FB.ui({method:"feed",link:a},function(a){a&&a.post_id?(growl({success:"Facebook post was published!"}),mixpanel.track("Facebook post",
_.extend(mixpanel_project(current_project),{facebook_post_id:a.post_id}))):growl({notice:"Facebook post was not published!"})})}))})})(this);
instrument_function(function(){$(function(){function a(a){c.get(0)!==d.get(0)&&d.remove();c.find(".flash-error").remove();c.show();a&&c.prepend('<div class="flash-error">'+a+"</div>");d=c}var d,c=$([]),b=!1;$(".projects__verify_identity").livequery(function(){d=$(this).find("form");d.prop("onsubmit",null);c=d;$(".projects__verify_identity form :input:not(.optional)").validates_presence();$(".projects__verify_identity #person_national_id").validates_format().validates_luhn_check()});$(document).on("submit.kba",
".projects__verify_identity form",function(e){e.preventDefault();var f=$(this),g;f.validate()&&!b&&(g=$('<div class="spinner" />').spin({lines:8,length:4,width:2,radius:5,speed:2,color:"#ffffff"}),f.after(g),b=$.ajax({url:f.attr("action"),type:f.attr("method"),data:f.serialize(),dataType:"json",complete:function(){g.remove();b=!1},success:function(b){b.questions?(b.questions.form_url=b.location,b.questions.client_token=f.find("input#client").val(),d=$(render("projects/_verify_identity_questions",
b)),c.get(0)===f.get(0)?(f.hide(),f.after(d)):f.replaceWith(d),d.find("div.questions").serialScroll({items:"li.question",lazy:!1,lock:!1,cycle:!1,duration:300,easing:"easeInOutExpo"}).on("notify.serialScroll",function(a,b){var c=$(this).find("li.question").eq(b).outerHeight();$(this).height(c)}).trigger("notify",[0]),d.find("a.next").on("click",function(a){var b=$(this);b.closest("li.question").find(":checked").length&&(b.is(".submit")?b.submit():d.find("div.questions").trigger("next"));a.preventDefault()}),
d.find("a.next:last").each(function(){$(this).text("Submit").addClass("submit");e.preventDefault()})):b.retry===!1&&b.html?f.closest("#account-setup-panel").html(b.html).trigger("project_edit:update_completion"):a(b.error||"")}}))})})})(this);
instrument_function(function(){$(function(){function a(a){window.top.postMessage(JSON.stringify($.extend({account_panel:!0,completed:$(".needs_verification").length===0,height:c.height()+20},a)),"*")}var d=$("body.projects_account"),c=$("#projects_account");d.length&&(c.on("resize ksr_json:complete project_edit:update_completion",function(){a()}),$(".needs_verification").livequery(function(){a()},function(){a()}),c.on("project_edit:update_preview",function(){a({update_preview:!0})}),$(document).on("click",
"#projects_account a.zendesk",function(){a({open_zendesk:!0})}),setTimeout(a,500))})})(this);instrument_function(function(){$(function(){var a=$("#country-select");a.livequery(function(){var d=$(this);d.find("a.button_green").on("click",function(a){d.find("form").submit();a.preventDefault()});d.find("select#country").on("change",function(){var c=$(this).val().toLowerCase();d.find(".country").hide();d.find("."+c).show();a.removeClass().addClass(c)}).trigger("change")})})})(this);
instrument_function(function(){$(function(){$("body#projects_dashboard").length&&(function(){function a(){var a=$("#stats-funding-graph .graph");c=[];d=[{data:funding_graph_data,color:"#55a4f2",points:{show:!0,fill:!0},lines:{show:!0,fill:0.35},hoverable:!0,yaxis:1},{data:funding_graph_options.goal_line_data,color:"rgba(135,196,66,1)",points:{show:!1,fill:!1},lines:{show:!0,lineWidth:1},shadowSize:0,hoverable:!1},{data:[0,0],yaxis:2}];c={xaxis:{mode:"time"},yaxis:{min:0,max:funding_graph_options.max_y,
tickFormatter:function(a,b){var c=funding_graph_options.currency_symbol+formatters.format_number(a.toFixed(b.tickDecimals),0);a===funding_graph_options.goal&&(c='<span class="goal_style">'+c+"</span>");return c}},y2axis:{min:0,max:funding_graph_options.percent_y,tickFormatter:function(a,b){var c=formatters.format_number(a.toFixed(b.tickDecimals)*100,0)+"%";a===1&&(c='<span class="goal_style">'+c+"</span>");return c}},grid:{show:!0,hoverable:!0,tickColor:"rgba(128,152,176,0.3)",borderWidth:0.5,borderColor:"#ccc",
color:"#ccc",mouseActiveRadius:15,markings:function(a){var b=[],c=a.yaxis.ticks[1].v,d;for(d=a.yaxis.min;d<a.yaxis.max;d+=c*2)b.push({yaxis:{from:d,to:d+c},color:"#fff"});return b}}};$.plot(a,d,c);$("#stats-funding-graph .graph").on("plothover",function(a,c,d){if(d){var e=funding_graph_data[d.dataIndex][3],l;if(l=e?e.date_label:null)a=funding_graph_data[d.dataIndex][1],c=e.backers_count,e=e.percent_raised,b.find(".content").html('<span class="num date">'+l+'</span><span class="num">'+funding_graph_options.currency_symbol+
formatters.format_number(a,0)+'</span> raised<br/><span class="num">'+e+'%</span> funded<br/><span class="num">'+formatters.format_number(c,0)+"</span> backers"),a=b.width(),c=b.height(),l=parseInt(b.css("padding-right").replace("px",""),10),b.css({left:d.pageX-a/2-(l-1),top:d.pageY-c-35}),b.find(".nipple").css({left:a/2+5,top:c+12,position:"absolute"}),b.fadeIn("fast")}})}if($("#stats-funding-graph .graph_container").length){var d,c,b=$("#stats-funding-graph .bubble");(function(){a();$("#stats-funding-graph .bubble").mouseenter(function(){b.fadeOut("fast")});
$("#stats-funding-graph .graph_container").mouseleave(function(){b.fadeOut("fast")})})()}}(),function(){if($("#stats-pledge-distribution-graph .graph_container").length){var a=$("#stats-pledge-distribution-graph .bubble");(function(){var d=[{data:reward_distribution_data,color:"#b8dc90"}],c={bars:{show:!0,align:"center"},xaxis:{ticks:reward_distribution_options.tick_labels,autoscaleMargin:0.02},yaxis:{min:0},grid:{hoverable:!0,borderWidth:0.5,borderColor:"#fff",color:"#999"}},b;b=$("#stats-pledge-distribution-graph .graph");
b.off("plothover");$.plot(b,d,c);b.on("plothover",function(b,c,d){var j,k,l;d&&(b=d.datapoint[1],j=reward_distribution_data[d.dataIndex][3],c=reward_distribution_data[d.dataIndex][4],k=formatters.format_number(Math.round(b/reward_distribution_options.backers_count*100),0),l=formatters.format_number(Math.round(c/reward_distribution_options.money_raised*100),0),k<1&&(k=" < 1"),l<1&&(l=" < 1"),j=j===0?'<span class="num">No Reward Chosen</span>':'<span class="num">'+funding_graph_options.currency_symbol+
j+"</span> Reward",a.find(".content").html(j+'<br/><span class="num">'+formatters.format_number(b,0)+"</span> "+(b===1?"Backer":"Backers")+" ("+k+'% of backers) <br/><span class="num">'+funding_graph_options.currency_symbol+formatters.format_number(c,0)+"</span> Pledged ("+l+"% of money raised)"),b=a.width(),c=a.height(),k=parseInt(a.css("padding-right").replace("px",""),10),a.css({left:d.pageX-b/2-(k-1),top:d.pageY-c-35}),a.find(".nipple").css({left:b/2+5,top:c+12,position:"absolute"}),a.fadeIn("fast"))});
$("#stats-pledge-distribution-graph .bubble").mouseenter(function(){a.fadeOut("fast")});$("#stats-pledge-distribution-graph .graph_container").mouseleave(function(){a.fadeOut("fast")})})()}}(jQuery),function(){var a=$("#projects_dashboard #activity").find(".mobius").data("mobius");a.current_page=0;$(document).on("click","#projects_dashboard .activity-filters a",function(d){var c=$(this);c.closest(".activity-filters").find("a").removeClass("current");c.addClass("current");$.ajax({type:"get",dataType:"html",
url:c.attr("href"),success:function(b){b=$(b).find(".mobius").children();$("#activity .mobius").html(b).trigger("mobius:loaded_page",[1,b]);a.clear_extra_params();a.add_param("cat",c.data("filter"));a.current_page=1}});d.preventDefault()})}(),function(){if($("#stats-referrer-type-pie .graph_container").length){var a={series:{pie:{show:!0,radius:1,label:{radius:0.5,formatter:function(a,c){return'<div class="pieLabel">'+a+"<br/><b>"+Math.round(c.percent)+"%</b></div>"}}}},legend:{show:!0,labelBoxBorderColor:"white",
labelFormatter:function(a,c){return'<div class="pieLabel" style="color:'+c.color+'" >'+a+": <b>"+Math.round(c.percent)+"%</b></div>"},container:$("#stats-referrer-type-pie .pie_label_container")}},d=[{label:"via Kickstarter",data:parseInt(referrer_type_data.internal,10),color:"#B8DC90"},{label:"via External",data:parseInt(referrer_type_data.external,10),color:"#999"}],c=$("#stats-referrer-type-pie .pledges .graph");$.plot(c,d,a)}}(jQuery),function(){if($("#stats-video .graph_container").length){var a=
{series:{bars:{show:!0,barWidth:0.85,horizontal:!0}},xaxis:{min:0,max:Math.max(parseInt(video_stats_data.internal_starts,10),parseInt(video_stats_data.external_starts,10))*1.05,tickFormatter:function(a){return formatters.format_number(a,0)}},yaxis:{show:!1,min:-0.15,max:2},legend:{show:!0,labelBoxBorderColor:"white",noColumns:2,labelFormatter:function(a,c){return'<div class="label_text" style="color:'+c.color+'">'+a+": "+formatters.format_number(c.data[0][0],0)+"</b></div>"},container:$("#stats-video .label_container")},
grid:{show:!0,tickColor:"rgba(128,152,176,0.3)",borderWidth:0.5,borderColor:"#ccc",color:"#ccc"}},d=[{label:"Kickstarter",data:[[parseInt(video_stats_data.internal_starts,10),1]],color:"#91C2F2"},{label:"Off-site",data:[[parseInt(video_stats_data.external_starts,10),0]],color:"#ec9b23"}],c=$("#stats-video .video_plays .graph");$.plot(c,d,a)}}(jQuery))})})(this);
instrument_function(function(a){$(function(){function d(){w=function(){}}function c(a){var b=a.find(":input.required"),c=!0,d=!1;if($("body").is(".rejected, .appealed")&&!a.children().length)return!0;b.each(function(){$(this).val()||(c=!1)});a.find(".asset_upload.required:not(.has_file)").length&&(c=!1);if(a.is("#the-basics-panel")&&(d=$("#project_goal").val(),!d||!d.match(/[1-9]/)))c=!1;a.is("#rewards-panel")&&(a.find(".reward .summary").length||(c=!1));a.is("#account-setup-panel")&&(c=a.data("completed"));
a.is("#submission-panel")&&(c=!!a.find(".accepted").length);return c}function b(){var a=!0;$("#steps-nav a").each(function(){var b=$(this),d=$(b.attr("href")+"-panel");c(d)?b.addClass("completed").removeClass("errored"):(b.removeClass("completed"),a=!1)});a?($("#project-edit-nav .submit a").addClass("enabled"),$("body").is(".unlaunched_country")||$("#project-edit-nav .launch a").addClass("enabled")):($("#project-edit-nav .submit a").removeClass("enabled"),$("#project-edit-nav .launch a").removeClass("enabled"))}
function e(){var a=$("#forms .flash-error");$("#steps-nav a").removeClass("errored");if(a.length)return a.find("li").each(function(){track("Project Edit Error",{error_message:$(this).text()})}),a.closest("li.panel").each(function(){var a=$(this).data("panel_id");$('#steps-nav a[href="#'+a+'"]').addClass("errored")}),!0;return!1}function f(a){var b=!1,c=p.find("input.photo, input.video, input.avatar");c.each(function(){$(this).data("uploading")&&(b=!0)});b?(h.modal_dialog(),h.one("abandon",function(){a();
c.trigger("ksr_file_upload:cancel")})):a();return b}function g(){var a=$("#project-edit-nav .preview a").attr("href");a&&$.ajax({type:"get",url:a,dataType:"json",success:function(a){k.find("#preview .project-content").html(a.content);k.find("#preview #project-header").html(a.running_board);k.find("#project-card-preview").html(a.card);k.find("#submission-sidebar-help").html(a.submission_sidebar)}})}function j(a){if(!a.is(".disabled")){var b=a.text();a.addClass("disabled");$.ajax({url:a.attr("href"),
type:"put",dataType:"json",success:function(b){b.share_token?(a.closest("#share_preview_container").removeClass("no_token").addClass("has_token"),$("#sharing_enabled input.url").val(b.url),$(".project_preview_comments").addClass("has_token")):(a.closest("#share_preview_container").removeClass("has_token").addClass("no_token"),$(".project_preview_comments").removeClass("has_token"),$(".NS_comments__comment").length||$(".project_preview_comments").removeClass("has_comments"))},complete:function(){a.removeClass("disabled");
a.text(b)}})}}var k=$("#projects_edit"),l,o,p,h=$("#confirm-abandon-upload"),m=$("#country",k).val(),w=function(){};k.length&&($(window).on("message",function(a){try{var c=JSON.parse(a.originalEvent.data),d=$("#account-setup-panel").data("completed");c.account_panel&&($("#account-setup-panel").data("completed",c.completed),$("#account-setup-panel iframe").height(c.height));c.completed!==d&&b();c.update_preview&&$(window).trigger("project_edit:update_preview");c.open_zendesk&&Zenbox.render()}catch(e){}}),
function(){function c(a){window.history&&window.history.replaceState?window.history.replaceState(null,null,a):window.location.replace(a)}function g(a){if($(".form-tools").is(":visible"))return f(function(){v.modal_dialog();v.off("saving").one("saving",function(){w=function(){a();v.off("canceling");d()}});v.off("canceling").one("canceling",function(){a();v.off("canceling");d()})}),!0;return!1}function j(a){var b=k.find("#steps-nav > li:eq("+a+") > a"),d=$("#running-board > .help-panels");if(!b.is(".disabled")){if(g(function(){j(a)}))return!1;
p=$("ol.form-panels li.panel:eq("+a+")");p.trigger("resize");p.is("#submission-panel")&&function(){var a=p.find(".read_messages_path").text();a&&$.ajax({type:"put",url:a})}();$(window).scrollTop()>75&&$(window).scrollTop(60);o.trigger("goto",[a]);B.show();F.show();T.hide();$("#project-edit-nav a").removeClass("selected").removeClass("selected_last");b.addClass("selected");a===0&&F.hide();a===s-1&&(B.hide(),T.show());d.height(d.height());d.children(".panel").hide();$("#"+p.data("panel_id")+"-help").fadeIn();
d.css("height","auto");$("#sidebar > .sidebar-help-panels > .panel").hide();$("#"+p.data("panel_id")+"-sidebar-help").fadeIn();k.find(".tools").show();c("#"+p.data("panel_id"));q=a;$("body").removeClass("confirm_preview");return!0}}function l(a,b){if(g(function(){l(a,b)}))return!1;var c=$(".content-toggle > "+a.data("for")),d=$("#project-edit-nav a.selected");if(c.is(":visible"))c.css("height","100%"),c.css("min-height","0%"),c.animate({height:"0%"},function(){c.hide()}),j($("#steps-nav li:has(a.selected_last)").index());
else if(!b||b())c.css("height","0%"),c.css("min-height","0%"),c.show(),c.animate({height:"100%"},function(){c.css("height","auto");c.css("min-height","100%")}),k.find(".tools").hide(),$(window).scrollTop()>75&&$(window).scrollTop(60),p.find("textarea.intermediate_editor, textarea.editor").each(function(){var a=$.wymeditors($(this).data("wym_index"));a&&$("object",a._doc).hide()}),a.addClass("selected"),d.is(".tab")||d.addClass("selected_last").removeClass("selected");return!0}var m=k.find("#main"),
o=m.find(".window"),q=0,s=m.find("ol.form-panels li.panel").length,B=k.find("li.next"),F=k.find("li.back"),T=k.find("li#submit_for_review"),v=$("#confirm-abandon");p=$("ol.form-panels li.panel:eq("+q+")");v.on("click",".save a",function(a){a.preventDefault();$(".tools-panels .save a").click();v.trigger("saving");v.trigger("close")});v.on("click",".cancel a",function(a){a.preventDefault();$(".tools-panels .cancel a").click();v.trigger("canceling");v.trigger("close")});v.on("closed.modal_dialog",function(){v.off("canceling");
v.off("saving")});h.on("click",".save a",function(a){a.preventDefault();h.off("abandon");h.trigger("close")});h.on("click",".cancel a",function(a){a.preventDefault();h.trigger("abandon");h.trigger("close");track("Project Edit Cancel Upload");v.on("closed.modal_dialog",function(){v.off("abandon")})});o.serialScroll({items:"li.panel",lazy:!1,lock:!1,cycle:!1,duration:300,easing:"easeInOutExpo"});o.on("shifted",function(){$(".form-panels .panel:first").resize()});$("#main li.panel").livequery(function(){$(this).on("resize",
function(){var a=$(window).height()-60-80-$("#running-board-wrap").height();p.height()>a?o.height(p.height()):o.height(a);$(window).trigger("shifted")})});B.find("a").click(function(a){a.preventDefault();j(q+1);track("Project Edit Next")});F.find("a").click(function(a){a.preventDefault();j(q-1);track("Project Edit Back")});$("#project-edit-nav a").click(function(a){a.preventDefault();var b=$(this);a=b.parent("li").index();if(!b.is(".disabled"))if(k.find(".content.tabbed").slideUp(),p.find("textarea.intermediate_editor, textarea.editor").each(function(){var a=
$.wymeditors($(this).data("wym_index"));a&&$("object",a._doc).show()}),$("#project-edit-nav .tab.selected").removeClass("selected"),$(document).trigger("ksr_video:pause_all_videos"),b.is(".tab")){if(!$("body").is(".unlaunched_country")||!b.closest(".launch").length)l(b),b.hasClass("selected")&&(b.data("for")==="#preview"?track("Project Edit Preview"):b.data("for")==="#launch"&&track("Project Edit Change Panel",{selected_panel:"Launch"}))}else if(b.is(".view_project")){if(!g(function(){window.location.href=
b.attr("href")}))window.location.href=b.attr("href")}else j(a),track("Project Edit Change Panel",{selected_panel:$.trim(b.text())})});$(document).on("click","#amz_banner .account_setup",function(a){a.preventDefault();a=$("#account-setup-panel").index();j(a);track("Project Edit Amazon Banner Click")});$(document).on("click","#submit_for_review a",function(a){a.preventDefault();var b=$(this),c=$("#saving-layer");c.show();$.ajax({url:b.attr("href"),type:"get",dataType:"json",success:function(a){a.ok?
l(b,function(){$("body").addClass("confirm_preview");track("Project Submission Preview");return!0}):a.redirect_to?url_equals(window.location,a.redirect_to)?window.location.reload(!0):window.location=a.redirect_to:($.each(a,function(a,b){if(b){var c=$("#"+a.replace(/_/g,"-"));c.find("object").each(function(){swfobject.removeSWF(this.id)});c.html(b);window.FB&&window.FB.XFBML&&setTimeout(function(){FB.XFBML.parse(c[0])},0)}}),e()&&j($(".flash-error:first").closest(".panel").index()))},complete:function(){c.hide()}})});
$(document).on("click","#submit_edit a",function(a){a.preventDefault();a=$(this);l(a);track("Project Submission Preview Edit")});jQuery.fx.off=!0;$("body").is(".submitted")&&$.browser.msie&&$.browser.version<9?$("#steps-nav a[href=#submission]").click():window.location.hash?(window.location.hash==="#preview"&&l($(".preview .tab")),$("#steps-nav a[href="+window.location.hash+"]").click()):$("body").is(".submitted")?$("#steps-nav a[href=#submission]").click():$("#steps-nav a[href=#the-basics]").click();
jQuery.fx.off=!1;$("#loading").hide();$("#logo a, #menu-sub a, a.exit-link").on("click",function(a){if(!a.metaKey&&!a.ctrlKey){a.preventDefault();var b=$(this);if(!g(function(){window.location.href=b.attr("href")}))window.location.href=b.attr("href")}});$(document).on("submit","#submit_confirmation > form",function(a){a.preventDefault();a=$(this);var b=$("#saving-layer");b.show();track("Project Submission Preview Submit");$.ajax({url:a.attr("action"),type:"post",dataType:"json",data:a.serialize(),
success:function(a){a.redirect_to?url_equals(window.location,a.redirect_to)?window.location.reload(!0):window.location=a.redirect_to:($.each(a,function(a,b){if(b){var c=$("#"+a.replace(/_/g,"-"));c.find("object").each(function(){swfobject.removeSWF(this.id)});c.html(b);FB&&FB.XFBML&&setTimeout(function(){FB.XFBML.parse(c[0])},0)}}),e()&&j($(".flash-error:first").closest(".panel").index()),b.hide())},error:function(){b.hide()}})});$(document).on("submit","div#forms form.edit_submission",function(a){a.preventDefault();
a=$(this);var b=$("#saving-layer");$.trim(a.find("textarea").val()).length?(a.trigger("close"),b.show(),$.ajax({url:a.attr("action"),type:"post",dataType:"json",data:a.serialize(),success:function(a){$("#submission-panel").html(a.panel);$("#submission-sidebar-help .appeal").remove()},complete:function(){b.hide()}})):growl({error:"Message is blank"})});$(document).on("submit","#launch_confirmation > form",function(a){$(this).find("input.confirmation").is(":checked")||($(this).removeAttr("submitting"),
growl({error:"Please accept the Kickstarter Project Guidelines."}),a.preventDefault())});a.ksr_before_unload=function(a){g(a)||a()};$.rails.beforeSubmit=function(a){return!g(function(){a()})};b();e()&&j($(".flash-error:first").closest(".panel").index())}(),function(){function a(b){b=b.clone();b.find("object.swfupload").remove();b.find(".location-search .field-selected").remove();return b}var c={};k.find("form").each(function(){var b=$(this);c[b.closest(".panel").data("panel_id")]=a(b)});$.fn.restore_form=
function(){var d=$(this),f=d.closest(".panel").data("panel_id"),g=c[f],h;h=d.find(".asset_upload:first");h.find("input.photo, input.video, input.avatar").trigger("ksr_file_upload:cancel");h=h.clone();h.find("object").remove();g.find(".asset_upload:first").replaceWith(h);d.find("input.photo, input.video, input.avatar, textarea.editor").trigger("destroy");d.replaceWith(g);FB&&FB.XFBML&&setTimeout(function(){FB.XFBML.parse(g[0])},0);g.trigger("form_restored");c[f]=a(g);b();e()};$.fn.update_form_cache=
function(){var b=$(this),d=b.closest(".panel").data("panel_id");c[d]=a(b)}}(),$(window).on("project_edit:update_preview",g),$(window).on("wymeditor:video_encoded",g),$(".edit_project input.photo, .edit_project input.video, .edit_project input.avatar").livequery(function(){var a="image",c=$(this),d=c.parent(),e=d.parent(),f=function(){},h={};c.is(".video")&&(a="video",f=function(){g()});$.extend(h,{type:a,after_encode:f});c.is(".photo, .avatar")?c.ksr_uploader(h):c.ksr_file_upload(h);c.on("file_queued",
function(){e.removeClass("has_file");d.addClass("in_progress")});c.on("file_added",function(){e.addClass("has_file");e.closest(".grey-field").removeClass("error");d.removeClass("in_progress");a==="video"&&e.addClass("encoding");e.find("input.photo, input.video, input.avatar").trigger("resize");g();b()});c.on("error",function(){d.removeClass("in_progress")})}),$(document).on("click","body#projects_edit .asset_upload a.remove",function(a){a.preventDefault();a=$(this).attr("href");var b=$(this).closest(".asset_upload");
$.ajax({url:a,type:"delete",success:function(){b.removeClass("has_file");b.find("input.photo, input.video, input.avatar").trigger("resize");g()},error:function(){growl({error:"Could not delete this file."})}})}),$(document).on("click","body#projects_edit .asset_upload a.retry_upload",function(a){a.preventDefault();a=$(this).closest(".asset_upload");a.removeClass("has_file encoding");a.find("input.photo, input.video, input.avatar").trigger("ksr_file_upload:cancel").trigger("resize")}),k.on("submit",
"form.edit_project",function(a){a.preventDefault();var c=$(this),g=k.find(".tools li.save"),h=k.find(".tools li.cancel"),j=$("#saving-layer");c.find(".editor.videos_encoding").length||f(function(){g.addClass("disabled").find("a").text("Saving...");h.addClass("disabled");j.show();$.ajax({type:c.attr("method"),url:c.attr("action"),dataType:"json",data:c.serialize(),global:!1,success:function(a){var f=g.closest(".tools"),h=$(a.panel);c.find("input.photo, input.video, input.avatar, textarea.intermediate_editor").trigger("destroy");
c.replaceWith(h);h.data("original_values",h.serialize());FB&&FB.XFBML&&setTimeout(function(){FB.XFBML.parse(h[0])},0);if(a.errored)$("#steps-nav a.selected").removeClass("completed"),c.trigger("shifted"),f.trigger("errored"),e(),d();else{$("#steps-nav a.selected").removeClass("errored");h.update_form_cache();typeof current_user!=="undefined"&&h.find("#project_creator_name").length&&current_user.set("name",h.find("#project_creator_name").val());f.find(".form-navigator").show();f.find(".form-tools").hide();
k.find("#preview .project-content").html(a.content);a.launch&&$("#launch").html(a.launch);k.find("#preview #project-header").html(a.running_board);k.find("#project-card-preview").html(a.card);k.find("#submission-sidebar-help").html(a.submission_sidebar);if(a.category){f=parseInt(k.find("#forms").attr("data-category_id"),10);var j=a.category.id;f!==j&&track("Project Edit Change Category",{category_before:f,category_after:j});k.find("#forms").attr("data-category_id",a.category.id);k.find("#category_name_guidelines").text(a.category.name)}else k.find("#forms").attr("data-category_id",
"");w();b()}},error:function(){c.trigger("ajax_error")},complete:function(a){g.removeClass("disabled").find("a").text("Save");h.removeClass("disabled");j.hide();c.trigger("ajax_complete",[a])}})})}),function(){var a=k.find(".tools"),b=a.find(".form-navigator"),c=a.find(".form-tools");$(document).on("change keyup cut paste input dirty wymeditor:doc_html_updated","form.edit_project",function(a){var d=$(a.target),e=d.closest("form");_.each(WYMeditor.INSTANCES,function(a){a.update()});e.serialize()===
e.data("original_values")||d.is(".do_not_dirty")&&a.type!=="dirty"||(b.hide(),c.show())});c.find(".save a").click(function(a){a.preventDefault();$("#confirm-abandon").is(":visible")?track("Project Edit Save",{context:"modal"}):track("Project Edit Save",{context:"toolbar"});$(this).closest("li.save").is(".disabled")||p.find("form").submit()});c.find(".cancel a").click(function(b){b.preventDefault();f(function(){$("#confirm-abandon").is(":visible")?track("Project Edit Discard Changes",{context:"modal"}):
track("Project Edit Discard Changes",{context:"toolbar"});p.find("form").restore_form();a.find(".form-navigator").show();a.find(".form-tools").hide()})})}(),function(){function a(d){var e;$.each(c,function(a){d.attr("id")===a&&(e=b.find(String(this)),e.text(d.val()))})}var b=k.find("#sidebar"),c={project_name:".project-card h2 > strong > a",project_blurb:".project-card p"};$(window).on("form_restored",function(c){c=$(c.target);var d=c.find(".field.location-search input.text").val();c.closest("#the-basics-panel").length&&
(c.find(":input").each(function(){a($(this))}),b.find("ul.project-meta > li > a > span.location-name").text(d))});$(document).on("keyup input cut paste change","#the-basics-panel form :input",function(b){a($(b.target))});$("#the-basics-panel form .location-search input.text").livequery("livesearch_selector:select",function(a,c){b.find("ul.project-meta > li > a > span.location-name").text(c)});$("#the-basics-panel form .location-search input.text").livequery("livesearch_selector:unselect",function(){b.find("ul.project-meta > li > a > span.location-name").text("")});
$(document).on("file_added","#the-basics-panel form .project-image",function(a,c){b.find(".project-thumbnail img").attr("src",c.image_src)})}(),function(){function a(d){$("#duration_duration, #duration_deadline").each(function(){var a=$(this),e=a.is(":checked");a.is("#duration_duration")?e&&(d||(c=!0,$("#project_duration").focus()),$.browser.msie?$("#project-duration-calendar").hide():$("#project-duration-calendar").slideUp(200),$("#project_deadline").val("")):a.is("#duration_deadline")&&e&&($("#project_duration").val(""),
$.browser.msie?$("#project-duration-calendar").show():$("#project-duration-calendar").slideDown(200),b&&$("#project-duration-calendar input.input-calendar-date").val(b._copy_date_with_time(b.selected_date,b.time).toString("yyyy-MM-dd HH:mm:ss")))})}var b,c=!1;$("#project-duration-calendar").find("div.calendar").livequery(function(){var c,d=$("#project-duration-calendar input.input-calendar-date");$(this).on("calendar_date_picker:date_selected",function(a,b){var c=moment(b).format("YYYY-MM-DD HH:mm:ss Z");
d.val(c);d.trigger("change")});c=d.val()!==""?moment(d.val(),"YYYY-MM-DD HH:mm:ss Z").toDate():moment().add("days",30).toDate();b=$(this).calendar_date_picker({allow_deselect:!1,previous_month_text:"<",next_month_text:">",time_text:"Time:",selected_date:c}).data("calendar_date_picker");a(!0)});$("#the-basics-panel").on("focus","#project_duration",function(){c?c=!1:($("#duration_duration").prop("checked",!0),a())});$(document).on("change click","#the-basics-panel .funding-duration input.radio",a);
$(document).on("click","#the-basics-panel .funding-duration em.rec",function(){$(this).closest("li").find("input.text").focus()})}(),k.find("#project-edit-nav-wrap").sticky_bar({parent:$("body"),lock_to_bottom:!1}),$(document).on("click",".panel label.primary.help",function(){var a=$(this).closest(".grey-field").find(".field-help-2");a.is(":visible")?a.slideUp(300,"easeOutQuad",function(){$(this).trigger("shifted")}):a.slideDown(300,"easeOutQuad",function(){$(this).trigger("shifted")})}),function(){function a(b){var d=
b.siblings(".warning");(b=c.exec(b.val()))?(d.html('<p class="first">Reward warning: <span class="bad_word">'+b[0]+'</span></p><p>Please make sure you are not offering raffles, discounts, coupons, cash-value gift cards, alcohol, financial returns, or investments. What else is prohibited? See our <a class="link_to_prohibited_projects_dialog" href="#">list of prohibited items and subject matter</a>.</p>'),d.slideDown()):d.slideUp();d.trigger("shifted")}var b=$(".fields.rewards",k),c=/(?:(%)|\b(raffle|raffled|raffling|coupon|coupons|discount|discounts|discounted|reduced|percent|investor|investors|investment|invested|investments|investing|stake|stakes|sweepstake|sweepstakes|financial|equity|lottery|lotteries|gift certificate|gift card|wine|beer|alcohol|champagne|cocktail)\b)/i;
$("textarea",b[0]).each(function(){a($(this))});$(document).on("keyup paste cut",".fields.rewards textarea",function(){a($(this))})}(),l=$($("#faq-template").html()),o=function(){$(this).closest("ul").find("> li:not(.deleted)").each(function(a,b){$(b).find("input.position").val(a+1)})},$(document).on("click",".link_to_new_question",function(){var a=l.clone(!0,!0),b=(new Date).getTime();a.find("input,textarea,select").each(function(a,c){c.disabled=!1;c.id=c.id.replace(/new_project_faq/,b);c.name=c.name.replace(/new_project_faq/,
b)});a.appendTo("#project-faqs > ul").find(".question input").trigger("focus");o.call(a);return!1}),k.on("click",".faq .delete",function(){var a=$(this).closest("li.faq");a.addClass("deleted").find("input.position").val("").andSelf().find("input.delete").val("1");o.call(a);a.fadeOut("slow");return!1}),$("#project-faqs > ul",k).sortable({containment:"#projects_edit",placeholder:"project-faq-placeholder",handle:".move",axis:"y",tolerance:"pointer",items:"> li.faq",start:function(a,b){$(".project-faq-placeholder").css("height",
b.item.height()+"px");$(document.body).addClass("disable_text_selection");b.item.addClass("reordering")},stop:function(a,b){b.item.removeClass("reordering");$(document.body).removeClass("disable_text_selection")},update:o}),function(){function a(c,d){d=d||1;!f&&d<=100&&(f=!0,d+=1,setTimeout(function(){$.get("/profile/phone_number/poll_verification",{call_token:c,country:m},function(e){f=!1;e.html!==void 0?($("#phone_fields").html(e.html),b()):a(c,d)})},2E3))}function c(){$("#phone_fields .verification_error",
k).html("").addClass("hide");$(".field_with_errors",k).children().unwrap()}function d(b){if(b.type==="keypress"&&b.which!==13)return!0;var e=$("#phone_fields",k).find("input.radio[name=verify]:checked").val(),f=$("#phone_number",k),g=$("#phone_fields",k);if(e!=="sms"&&e!=="call")return!1;$.ajax({type:"put",url:"/profile/phone_number/send_verification",dataType:"json",data:{method:e,number:f.val(),country:m},success:function(b){c();b.error!==void 0?(f.wrap('<div class="field_with_errors" />').focus(),
g.find(".phone_section .verification_error").html(b.error).removeClass("hide").trigger("shifted")):(e==="call"?(g.find(".verify-phone strong").html(b.call_token),a(b.call_token)):g.find(".sms_token").val(""),g.find(".highlight strong").html(b.number+".").andSelf().find(".phone_section, .options_section").addClass("hide").andSelf().find(e==="sms"?".sms_section":".call_section").removeClass("hide").trigger("shifted"))},beforeSend:function(){g.addClass("loading").trigger("shifted")},complete:function(){g.removeClass("loading").trigger("shifted")}});
return!1}function e(a){if(a.type==="keypress"&&a.which!==13)return!0;var d=$("#phone_fields"),f=d.find("#sms_token");$.ajax({type:"post",url:"/profile/phone_number/verify",dataType:"json",data:{sms_token:f.val(),country:m},success:function(a){c();a.error!==void 0?(f.wrap('<div class="field_with_errors" />').focus(),d.find(".sms_section .verification_error").html(a.error).removeClass("hide").trigger("shifted")):a.html!==void 0&&(d.replaceWith(a.html),b())},beforeSend:function(){d.addClass("loading")},
complete:function(){d.removeClass("loading")}});return!1}var f=!1;$(document).on("click","#phone_fields .cancel, #resend_call_token, #resend_sms_token",function(){$("#phone_fields").find(".call_section, .sms_section").addClass("hide").andSelf().find(".phone_section, .options_section").removeClass("hide").trigger("shifted")});$(document).on("click","#send_verification",d);$(document).on("keypress","#phone_fields #phone_number",d);$(document).on("click","#phone_fields #verify_sms_code",e);$(document).on("keypress",
"#phone_fields #sms_token",e);$(document).on("click","#phone_fields #change_number",function(){$.ajax({type:"get",url:"/profile/phone_number/edit",dataType:"json",success:function(a){a.html!==void 0&&$("#phone_fields").replaceWith(a.html)}});return!1})}(),$(document).on("click","ol.verification_steps a.continue",function(a){a.preventDefault();var c=$("ol.verification_steps li.verify"),d=$(this),e=d.text();c.hasClass("loading")||(track("Amazon Verification Status Check",{button_text:d.text()}),$.ajax({type:"get",
url:d.attr("href")+".json",dataType:"json",success:function(a){switch(a.amazon_kyc){case "":case "pending_user_action":case "invalid_account_state":c.find(".pending_user_action_msg .same_status").slideDown();break;case "pending_review":!c.hasClass("pending_user_action")&&!c.hasClass("invalid_account_state")&&c.find(".pending_review_msg .same_status").slideDown();break;case "active":$("#account-setup-panel").find(".flash-error").remove(),c.closest(".grey-field").removeClass("error"),c.closest(".verification_steps").removeClass("needs_verification")}c.removeClass("active closed pending_user_action pending_review invalid_account_state no_status").addClass(a.amazon_kyc).trigger("shifted");
b()},beforeSend:function(){c.addClass("loading");d.html("Verifying...")},complete:function(){c.removeClass("loading");d.html(e)}}))}),$(document).on("submit","form#bank_account_form",function(a){var b=$("#bank_account_container",k),c=$("#bank_errors",k),d=$(this),e=$('<div class="spinner" />').spin({lines:8,length:4,width:2,radius:5,speed:2,color:"#ffffff"});a.preventDefault();d.after(e);$.ajax({type:"post",url:d.attr("action"),dataType:"json",data:d.serialize(),success:function(a){a.error!==void 0?
c.html(a.error).removeClass("hide"):b.closest("#account-setup-panel").html(a.data)},beforeSend:function(){b.addClass("loading")},complete:function(){b.removeClass("loading");e.remove()}})}),$("li.reward .summary",k).livequery(function(){$(this).show().siblings(".backer_rewards_fields").hide()}),k.on("change click","li.reward .limit_label input[type=checkbox]",function(){var a=$(this),b=a.parent("label").siblings("input.text");a.is(":checked")?b.closest(".limit").addClass("limit_set").end().focus():
b.closest(".limit").removeClass("limit_set").end().val("")}),k.on("click","li.reward .sold_out_label",function(a){a.preventDefault();a=$(this).siblings(".sold_out_checkbox");var b=$(this).parent(".limit"),c=b.find("input.text"),d=b.find(".limit_checkbox");a.is(":checked")?(a.prop("checked",!1),d.prop("checked",!1),c.val("").removeAttr("disabled"),b.removeClass("marked_sold_out limit_set"),track("Reward Sold Out Toggle",{toggled_to:"sold_out"})):(a.prop("checked",!0),c.attr("disabled","disabled"),
b.addClass("marked_sold_out"),track("Reward Sold Out Toggle",{toggled_to:"not_sold_out"}));$(this).trigger("dirty")}),k.on("click","li.reward .summary .edit",function(){$(this).parents(".summary").hide().siblings(".fields").show().trigger("shifted");track("Reward Edit")}),k.on("nested_attributes_list:added","li.reward",function(){$(this).trigger("shifted").trigger("dirty")}),k.on("nested_attributes_list:removed","li.reward",function(){$(this).trigger("shifted").trigger("dirty")}),k.on("change","li.reward .shipping select",
function(){var a=$(this).val(),b=$(this).closest(".shipping").find(".shipping_amount");a==="international"?(b.removeClass("hidden"),b.find("input.text")):(b.addClass("hidden").removeClass("cost_added"),b.find("input.text").val(formatters.currency_symbol(current_project.get("currency"))+"0"),b.find(".add_cost_checkbox").prop("checked",!1))}),k.on("change click","li.reward .shipping_amount input[type=checkbox]",function(){var a=$(this),b=$(this).closest(".shipping_amount"),c=b.find("input.text");a.is(":checked")?
b.addClass("cost_added"):(c.val(formatters.currency_symbol(current_project.get("currency"))+"0"),b.removeClass("cost_added"))}),function(){function a(){$("ol.rewards > li:visible",k).each(function(a,b){$(b).find("span.reward_num").html(a+1)})}$("ol.rewards",k).livequery(a);k.on("nested_attributes_list:added nested_attributes_list:removed","li.reward",a)}(),$(document).on("click","body#projects_edit #preview a#enable_sharing",function(a){var b=$(this);a.preventDefault();track("Project Edit Preview Link Toggle",
{toggled_to:"enabled"});j(b)}),$(document).on("click","body#projects_edit #preview a#disable_sharing",function(a){var b=$(this);a.preventDefault();track("Project Edit Preview Link Toggle",{toggled_to:"disabled"});j(b)}),$(document).on("click","body#projects_edit #preview #sharing_enabled .url",function(a){this.focus();this.select();a.preventDefault();track("Project Edit Preview Link Select")}),$(document).on("click","body#projects_edit .faq-question a",function(){$(this).closest(".faq").toggleClass("expanded");
return!1}),$(document).on("click","body#projects_edit .amazon_token input",function(){$(this).select()}),$(document).on("click","body#projects_edit .description .wym_tools li a",function(){track("Editor Tool Click",{tool_clicked:$(this).attr("title"),context:"project_edit_description"})}),$.support.localStorage&&(localStorage.banner_amz_setup_hide||$("#amz_banner").removeClass("hidden"),$("#amz_banner .dismiss").click(function(a){a.preventDefault();try{localStorage.banner_amz_setup_hide=!0}catch(b){}$("#amz_banner").fadeOut(function(){$("#amz_banner").addClass("hidden")});
track("Project Edit Amazon Banner Dismiss")})))})})(this);
instrument_function(function(){$(function(){var a=$("#projects_guidelines"),d=$("#project-edit-nav",a),c=$("#continue input[type=checkbox]",a),b=$("#continue input[type=submit]",a);a.length&&($(".modal_dialog, .modal_dialog .modal_dialog_content, .modal_dialog .modal_dialog_inner").preload_background_image(),d.find("#steps-nav .first a").addClass("selected"),d.find("a").click(function(a){a.preventDefault()}),c.on("change",function(){$(this).is(":checked")?$(this).siblings("label").addClass("selected").removeClass("unselected"):
$(this).siblings("label").addClass("unselected").removeClass("selected");c.not(":checked").length===0?b.removeClass("disabled"):b.addClass("disabled")}),b.on("click",function(){return c.not(":checked").length===0?($("#saving-layer").show(),!0):(typeof pageTracker!=="undefined"&&pageTracker._trackEvent("Guidelines","Disabled Continue Click",""),!1)}))})})(this);
instrument_function(function(a){$(function(){var d=$("#projects_show");if(d.length){$("#verifying-pledge.modal_dialog .remote_modal_dialog",d).click(function(){$(this).parents("div#verifying-pledge").trigger("close.modal_dialog")});$(document).on("click","#projects_show .faq-question a",function(a){a.preventDefault();$(this).closest(".faq").toggleClass("expanded")});location.hash&&setTimeout(function(){$(location.hash).find(".faq-question a").click()},500);$(".modal_dialog:visible li.pledge_field input.text").livequery(function(){var a=
$(this).closest("form"),b=a.find(".reward.visible").data("reward");current_checkout.set({amount:b.minimum,reward:b},{do_not_track:!0});a.find(".text#backing_amount").blur(function(){var a=parseInt($(this).attr("value").replace(/[^0-9\.]/,""),10);current_checkout.set({amount:a})})});$("body").is(".touchable")&&(d.on("modal_dialog:opened",function(){$("video").length&&a.Touch&&($("#video-section",d).css("visibility","hidden"),$("video")[0].pause())}),d.on("close.modal_dialog",function(){$("#video-section",
d).css("visibility","visible")}));var c=read_cookie("edit_survey_response");c&&$.open_remote_modal_dialog(URI.decode(c),{title:"Your survey response",remote_modal_dialog_contents_loaded:function(){destroy_cookie("edit_survey_response",URI.parse(window.location.href).path)},dataType:"html",beforeSend:function(a){a.setRequestHeader("Accept","text/javascript, */*")}});var b=1;$(window).resize(function(){b>0&&(track("Window Resize Start"),b-=1)})}})})(this);
instrument_function(function(){$(function(){var a=$("#projects_start"),d=$("#interstitials"),c=0;a.length&&($(".categories ul a").on("click",function(a){$(".categories ul a").addClass("dim");$(this).removeClass("dim");d.find(".category").removeClass("visible");d.find('[data-name="'+$(this).attr("data-name")+'"]').addClass("visible");d.find("video")[0].pause();d.height(d.find('[data-name="'+$(this).attr("data-name")+'"]').height()+161);$("body").is(".touchable")||$(document).scrollTo($(".categories"),
800);track("Start Project Category Select",{category_name:$(this).text()});a.preventDefault()}),d.find(".category .close").on("click",function(a){$(".categories ul a").removeClass("dim");d.find(".category").removeClass("visible");d.height(0);a.preventDefault()}),$("#tools .right_side").cycle({fx:"fade",timeout:0,speed:300,pager:$("#tools .left_side ul"),after:function(a,d){c>0&&track("Start Project Tool Select",{slide_description:$(d).attr("data-slide-description")});c+=1;var f=$(d),g=$("#tools").find("video").get(0);
g&&g.pause();f.find("video").length&&f.find("video")[0].play()},pagerAnchorBuilder:function(a){return"#tools .left_side ul li:eq("+a+")"}}),$("#quotes").find(".group .mirror").each(function(){$(this).html($(this).closest(".group").find(".regular").html())}),$("#bottom a.play_button").on("click",function(a){a.preventDefault();$(this).closest("section").addClass("video_expanded");$(this).closest("section").find(".video-player").trigger("ksr_video:play")}),$("#bottom .close").on("click",function(a){a.preventDefault();
$(this).closest("section").removeClass("video_expanded");$(this).closest("section").find(".video-player").trigger("ksr_video:pause")}),$("section#quotes").waypoint(function(){$(this).addClass("loaded")},{offset:150}),$("section#stats").waypoint(function(a){a==="down"?$("section#hero").find("video")[0].pause():$("section#hero").find("video")[0].play()}),$("#menu-sub-me a").on("click",function(){$("#started_projects").toggleClass("transparent")}))})})(this);
instrument_function(function(){$(function(){var a=$(".refund_checkouts_form");a.length&&(a.on("change","select#refund_checkout_amount",function(){var a=$(this),c=a.closest("li").find(".refund_amount_wrapper"),b=c.find("input#refund_checkout_amount"),e=!1;a.val()===""?(c.addClass("partial"),e=!0):c.removeClass("partial");b.prop("disabled",!b.is(":visible"));e&&b.focus()}).trigger("change"),$.inArray($("input#refund_checkout_amount").val(),[$("select#refund_checkout_amount").val(),""])===-1&&a.find("select#refund_checkout_amount").val("").trigger("change"))})})(this);
instrument_function(function(){$(function(){var a=$("#stored_card_form"),d=a.find(".selected input.card_toggle");a.length&&(d.length||(d=$("input.card_toggle:first")),$(document).on("change click","input.card_toggle",function(a){a.preventDefault();var b=$(this);$("input.card_toggle").not(b).closest(".payment_option").removeClass("selected");b.closest(".payment_option").addClass("selected");a.preventDefault()}),d.prop("checked",!0).trigger("change"))})})(this);
instrument_function(function(){$(function(){var a=$("#saving-layer");$("body").append(a);$(document).on("submit","body.refund_checkouts_new_card #credit_card_form form",function(){a.show();setTimeout(function(){a.find(".modal_dialog_body").html("<h3>Well, this is embarrassing.</h3><p>Processing your pledge is taking longer than usual. If you'd like, you can refresh and try again.</p><p>Not to worry: you can only back a project once, so you will never be double-charged.</p>");a.removeClass("spinning")},
12E4)})})})(this);instrument_function(function(){$(function(){function a(a){c.find("li").removeClass("current");c.find('li[data="'+a+'"]').addClass("current")}var d=$("#school_index"),c=$(".help-kickstarter_school"),b=!1;d.length&&(c.find("a").on("click",function(){var c=$(this).parent("li").attr("data");b=!0;a(c);$.scrollTo("#"+c,800,{easing:"easeOutExpo",onAfter:function(){b=!1}})}),$("#main .section").waypoint(function(){if(!b)a($(this).attr("id")),window.location.hash=$(this).attr("id")}))})})(this);
instrument_function(function(){$(function(){var a=$("body.help"),d=$("#sidebar",a),c=$("#search",a);a.length&&(c.hover(function(){$(this).addClass("hover")},function(){c.removeClass("hover")}),d.sticky_bar({parent:d.closest("#content")}),$(".submit").click(function(){$("#content-wrap form.search").submit()}))})})(this);
instrument_function(function(){$(function(){function a(a,b){typeof pageTracker!=="undefined"&&pageTracker._trackEvent("Homepage Events",a,b)}function d(a,b){f.scrollTo(a,b,{axis:"y",easing:"easeOutExpo"});f.find(".video-player").trigger("ksr_video:pause");$("body").is(".touchable")&&(f.find("video").hide(),a.find("video").show());$("#categories .nav li").removeClass("selected").eq(a.index()).addClass("selected");f.children().removeClass("selected").eq(a.index()).addClass("selected")}function c(a,
b){a.urls.web.project=a.urls.web.project+"?ref="+b;return $('<div class="project">'+render("projects/_baseball_card_tall",a)+"</div>")}function b(a,b){var d=c(a,b);if(!d.length)return d;d.find(".friend_project_context").remove();d.append($("<div />",{"class":"friend_project_context"}).append($("<div />",{"class":"friend_facepile"})).append($("<p />",{"class":"friend_namepile"})));try{return $.each(a.friends,function(b){b<2&&(d.find(".friend_facepile").append($("<a />",{href:this.urls.web.user,"class":"avatar_link"}).append($("<img/>",
{alt:this.name,"class":"avatar_img",height:"40",width:"40",src:this.avatar.thumb}))),d.find(".friend_namepile").append($("<a />",{href:this.urls.web.user}).text(this.name)),b===0&&a.friends.length===2?d.find(".friend_namepile").append(" and "):b<a.friends.length-1&&d.find(".friend_namepile").append(", "))}),a.friends.length>2?d.find(".friend_namepile").append("and ").append($("<a/>",{href:a.urls.web.project+"#modal_dialog:more_friend_backers_"+a.id}).text(a.friends.length-2+" more ")).append(" "+
(a.friends.length===3?"person":"people")+" you follow "+(a.friends.length===3?"is a backer":"are backers")+"."):d.find(".friend_namepile").append(a.friends.length===1?" is a backer.":" are backers."),d}catch(e){return $.console.log(e),$([])}}var e=$("body#site_index"),f,g=$("body").is(".touchable");e.length&&(f=$("#project-slide"),$("#running-board-wrap").height(),$("#notifications").height(),$("#categories .nav li a.link").click(function(b){a("Category select",$(this).text());$.browser.msie&&$.browser.version<
8||(d(f.find(".project").eq($(this).parent().index()),350),b.preventDefault())}),$.browser.msie&&$.browser.version<8||(f.find(".project").show(),d(f.find(".project.potd"),0)),function(){function b(){d.find(".next, .previous").addClass("disabled").removeClass("enabled");(f===-1||e<f)&&d.find(".next").removeClass("disabled").addClass("enabled");e!==0&&d.find(".previous").removeClass("disabled").addClass("enabled");d.find(".slider").trigger("goto",[e*4])}var d=$("#location-projects"),e=0,f=-1,p=d.data("infinite_url");
d.infinite_carousel({target:".slider",items:".project",axis:"x",duration:500,force:!0,lock:!1,lazy:!0,easing:"easeOutExpo",cycle:!1,exclude:3,step:4});d.on("infinite_carousel:last_page",function(){p&&$.api_ajax({url:p,type:"get",dataType:"json",success:function(a){var e=d.find(".project-list");(p=a.urls.api.more_projects)||(f=Math.ceil(a.projects.length/4)-1);$.each(a.projects,function(){var a=this,b=!0;e.find("a").each(function(){if(url_equals(this.href,a.urls.web.project+"?ref=home_location"))return b=
!1});b&&e.append(c(a,"home_location"))});b()}})});$(document).on("click","#location-projects .previous:not(.disabled)",function(){a("Location Module","Previous");e-=1;b()});$(document).on("click","#location-projects .next:not(.disabled)",function(){a("Location Module","Next");e+=1;b()});b();$("#set-location").livequery(function(){var a=$(this);a.livesearch_pretty_input_dropdown({ignore_history:!0});a.on("livesearch:selected",function(g,w){var t=$("#location-projects .slider");p=w[3];a.trigger("livesearch:close_results");
d.find(".slider").trigger("goto",[0]);e=0;b();$("#set-location").fadeOut(function(){$("#your-location").fadeIn()});t.addClass("loading");$.api_ajax({type:"get",dataType:"json",url:p,success:function(a){var b=d.find(".project-list");b.empty();a.projects.length?(b.parent().removeClass("empty"),$.each(a.projects,function(){b.append(c(this,"home_location"))}),(p=a.urls.api.more_projects)||(f=Math.ceil(a.projects.length/4)-1)):b.parent().addClass("empty");a.projects.length<5&&d.find(".next, .previous").addClass("disabled").removeClass("enabled");
$("#location-projects .title-card h3").attr("class",a.location.country.toLowerCase()+" "+a.location.state?a.location.state.toLowerCase():"");d.find("h3 a.location-name").text(a.location.name).attr("href",a.location.urls.web.discover+"?ref=home_popular");$("#location-projects .title-card .see-all a").attr("href",a.location.urls.web.discover+"?ref=home_popular");$("#mega-footer-wrap").find(".current_location a").attr("href",a.location.urls.web.discover+"?ref=footer").find(".text").text(a.location.name)},
error:function(){growl({error:"Could not find that location?"})},complete:function(){t.removeClass("loading")}})})});$("#location-projects .not-here").click(function(b){a("Location Module","Change city");$("#set-location").fadeIn();$("#set-location input.input-search").focus();$("#location-projects").css({overflow:"visible"});g&&$("#project-slide li:not(.selected) video").fadeOut();b.preventDefault()});$("#set-location input.input-search").blur(function(){$("#set-location").fadeOut();$("#location-projects .not-here").fadeIn();
$("#location-projects").css({overflow:"hidden"});g&&$("#project-slide .project-video video").fadeIn()})}(),$("#trending-projects").each(function(){function b(){d.find(".next, .previous").addClass("disabled").removeClass("enabled");(f===-1||e<f)&&d.find(".next").removeClass("disabled").addClass("enabled");e!==0&&d.find(".previous").removeClass("disabled").addClass("enabled");d.find(".slider").trigger("goto",[e*4])}var d=$(this),e=0,f=-1,g=d.data("infinite_url");d.infinite_carousel({target:".slider",
items:".project",axis:"x",duration:500,force:!0,lock:!1,lazy:!0,easing:"easeOutExpo",cycle:!1,exclude:3,step:4});d.on("infinite_carousel:last_page",function(){g&&$.api_ajax({url:g,type:"get",dataType:"json",success:function(a){var e=d.find(".project-list"),l=shuffle(a.projects);(g=a.urls.api.more_projects)||(f=Math.ceil(a.projects.length/4)-1);$.each(l,function(){var a=this,b=!0;e.find("a").each(function(){if(url_equals(this.href,a.urls.web.project+"?ref=home_popular"))return b=!1});b&&e.append(c(a,
"home_popular"))});b()}})});$(document).on("click","#trending-projects .previous:not(.disabled)",function(){a("Popular Module","Previous");e-=1;b()});$(document).on("click","#trending-projects .next:not(.disabled)",function(){a("Popular Module","Next");e+=1;b()});b()}),$("#social-projects .slider").each(function(){function c(){e.find(".next, .previous").addClass("disabled").removeClass("enabled");(h===-1||g<h)&&e.find(".next").removeClass("disabled").addClass("enabled");g!==0&&e.find(".previous").removeClass("disabled").addClass("enabled");
e.find(".slider").trigger("goto",[g*4])}function d(a){f&&$.ajax({url:oauth_url(f),type:"get",dataType:"jsonp",success:function(d){var g=e.find(".project-list");(f=d.urls.api.more_projects)||(h=Math.ceil(d.projects.length/4)-1);e.find(".slider").removeClass("loading");a&&!d.projects.length&&(e.find(".slider").addClass("no-projects"),e.find(".next, .previous").addClass("disabled").removeClass("enabled"));$.each(d.projects,function(){var a=this,c=!0;g.find("a").each(function(){if(url_equals(this.href,
a.urls.web.project+"?ref=home_location"))return c=!1});c&&g.append(b(a,"home_social"))});c()}})}var e=$(this).closest("#social-projects"),f=e.data("infinite_url"),g=0,h=-1,m=!1;e.infinite_carousel({target:".slider",items:".project",axis:"x",duration:500,force:!0,lock:!1,lazy:!0,easing:"easeOutExpo",cycle:!1,exclude:3,step:4});e.on("infinite_carousel:last_page",d);$(window).on("scroll",function(){!m&&window.scrollY+$(window).height()*1.5>e.offset().top&&(a("Social Module","Load"),d(!0),m=!0,e.find("p.no-content").hide(),
e.find(".slider").show())});e.find(".previous").on("click",function(){a("Social Module","Previous");$(this).is(".disabled")||(g-=1,c())});e.find(".next").on("click",function(){a("Social Module","Next");$(this).is(".disabled")||(g+=1,c())});c()}),$("#curated-pages .slider").each(function(){function b(){c.find(".next, .previous").addClass("disabled").removeClass("enabled");d<Math.ceil(e/8)-1&&c.find(".next").removeClass("disabled").addClass("enabled");d!==0&&c.find(".previous").removeClass("disabled").addClass("enabled")}
var c=$(this).closest("#curated-pages"),d=0,e=$("#curated-pages .project-list li").size();c.serialScroll({target:".slider",items:"li",axis:"x",duration:500,force:!0,lazy:!0,easing:"easeOutExpo",cycle:!1,step:8});c.find(".previous").on("click",function(){a("Curated Module","Previous");$(this).is(".disabled")||(c.find(".slider").trigger("prev"),d-=1,b())});c.find(".next").on("click",function(){a("Curated Module","Next");$(this).is(".disabled")||(c.find(".slider").trigger("next"),d+=1,b())});b()}),$(".facebook_connect_wrap .big").click(function(){a("Social Module",
"Facebook connect")}),$(".project-image .video-player").click(function(){$(this).parent().siblings(".project-badge").fadeOut("slow")}),$("#location-projects").length||$("#content-wrap").addClass("no-location"),$("#running-board-wrap").removeClass("loading"))})})(this);
instrument_function(function(){$(function(){$("#jobs_index, .NS_jobs__why_work_at_kickstarter").length&&($(document).on("click","#openings_small .button",function(){$.scrollTo($($(this).attr("href")),{duration:2E3,easing:"easeOutExpo"})}),$(document).scroll(function(){$(window).scrollTop()>660?$("#hero video")[0].pause():$("#hero video")[0].play()}))})})(this);
instrument_function(function(){$(function(){if($("body#site_press").length)$(document).on("click",".read_more",function(a){$(".more").toggle();$(".read_more").toggle();a.preventDefault()})})})(this);instrument_function(function(){$(function(){$(document).on("change","body#site_privacy form.select_country",function(){$(this).submit()})})})(this);
instrument_function(function(){$(function(){function a(){c.find("video").each(function(){$(window).width()<=$(this).position().left||$(this).position().left+$(this).width()<0?$(this)[0].pause():$(this)[0].play()});c.find("video:last-child").position().left<=$(window).width()?$("#home_button").fadeIn():$("#home_button").fadeOut()}var d=$("body#site_team"),c=$("#video_header");d.length&&(c.kinetic({maxvelocity:120}),$("#home_button").click(function(){$("#video_header").scrollTo(0,0,{duration:2E3,easing:"easeOutExpo"})}),
$(window).resize(function(){a()}),c.scroll(function(){a()}),a())})})(this);instrument_function(function(){$(function(){$(document).on("change","body#site_tou form.select_country",function(){$(this).submit()})})})(this);
instrument_function(function(a){$(function(){function d(a){if(G){var b=URI(G),c=b.is("relative")||b.hostname()===URI().hostname()?$.ajax:$.api_ajax;K?a&&K.done(function(){a()}):K=c({url:b.toString(),type:"get",dataType:"json",global:!1,success:function(b){G=_.has(b,"urls")?b.urls.api.more_projects:b.more_projects;b=b.projects;var c=b.length;q.removeClass("loading");b=_.reject(b,function(a){return _.contains(S,a.id)});b=_.reject(b,function(a){return a.video===null});b.length<c&&track("Video Mode Rejected Projects",
{video_mode_playlist_original_length:c,video_mode_playlist_current_length:b.length,video_mode_playlist_number_rejected:c-b.length});G&&b.length<5&&(K=!1,d());v=v.concat(_.shuffle(b));h();typeof a==="function"&&a()},error:function(){n()},complete:function(){K=!1}})}}function c(a,b){q=$(z).empty().addClass("loading");track("Video Mode Change Playlist",{playlist_name:E});q.length||(q=$('<div class="NS-site_video loading"></div>'),$("body").prepend(q),q.height($(window).height()));v=v.slice(0,F);G=b||
"/video";v.length||u();d(function(){a&&x()})}function b(){return q.find("video").get(0)}function e(){return q.find(".title_card")}function f(){return q.find(".controls")}function g(){return q.find(".channel_controls")}function j(){if(!b()||!b().paused)e().fadeOut(),f().fadeOut(),g().fadeOut()}function k(){s&&clearTimeout(s);s=setTimeout(function(){j()},3E3);e().is(":hidden")&&(e().fadeIn(),f().fadeIn(),g().fadeIn())}function l(){s&&clearTimeout(s);s=setTimeout(function(){j()},3E3);f().is(":hidden")&&
f().fadeIn();g().is(":hidden")&&g().fadeIn()}function o(a){B&&$(b()).parent().show();b().play();a||j();$("#play_button").removeClass("play").addClass("pause");track("Video Mode Play")}function p(){b().paused?o():(b().pause(),k(),$("#play_button").removeClass("pause").addClass("play"),track("Video Mode Pause"))}function h(){var a=$(".channel_controls a."+E);F===0?$("a.prev_project").addClass("disabled"):$("a.prev_project").removeClass("disabled");F===v.length-1?($("a.next_project").addClass("disabled"),
a.addClass("disabled")):($("a.next_project").removeClass("disabled"),a.removeClass("disabled"));$(".channel_controls a").removeClass("selected");a.is(".disabled")?$(".channel_controls a:not(.disabled):first").addClass("selected"):a.addClass("selected")}function m(){var a=$("#main_content"),b=$("body").is("#projects_show"),c="json";b||($("body").attr({id:"projects_show","class":"project projects"}),$("#menu-main li").removeClass("selected"),c="html");$.ajax({url:URI(current_project.get("urls.web.project")).addQuery("ref",
"video_mode").suffix(c).toString(),dataType:c,type:"get",global:!1,success:function(c){b?($(".NS-project_-running_board").replaceWith(c.running_board),$(".NS-projects-content").replaceWith(c.content)):a.length&&a.replaceWith(c)}})}function w(){$(b()).on("ended",function(){x(!0)})}function t(c,d){var e,f=(e=b())?e.paused:!1;if(c){if(!e||!(current_project&&c.id===current_project.get("id"))){Project.find(c.id)&&(c=Project.find(c.id).get());$(b()).remove();$("#video-section .video-player").remove();q.html(render("projects/_video_mode",
_.extend(c,{playlist_is_featured:E==="featured",playlist_is_location:E==="location",playlist_is_category:E==="category",not_mobile:!B,logged_in:typeof current_user!=="undefined"})));e=$(b());$("#video-section .video-player").trigger("ksr_video:pause");e.parent().addClass("video_mode_loading").on("load",function(){$(this).removeClass("video_mode_loading")});w();a.current_project=new Project(c);if(!url_equals(document.location.toString(),c.urls.web.project,{ignore_query:!0}))I=!0,History.pushState(c,
c.name,c.urls.web.project),S.push(c.id),localStorage.video_mode_projects_seen=S.join(",");m();document.title=c.name+" by "+c.creator.name;k();h();B?e.parent().hide():(d||!f)&&o(!0)}}else q.html(render("site/_video_mode_fourohfour"))}function x(a){F+=1;F>v.length-5&&d();F>=v.length&&E!=="featured"?(E="featured",c(!0)):(t(v[F],a),track("Video Mode Next",mixpanel_project(v[F])))}function n(a){$("body").css("overflow","visible").height("auto");$("#video_mode_tab").show();$.scrollTo($("#running-board-wrap").offset().top,
500,{easing:"easeOutExpo",onAfter:function(){q.hide();$.scrollTo($("#running-board-wrap").offset().top)}});typeof document.webkitCancelFullScreen==="function"&&document.webkitCancelFullScreen();track("Video Mode Exit");b()&&!a&&$("#video-section .video-player").trigger("ksr_video:seek",[b().currentTime,b().paused]);b().pause()}function r(){var a=$("#video-section .video-player"),e,f,g;G||c();q.show();$("body").css("overflow","hidden").height($(window).height());$.scrollTo(0,500,{easing:"easeOutExpo"});
track("Video Mode Enter");b()||(typeof current_project!=="undefined"?t(_.findWhere(v,{id:current_project.get("id")})):v.length?t(v[0]):d(function(){t(v[0])}));if(a.length){if(e=a.data("ksr_video"))f=e.current_position(),g=e.playing()}else f=0;if(f)b().currentTime=f;a.trigger("ksr_video:pause");g&&o()}function u(){typeof current_project!=="undefined"&&current_project.get("video")&&(v=_.reject(v,function(a){return a.id===current_project.get("id")}),v.unshift(current_project.get()))}if($.support.localStorage()){var z=
".NS-site_video",q=$([]),s,B=$("body.mobile").length,F=0,T=document.location.toString(),v=[],G=!1,E="featured",I=!1,K=!1,S=localStorage.video_mode_projects_seen?localStorage.video_mode_projects_seen.split(","):[],R={x:0,y:0};if($("body").is(".video_mode")){S=_.map(S,function(a){return parseInt(a,10)});$(window).on("mousemove",function(a){a={x:a.pageX,y:a.pageY};q.is(":visible")&&Math.abs(a.x-R.x)+Math.abs(a.y-R.y)>20&&(l(),k(),R=a)});$(window).on("keydown",function(a){switch(a.keyCode){case KEY.SPACE:q.is(":visible")&&
(p(),a.preventDefault());break;case KEY.LEFT:q.is(":visible")&&(F!==0&&(F-=1,t(v[F]),track("Video Mode Previous",mixpanel_project(v[F]))),a.preventDefault());break;case KEY.RIGHT:q.is(":visible")&&(function(){var a=$(".channel_controls a.selected");a.hasClass(E)?x():a.click()}(),a.preventDefault());break;case KEY.UP:q.is(":visible")&&(function(){var a=$(".channel_controls a.selected").removeClass("selected");a.prevAll("a:first:not(.disabled)").addClass("selected").length||a.siblings("a:last:not(.disabled)").addClass("selected");
l()}(),a.preventDefault());break;case 86:if((a.metaKey||a.ctrlKey)&&!$(a.target).is(":input"))r(),a.preventDefault();break;case 70:q.is(":visible")&&function(){var a=q[0];typeof a.webkitRequestFullScreen==="function"&&(q.css("position","static"),a.webkitRequestFullScreen())}();break;case KEY.DOWN:q.is(":visible")&&(function(){var a=$(".channel_controls a.selected").removeClass("selected");a.nextAll("a:first:not(.disabled)").addClass("selected").length||a.siblings("a:first:not(.disabled)").addClass("selected");
l()}(),a.preventDefault());break;case KEY.ESC:case KEY.ENTER:q.is(":visible")&&n()}});$(document).on("click",".four_oh_four a.another",function(a){v=[];G=!1;E="featured";F=0;r();a.preventDefault()});$(document).on("click",z+" .play, "+z+" .pause",function(a){p();a.preventDefault()});$(document).on("click",".channel_controls a.location",function(a){a.preventDefault();$(this).is(".disabled")||(E==="location"?x():(E="location",c(!0,current_project.get("location.urls.api.nearby_projects"))))});$(document).on("click",
".channel_controls a.featured",function(a){E==="featured"?x():(E="featured",c(!0),a.preventDefault())});$(document).on("click",".channel_controls a.category",function(a){E==="category"?x():(E="category",c(!0,current_project.get("category.urls.api.projects")),a.preventDefault())});$(document).on("click",z+" .remind a",function(a){var b=!!$(this).closest(".follow").length;current_project.set("is_starred",b);$.ajax({url:$(this).attr("href"),type:"post",dataType:"json"}).done(function(){b&&track("Video Mode Starred")});
a.preventDefault()});$(document).on("click touchstart",z,function(a){$(a.target).closest("a").length||(p(),a.preventDefault())});$(document).on("click touchstart","#video_mode_tab",function(){r()});$(document).on("click touchstart",".video_mode_enter",function(a){r();a.preventDefault()});$(document).on("click",z+" .explore",function(a){n();a.preventDefault()});$(document).on("click","#video_mode_close",function(a){n(!0);a.preventDefault()});$(document).on("click",z+" .project_title",function(a){n();
a.preventDefault()});$(window).on("resize",function(){var a=$(window).height();$("body").height(a);q.height(a);q.find("video").height(a)});$(window).on("statechange",function(){var a=History.getState().data;I&&(a&&!_.isEmpty(a)?t(a):url_equals(window.location.toString(),T)&&location.reload())});$(window).on("webkitfullscreenchange",function(){document.webkitFullscreenElement||q.css("position","relative")});$("#video_mode_tab").on("click touchstart",function(a){r();a.preventDefault()});localStorage.video_mode_seen===
"true"&&B&&$("#video_mode_tab").show();if(window.location.hash==="#video")window.location.hash="#",r();localStorage.video_mode_seen="true"}}})})(this);instrument_function(function(){$(function(){function a(){setTimeout(function(){a();c.removeClass("visible");c.eq(b).addClass("visible");$("#hero .category").width(c.eq(b).width());b+=1;b>=c.length&&(b=0)},3E3)}var d=$("body#site_what_is_kickstarter"),c=$("#hero .category b"),b=1;d.length&&(a(),$("#running-board-wrap").removeClass("loading"))})})(this);
instrument_function(function(){$(function(){var a=$(".NS_survey_questions__address");a.length&&(a.find(".country.domestic_backing select").change(function(){var a=$(this).val(),c=$(this).siblings(".domestic_backing_message"),b=$(this).closest(".country").data("project_country");a.length&&a!==b?(c.removeClass("hidden"),track("Domestic Message Displayed",{shipping_applicable:"international",survey_context:$("body").attr("id")})):c.addClass("hidden")}),a.find(".country .country_prop").click(function(){$(this).closest(".country").find(".domestic_backing_message").toggle();
track("Domestic Message Displayed",{shipping_applicable:"domestic",survey_context:$("body").attr("id")})}),a.find(".country.domestic_backing select").trigger("change"),a.find(".domestic_backing").length&&track("Survey Address for Domestic Backing",{shipping_applicable:a.find(".intl_shipping").length?"international":"domestic",survey_context:$("body").attr("id")}))})})(this);
instrument_function(function(){$(function(){var a=$("body#survey_responses_confirm_address"),d=$("input.radio#suggested_address");a.length&&($(document).on("change","body#survey_responses_confirm_address .address_col input.radio",function(){var a=$(this);$(this).closest(".addresses").find(".address_col").each(function(){var a=$(this);a.find("input.radio").is(":checked")?a.find("input[type=hidden]").attr("disabled",!1):a.find("input[type=hidden]").attr("disabled",!0)});a.attr("id")==="entered_address"?
track("Address Entered Selected"):a.attr("id")==="suggested_address"&&track("Suggested Address Selected")}),d&&d.click(),$(".addresses.no_suggestion").length?track("Confirm your Address Page"):track("Select an Address Page"))})})(this);instrument_function(function(){$(function(){var a=$("body#survey_responses_edit_address");a.length&&(a.find(".back").click(function(a){a.preventDefault();window.history.go(-1)}),track("Edit Address Page"))})})(this);
instrument_function(function(){$(function(){var a=$("body#survey_responses_new"),d=a.find("input:hidden#dirty");a.length&&($(document).on("keydown","body#survey_responses_new input:text",function(a){a.which===13&&a.preventDefault()}),$(document).on("focus","body#survey_responses_new .address input:text",function(){$(this).closest(".address").removeClass("hide_overlabels")}),d.val()==="0"?d.val("1"):track("Back to Survey Response Page"),track("Survey Response Page"))})})(this);
instrument_function(function(){$(function(){function a(){var a=g.find("input.keep_box:checked").closest("li.question:not(.template)");e.empty();a.each(function(){e.append($(this).find("div.preview").children().clone())});e.find("input, textarea, select").attr("disabled",!0)}function d(b){b=$(b);var c=b.val(),d=b.closest("li.question").find(".preview");b.is("#survey_intro")?d.find(".survey_intro").text(c):b.is(".question_choice")?d.find(".choice label").eq(b.closest("li.field").index()).text(c):c?
d.find("li > label").text(c):d.find("li > label").text("Question");a()}function c(a){a.confirm_submit({copy:"You can only send a survey once per reward tier, so make sure to ask for all the info you need to deliver this reward.",title:"Please confirm",yes_copy:"Send survey now",no_copy:"Edit survey",on_confirm_submit:function(){a.find("#send_survey").val("1")}})}var b=$("body#surveys_form"),e=$("#preview",b),f=$("form#survey_form",b),g=$("ul.questions",b),j=$("#saving-layer");$(".leftcol .textarea:visible, .leftcol .text:visible",
b).each(function(){d(this)});$(document).on("change click","body#surveys_form .leftcol .checkbox",function(){a()});$(document).on("change click","body#surveys_form .leftcol #survey_intro_keep",function(){$("#survey_intro").attr("disabled",!$(this).is(":checked"))});$(document).on("keyup cut paste","body#surveys_form .leftcol .text, body#surveys_form .leftcol .textarea",function(){d(this)});$(document).on("click","body#surveys_form a.add_question, a.add_choices_question",function(a){a.preventDefault();
a=$("ul.questions");var b=$(this).hasClass("add_question")?"other":"choices";b=a.children(".template."+b).clone();var c=a.find("li.question").length+1;b.css("display","block");b.removeClass("template");a.append(b);b.find("input.checkbox").attr("checked",!0).trigger("change");b.find("input, textarea").each(function(){var a=$(this);a.attr("id",a.attr("id")+"_"+c);a.attr("name",a.attr("name").replace("[template]","["+c+"]"))});b.find("label").each(function(){var a=$(this);a.attr("for",a.attr("for")+
"_"+c)})});$(document).on("click","body#surveys_form .add_question_choice",function(b){b.preventDefault();var c=$(this).closest("li.question");b=c.find("ol.choice_fields").find("li:last");b=b.clone().insertAfter(b);c=c.find(".preview").find(".choice").last();c=c.clone().insertAfter(c);b.find("label.overlabel .count").text(function(a,b){return parseInt(b,10)+1});b.find(".delete").show().andSelf().find("input").val("").focus();c.val("").find("label").html("").andSelf().find("input.radio").val("");a()});
$(document).on("click","body#surveys_form .choice_fields li .delete",function(b){b.preventDefault();b=$(this).closest("li.field");var c=b.closest("li.question").find(".preview"),d=b.parent().children();c.find(".choice").eq(b.index()).remove();b.remove();d.filter(":visible").each(function(a){$(this).find("label.overlabel .count").text(a+1)});a()});$(document).on("click","body#surveys_form #survey_save",function(a){a.preventDefault();track("Survey Save");j.show();$.ajax({url:f.attr("action"),type:f.find('[name="_method"]').val(),
data:f.serialize(),complete:function(){j.hide()},success:function(a){a=$(a.data);$(".modal_dialog").remove();$("#main_content").replaceWith(a);e=$("#preview",b);f=$("form#survey_form",b);g=$("ul.questions",b);j=$("#saving-layer");c(f)},error:function(){window.location.reload(!0)}})});$(document).on("keydown","body#surveys_form form#survey_form",function(a){if(a.keyCode===13&&$(a.target).prop("tagName")!=="TEXTAREA")return a.preventDefault(),$("body#surveys_form #survey_save").trigger("click"),!1});
c(f)})})(this);
instrument_function(function(){$(function(){function a(){var a=$("#forgot-password");a.removeClass("current");a.siblings("#login, #verify").addClass("current");$(".modal_dialog #facebook, .modal_dialog #verify").show()}$(document).on("click","#login-signup a.switch",function(a){a.preventDefault();a=$(this).closest(".current");a.removeClass("current");a.siblings("#login, #signup").addClass("current")});$(document).on("click","#login-signup a.link_to_forgot-password-dialog",function(c){c.preventDefault();c=
$(this).closest(".current");c.is("#verify")||c.removeClass("current");$("#login-signup #forgot-password").addClass("current");$(".modal_dialog #facebook, .modal_dialog #verify").hide();$(document).one("closed.modal_dialog",a);$(document).on("jGrowl.close_200","form#reset",function(){$(".modal_dialog").trigger("close.modal_dialog")})});$(document).on("form-submit-notify","#forgot-password #reset",a);var d=$("#user_sessions_new, #users_new");d.length&&($(".current",d).find("input:visible:first").focus(),
$("#user_send_newsletters").change(function(){$(this).is(":checked")?track("Checked Newsletter"):track("Unchecked Newsletter")}),$(".fieldset-errors").livequery(function(){if($.trim($(".fieldset-errors").text())!==""){var a=$(".fieldset-errors h2").text(),b=$(".fieldset-errors li").text();track("Errored User Signup",{error_type:a,error_text:b})}}),$("input",d).focus(function(){$("#login, #signup").removeClass("current");$(this).closest("#login, #signup").addClass("current")}))})})(this);
instrument_function(function(){$(function(){if(typeof SWFUpload==="undefined")$(document).on("blur","#new_user input#user_email",function(){$(this).mailcheck({suggested:function(a,d){var c=$('<div class="mailcheck_suggestion">Did you mean <a href="#">'+d.full+"</a>?</div>");a.siblings(".mailcheck_suggestion").remove();c.find("a").on("click",function(b){b.preventDefault();a.val(d.full)});a.before(c);c.slideDown();typeof pageTracker!=="undefined"&&pageTracker._trackEvent("Regular Signup Errors","Invalid domain or TLD detected",
a.val())},ignoreTLDs:!0})})})})(this);
instrument_function(function(){$(function(){var a=$(".NS_users__profile"),d={x:-1,y:-1},c=$("#small_circle");a.length&&($("#profile_tools .share").click(function(a){$("#profile_tools .share_hover").toggle();a.preventDefault()}),$("a.twitter").click(function(a){window.open($(this).attr("href"),"twTweet","top=100,left=100,width=600px,height=400px,location=no,menubar=no,toolbar=no,scrollbars=yes");a.preventDefault()}),$("a.facebook").click(function(a){window.open($(this).attr("href"),"fbShare","top=100,left=100,width=640px,height=350px,location=no,menubar=no,toolbar=no,scrollbars=yes");
a.preventDefault()}),$(document).mousemove(function(a){d={x:a.pageX,y:a.pageY}}),function(){var a=$("#hover_label");$.plot(c,circle_data,{series:{pie:{show:!0,stroke:{width:2,color:"rgb(230,230,230)"},label:{show:!1}}},grid:{hoverable:!0,clickable:!0},legend:{show:!1}});c.on("plothover",function(c,f,g){if(g)c=g.series.label,g=circle_data[g.seriesIndex].projects_backed,a.html(g>0?c+' <span id="count">('+g+")</span>":'<span class="empty">'+c+"</span>"),a.css({visibility:"visible",top:d.y-a.height()+
"px",left:d.x-a.width()/2+"px",padding:"1px 4px"})});c.on("mouseout",function(){a.empty();a.css("visibility","hidden")});c.on("plotclick",function(a,b,d){if(d)(a=circle_data[d.seriesIndex].path)&&typeof a==="string"&&c.trigger("navigate",a)})}())})})(this);
instrument_function(function(){$(function(){var a=$(".NS-users_updates_notifications");a.length&&($("#manage_notifications",a).click(function(d){$(this).hide();$("ol.projects",a).show();d.preventDefault()}),$("li",a).delegate("input.checkbox","change",function(){var a=$(this).siblings().filter(".checkbox.mobile");$(this).is(":checked")?a.attr("checked","checked"):a.removeAttr("checked")}))})})(this);
instrument_function(function(){$(function(){$(".NS-users-_urls_fields").livequery(function(){var a=$(this),d=$("div.new.template",a);d.find("a.add").click(function(c){c.preventDefault();c=d.find("input.text");var b=d.clone(),e=b.find(".remove input.checkbox"),f;c.val()===""?b.remove():(b.removeClass("template"),b.addClass("field-selected"),b.find("a.add").remove(),b.find("span.value").text(c.val()),c.trigger("dirty"),e.attr("checked",!0),c.val(""),f=(new Date).getTime(),b.find("input,textarea,select").each(function(a,
b){b.name=b.name.replace(/new_[a-z_]*/,f)}),$("div.urls",a).append(b),b.trigger("shifted"))});a.on("click",".url .remove a",function(a){a.preventDefault();a=$(this);var b=a.closest("div.url");a.siblings(".checkbox")[0].checked=!1;b.trigger("dirty");b.trigger("shifted");b.hide()});d.find("input.text").on("keypress",function(a){if((a.keyCode||a.which)===13)a.preventDefault(),d.find("a.add").click()})})})})(this);
instrument_function(function(){$(function(){var a=$("body#users_dashboard");if(a.length){var d=[],c=[];$(".dashboard_activities .activity",a).livequery(function(){var a=$(this).find(".project_info:first").data("project_id");if(d.indexOf(a)>-1)$(this).hide();else{d.push(a);a=$(this).find(".timeline_header:first");var e=a.data("time_bucket");c.indexOf(e)===-1&&(c.push(e),a.find(".timeline_header_name:first").css({display:"inline"}))}})}})})(this);
instrument_function(function(){$(function(){var a=$("#users_edit_account"),d=$("form.edit_user",a),c=!1,b=$("#form_password_modal_dialog",a);a.length&&(a.find("a.change_password_toggle").on("click",function(b){b.preventDefault();b=$("li.change_password",a);c?(b.fadeOut(),b.find("input").val(""),c=!1):(b.fadeIn(),b.first().find("input").focus(),c=!0)}),d.on("submit",function(a){b.length&&(a.preventDefault(),b.modal_dialog())}),b.find("form").submit(function(a){a.preventDefault();$(this).find("input").each(function(){var a=
$(this);$("#"+a.attr("id"),d).val(a.val())});d.off("submit");d.submit()}))})})(this);
instrument_function(function(){$(function(){$(document).on("click","#users_watched_projects a.unstar",function(a){a.preventDefault();var d=$(this);$.ajax({url:d.attr("href"),type:"post",dataType:"json",success:function(){var a=d.closest(".project");a.fadeOut(function(){var b=a.closest(".section");b.find(".project:visible").length||b.remove()})}})});$(document).on("click","#users_watched_projects a.potd",function(a){a.preventDefault();a=$(this);$.ajax({url:a.attr("href"),type:"post",dataType:"json",
success:function(){window.location.reload()}})})})})(this);instrument_function(function(){$(function(){$(document).on("click","#unwatch a",function(a){var d=$(this);a.preventDefault();current_project.set("is_starred",!1);$.ajax({url:d.attr("href"),dataType:"json",type:"POST"})})})})(this);
instrument_function(function(){$(function(){$(document).on("click","#watch a",function(a){var d=$(this);a.preventDefault();current_project.set("is_starred",!0);$.ajax({url:d.attr("href"),dataType:"json",type:"POST",success:function(a){if(a.modal){var b=$.create_modal_dialog("",a.data);b.data("modal_dialog").open();typeof FB!=="undefined"&&FB.XFBML.parse(b.find(".modal_dialog_body")[0]);current_project.set("is_starred",!1)}a.flash&&growl(_.map(a.flash,function(a){return a[a.length-1]}))}})})})})(this);
instrument_function(function(){$(function(){$(".widget_show").livequery(function(){function a(a,c){var d=render("widgets/_video_embed_code",{width:a,height:c,path:f});e.find("input#width").val(a);e.find("input#height").val(c);b.find("textarea").val(d)}var d=$(this),c=d.find(".size form"),b=d.find(".video .code"),e=c.find(".custom"),f=b.data("path");a(480,360);c.find("input.radio").on("change",function(){var d=$("input.radio:checked"),e=d.closest("label");c.find("label").removeClass("selected");e.addClass("selected");
a(e.data("width"),e.data("height"));b.find("textarea").select();d.is("#widget-size_size-custom")&&e.find("input.text").val("").eq(0).select()});e.find("input").on("keyup input cut paste",function(b){b=$(b.target);var c=4/3,d=e.find("input#width").val(),f=e.find("input#height").val();b.is("#width")?f=Math.ceil(d/c):d=Math.ceil(f*c);a(d,f)})})})})(this);
instrument_function(function(){$(function(){var a=$("body#years_twentytwelve"),d=$("#panel_content");if(a.length){(function(){function a(){$(".panel").width($(window).width());$(window).width()>570?($(".section").each(function(){var a=$(this);a.width($(window).width()*a.find(".panel").length)}),$("#panels").height($(window).height()),$("body").css({overflow:"hidden"})):$("body").css({overflow:"visible"});$(".video_big").width($(window).width());$(".video_big").height($(this).parent(".panel").height());
$(window).height()*1.77864583333333>$(window).width()?($(".video_big video").height($(window).height()),$(".video_big video").css({width:"auto",position:"absolute",top:"0px","margin-top":"0px",left:"50%","margin-left":-Math.round($(this).height()*1.77864583333333/2)})):($(".video_big video").width($(window).width()),$(".video_big video").css({height:"auto",position:"absolute",left:"0px","margin-left":"0px",top:"50%","margin-top":-Math.round($(this).width()/1.77864583333333/2)}))}var b=0,c=d.find("li.panel").length,
e="";track("YiR/2012 Initialize");d.serialScroll({items:"li.panel",lock:!1,cycle:!1,duration:500,easing:"easeOutExpo"});d.on("notify.serialScroll",function(a,f){var g=d.find("li.panel").eq(f),m=g.closest(".section").attr("id");e="#"+g.attr("id");track("YiR/2012 Panel Load",{panel_index:f,panel_name:m});f>0?$("#arrows .next, #arrows .prev, header, footer").addClass("visible"):$("#arrows .next, #arrows .prev, header, footer").removeClass("visible");history.pushState&&(f>0?history.pushState({page:f},
null,e):history.pushState({page:f},null,URI().hash("")));g.find(".video_autoplay").length?(d.find("video")[0].pause(),g.find("video")[0].play(),g.find("video").on("ended",function(){$(this)[0].play()})):d.find("video")[0].pause();$("header, footer, .next, .prev").removeClass("january february march april may june july august september october november december");f>0&&$("header, footer, .next, .prev").addClass(m);f===c-1?($("#arrows .next").hide(),$("footer").hide()):f!==0&&($("#arrows .next").show(),
$("footer").show());$("#tile_view").find("li").removeClass("selected");$("#tile_view").find("li[data-url="+window.location.hash.substring(1)+"]").addClass("selected");b=f});$(window).on("hashchange",function(){e!==window.location.hash&&(window.location.hash.length>1&&d.find(window.location.hash).length&&(b=$(window.location.hash).index("li.panel")),d.trigger("notify.serialScroll",[b]))}).trigger("hashchange");a();$(window).on("resize",function(){a();d.trigger("goto",[b])});$("#arrows .next, #intro .next").on("click",
function(a){a.preventDefault();track("YiR/2012 Next",{keypress:!1});d.trigger("next")});$("#arrows .prev").on("click",function(a){a.preventDefault();track("YiR/2012 Previous",{keypress:!1});d.trigger("prev")});$("header h1 a").on("click",function(a){a.preventDefault();track("YiR/2012 Reset");d.scrollTo("#intro");d.trigger("notify.serialScroll",[0]);$("#tile_view_link").find(".ss-grid").removeClass("hide");$("#tile_view_link").find(".ss-delete").addClass("hide");$("#content").animate({marginTop:"0px"},
800,"easeOutExpo",function(){$("body").css({overflow:"hidden"})})})})();$(window).on("keydown",function(a){switch(a.keyCode){case KEY.LEFT:track("YiR/2012 Previous",{keypress:!0});d.trigger("prev");$(".video.video_flash").is(":visible")&&d.find(".close_video").click();break;case KEY.RIGHT:track("YiR/2012 Next",{keypress:!0});d.trigger("next");$(".video.video_flash").is(":visible")&&d.find(".close_video").click();break;case KEY.ESC:d.find(".close_video").click(),a.preventDefault()}});var c=$("#makey_c"),
b=$("#makey_d"),e=$("#makey_e"),f=$("#makey_f");$(".makey").on("hover",function(a){a.preventDefault();track("Makey Makey Hover")});$("#makey_makey #banana_c").on("hover",function(a){a.preventDefault();c.trigger("play")});$("#makey_makey #banana_d").on("hover",function(a){a.preventDefault();b.trigger("play")});$("#makey_makey #banana_e").on("hover",function(a){a.preventDefault();e.trigger("play")});$("#makey_makey #banana_f").on("hover",function(a){a.preventDefault();f.trigger("play")});$("#tile_view_link, #tile_view a").on("click",
function(){$("#tile_view_link").find(".ss-grid").is(":visible")?($("#tile_view_link").find(".ss-grid").addClass("hide"),$("#tile_view_link").find(".ss-delete").removeClass("hide")):($("#tile_view_link").find(".ss-grid").removeClass("hide"),$("#tile_view_link").find(".ss-delete").addClass("hide"));$("#content").css("marginTop")==="0px"?(track("YiR/2012 Tile View"),$("#content").animate({marginTop:"-"+$(window).height()},800,"easeOutExpo",function(){$("body").css({overflow:"visible"})})):$("#content").animate({marginTop:"0px"},
800,"easeOutExpo",function(){$("body").css({overflow:"hidden"})})});d.find(".play").on("click touchstart",function(a){var b=$(this).closest(".panel");a.preventDefault();track("YiR/2012 Video Play",{panel:b.attr("id")});$("#arrows").fadeOut();$("header, footer").removeClass("visible");b.find(".video").fadeIn();b.find(".container").fadeOut("500",function(){b.find(".video-player").ksr_video().trigger("ksr_video:play")})});d.find(".close_video").on("click",function(a){a.preventDefault();$(".video.video_flash").fadeOut("500",
function(){$(".panel").find(".container").fadeIn()});$(window).width()>570&&($("#arrows").fadeIn(),$("header, footer").addClass("visible"));$(".panel").find(".video-player").trigger("ksr_video:pause")});$("footer").find("#mobile_share").on("click focus",function(){$("footer").toggleClass("share_visible")});$("#share_url").click(function(){$(this).select()});$("body").removeClass("loading");history.pushState||$("header, footer").addClass("visible")}})})(this);
instrument_function(function(){$(function(){var a=$(".NS-admin_submissions__edit"),d=$("form.moderator");a.length&&($(document).on("click",".NS-admin_submissions__edit a.change_response",function(){$(".NS-admin_submissions__edit .responded_to .moderator_only").slideToggle()}),$(document).on("click",".NS-admin_submissions__edit a.claim",function(a){a.preventDefault();d.find("select#submission_user_id").val($(this).data("admin_id"));d.submit()}),$(document).on("change","form.moderator",function(){$(this).submit()}),
$(document).on("submit","form.moderator",function(a){var b=$(this),d=b.find(".saving").show();$.ajax({url:b.attr("action"),type:b.attr("method"),data:b.serialize(),dataType:"json",success:function(a){a.ok?a.moderator_is_me?$(".moderator_only, a.claim, .change_response_container").addClass("me"):($(".moderator_only, a.claim, .change_response_container").removeClass("me"),$(".moderator_only").hide()):growl({error:"Moderator change didn't take :-("})},error:function(){growl({error:"Moderator change didn't take :-("})},
complete:function(){d.hide()}});a.preventDefault()}),$(".NS-admin_submissions__edit .state_tools").livequery(function(){var a=$(this),b=a.find("a.reply"),d=a.find("a.accept"),f=a.find("a.reject"),g=a.siblings("select"),j=a.closest("form"),k={reply:"",accept:d.next(".macro").val(),reject:f.next(".macro").val()},l="reply";a.find("a").click(function(b){var d=$(this);j.find("input.submit").val(d.text()).removeClass("accept reply decline").addClass(d.text().toLowerCase());a.find("a").removeClass("selected");
d.addClass("selected");k[l]=j.find("textarea.submission_message").val();b.preventDefault()});b.click(function(){g.val("pending");j.find("textarea.submission_message").val(k.reply).focus();l="reply"});d.click(function(){g.val("accepted");j.find("textarea.submission_message").val(k.accept).focus();l="accept"});f.click(function(){g.val("rejected");j.find("textarea.submission_message").val(k.reject).focus();l="reject"})}))})})(this);
instrument_function(function(){$(function(){$(document).on("submit","form.NS-admin_projects__edit",function(a){var d=$(this),c=d.find(".submit");c.val("Saving");$.ajax({url:d.attr("action"),type:d.attr("method"),dataType:"json",data:d.serialize(),success:function(){c.val("Saved");setTimeout(function(){c.val("Save")},1E3)}});$("#admin-nav-wrap span.moderation_status").text($("select",this).val().substring(0,3));a.preventDefault()}).on("change","form.NS-admin_projects__edit",function(){$(this).submit()})})})(this);
instrument_function(function(){$(function(){$(".NS-admin_projects_tags").livequery(function(){var a=$(this),d;a.find("label").each(function(){var a=$(this);a.find("input.checkbox:checked").length&&a.addClass("selected")});a.on("change","input.checkbox",function(){var a=$(this),b=a.closest("label"),e=a.closest("form");a.is(":checked")?b.addClass("selected"):b.removeClass("selected");d&&d.abort();d=$.ajax({url:e.attr("action"),type:e.attr("method"),dataType:"json",data:e.serialize()})})})})})(this);
var jwplayer=function(a){if(jwplayer.api)return jwplayer.api.selectPlayer(a)},$jw=jwplayer;jwplayer.version="5.7.1896";jwplayer.vid=document.createElement("video");jwplayer.audio=document.createElement("audio");jwplayer.source=document.createElement("source");
(function(a){a.utils=function(){};a.utils.typeOf=function(a){var c=typeof a;c==="object"&&(a?a instanceof Array&&(c="array"):c="null");return c};a.utils.extend=function(){var d=a.utils.extend.arguments;if(d.length>1){for(var c=1;c<d.length;c++)for(var b in d[c])d[0][b]=d[c][b];return d[0]}return null};a.utils.clone=function(){var d,c=a.utils.clone.arguments;if(c.length==1)switch(a.utils.typeOf(c[0])){case "object":d={};for(var b in c[0])d[b]=a.utils.clone(c[0][b]);break;case "array":d=[];for(b in c[0])d[b]=
a.utils.clone(c[0][b]);break;default:return c[0]}return d};a.utils.extension=function(a){if(!a)return"";a=a.substring(a.lastIndexOf("/")+1,a.length);a=a.split("?")[0];if(a.lastIndexOf(".")>-1)return a.substr(a.lastIndexOf(".")+1,a.length).toLowerCase()};a.utils.html=function(a,c){a.innerHTML=c};a.utils.wrap=function(a,c){a.parentNode&&a.parentNode.replaceChild(c,a);c.appendChild(a)};a.utils.ajax=function(a,c,b){var e;e=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");
e.onreadystatechange=function(){e.readyState===4&&(e.status===200?c&&c(e):b&&b(a))};try{e.open("GET",a,!0),e.send(null)}catch(f){b&&b(a)}return e};a.utils.load=function(a,c,b){a.onreadystatechange=function(){a.readyState===4&&(a.status===200?c&&c():b&&b())}};a.utils.find=function(a,c){return a.getElementsByTagName(c)};a.utils.append=function(a,c){a.appendChild(c)};a.utils.isIE=function(){return typeof window.ActiveXObject!="undefined"};a.utils.isLegacyAndroid=function(){return navigator.userAgent.toLowerCase().match(/android 2.[012]/i)!==
null};a.utils.isIOS=function(a){typeof a=="undefined"&&(a=/iP(hone|ad|od)/i);return navigator.userAgent.toLowerCase().match(a)!==null};a.utils.isIPad=function(){return a.utils.isIOS(/iPad/i)};a.utils.isIPod=function(){return a.utils.isIOS(/iP(hone|od)/i)};a.utils.getFirstPlaylistItemFromConfig=function(a){var c={};a=a.playlist&&a.playlist.length?a.playlist[0]:a;c.file=a.file;c.levels=a.levels;c.streamer=a.streamer;c.playlistfile=a.playlistfile;c.provider=a.provider;if(!c.provider){if(c.file&&(c.file.toLowerCase().indexOf("youtube.com")>
-1||c.file.toLowerCase().indexOf("youtu.be")>-1))c.provider="youtube";if(c.streamer&&c.streamer.toLowerCase().indexOf("rtmp://")==0)c.provider="rtmp";if(a.type)c.provider=a.type.toLowerCase()}if(c.provider=="audio")c.provider="sound";return c};a.utils.getOuterHTML=function(a){if(a.outerHTML)return a.outerHTML;else try{return(new XMLSerializer).serializeToString(a)}catch(c){return""}};a.utils.setOuterHTML=function(a,c){if(a.outerHTML)a.outerHTML=c;else{var b=document.createElement("div");b.innerHTML=
c;var e=document.createRange();e.selectNodeContents(b);b=e.extractContents();a.parentNode.insertBefore(b,a);a.parentNode.removeChild(a)}};a.utils.hasFlash=function(){if(typeof navigator.plugins!="undefined"&&typeof navigator.plugins["Shockwave Flash"]!="undefined")return!0;if(typeof window.ActiveXObject!="undefined")try{return new ActiveXObject("ShockwaveFlash.ShockwaveFlash"),!0}catch(a){}return!1};a.utils.getPluginName=function(a){a.lastIndexOf("/")>=0&&(a=a.substring(a.lastIndexOf("/")+1,a.length));
a.lastIndexOf("-")>=0&&(a=a.substring(0,a.lastIndexOf("-")));a.lastIndexOf(".swf")>=0&&(a=a.substring(0,a.lastIndexOf(".swf")));a.lastIndexOf(".js")>=0&&(a=a.substring(0,a.lastIndexOf(".js")));return a};a.utils.getPluginVersion=function(a){if(a.lastIndexOf("-")>=0)return a.lastIndexOf(".js")>=0?a.substring(a.lastIndexOf("-")+1,a.lastIndexOf(".js")):a.lastIndexOf(".swf")>=0?a.substring(a.lastIndexOf("-")+1,a.lastIndexOf(".swf")):a.substring(a.lastIndexOf("-")+1);return""};a.utils.getAbsolutePath=function(d,
c){if(!a.utils.exists(c))c=document.location.href;if(a.utils.exists(d)){var b;if(a.utils.exists(d)){b=d.indexOf("://");var e=d.indexOf("?");b=b>0&&(e<0||e>b)}else b=void 0;if(b)return d;b=c.substring(0,c.indexOf("://")+3);e=c.substring(b.length,c.indexOf("/",b.length+1));var f;d.indexOf("/")===0?f=d.split("/"):(f=c.split("?")[0],f=f.substring(b.length+e.length+1,f.lastIndexOf("/")),f=f.split("/").concat(d.split("/")));for(var g=[],j=0;j<f.length;j++)f[j]&&a.utils.exists(f[j])&&f[j]!="."&&(f[j]==".."?
g.pop():g.push(f[j]));return b+e+"/"+g.join("/")}};a.utils.pluginPathType={ABSOLUTE:"ABSOLUTE",RELATIVE:"RELATIVE",CDN:"CDN"};a.utils.getPluginPathType=function(d){if(typeof d=="string"){d=d.split("?")[0];var c=d.indexOf("://");if(c>0)return a.utils.pluginPathType.ABSOLUTE;var b=d.indexOf("/");d=a.utils.extension(d);if(c<0&&b<0&&(!d||!isNaN(d)))return a.utils.pluginPathType.CDN;return a.utils.pluginPathType.RELATIVE}};a.utils.mapEmpty=function(a){for(var c in a)return!1;return!0};a.utils.mapLength=
function(a){var c=0,b;for(b in a)c++;return c};a.utils.log=function(a,c){typeof console!="undefined"&&typeof console.log!="undefined"&&(c?console.log(a,c):console.log(a))};a.utils.css=function(d,c){if(a.utils.exists(d))for(var b in c)try{if(typeof c[b]!=="undefined"){if(typeof c[b]=="number"&&!(b=="zIndex"||b=="opacity")){if(isNaN(c[b]))continue;c[b]=b.match(/color/i)?"#"+a.utils.strings.pad(c[b].toString(16),6):Math.ceil(c[b])+"px"}d.style[b]=c[b]}}catch(e){}};a.utils.isYouTube=function(a){return a.indexOf("youtube.com")>
-1||a.indexOf("youtu.be")>-1};a.utils.transform=function(a,c){a.style.webkitTransform=c;a.style.MozTransform=c;a.style.OTransform=c};a.utils.stretch=function(d,c,b,e,f,g){if(!(typeof b=="undefined"||typeof e=="undefined"||typeof f=="undefined"||typeof g=="undefined")){var j=b/f,k=e/g;c.style.overflow="hidden";a.utils.transform(c,"");var l={};switch(d.toUpperCase()){case a.utils.stretching.NONE:l.width=f;l.height=g;break;case a.utils.stretching.UNIFORM:j>k?(l.width=f*k,l.height=g*k):(l.width=f*j,l.height=
g*j);break;case a.utils.stretching.FILL:j>k?(l.width=f*j,l.height=g*j):(l.width=f*k,l.height=g*k);break;case a.utils.stretching.EXACTFIT:a.utils.transform(c,["scale(",j,",",k,") translate(0px,0px)"].join("")),l.width=f,l.height=g}l.top=(e-l.height)/2;l.left=(b-l.width)/2;a.utils.css(c,l)}};a.utils.stretching={NONE:"NONE",FILL:"FILL",UNIFORM:"UNIFORM",EXACTFIT:"EXACTFIT"};a.utils.deepReplaceKeyName=function(d,c,b){switch(a.utils.typeOf(d)){case "array":for(var e=0;e<d.length;e++)d[e]=a.utils.deepReplaceKeyName(d[e],
c,b);break;case "object":for(e in d){var f=e.replace(RegExp(c,"g"),b);d[f]=a.utils.deepReplaceKeyName(d[e],c,b);e!=f&&delete d[e]}}return d};a.utils.isInArray=function(a,c){if(!a||!(a instanceof Array))return!1;for(var b=0;b<a.length;b++)if(c===a[b])return!0;return!1};a.utils.exists=function(a){switch(typeof a){case "string":return a.length>0;case "object":return a!==null;case "undefined":return!1}return!0};a.utils.empty=function(a){if(typeof a.hasChildNodes=="function")for(;a.hasChildNodes();)a.removeChild(a.firstChild)};
a.utils.parseDimension=function(a){if(typeof a=="string")if(a==="")return 0;else if(!(a.lastIndexOf("%")>-1))return parseInt(a.replace("px",""),10);return a};a.utils.getDimensions=function(d){return d&&d.style?{x:a.utils.parseDimension(d.style.left),y:a.utils.parseDimension(d.style.top),width:a.utils.parseDimension(d.style.width),height:a.utils.parseDimension(d.style.height)}:{}};a.utils.timeFormat=function(a){str="00:00";a>0&&(str=Math.floor(a/60)<10?"0"+Math.floor(a/60)+":":Math.floor(a/60)+":",
str+=Math.floor(a%60)<10?"0"+Math.floor(a%60):Math.floor(a%60));return str}})(jwplayer);(function(a){a.events=function(){};a.events.COMPLETE="COMPLETE";a.events.ERROR="ERROR"})(jwplayer);
(function(a){a.events.eventdispatcher=function(d){var c,b;this.resetEventListeners=function(){c={};b=[]};this.resetEventListeners();this.addEventListener=function(b,d,g){try{a.utils.exists(c[b])||(c[b]=[]),typeof d=="string"&&eval("listener = "+d),c[b].push({listener:d,count:g})}catch(j){a.utils.log("error",j)}return!1};this.removeEventListener=function(b,d){if(c[b]){try{for(var g=0;g<c[b].length;g++)if(c[b][g].listener.toString()==d.toString()){c[b].splice(g,1);break}}catch(j){a.utils.log("error",
j)}return!1}};this.addGlobalListener=function(c,d){try{typeof c=="string"&&eval("listener = "+c),b.push({listener:c,count:d})}catch(g){a.utils.log("error",g)}return!1};this.removeGlobalListener=function(c){if(b[type]){try{for(var d=0;d<b.length;d++)if(b[d].listener.toString()==c.toString()){b.splice(d,1);break}}catch(g){a.utils.log("error",g)}return!1}};this.sendEvent=function(e,f){a.utils.exists(f)||(f={});d&&a.utils.log(e,f);if(typeof c[e]!="undefined")for(var g=0;g<c[e].length;g++){try{c[e][g].listener(f)}catch(j){a.utils.log("There was an error while handling a listener: "+
j.toString(),c[e][g].listener)}c[e][g]&&(c[e][g].count===1?delete c[e][g]:c[e][g].count>0&&(c[e][g].count-=1))}for(g=0;g<b.length;g++){try{b[g].listener(f)}catch(k){a.utils.log("There was an error while handling a listener: "+k.toString(),b[g].listener)}b[g]&&(b[g].count===1?delete b[g]:b[g].count>0&&(b[g].count-=1))}}}})(jwplayer);
(function(a){var d=[];a.api=function(c){function b(a,b){return function(c,d,e,f){if(a.renderingMode=="flash"||a.renderingMode=="html5"){var g;d?(w[c]=d,g="jwplayer('"+a.id+"').callback('"+c+"')"):!d&&w[c]&&delete w[c];l.jwDockSetButton(c,g,e,f)}return b}}function d(a){return function(b){var c=b.newstate;b=b.oldstate;if(c==a){var d=j[c];if(d)for(var e=0;e<d.length;e++)typeof d[e]=="function"&&d[e].call(this,{oldstate:b,newstate:c})}}}function f(a,b){return function(c){if(a==c.component){var d=k[a][b];
if(d)for(var e=0;e<d.length;e++)typeof d[e]=="function"&&d[e].call(this,c)}}}this.container=c;this.id=c.id;var g={},j={},k={},l=void 0,o=!1,p=[],h=a.utils.getOuterHTML(c),m={},w={};this.getBuffer=function(){return this.callInternal("jwGetBuffer")};this.getContainer=function(){return this.container};this.getPlugin=function(c){var d=this,e={};return c=="dock"?a.utils.extend(e,{setButton:b(d,e),show:function(){d.callInternal("jwDockShow");return e},hide:function(){d.callInternal("jwDockHide");return e},
onShow:function(b){d.componentListener("dock",a.api.events.JWPLAYER_COMPONENT_SHOW,b);return e},onHide:function(b){d.componentListener("dock",a.api.events.JWPLAYER_COMPONENT_HIDE,b);return e}}):c=="controlbar"?a.utils.extend(e,{show:function(){d.callInternal("jwControlbarShow");return e},hide:function(){d.callInternal("jwControlbarHide");return e},onShow:function(b){d.componentListener("controlbar",a.api.events.JWPLAYER_COMPONENT_SHOW,b);return e},onHide:function(b){d.componentListener("controlbar",
a.api.events.JWPLAYER_COMPONENT_HIDE,b);return e}}):c=="display"?a.utils.extend(e,{show:function(){d.callInternal("jwDisplayShow");return e},hide:function(){d.callInternal("jwDisplayHide");return e},onShow:function(b){d.componentListener("display",a.api.events.JWPLAYER_COMPONENT_SHOW,b);return e},onHide:function(b){d.componentListener("display",a.api.events.JWPLAYER_COMPONENT_HIDE,b);return e}}):this.plugins[c]};this.callback=function(a){if(w[a])return w[a]()};this.getDuration=function(){return this.callInternal("jwGetDuration")};
this.getFullscreen=function(){return this.callInternal("jwGetFullscreen")};this.getHeight=function(){return this.callInternal("jwGetHeight")};this.getLockState=function(){return this.callInternal("jwGetLockState")};this.getMeta=function(){return this.getItemMeta()};this.getMute=function(){return this.callInternal("jwGetMute")};this.getPlaylist=function(){var b=this.callInternal("jwGetPlaylist");this.renderingMode=="flash"&&a.utils.deepReplaceKeyName(b,"__dot__",".");for(var c=0;c<b.length;c++)if(!a.utils.exists(b[c].index))b[c].index=
c;return b};this.getPlaylistItem=function(b){a.utils.exists(b)||(b=this.getCurrentItem());return this.getPlaylist()[b]};this.getPosition=function(){return this.callInternal("jwGetPosition")};this.getRenderingMode=function(){return this.renderingMode};this.getState=function(){return this.callInternal("jwGetState")};this.getVolume=function(){return this.callInternal("jwGetVolume")};this.getWidth=function(){return this.callInternal("jwGetWidth")};this.setFullscreen=function(b){a.utils.exists(b)?this.callInternal("jwSetFullscreen",
b):this.callInternal("jwSetFullscreen",!this.callInternal("jwGetFullscreen"));return this};this.setMute=function(b){a.utils.exists(b)?this.callInternal("jwSetMute",b):this.callInternal("jwSetMute",!this.callInternal("jwGetMute"));return this};this.lock=function(){return this};this.unlock=function(){return this};this.load=function(a){this.callInternal("jwLoad",a);return this};this.playlistItem=function(a){this.callInternal("jwPlaylistItem",a);return this};this.playlistPrev=function(){this.callInternal("jwPlaylistPrev");
return this};this.playlistNext=function(){this.callInternal("jwPlaylistNext");return this};this.resize=function(a,b){this.renderingMode=="html5"?l.jwResize(a,b):(this.container.width=a,this.container.height=b);return this};this.play=function(b){typeof b=="undefined"?(b=this.getState(),b==a.api.events.state.PLAYING||b==a.api.events.state.BUFFERING?this.callInternal("jwPause"):this.callInternal("jwPlay")):this.callInternal("jwPlay",b);return this};this.pause=function(b){typeof b=="undefined"?(b=this.getState(),
b==a.api.events.state.PLAYING||b==a.api.events.state.BUFFERING?this.callInternal("jwPause"):this.callInternal("jwPlay")):this.callInternal("jwPause",b);return this};this.stop=function(){this.callInternal("jwStop");return this};this.seek=function(a){this.callInternal("jwSeek",a);return this};this.setVolume=function(a){this.callInternal("jwSetVolume",a);return this};this.onBufferChange=function(b){return this.eventListener(a.api.events.JWPLAYER_MEDIA_BUFFER,b)};this.onBufferFull=function(b){return this.eventListener(a.api.events.JWPLAYER_MEDIA_BUFFER_FULL,
b)};this.onError=function(b){return this.eventListener(a.api.events.JWPLAYER_ERROR,b)};this.onFullscreen=function(b){return this.eventListener(a.api.events.JWPLAYER_FULLSCREEN,b)};this.onMeta=function(b){return this.eventListener(a.api.events.JWPLAYER_MEDIA_META,b)};this.onMute=function(b){return this.eventListener(a.api.events.JWPLAYER_MEDIA_MUTE,b)};this.onPlaylist=function(b){return this.eventListener(a.api.events.JWPLAYER_PLAYLIST_LOADED,b)};this.onPlaylistItem=function(b){return this.eventListener(a.api.events.JWPLAYER_PLAYLIST_ITEM,
b)};this.onReady=function(b){return this.eventListener(a.api.events.API_READY,b)};this.onResize=function(b){return this.eventListener(a.api.events.JWPLAYER_RESIZE,b)};this.onComplete=function(b){return this.eventListener(a.api.events.JWPLAYER_MEDIA_COMPLETE,b)};this.onSeek=function(b){return this.eventListener(a.api.events.JWPLAYER_MEDIA_SEEK,b)};this.onTime=function(b){return this.eventListener(a.api.events.JWPLAYER_MEDIA_TIME,b)};this.onVolume=function(b){return this.eventListener(a.api.events.JWPLAYER_MEDIA_VOLUME,
b)};this.onBuffer=function(b){return this.stateListener(a.api.events.state.BUFFERING,b)};this.onPause=function(b){return this.stateListener(a.api.events.state.PAUSED,b)};this.onPlay=function(b){return this.stateListener(a.api.events.state.PLAYING,b)};this.onIdle=function(b){return this.stateListener(a.api.events.state.IDLE,b)};this.remove=function(){g={};p=[];a.utils.getOuterHTML(this.container)!=h&&a.api.destroyPlayer(this.id,h)};this.setup=function(b){if(a.embed){var c=this.id;this.remove();c=a(c);
c.config=b;return new a.embed(c)}return this};this.registerPlugin=function(b,c,d){a.plugins.registerPlugin(b,c,d)};this.setPlayer=function(a,b){l=a;this.renderingMode=b};this.stateListener=function(b,c){j[b]||(j[b]=[],this.eventListener(a.api.events.JWPLAYER_PLAYER_STATE,d(b)));j[b].push(c);return this};this.componentListener=function(a,b,c){k[a]||(k[a]={});k[a][b]||(k[a][b]=[],this.eventListener(b,f(a,b)));k[a][b].push(c);return this};this.addInternalListener=function(a,b){a.jwAddEventListener(b,
'function(dat) { jwplayer("'+this.id+'").dispatchEvent("'+b+'", dat); }')};this.eventListener=function(a,b){g[a]||(g[a]=[],l&&o&&this.addInternalListener(l,a));g[a].push(b);return this};this.dispatchEvent=function(b,c){if(g[b]){var d;d=a.utils.extend({},c);b==a.api.events.JWPLAYER_FULLSCREEN&&!d.fullscreen?(d.fullscreen=d.message=="true"?!0:!1,delete d.message):typeof d.data=="object"&&(d=a.utils.extend(d,d.data),delete d.data);var e=["position","duration","offset"],f;for(f in e)d[e[f]]&&(d[e[f]]=
Math.round(d[e[f]]*1E3)/1E3);for(e=0;e<g[b].length;e++)typeof g[b][e]=="function"&&g[b][e].call(this,d)}};this.callInternal=function(b,c){if(o){if(typeof l!="undefined"&&typeof l[b]=="function")return a.utils.exists(c)?l[b](c):l[b]();return null}else p.push({method:b,parameters:c})};this.playerReady=function(b){o=!0;l||this.setPlayer(document.getElementById(b.id));this.container=document.getElementById(this.id);for(var c in g)this.addInternalListener(l,c);this.eventListener(a.api.events.JWPLAYER_PLAYLIST_ITEM,
function(){m={}});this.eventListener(a.api.events.JWPLAYER_MEDIA_META,function(b){a.utils.extend(m,b.metadata)});for(this.dispatchEvent(a.api.events.API_READY);p.length>0;)b=p.shift(),this.callInternal(b.method,b.parameters)};this.getItemMeta=function(){return m};this.getCurrentItem=function(){return this.callInternal("jwGetPlaylistIndex")};return this};a.api.selectPlayer=function(c){var b;a.utils.exists(c)||(c=0);c.nodeType?b=c:typeof c=="string"&&(b=document.getElementById(c));if(b)return(c=a.api.playerById(b.id))?
c:a.api.addPlayer(new a.api(b));else if(typeof c=="number")return a.getPlayers()[c];return null};a.api.events={API_READY:"jwplayerAPIReady",JWPLAYER_READY:"jwplayerReady",JWPLAYER_FULLSCREEN:"jwplayerFullscreen",JWPLAYER_RESIZE:"jwplayerResize",JWPLAYER_ERROR:"jwplayerError",JWPLAYER_COMPONENT_SHOW:"jwplayerComponentShow",JWPLAYER_COMPONENT_HIDE:"jwplayerComponentHide",JWPLAYER_MEDIA_BUFFER:"jwplayerMediaBuffer",JWPLAYER_MEDIA_BUFFER_FULL:"jwplayerMediaBufferFull",JWPLAYER_MEDIA_ERROR:"jwplayerMediaError",
JWPLAYER_MEDIA_LOADED:"jwplayerMediaLoaded",JWPLAYER_MEDIA_COMPLETE:"jwplayerMediaComplete",JWPLAYER_MEDIA_SEEK:"jwplayerMediaSeek",JWPLAYER_MEDIA_TIME:"jwplayerMediaTime",JWPLAYER_MEDIA_VOLUME:"jwplayerMediaVolume",JWPLAYER_MEDIA_META:"jwplayerMediaMeta",JWPLAYER_MEDIA_MUTE:"jwplayerMediaMute",JWPLAYER_PLAYER_STATE:"jwplayerPlayerState",JWPLAYER_PLAYLIST_LOADED:"jwplayerPlaylistLoaded",JWPLAYER_PLAYLIST_ITEM:"jwplayerPlaylistItem"};a.api.events.state={BUFFERING:"BUFFERING",IDLE:"IDLE",PAUSED:"PAUSED",
PLAYING:"PLAYING"};a.api.playerById=function(a){for(var b=0;b<d.length;b++)if(d[b].id==a)return d[b];return null};a.api.addPlayer=function(a){for(var b=0;b<d.length;b++)if(d[b]==a)return a;d.push(a);return a};a.api.destroyPlayer=function(c,b){for(var e=-1,f=0;f<d.length;f++)d[f].id==c&&(e=f);if(e>=0){f=document.getElementById(d[e].id);document.getElementById(d[e].id+"_wrapper")&&(f=document.getElementById(d[e].id+"_wrapper"));if(f)if(b)a.utils.setOuterHTML(f,b);else{var g=document.createElement("div"),
j=f.id;f.id.indexOf("_wrapper")==f.id.length-8&&(newID=f.id.substring(0,f.id.length-8));g.setAttribute("id",j);f.parentNode.replaceChild(g,f)}d.splice(e,1)}return null};a.getPlayers=function(){return d.slice(0)}})(jwplayer);var _userPlayerReady=typeof playerReady=="function"?playerReady:void 0;playerReady=function(a){var d=jwplayer.api.playerById(a.id);d?d.playerReady(a):jwplayer.api.selectPlayer(a.id).playerReady(a);_userPlayerReady&&_userPlayerReady.call(this,a)};
instrument_function(function(){(function(){function a(a,b){if(typeof a!=="undefined"){var d="internal";$("body").is(".widget")&&(d="external");$.ajax({url:a,type:"post",data:{event_type:b,location:d}})}}function d(a){return $("body").is(".widget")||a.closest("#projects_show").length?"Project":a.closest(".school").length?"School":a.closest("#running-board").length?"Homepage Project Grid":a.closest("#editorial-projects").length?"Homepage Editorial":a.closest("#projects_start").length?"Start Project":
a.closest("body.posts").length?"Project Post":a.closest("#projects_edit").length?"Project Edit":a.closest("#jobs_index").length?"Jobs Page":"Other"}$(document).on("ksr_video:playing",function(c,b){var e=$(c.target),f=d(e),g=e.data("ksr_video").current_position(),j=e.closest(".video-player").attr("data-video-tracker-url");e=e.attr("data-video-name");b?(a(j,"start"),track(f+" Video Start",{video_name:e})):track(f+" Video Resume",{position:g,video_name:e})}).on("ksr_video:paused",function(a){var b=$(a.target),
e=b.data("ksr_video");a=d(b);e=e.current_position();b=b.attr("data-video-name");track(a+" Video Pause",{position:e,video_name:b})}).on("ksr_video:ended",function(c){var b=$(c.target),e=b.data("ksr_video");c=d(b);e=e.duration();var f=b.closest(".video-player").attr("data-video-tracker-url");b=b.attr("data-video-name");a(f,"complete");track(c+" Video Complete",{duration:e,video_name:b})})})()})(this);
